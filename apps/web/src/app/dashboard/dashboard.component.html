<div fxLayout="column" fxLayoutAlign="start center" fxFill class="dashboard-container">
  <!-- Welcome Card -->
  <mat-card fxFlex="none" fxLayout="column" fxLayoutGap="16px" class="welcome-card">
    <mat-card-header fxLayout="column" fxLayoutAlign="center start">
      <mat-card-title>Welcome to eudiplo client</mat-card-title>
      <mat-card-subtitle
        >You are successfully authenticated and ready to manage credentials!</mat-card-subtitle
      >
    </mat-card-header>
    <mat-card-content fxLayout="column" fxLayoutGap="16px">
      <p>
        Your authentication is active and the API client is configured. Use the navigation below to
        access different features.
      </p>
    </mat-card-content>
  </mat-card>

  <!-- Current Configuration -->
  <mat-card fxFlex="none" fxLayout="column" fxLayoutGap="8px" class="config-card">
    <mat-card-header>
      <mat-card-title>Current Configuration</mat-card-title>
      <mat-card-subtitle>Your active connection details</mat-card-subtitle>
    </mat-card-header>
    <mat-card-content fxLayout="column" fxLayoutGap="12px">
      <div fxLayout="row" fxLayoutAlign="space-between center" class="config-item">
        <span class="config-label">API Base URL:</span>
        <mat-chip class="config-value">{{ currentBaseUrl }}</mat-chip>
      </div>

      <div fxLayout="row" fxLayoutAlign="space-between center" class="config-item">
        <span class="config-label">OAuth discovery URL:</span>
        <mat-chip class="config-value">{{ currentOidcUrl }}</mat-chip>
      </div>

      <div fxLayout="row" fxLayoutAlign="space-between center" class="config-item">
        <span class="config-label">Client ID:</span>
        <mat-chip class="config-value">{{ currentClientId }}</mat-chip>
      </div>

      <div fxLayout="row" fxLayoutAlign="space-between center" class="config-item">
        <span class="config-label">Auto-refresh:</span>
        <mat-chip [class.enabled]="canAutoRefresh" [class.disabled]="!canAutoRefresh">
          {{ canAutoRefresh ? 'Available' : 'Not Available' }}
        </mat-chip>
      </div>
    </mat-card-content>
  </mat-card>

  <!-- Quick Navigation -->
  <mat-card fxFlex="none" fxLayout="column" fxLayoutGap="16px" class="navigation-card">
    <mat-card-header>
      <mat-card-title>Quick Navigation</mat-card-title>
      <mat-card-subtitle>Access different features</mat-card-subtitle>
    </mat-card-header>
    <mat-card-content>
      <div fxLayout="row wrap" fxLayout.xs="column" fxLayoutGap="16px" class="quick-nav">
        <mat-card class="nav-card" (click)="navigateToCredentialConfig()">
          <mat-card-content fxLayout="column" fxLayoutAlign="center center" fxLayoutGap="8px">
            <mat-icon class="nav-icon">settings</mat-icon>
            <span>Credential Configurations</span>
          </mat-card-content>
        </mat-card>

        <mat-card class="nav-card" (click)="navigateToKeyManagement()">
          <mat-card-content fxLayout="column" fxLayoutAlign="center center" fxLayoutGap="8px">
            <mat-icon class="nav-icon">vpn_key</mat-icon>
            <span>Key Management</span>
          </mat-card-content>
        </mat-card>

        <mat-card class="nav-card" (click)="navigateToIssuanceConfig()">
          <mat-card-content fxLayout="column" fxLayoutAlign="center center" fxLayoutGap="8px">
            <mat-icon class="nav-icon">badge</mat-icon>
            <span>Issuance Configuration</span>
          </mat-card-content>
        </mat-card>

        <mat-card class="nav-card" (click)="navigateToPresentationConfig()">
          <mat-card-content fxLayout="column" fxLayoutAlign="center center" fxLayoutGap="8px">
            <mat-icon class="nav-icon">verified</mat-icon>
            <span>Presentation Configuration</span>
          </mat-card-content>
        </mat-card>

        <mat-card class="nav-card" (click)="navigateToSessionManagement()">
          <mat-card-content fxLayout="column" fxLayoutAlign="center center" fxLayoutGap="8px">
            <mat-icon class="nav-icon">history</mat-icon>
            <span>Session Management</span>
          </mat-card-content>
        </mat-card>
      </div>

      <!-- Token Status (only show if there are issues) -->
      @if (!canAutoRefresh) {
      <div fxLayout="row" fxLayoutGap="8px" class="alert-section">
        <mat-icon class="warning-icon">info</mat-icon>
        <span fxFlex
          >Automatic token refresh is not available after page reload. You'll need to login again
          when your token expires.</span
        >
      </div>
      }
    </mat-card-content>
  </mat-card>
</div>
