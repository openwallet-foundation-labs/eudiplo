<div class="container">
  <mat-card>
    <mat-card-title>Import Credentials</mat-card-title>
    <mat-card-content>
      <p class="subtitle">
        Upload your verifiable credentials (JSON format) to authenticate and
        configure presentation requirements.
      </p>

      <!-- Drag-drop area -->
      <div
        class="drop-zone"
        [class.active]="dragActive"
        (dragover)="onDragOver($event)"
        (dragleave)="onDragLeave()"
        (drop)="onDrop($event)"
      >
        <mat-icon class="drop-icon">cloud_upload</mat-icon>
        <p class="drop-text">Drag and drop JSON files here</p>
        <p class="drop-hint">or</p>
        <button mat-raised-button color="primary" (click)="fileInput.click()">
          <span *ngIf="!loading">Browse Files</span>
          <mat-spinner *ngIf="loading" diameter="20"></mat-spinner>
        </button>
        <input
          #fileInput
          type="file"
          accept=".json"
          multiple
          hidden
          (change)="onFileSelected($event)"
        />
      </div>

      <!-- Imported credentials list -->
      <div *ngIf="(credentials$ | async)?.length" class="credentials-list">
        <h3>Imported Credentials</h3>
        <mat-list>
          <mat-list-item *ngFor="let cred of credentials$ | async">
            <mat-icon matListItemIcon>verified_user</mat-icon>
            <div matListItemTitle>{{ cred.name }}</div>
            <div matListItemLine>{{ cred.format }} â€¢ {{ cred.issuer }}</div>
            <button
              matListItemMeta
              mat-icon-button
              (click)="removeCredential(cred.id)"
              matTooltip="Remove"
            >
              <mat-icon>delete</mat-icon>
            </button>
          </mat-list-item>
        </mat-list>
      </div>

      <!-- Action buttons -->
      <div class="actions">
        <button
          mat-raised-button
          color="primary"
          (click)="continueToConfig()"
          [disabled]="!(credentials$ | async)?.length"
        >
          Continue to Configuration
        </button>
      </div>
    </mat-card-content>
  </mat-card>
</div>
