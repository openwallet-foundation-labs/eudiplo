<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="icon" href="data:," />
    <title>SwiftBox - Parcel Pickup</title>
    <meta
      name="description"
      content="Secure parcel pickup using your EUDI Wallet. Prove you're the recipient without showing your full ID."
    />
    <script
      src="https://cdn.jsdelivr.net/npm/qrcode-generator@1.4.4/qrcode.min.js"
      integrity="sha384-lQXOAyZwHXE55JFyrOMB7nY2Wv+m5ZWNtJcHrd1rceRQXAYNLak8ukN5TjBTcIwz"
      crossorigin="anonymous"
    ></script>
    <link rel="stylesheet" href="/shared/styles.css" />
    <link rel="stylesheet" href="styles.css" />
  </head>
  <body>
    <header>
      <a href="../" class="logo">
        <span class="logo-icon">üì¶</span>
        SwiftBox
      </a>
      <span class="slogan">Smart Parcel Lockers</span>
    </header>

    <div class="container">
      <main>
        <!-- Parcel Section -->
        <section id="parcelSection" class="card">
          <div class="parcel-header">
            <h2>Your Parcel is Ready!</h2>
            <p>Verify your identity to unlock the locker</p>
          </div>

          <div class="parcel-details">
            <div class="parcel-visual">
              <div class="locker-grid">
                <div class="locker"></div>
                <div class="locker"></div>
                <div class="locker highlight">
                  <span class="locker-number">B7</span>
                  <span class="locker-status">üì¶</span>
                </div>
                <div class="locker"></div>
                <div class="locker"></div>
                <div class="locker"></div>
              </div>
            </div>

            <div class="parcel-info">
              <div class="info-row">
                <span class="label">Recipient</span>
                <span class="value" id="recipientName">Max Mustermann</span>
              </div>
              <div class="info-row">
                <span class="label">Locker</span>
                <span class="value">B7 ‚Ä¢ Medium</span>
              </div>
              <div class="info-row">
                <span class="label">Location</span>
                <span class="value">Hauptbahnhof Station</span>
              </div>
              <div class="info-row">
                <span class="label">Pickup Code</span>
                <span class="value code">SWB-8472-KL</span>
              </div>
              <div class="info-row">
                <span class="label">Available Until</span>
                <span class="value">Jan 18, 23:59</span>
              </div>
            </div>
          </div>

          <div class="privacy-highlight">
            <div class="privacy-icon">üîí</div>
            <div class="privacy-text">
              <strong>Minimal Data Required</strong>
              <p>
                We only need to verify your
                <strong>first and last name</strong> matches the recipient. No
                birthdate, address, or ID number required.
              </p>
            </div>
          </div>

          <button id="verifyBtn" class="btn btn-primary">
            ü™™ Verify & Open Locker
          </button>

          <p class="pickup-code-option">
            Have a pickup code from SMS?
            <a href="#" id="codeLink">Enter code manually</a>
          </p>
        </section>

        <!-- Verification Section -->
        <section id="verificationSection" class="card hidden">
          <h2>Verify Your Identity</h2>
          <p class="subtitle">Quick name verification to unlock your locker</p>

          <div id="qrCode" class="qr-container"></div>
          <div id="sameDeviceLink" class="same-device-link hidden"></div>

          <p id="statusText" class="status-text">
            Generating secure request...
          </p>

          <div class="minimal-request">
            <span class="check-icon">‚úì</span>
            <span>Only your name will be shared ‚Äì nothing else</span>
          </div>
        </section>

        <!-- Success Section -->
        <section id="successSection" class="card hidden">
          <div class="success-animation">
            <div class="locker-opening">
              <div class="locker-door open">
                <span class="locker-label">B7</span>
              </div>
              <div class="package-reveal">üì¶</div>
            </div>
          </div>

          <div class="success-header">
            <h2>Locker B7 is Open!</h2>
            <p>Please collect your parcel within 60 seconds</p>
          </div>

          <div class="timer-bar">
            <div class="timer-fill"></div>
          </div>

          <div id="verifiedData" class="verified-data"></div>

          <div class="success-instructions">
            <div class="instruction">
              <span class="step">1</span>
              <span>Take your parcel from locker B7</span>
            </div>
            <div class="instruction">
              <span class="step">2</span>
              <span>Close the locker door firmly</span>
            </div>
            <div class="instruction">
              <span class="step">3</span>
              <span>You're done! Enjoy your delivery üéâ</span>
            </div>
          </div>

          <button id="doneBtn" class="btn btn-secondary">
            Back to Playground
          </button>
        </section>

        <!-- Name Mismatch Section -->
        <section id="mismatchSection" class="card hidden">
          <div class="mismatch-icon">‚ùå</div>
          <h2>Name Doesn't Match</h2>
          <p>The name in your wallet doesn't match the parcel recipient.</p>

          <div class="mismatch-details">
            <div class="mismatch-row">
              <span class="label">Parcel addressed to:</span>
              <span class="value">Max Mustermann</span>
            </div>
            <div class="mismatch-row">
              <span class="label">Your verified name:</span>
              <span class="value" id="verifiedName">‚Äì</span>
            </div>
          </div>

          <p class="mismatch-help">
            If you're collecting on behalf of someone else, you'll need their
            authorization code or visit a staffed pickup point.
          </p>

          <div class="mismatch-actions">
            <button id="tryAgainBtn" class="btn btn-primary">Try Again</button>
            <button id="helpBtn" class="btn btn-secondary">Get Help</button>
          </div>
        </section>
      </main>

      <footer>
        <p>
          Demo powered by
          <a
            href="https://github.com/openwallet-foundation-labs/eudiplo"
            target="_blank"
            >EUDIPLO</a
          >
        </p>
      </footer>
    </div>

    <script type="module" src="/js/parcel-pickup/app.js"></script>
  </body>
</html>
