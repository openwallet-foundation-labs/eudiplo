# =============================================================================
# EUDIPLO Kubernetes - Full Configuration
# =============================================================================
# Overlay: full
# Use case: Enterprise production deployments
# Components: EUDIPLO + PostgreSQL + MinIO + HashiCorp Vault
# =============================================================================

# Public URL
PUBLIC_URL=https://eudiplo.example.com

# =============================================================================
# Authentication
# ⚠️  MUST change these in production!
# Generate secrets: openssl rand -base64 32
# =============================================================================
MASTER_SECRET=your-production-secret-key-minimum-32-characters
AUTH_CLIENT_ID=your-client-id
AUTH_CLIENT_SECRET=your-client-secret

# Optional: External OIDC provider
# OIDC=true
# OIDC_INTERNAL_ISSUER_URL=https://your-keycloak.example.com/realms/eudiplo

# =============================================================================
# Database: PostgreSQL
# =============================================================================
DB_TYPE=postgres
DB_USERNAME=eudiplo
DB_PASSWORD=changeme-very-strong-password
DB_DATABASE=eudiplo

# =============================================================================
# Key Management: HashiCorp Vault
# ⚠️  For production, use a properly configured Vault instance (not dev mode)
# =============================================================================
KM_TYPE=vault
VAULT_TOKEN=root
# VAULT_NAMESPACE=eudiplo
# VAULT_MOUNT_PATH=transit

# =============================================================================
# Encryption at Rest: Key Source
# ⚠️  For production, use vault/aws/azure so key is only in RAM (not env vars)
# =============================================================================
ENCRYPTION_KEY_SOURCE=vault
VAULT_ENCRYPTION_KEY_PATH=secret/data/eudiplo/encryption-key
# Create key: vault kv put secret/eudiplo/encryption-key key=$(openssl rand -base64 32)
#
# For AWS Secrets Manager:
# ENCRYPTION_KEY_SOURCE=aws
# AWS_REGION=us-east-1
# AWS_ENCRYPTION_SECRET_NAME=eudiplo/encryption-key
#
# For Azure Key Vault:
# ENCRYPTION_KEY_SOURCE=azure
# AZURE_KEYVAULT_URL=https://myvault.vault.azure.net
# AZURE_ENCRYPTION_SECRET_NAME=eudiplo-encryption-key

# =============================================================================
# File Storage: S3 (MinIO)
# =============================================================================
STORAGE_DRIVER=s3
S3_REGION=us-east-1
S3_ACCESS_KEY_ID=minioadmin
S3_SECRET_ACCESS_KEY=minioadmin-strong-password
S3_BUCKET=uploads
S3_FORCE_PATH_STYLE=true

# =============================================================================
# MinIO Configuration
# =============================================================================
MINIO_ROOT_USER=minioadmin
MINIO_ROOT_PASSWORD=minioadmin-strong-password
MINIO_BUCKET=uploads
