{"config":{"lang":["en"],"separator":"[\\s\\-]+","pipeline":["stopWordFilter"],"fields":{"title":{"boost":1000.0},"text":{"boost":1.0},"tags":{"boost":1000000.0}}},"docs":[{"location":"","title":"What is EUDIPLO","text":""},{"location":"#what-is-eudiplo","title":"What is EUDIPLO?","text":"<p>EUDIPLO is a lightweight, open-source middleware layer that bridges your IT systems with the European Digital Identity Wallet (EUDI Wallet) ecosystem.</p> <p>Whether you're building services for government, education, healthcare, or the private sector\u2014EUDIPLO lets you interact with EUDI Wallets using simple JSON-based APIs, without having to implement complex identity protocols yourself.</p> <p>EUDIPLO stands for EUDI Protocol Liaison Operator</p> <p>The name EUDIPLO is inspired by diplomat \u2014 because this middleware acts as a translator and trusted go-between. It speaks fluent EUDI specs on one side and down-to-earth JSON on the other, making sure your backend doesn't have to become a protocol expert overnight.</p>"},{"location":"#why-eudiplo","title":"Why EUDIPLO?","text":"<p>Connecting to the EUDI Wallet ecosystem is technically demanding:</p> <ul> <li>You must understand OID4VCI, OID4VP, SD-JWT VC, mDOC (ISO 18013-5), and OAuth-based   status protocols.</li> <li>Libraries are scattered, often incomplete or language-specific.</li> <li>Hosted services can lead to vendor lock-in or obscure how your data is   processed.</li> </ul> <p>EUDIPLO solves these problems by acting as a protocol abstraction layer you can run yourself, integrate over HTTP, and configure via JSON.</p>"},{"location":"#key-capabilities","title":"Key Capabilities","text":"Capability Description \ud83d\udec2 Issuance Issue credentials to users through the EUDI Wallet \ud83e\uddfe Presentation Request credentials from users and verify them \ud83d\udd04 Cross-Flow Support Request credentials as part of an issuance flow \ud83d\udd10 Secure by Default Built-in support for secure key handling and OAuth-based status checking \ud83e\uddf1 Plug and Play Integrates with your backend over HTTP; no requirement to use a specific programming language \ud83d\udda5\ufe0f Web Client Included Comes with a ready-to-use web interface for easy testing and interaction \u2699\ufe0f JSON Configurable Set up templates, trust roots, and issuers through JSON files \ud83c\uddea\ud83c\uddfa Wallet Compatible Works with multiple wallets \u2705 OIDF Conformant Tested against the OpenID Foundation conformance suite for OID4VCI and OID4VP \ud83d\udc65 Multi-Tenant Support Isolate configurations for different tenants or clients"},{"location":"#where-does-it-fit","title":"Where Does It Fit?","text":"<p>Here\u2019s how EUDIPLO fits into your infrastructure:</p> <p></p>"},{"location":"#watch-the-webinar","title":"\ud83d\udcfa Watch the Webinar","text":"<p>Learn more about EUDIPLO in our recorded webinar (September 17, 2025), featuring a deep dive into features, architecture, and live Q&amp;A:</p> <p></p> <p>Watch on YouTube</p>"},{"location":"#how-do-i-use-it","title":"How Do I Use It?","text":"<p>EUDIPLO is distributed as a Docker container and can be configured in minutes.</p> <pre><code>docker run -p 3000:3000 \\\n  -e PUBLIC_URL=https://example.com \\\n  ghcr.io/openwallet-foundation-labs/eudiplo:latest\n</code></pre> <ul> <li><code>-p 3000:3000</code> exposes EUDIPLO locally on port 3000.</li> <li><code>PUBLIC_URL</code> should be the public-facing URL where your instance is reachable (used for callbacks and wallet redirects).</li> </ul> <p>\u27a1\ufe0f For step-by-step instructions, see the Quickstart Guide. \u2699\ufe0f For production deployment and advanced configuration, see Production Setup.</p> <p>For more details on credential issuance and verification, check out: \ud83d\udcd8 Configure credentials \ud83d\udcd8 Verify credentials</p>"},{"location":"#who-is-it-for","title":"Who is it For?","text":"<p>EUDIPLO is built for:</p> <ul> <li>\ud83c\udfdb\ufe0f Government services that need to verify official documents.</li> <li>\ud83c\udf93 Universities and schools that issue or validate diplomas.</li> <li>\ud83c\udfe5 Health systems managing patient identity or insurance.</li> <li>\ud83c\udfe2 Private sector apps that want to integrate trustable identity with   minimal complexity.</li> </ul> <p>If your organization needs to connect to the EUDI Wallet ecosystem\u2014without reinventing the wheel\u2014EUDIPLO is your gateway.</p>"},{"location":"api/","title":"Overview","text":""},{"location":"api/#api-reference","title":"API Reference","text":"<p>EUDIPLO exposes a REST API based on the OpenAPI 3.0 standard. This interface allows systems to issue credentials, verify presentations, manage keys, and configure credential behavior through standard HTTP endpoints.</p> <p>The documentation also includes a rendered OpenAPI specification.</p>"},{"location":"api/#openapi-endpoints","title":"OpenAPI Endpoints","text":"<p>When running EUDIPLO, the following endpoints are available:</p> <ul> <li>Swagger UI: http://localhost:3000/api</li> <li>OpenAPI Spec (JSON):   http://localhost:3000/api-json</li> </ul> <p>Info</p> <p>By default it will only include the endpoints that are relevant to interact with it from the server side (it is excluding the routes that are relevant for e.g. OID4VCI and OID4VP). To generate the full OpenAPI specification, you can set the environment variable <code>SWAGGER_ALL</code> to <code>true</code> when starting the service like <code>SWAGGER_ALL=true pnpm run start:dev</code>.</p> <p>You can use this OpenAPI specification to generate client libraries with e.g the OpenAPI Generator.</p>"},{"location":"api/authentication/","title":"Authentication","text":""},{"location":"api/authentication/#api-authentication","title":"API Authentication","text":"<p>EUDIPLO uses OAuth 2.0 Client Credentials flow for API authentication, designed for service-to-service communication without user interaction.</p>"},{"location":"api/authentication/#configuration","title":"Configuration","text":"Key Type Notes <code>OIDC</code> <code>string</code> Enable OIDC mode <code>OIDC_INTERNAL_ISSUER_URL</code> <code>string</code> Internal issuer URL in OIDC mode [when OIDC is set \u2192 then default=undefined] <code>OIDC_CLIENT_ID</code> <code>any</code> Client ID for OIDC [when OIDC is set \u2192 then required] <code>OIDC_CLIENT_SECRET</code> <code>any</code> Client secret for OIDC [when OIDC is set \u2192 then required] <code>OIDC_SUB</code> <code>any</code> Claim to use as subject [when OIDC is set \u2192 then default=\"tenant_id\"] <code>OIDC_ALGORITHM</code> <code>any</code> Expected JWT alg [when OIDC is set \u2192 then default=\"RS256\"] <code>MASTER_SECRET</code> <code>any</code> Master secret for JWT signing and encryption key derivation - required, minimum 32 characters [when OIDC is set \u2192 otherwise required] <code>JWT_ISSUER</code> <code>any</code> Local JWT issuer [when OIDC is set \u2192 otherwise default=\"eudiplo-service\"] <code>JWT_EXPIRES_IN</code> <code>any</code> Local JWT expiration [when OIDC is set \u2192 otherwise default=\"24h\"] <code>AUTH_CLIENT_SECRET</code> <code>any</code> Client secret (local auth) - required when OIDC is not enabled [when OIDC is set \u2192 otherwise required] <code>AUTH_CLIENT_ID</code> <code>any</code> Client ID (local auth) - required when OIDC is not enabled [when OIDC is set \u2192 otherwise required]"},{"location":"api/authentication/#authentication-architecture","title":"Authentication Architecture","text":""},{"location":"api/authentication/#design-principles","title":"Design Principles","text":"<ul> <li>Service-to-Service: No user interaction required</li> <li>Tenant Isolation: JWTs are used to isolate tenant data</li> <li>Pluggable Identity: Support for both built-in and external OIDC providers</li> <li>Stateless: JWT tokens enable horizontal scaling</li> </ul>"},{"location":"api/authentication/#security-model","title":"Security Model","text":"<ul> <li>All management endpoints require authentication</li> <li>Tenant data is isolated using JWT subject claims</li> <li>Tokens are signed and validated for integrity</li> <li>Support for token expiration and rotation</li> <li>Endpoints are role based protected</li> </ul> <p>Related Architecture: For multi-tenant configuration and session management, see Tenant-Based Architecture and Sessions.</p>"},{"location":"api/authentication/#import","title":"Import","text":"<p>Clients can be imported via configuration files. See Configuration Import for details.</p>"},{"location":"api/authentication/#oauth2-client-credentials-authentication","title":"OAuth2 Client Credentials Authentication","text":"<p>This API exclusively uses the OAuth2 client credentials flow, which is designed for service-to-service authentication where no user interaction is required.</p>"},{"location":"api/authentication/#built-in-oauth2-server-recommended-for-getting-started","title":"Built-in OAuth2 Server (Recommended for Getting Started)","text":"<p>EUDIPLO includes a built-in OAuth2 server for simple deployments:</p> <ol> <li> <p>Swagger UI Authentication:</p> <ul> <li>Navigate to the Swagger UI at <code>/api</code></li> <li>Click the \"Authorize\" button</li> <li>Select \"oauth2\"</li> <li>Enter client ID and secret (configured via environment variables)</li> <li>Click \"Authorize\"</li> </ul> </li> <li> <p>Programmatic Access:</p> <p>Option 1: Credentials in Authorization Header (OAuth2 Standard):</p> <pre><code>curl -X POST http://localhost:3000/oauth2/token \\\n  -H \"Content-Type: application/json\" \\\n  -H \"Authorization: Basic $(echo -n 'client_id:client_secret' | base64)\" \\\n  -d '{\n    \"grant_type\": \"client_credentials\"\n  }'\n</code></pre> <p>Option 2: Credentials in Request Body:</p> <pre><code>curl -X POST http://localhost:3000/oauth2/token \\\n  -H \"Content-Type: application/json\" \\\n  -d '{\n    \"grant_type\": \"client_credentials\",\n    \"client_id\": \"your-client-id\",\n    \"client_secret\": \"your-client-secret\"\n  }'\n</code></pre> </li> </ol>"},{"location":"api/authentication/#external-oidc-provider","title":"External OIDC Provider","text":"<p>For enterprise deployments with existing identity infrastructure, EUDIPLO can integrate with external OIDC providers like Keycloak, Auth0, or Azure AD.</p> <p>Configuration:</p> <pre><code>OIDC=https://your-keycloak.example.com/realms/your-realm\nPUBLIC_URL=https://your-api.example.com\n</code></pre> <p>Authentication Flow:</p> <ol> <li>Use your OIDC provider's token endpoint with client credentials flow</li> <li>Include the access token in API requests: <code>Authorization: Bearer &lt;token&gt;</code></li> </ol>"},{"location":"api/authentication/#configuration_1","title":"Configuration","text":""},{"location":"api/authentication/#external-oidc-provider_1","title":"External OIDC Provider","text":"<pre><code># Enable external OIDC\nOIDC=true\nOIDC_INTERNAL_ISSUER_URL=https://your-keycloak.example.com/realms/your-realm\nPUBLIC_URL=https://your-api.example.com\n</code></pre>"},{"location":"api/authentication/#integrated-oauth2-server","title":"Integrated OAuth2 Server","text":"<pre><code># Leave OIDC undefined for integrated OAuth2 server\n# All three values below are REQUIRED\nPUBLIC_URL=https://your-api.example.com\nMASTER_SECRET=your-secret-key-here-minimum-32-characters\nAUTH_CLIENT_ID=your-client-id\nAUTH_CLIENT_SECRET=your-client-secret\n</code></pre> <p>Security: Secrets are hashed</p> <p>Client secrets are securely hashed (bcrypt) before storage. They cannot be retrieved after creation. Use the Rotate Secret API endpoint or Web Client button to generate a new secret if needed.</p> <p>Configuration Reference: For complete configuration options and environment variables, see Key Management and Database Configuration.</p>"},{"location":"api/authentication/#protected-endpoints","title":"Protected Endpoints","text":"<p>All administrative endpoints require OAuth2 authentication and are protected by a role based access control approach.</p> <p>The following roles are available:</p> <pre><code>/**\n * Enumeration of all roles available in the system.\n */\nexport enum Role {\n    //to manage presentation resources\n    Presentations = \"presentation:manage\",\n    // to create offers\n    PresentationRequest = \"presentation:request\",\n    // to manage issuance resources\n    Issuances = \"issuance:manage\",\n    // to create offers\n    IssuanceOffer = \"issuance:offer\",\n    // to manage client resources\n    Clients = \"clients:manage\",\n    // to manage tenant resources\n    Tenants = \"tenants:manage\",\n    // to manage registrar configuration and operations\n    Registrar = \"registrar:manage\",\n}\n\n/**\n * List of all roles\n */\nexport const allRoles = [\n    Role.Tenants,\n    Role.IssuanceOffer,\n    Role.Issuances,\n    Role.PresentationRequest,\n    Role.Presentations,\n    Role.Clients,\n    Role.Registrar,\n];\n</code></pre> <p>Each client can have multiple roles assigned, but each client can only be assigned to one tenant at maximum. The client with the tenant manage must not be assigned to any tenant since it is managing the service in general. There could be other roles in the future like limited access to the metrics endpoint.</p>"},{"location":"api/authentication/#resource-level-access-control","title":"Resource-Level Access Control","text":"<p>In addition to role-based access control, clients can be restricted to specific presentation or issuance configurations. This allows for fine-grained control over which configurations a service account can use.</p> <p>Configuration Fields:</p> <ul> <li><code>allowedPresentationConfigs</code>: Array of presentation config IDs. If empty or null, the client can use any presentation config.</li> <li><code>allowedIssuanceConfigs</code>: Array of issuance config IDs. If empty or null, the client can use any issuance config.</li> </ul> <p>Example: Creating a Restricted Client</p> <pre><code>curl -X POST http://localhost:3000/clients \\\n  -H \"Authorization: Bearer &lt;token&gt;\" \\\n  -H \"Content-Type: application/json\" \\\n  -d '{\n    \"clientId\": \"partner-service\",\n    \"roles\": [\"presentation:request\", \"issuance:offer\"],\n    \"allowedPresentationConfigs\": [\"age-verification\", \"identity-check\"],\n    \"allowedIssuanceConfigs\": [\"partner-credential\"]\n  }'\n</code></pre> <p>This client can only:</p> <ul> <li>Create presentation requests for <code>age-verification</code> and <code>identity-check</code> configs</li> <li>Create issuance offers for <code>partner-credential</code> config</li> </ul> <p>If the client attempts to use a config not in their allowed list, a <code>403 Forbidden</code> error is returned.</p> <p>Use Cases:</p> <ul> <li>Partner Integrations: Limit external partners to specific credential types</li> <li>Department Isolation: Different departments use different credential configurations</li> <li>Compliance: Ensure services only access configurations they are authorized to use</li> </ul> <p>Note: These restrictions work with both the built-in OAuth2 server and external OIDC providers (e.g., Keycloak). When using an external OIDC provider, the restrictions are stored in EUDIPLO's database and applied during request validation.</p>"},{"location":"api/authentication/#troubleshooting","title":"Troubleshooting","text":""},{"location":"api/authentication/#token-validation-errors","title":"Token Validation Errors","text":"<ol> <li>Verify that tokens include the correct audience (<code>eudiplo-service</code>)</li> <li>Ensure clock synchronization between client and server</li> <li>Check token expiration times</li> </ol>"},{"location":"api/authentication/#integrated-oauth2-server-issues","title":"Integrated OAuth2 Server Issues","text":"<ol> <li>Verify <code>MASTER_SECRET</code> is at least 32 characters</li> <li>Ensure client credentials (<code>AUTH_CLIENT_ID</code>/<code>AUTH_CLIENT_SECRET</code>) are    configured correctly</li> <li>Check that <code>PUBLIC_URL</code> is accessible for OAuth2 flows</li> </ol>"},{"location":"api/authentication/#security-considerations","title":"Security Considerations","text":"<ul> <li>Token Lifetime: Tokens expire after 24 hours for client credentials flow. It can be updated by setting the <code>JWT_EXPIRES_IN</code> to another value, default value is <code>24h</code>.</li> <li>Secure Storage: Store client credentials and tokens securely and never   expose them in logs or URLs</li> <li>Service-to-Service: This API is designed for service-to-service   authentication without user interaction</li> </ul>"},{"location":"api/openapi/","title":"OpenApi","text":""},{"location":"api/openapi/#eudiplo-service-api-main","title":"EUDIPLO Service API main","text":"<p>This is the API documentation for the EUDIPLO Service, which provides credential issuance and verification services</p>"},{"location":"api/openapi/#app","title":"App","text":""},{"location":"api/openapi/#get","title":"GET /","text":"<p>Main endpoint providing service info</p> <p> Response 200 OK </p>"},{"location":"api/openapi/#get-health","title":"GET /health","text":"<p>Endpoint to check the health of the service.</p> <p> Response 200 OK </p> application/json <p></p><pre><code>{\n    \"status\": \"ok\",\n    \"info\": {\n        \"database\": {\n            \"status\": \"up\"\n        }\n    },\n    \"error\": {},\n    \"details\": {\n        \"database\": {\n            \"status\": \"up\"\n        }\n    }\n}\n</code></pre> \u26a0\ufe0f This example has been generated automatically from the schema and it is not accurate. Refer to the schema for more information.<p></p> Schema of the response body <pre><code>{\n    \"type\": \"object\",\n    \"properties\": {\n        \"status\": {\n            \"type\": \"string\",\n            \"example\": \"ok\"\n        },\n        \"info\": {\n            \"type\": \"object\",\n            \"example\": {\n                \"database\": {\n                    \"status\": \"up\"\n                }\n            },\n            \"additionalProperties\": {\n                \"type\": \"object\",\n                \"required\": [\n                    \"status\"\n                ],\n                \"properties\": {\n                    \"status\": {\n                        \"type\": \"string\"\n                    }\n                },\n                \"additionalProperties\": true\n            },\n            \"nullable\": true\n        },\n        \"error\": {\n            \"type\": \"object\",\n            \"example\": {},\n            \"additionalProperties\": {\n                \"type\": \"object\",\n                \"required\": [\n                    \"status\"\n                ],\n                \"properties\": {\n                    \"status\": {\n                        \"type\": \"string\"\n                    }\n                },\n                \"additionalProperties\": true\n            },\n            \"nullable\": true\n        },\n        \"details\": {\n            \"type\": \"object\",\n            \"example\": {\n                \"database\": {\n                    \"status\": \"up\"\n                }\n            },\n            \"additionalProperties\": {\n                \"type\": \"object\",\n                \"required\": [\n                    \"status\"\n                ],\n                \"properties\": {\n                    \"status\": {\n                        \"type\": \"string\"\n                    }\n                },\n                \"additionalProperties\": true\n            }\n        }\n    }\n}\n</code></pre> <p> Response 503 Service Unavailable </p> application/json <p></p><pre><code>{\n    \"status\": \"error\",\n    \"info\": {\n        \"database\": {\n            \"status\": \"up\"\n        }\n    },\n    \"error\": {\n        \"redis\": {\n            \"status\": \"down\",\n            \"message\": \"Could not connect\"\n        }\n    },\n    \"details\": {\n        \"database\": {\n            \"status\": \"up\"\n        },\n        \"redis\": {\n            \"status\": \"down\",\n            \"message\": \"Could not connect\"\n        }\n    }\n}\n</code></pre> \u26a0\ufe0f This example has been generated automatically from the schema and it is not accurate. Refer to the schema for more information.<p></p> Schema of the response body <pre><code>{\n    \"type\": \"object\",\n    \"properties\": {\n        \"status\": {\n            \"type\": \"string\",\n            \"example\": \"error\"\n        },\n        \"info\": {\n            \"type\": \"object\",\n            \"example\": {\n                \"database\": {\n                    \"status\": \"up\"\n                }\n            },\n            \"additionalProperties\": {\n                \"type\": \"object\",\n                \"required\": [\n                    \"status\"\n                ],\n                \"properties\": {\n                    \"status\": {\n                        \"type\": \"string\"\n                    }\n                },\n                \"additionalProperties\": true\n            },\n            \"nullable\": true\n        },\n        \"error\": {\n            \"type\": \"object\",\n            \"example\": {\n                \"redis\": {\n                    \"status\": \"down\",\n                    \"message\": \"Could not connect\"\n                }\n            },\n            \"additionalProperties\": {\n                \"type\": \"object\",\n                \"required\": [\n                    \"status\"\n                ],\n                \"properties\": {\n                    \"status\": {\n                        \"type\": \"string\"\n                    }\n                },\n                \"additionalProperties\": true\n            },\n            \"nullable\": true\n        },\n        \"details\": {\n            \"type\": \"object\",\n            \"example\": {\n                \"database\": {\n                    \"status\": \"up\"\n                },\n                \"redis\": {\n                    \"status\": \"down\",\n                    \"message\": \"Could not connect\"\n                }\n            },\n            \"additionalProperties\": {\n                \"type\": \"object\",\n                \"required\": [\n                    \"status\"\n                ],\n                \"properties\": {\n                    \"status\": {\n                        \"type\": \"string\"\n                    }\n                },\n                \"additionalProperties\": true\n            }\n        }\n    }\n}\n</code></pre>"},{"location":"api/openapi/#tenant","title":"Tenant","text":""},{"location":"api/openapi/#get-tenant","title":"GET /tenant","text":"<p>Get all tenants</p> <p>Input parameters</p> Parameter In Type Default Nullable Description <code>oauth2</code> header string N/A No <p> Response 200 OK </p> application/json <p></p><pre><code>[\n    {\n        \"sessionConfig\": null,\n        \"statusListConfig\": null,\n        \"id\": \"string\",\n        \"name\": \"string\",\n        \"description\": \"string\",\n        \"status\": \"string\",\n        \"clients\": [\n            {\n                \"allowedPresentationConfigs\": [\n                    \"age-verification\",\n                    \"kyc-basic\"\n                ],\n                \"allowedIssuanceConfigs\": [\n                    \"pid\",\n                    \"mdl\"\n                ],\n                \"clientId\": \"string\",\n                \"secret\": \"string\",\n                \"tenantId\": \"string\",\n                \"description\": \"string\",\n                \"roles\": [\n                    \"presentation:manage\"\n                ],\n                \"tenant\": null\n            }\n        ]\n    }\n]\n</code></pre> \u26a0\ufe0f This example has been generated automatically from the schema and it is not accurate. Refer to the schema for more information.<p></p> Schema of the response body <pre><code>{\n    \"type\": \"array\",\n    \"items\": {\n        \"$ref\": \"#/components/schemas/TenantEntity\"\n    }\n}\n</code></pre>"},{"location":"api/openapi/#post-tenant","title":"POST /tenant","text":"<p>Initialize a tenant</p> <p>Input parameters</p> Parameter In Type Default Nullable Description <code>oauth2</code> header string N/A No <p>Request body</p> application/json <p></p><pre><code>{\n    \"statusListConfig\": null,\n    \"sessionConfig\": null,\n    \"roles\": [\n        \"presentation:manage\"\n    ],\n    \"id\": \"string\",\n    \"name\": \"string\",\n    \"description\": \"string\"\n}\n</code></pre> \u26a0\ufe0f This example has been generated automatically from the schema and it is not accurate. Refer to the schema for more information.<p></p> Schema of the request body <pre><code>{\n    \"type\": \"object\",\n    \"properties\": {\n        \"statusListConfig\": {\n            \"nullable\": true,\n            \"description\": \"Status list configuration for this tenant. Only affects newly created status lists.\",\n            \"allOf\": [\n                {\n                    \"$ref\": \"#/components/schemas/StatusListConfig\"\n                }\n            ]\n        },\n        \"sessionConfig\": {\n            \"description\": \"Session storage configuration. Controls TTL and cleanup behavior.\",\n            \"allOf\": [\n                {\n                    \"$ref\": \"#/components/schemas/SessionStorageConfig\"\n                }\n            ]\n        },\n        \"roles\": {\n            \"type\": \"array\",\n            \"items\": {\n                \"type\": \"string\",\n                \"enum\": [\n                    \"presentation:manage\",\n                    \"presentation:request\",\n                    \"issuance:manage\",\n                    \"issuance:offer\",\n                    \"clients:manage\",\n                    \"tenants:manage\",\n                    \"registrar:manage\"\n                ]\n            }\n        },\n        \"id\": {\n            \"type\": \"string\",\n            \"description\": \"The unique identifier for the tenant.\"\n        },\n        \"name\": {\n            \"type\": \"string\",\n            \"description\": \"The name of the tenant.\"\n        },\n        \"description\": {\n            \"type\": \"string\",\n            \"description\": \"The description of the tenant.\"\n        }\n    },\n    \"required\": [\n        \"id\",\n        \"name\"\n    ]\n}\n</code></pre> <p> Response 201 Created </p> application/json Schema of the response body <pre><code>{\n    \"type\": \"object\"\n}\n</code></pre>"},{"location":"api/openapi/#get-tenantid","title":"GET /tenant/{id}","text":"<p>Get a tenant by ID</p> <p>Input parameters</p> Parameter In Type Default Nullable Description <code>oauth2</code> header string N/A No <code>id</code> path string No <p> Response 200 OK </p> application/json <p></p><pre><code>{\n    \"sessionConfig\": null,\n    \"statusListConfig\": null,\n    \"id\": \"string\",\n    \"name\": \"string\",\n    \"description\": \"string\",\n    \"status\": \"string\",\n    \"clients\": [\n        {\n            \"allowedPresentationConfigs\": [\n                \"age-verification\",\n                \"kyc-basic\"\n            ],\n            \"allowedIssuanceConfigs\": [\n                \"pid\",\n                \"mdl\"\n            ],\n            \"clientId\": \"string\",\n            \"secret\": \"string\",\n            \"tenantId\": \"string\",\n            \"description\": \"string\",\n            \"roles\": [\n                \"presentation:manage\"\n            ],\n            \"tenant\": null\n        }\n    ]\n}\n</code></pre> \u26a0\ufe0f This example has been generated automatically from the schema and it is not accurate. Refer to the schema for more information.<p></p> Schema of the response body <pre><code>{\n    \"type\": \"object\",\n    \"properties\": {\n        \"sessionConfig\": {\n            \"nullable\": true,\n            \"description\": \"Session storage configuration for this tenant. Controls TTL and cleanup behavior.\",\n            \"allOf\": [\n                {\n                    \"$ref\": \"#/components/schemas/SessionStorageConfig\"\n                }\n            ]\n        },\n        \"statusListConfig\": {\n            \"nullable\": true,\n            \"description\": \"Status list configuration for this tenant. Only affects newly created status lists.\",\n            \"allOf\": [\n                {\n                    \"$ref\": \"#/components/schemas/StatusListConfig\"\n                }\n            ]\n        },\n        \"id\": {\n            \"type\": \"string\",\n            \"description\": \"The unique identifier for the tenant.\"\n        },\n        \"name\": {\n            \"type\": \"string\",\n            \"description\": \"The name of the tenant.\"\n        },\n        \"description\": {\n            \"type\": \"string\",\n            \"description\": \"The description of the tenant.\"\n        },\n        \"status\": {\n            \"type\": \"string\",\n            \"description\": \"The current status of the tenant.\"\n        },\n        \"clients\": {\n            \"description\": \"The clients associated with the tenant.\",\n            \"type\": \"array\",\n            \"items\": {\n                \"$ref\": \"#/components/schemas/ClientEntity\"\n            }\n        }\n    },\n    \"required\": [\n        \"id\",\n        \"name\",\n        \"status\",\n        \"clients\"\n    ]\n}\n</code></pre>"},{"location":"api/openapi/#patch-tenantid","title":"PATCH /tenant/{id}","text":"<p>Update a tenant by ID</p> <p>Input parameters</p> Parameter In Type Default Nullable Description <code>oauth2</code> header string N/A No <code>id</code> path string No <p>Request body</p> application/json <p></p><pre><code>{\n    \"statusListConfig\": null,\n    \"sessionConfig\": null,\n    \"name\": \"string\",\n    \"description\": \"string\",\n    \"roles\": [\n        \"presentation:manage\"\n    ]\n}\n</code></pre> \u26a0\ufe0f This example has been generated automatically from the schema and it is not accurate. Refer to the schema for more information.<p></p> Schema of the request body <pre><code>{\n    \"type\": \"object\",\n    \"properties\": {\n        \"statusListConfig\": {\n            \"nullable\": true,\n            \"description\": \"Status list configuration for this tenant. Only affects newly created status lists.\",\n            \"allOf\": [\n                {\n                    \"$ref\": \"#/components/schemas/StatusListConfig\"\n                }\n            ]\n        },\n        \"sessionConfig\": {\n            \"description\": \"Session storage configuration. Controls TTL and cleanup behavior.\",\n            \"allOf\": [\n                {\n                    \"$ref\": \"#/components/schemas/SessionStorageConfig\"\n                }\n            ]\n        },\n        \"name\": {\n            \"type\": \"string\",\n            \"description\": \"The name of the tenant.\"\n        },\n        \"description\": {\n            \"type\": \"string\",\n            \"description\": \"The description of the tenant.\"\n        },\n        \"roles\": {\n            \"type\": \"array\",\n            \"items\": {\n                \"type\": \"string\",\n                \"enum\": [\n                    \"presentation:manage\",\n                    \"presentation:request\",\n                    \"issuance:manage\",\n                    \"issuance:offer\",\n                    \"clients:manage\",\n                    \"tenants:manage\",\n                    \"registrar:manage\"\n                ]\n            }\n        }\n    }\n}\n</code></pre> <p> Response 200 OK </p> application/json <p></p><pre><code>{\n    \"sessionConfig\": null,\n    \"statusListConfig\": null,\n    \"id\": \"string\",\n    \"name\": \"string\",\n    \"description\": \"string\",\n    \"status\": \"string\",\n    \"clients\": [\n        {\n            \"allowedPresentationConfigs\": [\n                \"age-verification\",\n                \"kyc-basic\"\n            ],\n            \"allowedIssuanceConfigs\": [\n                \"pid\",\n                \"mdl\"\n            ],\n            \"clientId\": \"string\",\n            \"secret\": \"string\",\n            \"tenantId\": \"string\",\n            \"description\": \"string\",\n            \"roles\": [\n                \"presentation:manage\"\n            ],\n            \"tenant\": null\n        }\n    ]\n}\n</code></pre> \u26a0\ufe0f This example has been generated automatically from the schema and it is not accurate. Refer to the schema for more information.<p></p> Schema of the response body <pre><code>{\n    \"type\": \"object\",\n    \"properties\": {\n        \"sessionConfig\": {\n            \"nullable\": true,\n            \"description\": \"Session storage configuration for this tenant. Controls TTL and cleanup behavior.\",\n            \"allOf\": [\n                {\n                    \"$ref\": \"#/components/schemas/SessionStorageConfig\"\n                }\n            ]\n        },\n        \"statusListConfig\": {\n            \"nullable\": true,\n            \"description\": \"Status list configuration for this tenant. Only affects newly created status lists.\",\n            \"allOf\": [\n                {\n                    \"$ref\": \"#/components/schemas/StatusListConfig\"\n                }\n            ]\n        },\n        \"id\": {\n            \"type\": \"string\",\n            \"description\": \"The unique identifier for the tenant.\"\n        },\n        \"name\": {\n            \"type\": \"string\",\n            \"description\": \"The name of the tenant.\"\n        },\n        \"description\": {\n            \"type\": \"string\",\n            \"description\": \"The description of the tenant.\"\n        },\n        \"status\": {\n            \"type\": \"string\",\n            \"description\": \"The current status of the tenant.\"\n        },\n        \"clients\": {\n            \"description\": \"The clients associated with the tenant.\",\n            \"type\": \"array\",\n            \"items\": {\n                \"$ref\": \"#/components/schemas/ClientEntity\"\n            }\n        }\n    },\n    \"required\": [\n        \"id\",\n        \"name\",\n        \"status\",\n        \"clients\"\n    ]\n}\n</code></pre>"},{"location":"api/openapi/#delete-tenantid","title":"DELETE /tenant/{id}","text":"<p>Deletes a tenant by ID</p> <p>Input parameters</p> Parameter In Type Default Nullable Description <code>oauth2</code> header string N/A No <code>id</code> path string No <p> Response 200 OK </p>"},{"location":"api/openapi/#client","title":"Client","text":""},{"location":"api/openapi/#get-client","title":"GET /client","text":"<p>Get all clients for a user</p> <p>Input parameters</p> Parameter In Type Default Nullable Description <code>oauth2</code> header string N/A No <p> Response 200 OK </p> application/json <p></p><pre><code>[\n    {\n        \"allowedPresentationConfigs\": [\n            \"age-verification\",\n            \"kyc-basic\"\n        ],\n        \"allowedIssuanceConfigs\": [\n            \"pid\",\n            \"mdl\"\n        ],\n        \"clientId\": \"string\",\n        \"secret\": \"string\",\n        \"tenantId\": \"string\",\n        \"description\": \"string\",\n        \"roles\": [\n            \"presentation:manage\"\n        ],\n        \"tenant\": null\n    }\n]\n</code></pre> \u26a0\ufe0f This example has been generated automatically from the schema and it is not accurate. Refer to the schema for more information.<p></p> Schema of the response body <pre><code>{\n    \"type\": \"array\",\n    \"items\": {\n        \"$ref\": \"#/components/schemas/ClientEntity\"\n    }\n}\n</code></pre>"},{"location":"api/openapi/#post-client","title":"POST /client","text":"<p>Create a new client</p> <p>Input parameters</p> Parameter In Type Default Nullable Description <code>oauth2</code> header string N/A No <p>Request body</p> application/json <p></p><pre><code>{\n    \"allowedPresentationConfigs\": [\n        \"age-verification\",\n        \"kyc-basic\"\n    ],\n    \"allowedIssuanceConfigs\": [\n        \"pid\",\n        \"mdl\"\n    ],\n    \"clientId\": \"string\",\n    \"secret\": \"string\",\n    \"description\": \"string\",\n    \"roles\": [\n        \"presentation:manage\"\n    ]\n}\n</code></pre> \u26a0\ufe0f This example has been generated automatically from the schema and it is not accurate. Refer to the schema for more information.<p></p> Schema of the request body <pre><code>{\n    \"type\": \"object\",\n    \"properties\": {\n        \"allowedPresentationConfigs\": {\n            \"nullable\": true,\n            \"description\": \"List of presentation config IDs this client can use. If empty/null, all configs are allowed.\",\n            \"example\": [\n                \"age-verification\",\n                \"kyc-basic\"\n            ],\n            \"type\": \"array\",\n            \"items\": {\n                \"type\": \"string\"\n            }\n        },\n        \"allowedIssuanceConfigs\": {\n            \"nullable\": true,\n            \"description\": \"List of issuance config IDs this client can use. If empty/null, all configs are allowed.\",\n            \"example\": [\n                \"pid\",\n                \"mdl\"\n            ],\n            \"type\": \"array\",\n            \"items\": {\n                \"type\": \"string\"\n            }\n        },\n        \"clientId\": {\n            \"type\": \"string\",\n            \"description\": \"The unique identifier for the client.\"\n        },\n        \"secret\": {\n            \"type\": \"string\",\n            \"description\": \"The secret key for the client.\"\n        },\n        \"description\": {\n            \"type\": \"string\",\n            \"description\": \"The description of the client.\"\n        },\n        \"roles\": {\n            \"type\": \"array\",\n            \"description\": \"The roles assigned to the client.\",\n            \"items\": {\n                \"type\": \"string\",\n                \"enum\": [\n                    \"presentation:manage\",\n                    \"presentation:request\",\n                    \"issuance:manage\",\n                    \"issuance:offer\",\n                    \"clients:manage\",\n                    \"tenants:manage\",\n                    \"registrar:manage\"\n                ]\n            }\n        }\n    },\n    \"required\": [\n        \"clientId\",\n        \"roles\"\n    ]\n}\n</code></pre> <p> Response 201 Created </p> application/json <p></p><pre><code>{\n    \"allowedPresentationConfigs\": [\n        \"age-verification\",\n        \"kyc-basic\"\n    ],\n    \"allowedIssuanceConfigs\": [\n        \"pid\",\n        \"mdl\"\n    ],\n    \"clientId\": \"string\",\n    \"secret\": \"string\",\n    \"tenantId\": \"string\",\n    \"description\": \"string\",\n    \"roles\": [\n        \"presentation:manage\"\n    ],\n    \"tenant\": null\n}\n</code></pre> \u26a0\ufe0f This example has been generated automatically from the schema and it is not accurate. Refer to the schema for more information.<p></p> Schema of the response body <pre><code>{\n    \"type\": \"object\",\n    \"properties\": {\n        \"allowedPresentationConfigs\": {\n            \"nullable\": true,\n            \"description\": \"List of presentation config IDs this client can use. If empty/null, all configs are allowed.\",\n            \"example\": [\n                \"age-verification\",\n                \"kyc-basic\"\n            ],\n            \"type\": \"array\",\n            \"items\": {\n                \"type\": \"string\"\n            }\n        },\n        \"allowedIssuanceConfigs\": {\n            \"nullable\": true,\n            \"description\": \"List of issuance config IDs this client can use. If empty/null, all configs are allowed.\",\n            \"example\": [\n                \"pid\",\n                \"mdl\"\n            ],\n            \"type\": \"array\",\n            \"items\": {\n                \"type\": \"string\"\n            }\n        },\n        \"clientId\": {\n            \"type\": \"string\",\n            \"description\": \"The unique identifier for the client.\"\n        },\n        \"secret\": {\n            \"type\": \"string\",\n            \"description\": \"The secret key for the client.\"\n        },\n        \"tenantId\": {\n            \"type\": \"string\",\n            \"description\": \"The unique identifier for the tenant that the client belongs to. Only null for accounts that manage tenants, that do not belong to a client\"\n        },\n        \"description\": {\n            \"type\": \"string\",\n            \"description\": \"The description of the client.\"\n        },\n        \"roles\": {\n            \"description\": \"The roles assigned to the client.\",\n            \"type\": \"array\",\n            \"items\": {\n                \"type\": \"string\",\n                \"enum\": [\n                    \"presentation:manage\",\n                    \"presentation:request\",\n                    \"issuance:manage\",\n                    \"issuance:offer\",\n                    \"clients:manage\",\n                    \"tenants:manage\",\n                    \"registrar:manage\"\n                ]\n            }\n        },\n        \"tenant\": {\n            \"description\": \"The tenant that the client belongs to.\",\n            \"allOf\": [\n                {\n                    \"$ref\": \"#/components/schemas/TenantEntity\"\n                }\n            ]\n        }\n    },\n    \"required\": [\n        \"clientId\",\n        \"roles\"\n    ]\n}\n</code></pre>"},{"location":"api/openapi/#get-clientid","title":"GET /client/{id}","text":"<p>Get a client by its id</p> <p>Input parameters</p> Parameter In Type Default Nullable Description <code>oauth2</code> header string N/A No <code>id</code> path string No <p> Response 200 OK </p> application/json <p></p><pre><code>{\n    \"allowedPresentationConfigs\": [\n        \"age-verification\",\n        \"kyc-basic\"\n    ],\n    \"allowedIssuanceConfigs\": [\n        \"pid\",\n        \"mdl\"\n    ],\n    \"clientId\": \"string\",\n    \"secret\": \"string\",\n    \"tenantId\": \"string\",\n    \"description\": \"string\",\n    \"roles\": [\n        \"presentation:manage\"\n    ],\n    \"tenant\": null\n}\n</code></pre> \u26a0\ufe0f This example has been generated automatically from the schema and it is not accurate. Refer to the schema for more information.<p></p> Schema of the response body <pre><code>{\n    \"type\": \"object\",\n    \"properties\": {\n        \"allowedPresentationConfigs\": {\n            \"nullable\": true,\n            \"description\": \"List of presentation config IDs this client can use. If empty/null, all configs are allowed.\",\n            \"example\": [\n                \"age-verification\",\n                \"kyc-basic\"\n            ],\n            \"type\": \"array\",\n            \"items\": {\n                \"type\": \"string\"\n            }\n        },\n        \"allowedIssuanceConfigs\": {\n            \"nullable\": true,\n            \"description\": \"List of issuance config IDs this client can use. If empty/null, all configs are allowed.\",\n            \"example\": [\n                \"pid\",\n                \"mdl\"\n            ],\n            \"type\": \"array\",\n            \"items\": {\n                \"type\": \"string\"\n            }\n        },\n        \"clientId\": {\n            \"type\": \"string\",\n            \"description\": \"The unique identifier for the client.\"\n        },\n        \"secret\": {\n            \"type\": \"string\",\n            \"description\": \"The secret key for the client.\"\n        },\n        \"tenantId\": {\n            \"type\": \"string\",\n            \"description\": \"The unique identifier for the tenant that the client belongs to. Only null for accounts that manage tenants, that do not belong to a client\"\n        },\n        \"description\": {\n            \"type\": \"string\",\n            \"description\": \"The description of the client.\"\n        },\n        \"roles\": {\n            \"description\": \"The roles assigned to the client.\",\n            \"type\": \"array\",\n            \"items\": {\n                \"type\": \"string\",\n                \"enum\": [\n                    \"presentation:manage\",\n                    \"presentation:request\",\n                    \"issuance:manage\",\n                    \"issuance:offer\",\n                    \"clients:manage\",\n                    \"tenants:manage\",\n                    \"registrar:manage\"\n                ]\n            }\n        },\n        \"tenant\": {\n            \"description\": \"The tenant that the client belongs to.\",\n            \"allOf\": [\n                {\n                    \"$ref\": \"#/components/schemas/TenantEntity\"\n                }\n            ]\n        }\n    },\n    \"required\": [\n        \"clientId\",\n        \"roles\"\n    ]\n}\n</code></pre>"},{"location":"api/openapi/#patch-clientid","title":"PATCH /client/{id}","text":"<p>Update a client by its id</p> <p>Input parameters</p> Parameter In Type Default Nullable Description <code>oauth2</code> header string N/A No <code>id</code> path string No <p>Request body</p> application/json <p></p><pre><code>{\n    \"allowedPresentationConfigs\": [\n        \"age-verification\",\n        \"kyc-basic\"\n    ],\n    \"allowedIssuanceConfigs\": [\n        \"pid\",\n        \"mdl\"\n    ],\n    \"description\": \"string\",\n    \"roles\": [\n        \"presentation:manage\"\n    ]\n}\n</code></pre> \u26a0\ufe0f This example has been generated automatically from the schema and it is not accurate. Refer to the schema for more information.<p></p> Schema of the request body <pre><code>{\n    \"type\": \"object\",\n    \"properties\": {\n        \"allowedPresentationConfigs\": {\n            \"nullable\": true,\n            \"description\": \"List of presentation config IDs this client can use. If empty/null, all configs are allowed.\",\n            \"example\": [\n                \"age-verification\",\n                \"kyc-basic\"\n            ],\n            \"type\": \"array\",\n            \"items\": {\n                \"type\": \"string\"\n            }\n        },\n        \"allowedIssuanceConfigs\": {\n            \"nullable\": true,\n            \"description\": \"List of issuance config IDs this client can use. If empty/null, all configs are allowed.\",\n            \"example\": [\n                \"pid\",\n                \"mdl\"\n            ],\n            \"type\": \"array\",\n            \"items\": {\n                \"type\": \"string\"\n            }\n        },\n        \"description\": {\n            \"type\": \"string\",\n            \"description\": \"The description of the client.\"\n        },\n        \"roles\": {\n            \"type\": \"array\",\n            \"description\": \"The roles assigned to the client.\",\n            \"items\": {\n                \"type\": \"string\",\n                \"enum\": [\n                    \"presentation:manage\",\n                    \"presentation:request\",\n                    \"issuance:manage\",\n                    \"issuance:offer\",\n                    \"clients:manage\",\n                    \"tenants:manage\",\n                    \"registrar:manage\"\n                ]\n            }\n        }\n    },\n    \"required\": [\n        \"roles\"\n    ]\n}\n</code></pre> <p> Response 200 OK </p> application/json Schema of the response body <pre><code>{\n    \"type\": \"object\"\n}\n</code></pre>"},{"location":"api/openapi/#delete-clientid","title":"DELETE /client/{id}","text":"<p>Get a client by its id</p> <p>Input parameters</p> Parameter In Type Default Nullable Description <code>oauth2</code> header string N/A No <code>id</code> path string No <p> Response 200 OK </p>"},{"location":"api/openapi/#get-clientidsecret","title":"GET /client/{id}/secret","text":"<p>Input parameters</p> Parameter In Type Default Nullable Description <code>oauth2</code> header string N/A No <code>id</code> path string No <p> Response 200 OK </p> application/json <p></p><pre><code>{\n    \"secret\": \"string\"\n}\n</code></pre> \u26a0\ufe0f This example has been generated automatically from the schema and it is not accurate. Refer to the schema for more information.<p></p> Schema of the response body <pre><code>{\n    \"type\": \"object\",\n    \"properties\": {\n        \"secret\": {\n            \"type\": \"string\"\n        }\n    },\n    \"required\": [\n        \"secret\"\n    ]\n}\n</code></pre>"},{"location":"api/openapi/#post-clientidrotate-secret","title":"POST /client/{id}/rotate-secret","text":"<p>Rotate (regenerate) a client's secret. Returns the new secret for one-time display - save it immediately!</p> <p>Users with <code>tenants:manage</code> role can rotate secrets for any client. Users with <code>clients:manage</code> role can only rotate secrets for clients in their tenant.</p> <p>Input parameters</p> Parameter In Type Default Nullable Description <code>oauth2</code> header string N/A No <code>id</code> path string No <p> Response 201 Created </p> application/json <p></p><pre><code>{\n    \"secret\": \"string\"\n}\n</code></pre> \u26a0\ufe0f This example has been generated automatically from the schema and it is not accurate. Refer to the schema for more information.<p></p> Schema of the response body <pre><code>{\n    \"type\": \"object\",\n    \"properties\": {\n        \"secret\": {\n            \"type\": \"string\"\n        }\n    },\n    \"required\": [\n        \"secret\"\n    ]\n}\n</code></pre>"},{"location":"api/openapi/#key","title":"Key","text":""},{"location":"api/openapi/#get-key","title":"GET /key","text":"<p>Get all keys for the tenant.</p> <p>Input parameters</p> Parameter In Type Default Nullable Description <code>oauth2</code> header string N/A No <p> Response 200 OK </p> application/json <p></p><pre><code>[\n    {\n        \"id\": \"string\",\n        \"description\": \"string\",\n        \"tenantId\": \"string\",\n        \"tenant\": null,\n        \"key\": {},\n        \"usage\": {},\n        \"certificates\": [\n            {\n                \"keyId\": \"039af178-3ca0-48f4-a2e4-7b1209f30376\",\n                \"id\": \"string\",\n                \"tenantId\": \"string\",\n                \"tenant\": null,\n                \"crt\": [\n                    \"string\"\n                ],\n                \"usages\": [\n                    {\n                        \"tenantId\": \"string\",\n                        \"certId\": \"string\",\n                        \"usage\": \"access\",\n                        \"cert\": null\n                    }\n                ],\n                \"description\": \"string\",\n                \"key\": null,\n                \"createdAt\": \"2022-04-13T15:42:05.901Z\",\n                \"updatedAt\": \"2022-04-13T15:42:05.901Z\"\n            }\n        ],\n        \"createdAt\": \"2022-04-13T15:42:05.901Z\",\n        \"updatedAt\": \"2022-04-13T15:42:05.901Z\"\n    }\n]\n</code></pre> \u26a0\ufe0f This example has been generated automatically from the schema and it is not accurate. Refer to the schema for more information.<p></p> Schema of the response body <pre><code>{\n    \"type\": \"array\",\n    \"items\": {\n        \"$ref\": \"#/components/schemas/KeyEntity\"\n    }\n}\n</code></pre>"},{"location":"api/openapi/#post-key","title":"POST /key","text":"<p>Add a new key to the key service.</p> <p>Input parameters</p> Parameter In Type Default Nullable Description <code>oauth2</code> header string N/A No <p>Request body</p> application/json <p></p><pre><code>{\n    \"key\": null,\n    \"id\": \"string\",\n    \"description\": \"string\"\n}\n</code></pre> \u26a0\ufe0f This example has been generated automatically from the schema and it is not accurate. Refer to the schema for more information.<p></p> Schema of the request body <pre><code>{\n    \"type\": \"object\",\n    \"properties\": {\n        \"key\": {\n            \"description\": \"The private key in JWK format.\",\n            \"allOf\": [\n                {\n                    \"$ref\": \"#/components/schemas/Key\"\n                }\n            ]\n        },\n        \"id\": {\n            \"type\": \"string\",\n            \"description\": \"Unique identifier for the key.\"\n        },\n        \"description\": {\n            \"type\": \"string\",\n            \"description\": \"Description of the key.\"\n        }\n    },\n    \"required\": [\n        \"key\",\n        \"id\"\n    ]\n}\n</code></pre> <p> Response 201 Created </p>"},{"location":"api/openapi/#get-keyid","title":"GET /key/{id}","text":"<p>Get a specific key by ID</p> <p>Input parameters</p> Parameter In Type Default Nullable Description <code>oauth2</code> header string N/A No <code>id</code> path string No <p> Response 200 OK </p> application/json <p></p><pre><code>{\n    \"id\": \"string\",\n    \"description\": \"string\",\n    \"tenantId\": \"string\",\n    \"tenant\": null,\n    \"key\": {},\n    \"usage\": {},\n    \"certificates\": [\n        {\n            \"keyId\": \"039af178-3ca0-48f4-a2e4-7b1209f30376\",\n            \"id\": \"string\",\n            \"tenantId\": \"string\",\n            \"tenant\": null,\n            \"crt\": [\n                \"string\"\n            ],\n            \"usages\": [\n                {\n                    \"tenantId\": \"string\",\n                    \"certId\": \"string\",\n                    \"usage\": \"access\",\n                    \"cert\": null\n                }\n            ],\n            \"description\": \"string\",\n            \"key\": {\n                \"id\": \"string\",\n                \"description\": \"string\",\n                \"tenantId\": \"string\",\n                \"tenant\": null,\n                \"key\": {},\n                \"usage\": {},\n                \"certificates\": null,\n                \"createdAt\": \"2022-04-13T15:42:05.901Z\",\n                \"updatedAt\": \"2022-04-13T15:42:05.901Z\"\n            },\n            \"createdAt\": \"2022-04-13T15:42:05.901Z\",\n            \"updatedAt\": \"2022-04-13T15:42:05.901Z\"\n        }\n    ],\n    \"createdAt\": \"2022-04-13T15:42:05.901Z\",\n    \"updatedAt\": \"2022-04-13T15:42:05.901Z\"\n}\n</code></pre> \u26a0\ufe0f This example has been generated automatically from the schema and it is not accurate. Refer to the schema for more information.<p></p> Schema of the response body <pre><code>{\n    \"type\": \"object\",\n    \"properties\": {\n        \"id\": {\n            \"type\": \"string\",\n            \"description\": \"Unique identifier for the key.\"\n        },\n        \"description\": {\n            \"type\": \"string\",\n            \"description\": \"Description of the key.\"\n        },\n        \"tenantId\": {\n            \"type\": \"string\",\n            \"description\": \"Tenant ID for the key.\"\n        },\n        \"tenant\": {\n            \"description\": \"The tenant that owns this object.\",\n            \"allOf\": [\n                {\n                    \"$ref\": \"#/components/schemas/TenantEntity\"\n                }\n            ]\n        },\n        \"key\": {\n            \"type\": \"object\",\n            \"description\": \"The key material.\\nEncrypted at rest using AES-256-GCM.\"\n        },\n        \"usage\": {\n            \"type\": \"object\",\n            \"description\": \"The usage type of the key.\"\n        },\n        \"certificates\": {\n            \"description\": \"Certificates associated with this key.\",\n            \"type\": \"array\",\n            \"items\": {\n                \"$ref\": \"#/components/schemas/CertEntity\"\n            }\n        },\n        \"createdAt\": {\n            \"format\": \"date-time\",\n            \"type\": \"string\",\n            \"description\": \"The timestamp when the key was created.\"\n        },\n        \"updatedAt\": {\n            \"format\": \"date-time\",\n            \"type\": \"string\",\n            \"description\": \"The timestamp when the key was last updated.\"\n        }\n    },\n    \"required\": [\n        \"id\",\n        \"tenantId\",\n        \"tenant\",\n        \"key\",\n        \"usage\",\n        \"certificates\",\n        \"createdAt\",\n        \"updatedAt\"\n    ]\n}\n</code></pre>"},{"location":"api/openapi/#put-keyid","title":"PUT /key/{id}","text":"<p>Updates an existing key in the key service.</p> <p>Input parameters</p> Parameter In Type Default Nullable Description <code>oauth2</code> header string N/A No <code>id</code> path string No <p>Request body</p> application/json <p></p><pre><code>{\n    \"id\": \"string\",\n    \"description\": \"string\"\n}\n</code></pre> \u26a0\ufe0f This example has been generated automatically from the schema and it is not accurate. Refer to the schema for more information.<p></p> Schema of the request body <pre><code>{\n    \"type\": \"object\",\n    \"properties\": {\n        \"id\": {\n            \"type\": \"string\",\n            \"description\": \"Unique identifier for the key.\"\n        },\n        \"description\": {\n            \"type\": \"string\",\n            \"description\": \"Description of the key.\"\n        }\n    },\n    \"required\": [\n        \"id\"\n    ]\n}\n</code></pre> <p> Response 200 OK </p>"},{"location":"api/openapi/#delete-keyid","title":"DELETE /key/{id}","text":"<p>Delete a key from the key service.</p> <p>Input parameters</p> Parameter In Type Default Nullable Description <code>oauth2</code> header string N/A No <code>id</code> path string No <p> Response 200 OK </p>"},{"location":"api/openapi/#certificate","title":"Certificate","text":""},{"location":"api/openapi/#get-certs","title":"GET /certs","text":"<p>Get all certificates for the authenticated tenant. Can be filtered by keyId using query parameter.</p> <p>Input parameters</p> Parameter In Type Default Nullable Description <code>oauth2</code> header string N/A No <code>keyId</code> query string No <p> Response 200 OK </p> application/json <p></p><pre><code>[\n    {\n        \"keyId\": \"039af178-3ca0-48f4-a2e4-7b1209f30376\",\n        \"id\": \"string\",\n        \"tenantId\": \"string\",\n        \"tenant\": null,\n        \"crt\": [\n            \"string\"\n        ],\n        \"usages\": [\n            {\n                \"tenantId\": \"string\",\n                \"certId\": \"string\",\n                \"usage\": \"access\",\n                \"cert\": null\n            }\n        ],\n        \"description\": \"string\",\n        \"key\": {\n            \"id\": \"string\",\n            \"description\": \"string\",\n            \"tenantId\": \"string\",\n            \"tenant\": null,\n            \"key\": {},\n            \"usage\": {},\n            \"certificates\": null,\n            \"createdAt\": \"2022-04-13T15:42:05.901Z\",\n            \"updatedAt\": \"2022-04-13T15:42:05.901Z\"\n        },\n        \"createdAt\": \"2022-04-13T15:42:05.901Z\",\n        \"updatedAt\": \"2022-04-13T15:42:05.901Z\"\n    }\n]\n</code></pre> \u26a0\ufe0f This example has been generated automatically from the schema and it is not accurate. Refer to the schema for more information.<p></p> Schema of the response body <pre><code>{\n    \"type\": \"array\",\n    \"items\": {\n        \"$ref\": \"#/components/schemas/CertEntity\"\n    }\n}\n</code></pre>"},{"location":"api/openapi/#post-certs","title":"POST /certs","text":"<p>Add a new certificate to a key. If no certificate is provided, a self-signed certificate will be generated.</p> <p>Input parameters</p> Parameter In Type Default Nullable Description <code>oauth2</code> header string N/A No <p>Request body</p> application/json <p></p><pre><code>{\n    \"keyId\": \"039af178-3ca0-48f4-a2e4-7b1209f30376\",\n    \"id\": \"string\",\n    \"certUsageTypes\": [\n        \"access\"\n    ],\n    \"crt\": [\n        \"string\"\n    ],\n    \"subjectName\": \"string\",\n    \"description\": \"string\"\n}\n</code></pre> \u26a0\ufe0f This example has been generated automatically from the schema and it is not accurate. Refer to the schema for more information.<p></p> Schema of the request body <pre><code>{\n    \"type\": \"object\",\n    \"properties\": {\n        \"keyId\": {\n            \"type\": \"string\",\n            \"description\": \"The key ID this certificate is associated with\",\n            \"example\": \"039af178-3ca0-48f4-a2e4-7b1209f30376\"\n        },\n        \"id\": {\n            \"type\": \"string\"\n        },\n        \"certUsageTypes\": {\n            \"description\": \"Usage types for the certificate.\",\n            \"type\": \"array\",\n            \"items\": {\n                \"type\": \"string\",\n                \"enum\": [\n                    \"access\",\n                    \"signing\",\n                    \"trustList\",\n                    \"statusList\"\n                ]\n            }\n        },\n        \"crt\": {\n            \"description\": \"Certificate chain in PEM format (leaf first, then intermediates/CA).\\nIf not provided, a self-signed certificate will be generated.\",\n            \"type\": \"array\",\n            \"items\": {\n                \"type\": \"string\"\n            }\n        },\n        \"subjectName\": {\n            \"type\": \"string\",\n            \"description\": \"Subject name (CN) for self-signed certificate generation.\\nIf not provided, the tenant name will be used.\"\n        },\n        \"description\": {\n            \"type\": \"string\",\n            \"description\": \"Description of the key.\"\n        }\n    },\n    \"required\": [\n        \"keyId\",\n        \"certUsageTypes\"\n    ]\n}\n</code></pre> <p> Response 201 Created </p> application/json <p></p><pre><code>{\n    \"id\": \"string\"\n}\n</code></pre> \u26a0\ufe0f This example has been generated automatically from the schema and it is not accurate. Refer to the schema for more information.<p></p> Schema of the response body <pre><code>{\n    \"type\": \"object\",\n    \"properties\": {\n        \"id\": {\n            \"type\": \"string\",\n            \"description\": \"The ID of the created self-signed certificate.\"\n        }\n    },\n    \"required\": [\n        \"id\"\n    ]\n}\n</code></pre>"},{"location":"api/openapi/#get-certscertid","title":"GET /certs/{certId}","text":"<p>Get a specific certificate by ID.</p> <p>Input parameters</p> Parameter In Type Default Nullable Description <code>oauth2</code> header string N/A No <code>certId</code> path string No <p> Response 200 OK </p> application/json <p></p><pre><code>{\n    \"keyId\": \"039af178-3ca0-48f4-a2e4-7b1209f30376\",\n    \"id\": \"string\",\n    \"tenantId\": \"string\",\n    \"tenant\": null,\n    \"crt\": [\n        \"string\"\n    ],\n    \"usages\": [\n        {\n            \"tenantId\": \"string\",\n            \"certId\": \"string\",\n            \"usage\": \"access\",\n            \"cert\": {\n                \"keyId\": \"039af178-3ca0-48f4-a2e4-7b1209f30376\",\n                \"id\": \"string\",\n                \"tenantId\": \"string\",\n                \"tenant\": null,\n                \"crt\": [\n                    \"string\"\n                ],\n                \"usages\": null,\n                \"description\": \"string\",\n                \"key\": {\n                    \"id\": \"string\",\n                    \"description\": \"string\",\n                    \"tenantId\": \"string\",\n                    \"tenant\": null,\n                    \"key\": {},\n                    \"usage\": {},\n                    \"certificates\": null,\n                    \"createdAt\": \"2022-04-13T15:42:05.901Z\",\n                    \"updatedAt\": \"2022-04-13T15:42:05.901Z\"\n                },\n                \"createdAt\": \"2022-04-13T15:42:05.901Z\",\n                \"updatedAt\": \"2022-04-13T15:42:05.901Z\"\n            }\n        }\n    ],\n    \"description\": \"string\",\n    \"key\": null,\n    \"createdAt\": \"2022-04-13T15:42:05.901Z\",\n    \"updatedAt\": \"2022-04-13T15:42:05.901Z\"\n}\n</code></pre> \u26a0\ufe0f This example has been generated automatically from the schema and it is not accurate. Refer to the schema for more information.<p></p> Schema of the response body <pre><code>{\n    \"type\": \"object\",\n    \"properties\": {\n        \"keyId\": {\n            \"type\": \"string\",\n            \"description\": \"The key ID this certificate is associated with\",\n            \"example\": \"039af178-3ca0-48f4-a2e4-7b1209f30376\"\n        },\n        \"id\": {\n            \"type\": \"string\",\n            \"description\": \"Unique identifier for the key.\"\n        },\n        \"tenantId\": {\n            \"type\": \"string\",\n            \"description\": \"Tenant ID for the key.\"\n        },\n        \"tenant\": {\n            \"description\": \"The tenant that owns this object.\",\n            \"allOf\": [\n                {\n                    \"$ref\": \"#/components/schemas/TenantEntity\"\n                }\n            ]\n        },\n        \"crt\": {\n            \"description\": \"Certificate chain in PEM format (leaf first, then intermediates/CA).\",\n            \"type\": \"array\",\n            \"items\": {\n                \"type\": \"string\"\n            }\n        },\n        \"usages\": {\n            \"type\": \"array\",\n            \"items\": {\n                \"$ref\": \"#/components/schemas/CertUsageEntity\"\n            }\n        },\n        \"description\": {\n            \"type\": \"string\",\n            \"description\": \"Description of the key.\"\n        },\n        \"key\": {\n            \"$ref\": \"#/components/schemas/KeyEntity\"\n        },\n        \"createdAt\": {\n            \"format\": \"date-time\",\n            \"type\": \"string\",\n            \"description\": \"The timestamp when the certificate was created.\"\n        },\n        \"updatedAt\": {\n            \"format\": \"date-time\",\n            \"type\": \"string\",\n            \"description\": \"The timestamp when the certificate was last updated.\"\n        }\n    },\n    \"required\": [\n        \"keyId\",\n        \"id\",\n        \"tenantId\",\n        \"tenant\",\n        \"crt\",\n        \"usages\",\n        \"key\",\n        \"createdAt\",\n        \"updatedAt\"\n    ]\n}\n</code></pre>"},{"location":"api/openapi/#patch-certscertid","title":"PATCH /certs/{certId}","text":"<p>Update certificate metadata (description and usage types).</p> <p>Input parameters</p> Parameter In Type Default Nullable Description <code>oauth2</code> header string N/A No <code>certId</code> path string No <p>Request body</p> application/json <p></p><pre><code>{\n    \"certUsageTypes\": [\n        \"access\"\n    ],\n    \"usages\": [\n        {\n            \"tenantId\": \"string\",\n            \"certId\": \"string\",\n            \"usage\": \"access\",\n            \"cert\": {\n                \"keyId\": \"039af178-3ca0-48f4-a2e4-7b1209f30376\",\n                \"id\": \"string\",\n                \"tenantId\": \"string\",\n                \"tenant\": null,\n                \"crt\": [\n                    \"string\"\n                ],\n                \"usages\": null,\n                \"description\": \"string\",\n                \"key\": {\n                    \"id\": \"string\",\n                    \"description\": \"string\",\n                    \"tenantId\": \"string\",\n                    \"tenant\": null,\n                    \"key\": {},\n                    \"usage\": {},\n                    \"certificates\": null,\n                    \"createdAt\": \"2022-04-13T15:42:05.901Z\",\n                    \"updatedAt\": \"2022-04-13T15:42:05.901Z\"\n                },\n                \"createdAt\": \"2022-04-13T15:42:05.901Z\",\n                \"updatedAt\": \"2022-04-13T15:42:05.901Z\"\n            }\n        }\n    ],\n    \"description\": \"string\"\n}\n</code></pre> \u26a0\ufe0f This example has been generated automatically from the schema and it is not accurate. Refer to the schema for more information.<p></p> Schema of the request body <pre><code>{\n    \"type\": \"object\",\n    \"properties\": {\n        \"certUsageTypes\": {\n            \"type\": \"array\",\n            \"description\": \"Usage types for the certificate.\",\n            \"items\": {\n                \"type\": \"string\",\n                \"enum\": [\n                    \"access\",\n                    \"signing\",\n                    \"trustList\",\n                    \"statusList\"\n                ]\n            }\n        },\n        \"usages\": {\n            \"type\": \"array\",\n            \"items\": {\n                \"$ref\": \"#/components/schemas/CertUsageEntity\"\n            }\n        },\n        \"description\": {\n            \"type\": \"string\",\n            \"description\": \"Description of the key.\"\n        }\n    },\n    \"required\": [\n        \"certUsageTypes\",\n        \"usages\"\n    ]\n}\n</code></pre> <p> Response 200 OK </p>"},{"location":"api/openapi/#delete-certscertid","title":"DELETE /certs/{certId}","text":"<p>Delete a certificate.</p> <p>Input parameters</p> Parameter In Type Default Nullable Description <code>oauth2</code> header string N/A No <code>certId</code> path string No <p> Response 200 OK </p>"},{"location":"api/openapi/#get-certscertidconfig","title":"GET /certs/{certId}/config","text":"<p>Export the configuration of a certificate for import/export purposes.</p> <p>Input parameters</p> Parameter In Type Default Nullable Description <code>oauth2</code> header string N/A No <code>certId</code> path string No <p> Response 200 OK </p> application/json <p></p><pre><code>{\n    \"keyId\": \"039af178-3ca0-48f4-a2e4-7b1209f30376\",\n    \"id\": \"string\",\n    \"certUsageTypes\": [\n        \"access\"\n    ],\n    \"crt\": [\n        \"string\"\n    ],\n    \"subjectName\": \"string\",\n    \"description\": \"string\"\n}\n</code></pre> \u26a0\ufe0f This example has been generated automatically from the schema and it is not accurate. Refer to the schema for more information.<p></p> Schema of the response body <pre><code>{\n    \"type\": \"object\",\n    \"properties\": {\n        \"keyId\": {\n            \"type\": \"string\",\n            \"description\": \"The key ID this certificate is associated with\",\n            \"example\": \"039af178-3ca0-48f4-a2e4-7b1209f30376\"\n        },\n        \"id\": {\n            \"type\": \"string\"\n        },\n        \"certUsageTypes\": {\n            \"description\": \"Usage types for the certificate.\",\n            \"type\": \"array\",\n            \"items\": {\n                \"type\": \"string\",\n                \"enum\": [\n                    \"access\",\n                    \"signing\",\n                    \"trustList\",\n                    \"statusList\"\n                ]\n            }\n        },\n        \"crt\": {\n            \"description\": \"Certificate chain in PEM format (leaf first, then intermediates/CA).\\nIf not provided, a self-signed certificate will be generated.\",\n            \"type\": \"array\",\n            \"items\": {\n                \"type\": \"string\"\n            }\n        },\n        \"subjectName\": {\n            \"type\": \"string\",\n            \"description\": \"Subject name (CN) for self-signed certificate generation.\\nIf not provided, the tenant name will be used.\"\n        },\n        \"description\": {\n            \"type\": \"string\",\n            \"description\": \"Description of the key.\"\n        }\n    },\n    \"required\": [\n        \"keyId\",\n        \"certUsageTypes\"\n    ]\n}\n</code></pre>"},{"location":"api/openapi/#status-list-config","title":"status-list-config","text":""},{"location":"api/openapi/#get-status-list-config","title":"GET /status-list-config","text":"<p>Get status list configuration</p> Description <p>Returns the current status list configuration for the tenant. Fields not set use global defaults.</p> <p>Input parameters</p> Parameter In Type Default Nullable Description <code>oauth2</code> header string N/A No <p> Response 200 OK </p> application/json <p></p><pre><code>{\n    \"capacity\": 10000,\n    \"bits\": 10.12,\n    \"ttl\": 3600,\n    \"immediateUpdate\": true,\n    \"enableAggregation\": true\n}\n</code></pre> \u26a0\ufe0f This example has been generated automatically from the schema and it is not accurate. Refer to the schema for more information.<p></p> Schema of the response body <pre><code>{\n    \"type\": \"object\",\n    \"properties\": {\n        \"capacity\": {\n            \"type\": \"number\",\n            \"description\": \"The capacity of the status list. If not set, uses global STATUS_CAPACITY.\",\n            \"example\": 10000,\n            \"minimum\": 100\n        },\n        \"bits\": {\n            \"type\": \"number\",\n            \"description\": \"Bits per status entry: 1 (valid/revoked), 2 (with suspended), 4/8 (extended). If not set, uses global STATUS_BITS.\",\n            \"enum\": [\n                1,\n                2,\n                4,\n                8\n            ],\n            \"default\": 1\n        },\n        \"ttl\": {\n            \"type\": \"number\",\n            \"description\": \"TTL in seconds for the status list JWT. If not set, uses global STATUS_TTL.\",\n            \"example\": 3600,\n            \"minimum\": 60\n        },\n        \"immediateUpdate\": {\n            \"type\": \"boolean\",\n            \"description\": \"If true, regenerate JWT immediately on status changes. If false (default), use lazy regeneration on TTL expiry.\",\n            \"default\": false\n        },\n        \"enableAggregation\": {\n            \"type\": \"boolean\",\n            \"description\": \"If true, include aggregation_uri in status list JWTs for pre-fetching support (default: true).\",\n            \"default\": true\n        }\n    }\n}\n</code></pre>"},{"location":"api/openapi/#put-status-list-config","title":"PUT /status-list-config","text":"<p>Update status list configuration</p> Description <p>Update the status list configuration. Changes only affect newly created status lists. Set a field to null to reset to global default.</p> <p>Input parameters</p> Parameter In Type Default Nullable Description <code>oauth2</code> header string N/A No <p>Request body</p> application/json <p></p><pre><code>{\n    \"capacity\": 10000,\n    \"bits\": 10.12,\n    \"ttl\": 3600,\n    \"immediateUpdate\": true,\n    \"enableAggregation\": true\n}\n</code></pre> \u26a0\ufe0f This example has been generated automatically from the schema and it is not accurate. Refer to the schema for more information.<p></p> Schema of the request body <pre><code>{\n    \"type\": \"object\",\n    \"properties\": {\n        \"capacity\": {\n            \"type\": \"number\",\n            \"nullable\": true,\n            \"description\": \"The capacity of the status list. Set to null to reset to global default.\",\n            \"minimum\": 100,\n            \"example\": 10000\n        },\n        \"bits\": {\n            \"type\": \"number\",\n            \"nullable\": true,\n            \"description\": \"Bits per status entry. Set to null to reset to global default.\",\n            \"enum\": [\n                1,\n                2,\n                4,\n                8\n            ]\n        },\n        \"ttl\": {\n            \"type\": \"number\",\n            \"nullable\": true,\n            \"description\": \"TTL in seconds for the status list JWT. Set to null to reset to global default.\",\n            \"minimum\": 60,\n            \"example\": 3600\n        },\n        \"immediateUpdate\": {\n            \"type\": \"boolean\",\n            \"nullable\": true,\n            \"description\": \"If true, regenerate JWT on every status change. Set to null to reset to default (false).\"\n        },\n        \"enableAggregation\": {\n            \"type\": \"boolean\",\n            \"nullable\": true,\n            \"description\": \"If true, include aggregation_uri in status list JWTs for pre-fetching support. Set to null to reset to default (true).\"\n        }\n    }\n}\n</code></pre> <p> Response 200 OK </p> application/json <p></p><pre><code>{\n    \"capacity\": 10000,\n    \"bits\": 10.12,\n    \"ttl\": 3600,\n    \"immediateUpdate\": true,\n    \"enableAggregation\": true\n}\n</code></pre> \u26a0\ufe0f This example has been generated automatically from the schema and it is not accurate. Refer to the schema for more information.<p></p> Schema of the response body <pre><code>{\n    \"type\": \"object\",\n    \"properties\": {\n        \"capacity\": {\n            \"type\": \"number\",\n            \"description\": \"The capacity of the status list. If not set, uses global STATUS_CAPACITY.\",\n            \"example\": 10000,\n            \"minimum\": 100\n        },\n        \"bits\": {\n            \"type\": \"number\",\n            \"description\": \"Bits per status entry: 1 (valid/revoked), 2 (with suspended), 4/8 (extended). If not set, uses global STATUS_BITS.\",\n            \"enum\": [\n                1,\n                2,\n                4,\n                8\n            ],\n            \"default\": 1\n        },\n        \"ttl\": {\n            \"type\": \"number\",\n            \"description\": \"TTL in seconds for the status list JWT. If not set, uses global STATUS_TTL.\",\n            \"example\": 3600,\n            \"minimum\": 60\n        },\n        \"immediateUpdate\": {\n            \"type\": \"boolean\",\n            \"description\": \"If true, regenerate JWT immediately on status changes. If false (default), use lazy regeneration on TTL expiry.\",\n            \"default\": false\n        },\n        \"enableAggregation\": {\n            \"type\": \"boolean\",\n            \"description\": \"If true, include aggregation_uri in status list JWTs for pre-fetching support (default: true).\",\n            \"default\": true\n        }\n    }\n}\n</code></pre>"},{"location":"api/openapi/#delete-status-list-config","title":"DELETE /status-list-config","text":"<p>Reset status list configuration</p> Description <p>Reset the status list configuration to global defaults. Only affects newly created status lists.</p> <p>Input parameters</p> Parameter In Type Default Nullable Description <code>oauth2</code> header string N/A No <p> Response 204 No Content </p>"},{"location":"api/openapi/#status-lists","title":"status-lists","text":""},{"location":"api/openapi/#get-status-lists","title":"GET /status-lists","text":"<p>List all status lists</p> Description <p>Returns all status lists for the tenant, including their capacity and usage.</p> <p>Input parameters</p> Parameter In Type Default Nullable Description <code>oauth2</code> header string N/A No <p> Response 200 OK </p> application/json <p></p><pre><code>[\n    {\n        \"id\": \"550e8400-e29b-41d4-a716-446655440000\",\n        \"tenantId\": \"root\",\n        \"credentialConfigurationId\": \"org.iso.18013.5.1.mDL\",\n        \"certId\": \"my-status-list-cert\",\n        \"bits\": 1,\n        \"capacity\": 10000,\n        \"usedEntries\": 150,\n        \"availableEntries\": 9850,\n        \"uri\": \"https://example.com/root/status-management/status-list/550e8400-e29b-41d4-a716-446655440000\",\n        \"createdAt\": \"2024-01-15T10:30:00.000Z\",\n        \"expiresAt\": \"2024-01-15T11:30:00.000Z\"\n    }\n]\n</code></pre> \u26a0\ufe0f This example has been generated automatically from the schema and it is not accurate. Refer to the schema for more information.<p></p> Schema of the response body <pre><code>{\n    \"type\": \"array\",\n    \"items\": {\n        \"$ref\": \"#/components/schemas/StatusListResponseDto\"\n    }\n}\n</code></pre>"},{"location":"api/openapi/#post-status-lists","title":"POST /status-lists","text":"<p>Create a status list</p> Description <p>Creates a new status list. Optionally bind it to a specific credential configuration and/or certificate.</p> <p>Input parameters</p> Parameter In Type Default Nullable Description <code>oauth2</code> header string N/A No <p>Request body</p> application/json <p></p><pre><code>{\n    \"credentialConfigurationId\": \"org.iso.18013.5.1.mDL\",\n    \"certId\": \"my-status-list-cert\",\n    \"bits\": 1,\n    \"capacity\": 100000\n}\n</code></pre> \u26a0\ufe0f This example has been generated automatically from the schema and it is not accurate. Refer to the schema for more information.<p></p> Schema of the request body <pre><code>{\n    \"type\": \"object\",\n    \"properties\": {\n        \"credentialConfigurationId\": {\n            \"type\": \"string\",\n            \"description\": \"Credential configuration ID to bind this list exclusively to. Leave empty for a shared list.\",\n            \"example\": \"org.iso.18013.5.1.mDL\"\n        },\n        \"certId\": {\n            \"type\": \"string\",\n            \"description\": \"Certificate ID to use for signing. Leave empty to use the tenant's default StatusList certificate.\",\n            \"example\": \"my-status-list-cert\"\n        },\n        \"bits\": {\n            \"type\": \"number\",\n            \"description\": \"Bits per status value. More bits allow more status states. Defaults to tenant configuration.\",\n            \"enum\": [\n                1,\n                2,\n                4,\n                8\n            ],\n            \"example\": 1\n        },\n        \"capacity\": {\n            \"type\": \"number\",\n            \"description\": \"Maximum number of credential status entries. Defaults to tenant configuration.\",\n            \"minimum\": 1000,\n            \"example\": 100000\n        }\n    }\n}\n</code></pre> <p> Response 201 Created </p> application/json <p></p><pre><code>{\n    \"id\": \"550e8400-e29b-41d4-a716-446655440000\",\n    \"tenantId\": \"root\",\n    \"credentialConfigurationId\": \"org.iso.18013.5.1.mDL\",\n    \"certId\": \"my-status-list-cert\",\n    \"bits\": 1,\n    \"capacity\": 10000,\n    \"usedEntries\": 150,\n    \"availableEntries\": 9850,\n    \"uri\": \"https://example.com/root/status-management/status-list/550e8400-e29b-41d4-a716-446655440000\",\n    \"createdAt\": \"2024-01-15T10:30:00.000Z\",\n    \"expiresAt\": \"2024-01-15T11:30:00.000Z\"\n}\n</code></pre> \u26a0\ufe0f This example has been generated automatically from the schema and it is not accurate. Refer to the schema for more information.<p></p> Schema of the response body <pre><code>{\n    \"type\": \"object\",\n    \"properties\": {\n        \"id\": {\n            \"type\": \"string\",\n            \"description\": \"Unique identifier for the status list\",\n            \"example\": \"550e8400-e29b-41d4-a716-446655440000\"\n        },\n        \"tenantId\": {\n            \"type\": \"string\",\n            \"description\": \"The tenant ID\",\n            \"example\": \"root\"\n        },\n        \"credentialConfigurationId\": {\n            \"type\": \"string\",\n            \"nullable\": true,\n            \"description\": \"Credential configuration ID this list is bound to. Null means shared.\",\n            \"example\": \"org.iso.18013.5.1.mDL\"\n        },\n        \"certId\": {\n            \"type\": \"string\",\n            \"nullable\": true,\n            \"description\": \"Certificate ID used for signing. Null means using the tenant's default.\",\n            \"example\": \"my-status-list-cert\"\n        },\n        \"bits\": {\n            \"type\": \"number\",\n            \"description\": \"Bits per status value\",\n            \"enum\": [\n                1,\n                2,\n                4,\n                8\n            ],\n            \"example\": 1\n        },\n        \"capacity\": {\n            \"type\": \"number\",\n            \"description\": \"Total capacity of the status list\",\n            \"example\": 10000\n        },\n        \"usedEntries\": {\n            \"type\": \"number\",\n            \"description\": \"Number of entries in use\",\n            \"example\": 150\n        },\n        \"availableEntries\": {\n            \"type\": \"number\",\n            \"description\": \"Number of available entries\",\n            \"example\": 9850\n        },\n        \"uri\": {\n            \"type\": \"string\",\n            \"description\": \"The public URI for this status list\",\n            \"example\": \"https://example.com/root/status-management/status-list/550e8400-e29b-41d4-a716-446655440000\"\n        },\n        \"createdAt\": {\n            \"format\": \"date-time\",\n            \"type\": \"string\",\n            \"description\": \"Creation timestamp\",\n            \"example\": \"2024-01-15T10:30:00.000Z\"\n        },\n        \"expiresAt\": {\n            \"format\": \"date-time\",\n            \"type\": \"string\",\n            \"nullable\": true,\n            \"description\": \"JWT expiration timestamp. Null if JWT has not been generated yet.\",\n            \"example\": \"2024-01-15T11:30:00.000Z\"\n        }\n    },\n    \"required\": [\n        \"id\",\n        \"tenantId\",\n        \"bits\",\n        \"capacity\",\n        \"usedEntries\",\n        \"availableEntries\",\n        \"uri\",\n        \"createdAt\"\n    ]\n}\n</code></pre>"},{"location":"api/openapi/#get-status-listslistid","title":"GET /status-lists/{listId}","text":"<p>Get a status list</p> Description <p>Returns details for a specific status list.</p> <p>Input parameters</p> Parameter In Type Default Nullable Description <code>oauth2</code> header string N/A No <code>listId</code> path string No The status list ID <p> Response 200 OK </p> application/json <p></p><pre><code>{\n    \"id\": \"550e8400-e29b-41d4-a716-446655440000\",\n    \"tenantId\": \"root\",\n    \"credentialConfigurationId\": \"org.iso.18013.5.1.mDL\",\n    \"certId\": \"my-status-list-cert\",\n    \"bits\": 1,\n    \"capacity\": 10000,\n    \"usedEntries\": 150,\n    \"availableEntries\": 9850,\n    \"uri\": \"https://example.com/root/status-management/status-list/550e8400-e29b-41d4-a716-446655440000\",\n    \"createdAt\": \"2024-01-15T10:30:00.000Z\",\n    \"expiresAt\": \"2024-01-15T11:30:00.000Z\"\n}\n</code></pre> \u26a0\ufe0f This example has been generated automatically from the schema and it is not accurate. Refer to the schema for more information.<p></p> Schema of the response body <pre><code>{\n    \"type\": \"object\",\n    \"properties\": {\n        \"id\": {\n            \"type\": \"string\",\n            \"description\": \"Unique identifier for the status list\",\n            \"example\": \"550e8400-e29b-41d4-a716-446655440000\"\n        },\n        \"tenantId\": {\n            \"type\": \"string\",\n            \"description\": \"The tenant ID\",\n            \"example\": \"root\"\n        },\n        \"credentialConfigurationId\": {\n            \"type\": \"string\",\n            \"nullable\": true,\n            \"description\": \"Credential configuration ID this list is bound to. Null means shared.\",\n            \"example\": \"org.iso.18013.5.1.mDL\"\n        },\n        \"certId\": {\n            \"type\": \"string\",\n            \"nullable\": true,\n            \"description\": \"Certificate ID used for signing. Null means using the tenant's default.\",\n            \"example\": \"my-status-list-cert\"\n        },\n        \"bits\": {\n            \"type\": \"number\",\n            \"description\": \"Bits per status value\",\n            \"enum\": [\n                1,\n                2,\n                4,\n                8\n            ],\n            \"example\": 1\n        },\n        \"capacity\": {\n            \"type\": \"number\",\n            \"description\": \"Total capacity of the status list\",\n            \"example\": 10000\n        },\n        \"usedEntries\": {\n            \"type\": \"number\",\n            \"description\": \"Number of entries in use\",\n            \"example\": 150\n        },\n        \"availableEntries\": {\n            \"type\": \"number\",\n            \"description\": \"Number of available entries\",\n            \"example\": 9850\n        },\n        \"uri\": {\n            \"type\": \"string\",\n            \"description\": \"The public URI for this status list\",\n            \"example\": \"https://example.com/root/status-management/status-list/550e8400-e29b-41d4-a716-446655440000\"\n        },\n        \"createdAt\": {\n            \"format\": \"date-time\",\n            \"type\": \"string\",\n            \"description\": \"Creation timestamp\",\n            \"example\": \"2024-01-15T10:30:00.000Z\"\n        },\n        \"expiresAt\": {\n            \"format\": \"date-time\",\n            \"type\": \"string\",\n            \"nullable\": true,\n            \"description\": \"JWT expiration timestamp. Null if JWT has not been generated yet.\",\n            \"example\": \"2024-01-15T11:30:00.000Z\"\n        }\n    },\n    \"required\": [\n        \"id\",\n        \"tenantId\",\n        \"bits\",\n        \"capacity\",\n        \"usedEntries\",\n        \"availableEntries\",\n        \"uri\",\n        \"createdAt\"\n    ]\n}\n</code></pre>"},{"location":"api/openapi/#patch-status-listslistid","title":"PATCH /status-lists/{listId}","text":"<p>Update a status list</p> Description <p>Update a status list's credential configuration binding and/or certificate.</p> <p>Input parameters</p> Parameter In Type Default Nullable Description <code>oauth2</code> header string N/A No <code>listId</code> path string No The status list ID <p>Request body</p> application/json <p></p><pre><code>{\n    \"credentialConfigurationId\": \"org.iso.18013.5.1.mDL\",\n    \"certId\": \"my-status-list-cert\"\n}\n</code></pre> \u26a0\ufe0f This example has been generated automatically from the schema and it is not accurate. Refer to the schema for more information.<p></p> Schema of the request body <pre><code>{\n    \"type\": \"object\",\n    \"properties\": {\n        \"credentialConfigurationId\": {\n            \"type\": \"string\",\n            \"nullable\": true,\n            \"description\": \"Credential configuration ID to bind this list exclusively to. Set to null to make this a shared list.\",\n            \"example\": \"org.iso.18013.5.1.mDL\"\n        },\n        \"certId\": {\n            \"type\": \"string\",\n            \"nullable\": true,\n            \"description\": \"Certificate ID to use for signing. Set to null to use the tenant's default StatusList certificate.\",\n            \"example\": \"my-status-list-cert\"\n        }\n    }\n}\n</code></pre> <p> Response 200 OK </p> application/json <p></p><pre><code>{\n    \"id\": \"550e8400-e29b-41d4-a716-446655440000\",\n    \"tenantId\": \"root\",\n    \"credentialConfigurationId\": \"org.iso.18013.5.1.mDL\",\n    \"certId\": \"my-status-list-cert\",\n    \"bits\": 1,\n    \"capacity\": 10000,\n    \"usedEntries\": 150,\n    \"availableEntries\": 9850,\n    \"uri\": \"https://example.com/root/status-management/status-list/550e8400-e29b-41d4-a716-446655440000\",\n    \"createdAt\": \"2024-01-15T10:30:00.000Z\",\n    \"expiresAt\": \"2024-01-15T11:30:00.000Z\"\n}\n</code></pre> \u26a0\ufe0f This example has been generated automatically from the schema and it is not accurate. Refer to the schema for more information.<p></p> Schema of the response body <pre><code>{\n    \"type\": \"object\",\n    \"properties\": {\n        \"id\": {\n            \"type\": \"string\",\n            \"description\": \"Unique identifier for the status list\",\n            \"example\": \"550e8400-e29b-41d4-a716-446655440000\"\n        },\n        \"tenantId\": {\n            \"type\": \"string\",\n            \"description\": \"The tenant ID\",\n            \"example\": \"root\"\n        },\n        \"credentialConfigurationId\": {\n            \"type\": \"string\",\n            \"nullable\": true,\n            \"description\": \"Credential configuration ID this list is bound to. Null means shared.\",\n            \"example\": \"org.iso.18013.5.1.mDL\"\n        },\n        \"certId\": {\n            \"type\": \"string\",\n            \"nullable\": true,\n            \"description\": \"Certificate ID used for signing. Null means using the tenant's default.\",\n            \"example\": \"my-status-list-cert\"\n        },\n        \"bits\": {\n            \"type\": \"number\",\n            \"description\": \"Bits per status value\",\n            \"enum\": [\n                1,\n                2,\n                4,\n                8\n            ],\n            \"example\": 1\n        },\n        \"capacity\": {\n            \"type\": \"number\",\n            \"description\": \"Total capacity of the status list\",\n            \"example\": 10000\n        },\n        \"usedEntries\": {\n            \"type\": \"number\",\n            \"description\": \"Number of entries in use\",\n            \"example\": 150\n        },\n        \"availableEntries\": {\n            \"type\": \"number\",\n            \"description\": \"Number of available entries\",\n            \"example\": 9850\n        },\n        \"uri\": {\n            \"type\": \"string\",\n            \"description\": \"The public URI for this status list\",\n            \"example\": \"https://example.com/root/status-management/status-list/550e8400-e29b-41d4-a716-446655440000\"\n        },\n        \"createdAt\": {\n            \"format\": \"date-time\",\n            \"type\": \"string\",\n            \"description\": \"Creation timestamp\",\n            \"example\": \"2024-01-15T10:30:00.000Z\"\n        },\n        \"expiresAt\": {\n            \"format\": \"date-time\",\n            \"type\": \"string\",\n            \"nullable\": true,\n            \"description\": \"JWT expiration timestamp. Null if JWT has not been generated yet.\",\n            \"example\": \"2024-01-15T11:30:00.000Z\"\n        }\n    },\n    \"required\": [\n        \"id\",\n        \"tenantId\",\n        \"bits\",\n        \"capacity\",\n        \"usedEntries\",\n        \"availableEntries\",\n        \"uri\",\n        \"createdAt\"\n    ]\n}\n</code></pre>"},{"location":"api/openapi/#delete-status-listslistid","title":"DELETE /status-lists/{listId}","text":"<p>Delete a status list</p> Description <p>Delete a status list. Only allowed if no credentials are using it.</p> <p>Input parameters</p> Parameter In Type Default Nullable Description <code>oauth2</code> header string N/A No <code>listId</code> path string No The status list ID <p> Response 204 No Content </p>"},{"location":"api/openapi/#session","title":"Session","text":""},{"location":"api/openapi/#get-session","title":"GET /session","text":"<p>Retrieves all sessions.</p> <p>Input parameters</p> Parameter In Type Default Nullable Description <code>oauth2</code> header string N/A No <p> Response 200 OK </p> application/json <p></p><pre><code>[\n    {\n        \"status\": \"active\",\n        \"id\": \"string\",\n        \"createdAt\": \"2022-04-13T15:42:05.901Z\",\n        \"updatedAt\": \"2022-04-13T15:42:05.901Z\",\n        \"expiresAt\": \"2022-04-13T15:42:05.901Z\",\n        \"useDcApi\": true,\n        \"tenantId\": \"string\",\n        \"tenant\": null,\n        \"authorization_code\": \"string\",\n        \"request_uri\": \"string\",\n        \"auth_queries\": null,\n        \"offer\": {},\n        \"offerUrl\": \"string\",\n        \"credentialPayload\": null,\n        \"notifyWebhook\": null,\n        \"notifications\": [\n            {}\n        ],\n        \"requestId\": \"string\",\n        \"requestUrl\": \"string\",\n        \"requestObject\": \"string\",\n        \"credentials\": [\n            {}\n        ],\n        \"vp_nonce\": \"string\",\n        \"clientId\": \"string\",\n        \"responseUri\": \"string\",\n        \"redirectUri\": \"string\",\n        \"parsedWebhook\": null,\n        \"transaction_data\": [\n            {\n                \"type\": \"string\",\n                \"credential_ids\": [\n                    \"string\"\n                ]\n            }\n        ],\n        \"externalIssuer\": \"string\",\n        \"externalSubject\": \"string\"\n    }\n]\n</code></pre> \u26a0\ufe0f This example has been generated automatically from the schema and it is not accurate. Refer to the schema for more information.<p></p> Schema of the response body <pre><code>{\n    \"type\": \"array\",\n    \"items\": {\n        \"$ref\": \"#/components/schemas/Session\"\n    }\n}\n</code></pre>"},{"location":"api/openapi/#get-sessionid","title":"GET /session/{id}","text":"<p>Retrieves the session information for a given session ID.</p> <p>Input parameters</p> Parameter In Type Default Nullable Description <code>oauth2</code> header string N/A No <code>id</code> path string No The session ID <p> Response 200 OK </p> application/json <p></p><pre><code>{\n    \"status\": \"active\",\n    \"id\": \"string\",\n    \"createdAt\": \"2022-04-13T15:42:05.901Z\",\n    \"updatedAt\": \"2022-04-13T15:42:05.901Z\",\n    \"expiresAt\": \"2022-04-13T15:42:05.901Z\",\n    \"useDcApi\": true,\n    \"tenantId\": \"string\",\n    \"tenant\": null,\n    \"authorization_code\": \"string\",\n    \"request_uri\": \"string\",\n    \"auth_queries\": null,\n    \"offer\": {},\n    \"offerUrl\": \"string\",\n    \"credentialPayload\": null,\n    \"notifyWebhook\": null,\n    \"notifications\": [\n        {}\n    ],\n    \"requestId\": \"string\",\n    \"requestUrl\": \"string\",\n    \"requestObject\": \"string\",\n    \"credentials\": [\n        {}\n    ],\n    \"vp_nonce\": \"string\",\n    \"clientId\": \"string\",\n    \"responseUri\": \"string\",\n    \"redirectUri\": \"string\",\n    \"parsedWebhook\": null,\n    \"transaction_data\": [\n        {\n            \"type\": \"string\",\n            \"credential_ids\": [\n                \"string\"\n            ]\n        }\n    ],\n    \"externalIssuer\": \"string\",\n    \"externalSubject\": \"string\"\n}\n</code></pre> \u26a0\ufe0f This example has been generated automatically from the schema and it is not accurate. Refer to the schema for more information.<p></p> Schema of the response body <pre><code>{\n    \"type\": \"object\",\n    \"properties\": {\n        \"status\": {\n            \"description\": \"Status of the session.\",\n            \"enum\": [\n                \"active\",\n                \"fetched\",\n                \"completed\",\n                \"expired\",\n                \"failed\"\n            ],\n            \"type\": \"string\"\n        },\n        \"id\": {\n            \"type\": \"string\",\n            \"description\": \"Unique identifier for the session.\"\n        },\n        \"createdAt\": {\n            \"format\": \"date-time\",\n            \"type\": \"string\",\n            \"description\": \"The timestamp when the request was created.\"\n        },\n        \"updatedAt\": {\n            \"format\": \"date-time\",\n            \"type\": \"string\",\n            \"description\": \"The timestamp when the request was last updated.\"\n        },\n        \"expiresAt\": {\n            \"format\": \"date-time\",\n            \"type\": \"string\",\n            \"description\": \"The timestamp when the request is set to expire.\"\n        },\n        \"useDcApi\": {\n            \"type\": \"boolean\",\n            \"description\": \"Flag indicating whether to use the DC API for the presentation request.\"\n        },\n        \"tenantId\": {\n            \"type\": \"string\",\n            \"description\": \"Tenant ID for multi-tenancy support.\"\n        },\n        \"tenant\": {\n            \"description\": \"The tenant that owns this object.\",\n            \"allOf\": [\n                {\n                    \"$ref\": \"#/components/schemas/TenantEntity\"\n                }\n            ]\n        },\n        \"authorization_code\": {\n            \"type\": \"string\"\n        },\n        \"request_uri\": {\n            \"type\": \"string\",\n            \"description\": \"Request URI from the authorization request.\"\n        },\n        \"auth_queries\": {\n            \"description\": \"Authorization queries associated with the session.\\nEncrypted at rest.\",\n            \"allOf\": [\n                {\n                    \"$ref\": \"#/components/schemas/AuthorizeQueries\"\n                }\n            ]\n        },\n        \"offer\": {\n            \"description\": \"Credential offer object containing details about the credential offer or presentation request.\\nEncrypted at rest.\",\n            \"type\": \"object\"\n        },\n        \"offerUrl\": {\n            \"type\": \"string\",\n            \"description\": \"Offer URL for the credential offer.\"\n        },\n        \"credentialPayload\": {\n            \"description\": \"Credential payload containing the offer request details.\\nEncrypted at rest - may contain sensitive claim data.\",\n            \"allOf\": [\n                {\n                    \"$ref\": \"#/components/schemas/OfferRequestDto\"\n                }\n            ]\n        },\n        \"notifyWebhook\": {\n            \"description\": \"Webhook configuration to send the result of the notification response.\",\n            \"allOf\": [\n                {\n                    \"$ref\": \"#/components/schemas/WebhookConfig\"\n                }\n            ]\n        },\n        \"notifications\": {\n            \"description\": \"Notifications associated with the session.\",\n            \"type\": \"array\",\n            \"items\": {\n                \"type\": \"object\"\n            }\n        },\n        \"requestId\": {\n            \"type\": \"string\"\n        },\n        \"requestUrl\": {\n            \"type\": \"string\",\n            \"description\": \"The URL of the presentation auth request.\"\n        },\n        \"requestObject\": {\n            \"type\": \"string\",\n            \"description\": \"Signed presentation auth request.\"\n        },\n        \"credentials\": {\n            \"description\": \"Verified credentials from the presentation process.\\nEncrypted at rest - contains personal information.\",\n            \"type\": \"array\",\n            \"items\": {\n                \"type\": \"object\"\n            }\n        },\n        \"vp_nonce\": {\n            \"type\": \"string\",\n            \"description\": \"Noncce from the Verifiable Presentation request.\"\n        },\n        \"clientId\": {\n            \"type\": \"string\",\n            \"description\": \"Client ID used in the OID4VP authorization request.\"\n        },\n        \"responseUri\": {\n            \"type\": \"string\",\n            \"description\": \"Response URI used in the OID4VP authorization request.\"\n        },\n        \"redirectUri\": {\n            \"type\": \"string\",\n            \"nullable\": true,\n            \"description\": \"Redirect URI to which the user-agent should be redirected after the presentation is completed.\"\n        },\n        \"parsedWebhook\": {\n            \"description\": \"Where to send the claims webhook response.\",\n            \"allOf\": [\n                {\n                    \"$ref\": \"#/components/schemas/WebhookConfig\"\n                }\n            ]\n        },\n        \"transaction_data\": {\n            \"description\": \"Transaction data to include in the OID4VP authorization request.\\nCan be overridden per-request from the presentation configuration.\",\n            \"type\": \"array\",\n            \"items\": {\n                \"$ref\": \"#/components/schemas/TransactionData\"\n            }\n        },\n        \"externalIssuer\": {\n            \"type\": \"string\"\n        },\n        \"externalSubject\": {\n            \"type\": \"string\",\n            \"description\": \"The subject (sub) from the external authorization server token.\\nUsed to identify the user at the external AS.\"\n        }\n    },\n    \"required\": [\n        \"status\",\n        \"id\",\n        \"createdAt\",\n        \"updatedAt\",\n        \"useDcApi\",\n        \"tenantId\",\n        \"tenant\",\n        \"notifications\"\n    ]\n}\n</code></pre>"},{"location":"api/openapi/#delete-sessionid","title":"DELETE /session/{id}","text":"<p>Deletes a session by its ID</p> <p>Input parameters</p> Parameter In Type Default Nullable Description <code>oauth2</code> header string N/A No <code>id</code> path string No <p> Response 200 OK </p>"},{"location":"api/openapi/#post-sessionrevoke","title":"POST /session/revoke","text":"<p>Update the status of the credentials of a specific session.</p> <p>Input parameters</p> Parameter In Type Default Nullable Description <code>oauth2</code> header string N/A No <p>Request body</p> application/json <p></p><pre><code>{\n    \"sessionId\": \"string\",\n    \"credentialConfigurationId\": \"string\",\n    \"status\": 10.12\n}\n</code></pre> \u26a0\ufe0f This example has been generated automatically from the schema and it is not accurate. Refer to the schema for more information.<p></p> Schema of the request body <pre><code>{\n    \"type\": \"object\",\n    \"properties\": {\n        \"sessionId\": {\n            \"type\": \"string\",\n            \"description\": \"The session ID of the user\"\n        },\n        \"credentialConfigurationId\": {\n            \"type\": \"string\",\n            \"description\": \"The ID of the credential configuration\\nThis is optional, if not provided, all credentials will be revoked of the session.\"\n        },\n        \"status\": {\n            \"type\": \"number\",\n            \"description\": \"The status of the credential\\n0 = valid, 1 = revoked, 2 = suspended\"\n        }\n    },\n    \"required\": [\n        \"sessionId\",\n        \"status\"\n    ]\n}\n</code></pre> <p> Response 201 Created </p>"},{"location":"api/openapi/#get-session-config","title":"GET /session-config","text":"<p>Get session storage configuration</p> Description <p>Returns the session storage configuration for the current tenant.</p> <p>Input parameters</p> Parameter In Type Default Nullable Description <code>oauth2</code> header string N/A No <p> Response 200 OK </p> application/json <p></p><pre><code>{\n    \"ttlSeconds\": 86400,\n    \"cleanupMode\": \"full\"\n}\n</code></pre> \u26a0\ufe0f This example has been generated automatically from the schema and it is not accurate. Refer to the schema for more information.<p></p> Schema of the response body <pre><code>{\n    \"type\": \"object\",\n    \"properties\": {\n        \"ttlSeconds\": {\n            \"type\": \"number\",\n            \"description\": \"Time-to-live for sessions in seconds. If not set, uses global SESSION_TTL.\",\n            \"example\": 86400,\n            \"minimum\": 60\n        },\n        \"cleanupMode\": {\n            \"type\": \"string\",\n            \"description\": \"Cleanup mode: 'full' deletes everything, 'anonymize' keeps metadata but removes PII.\",\n            \"enum\": [\n                \"full\",\n                \"anonymize\"\n            ],\n            \"default\": \"full\"\n        }\n    }\n}\n</code></pre>"},{"location":"api/openapi/#put-session-config","title":"PUT /session-config","text":"<p>Update session storage configuration</p> Description <p>Updates the session storage configuration for the current tenant.</p> <p>Input parameters</p> Parameter In Type Default Nullable Description <code>oauth2</code> header string N/A No <p>Request body</p> application/json <p></p><pre><code>{\n    \"ttlSeconds\": 86400,\n    \"cleanupMode\": \"full\"\n}\n</code></pre> \u26a0\ufe0f This example has been generated automatically from the schema and it is not accurate. Refer to the schema for more information.<p></p> Schema of the request body <pre><code>{\n    \"type\": \"object\",\n    \"properties\": {\n        \"ttlSeconds\": {\n            \"type\": \"number\",\n            \"nullable\": true,\n            \"description\": \"Time-to-live for sessions in seconds. Set to null to use global default.\",\n            \"minimum\": 60,\n            \"example\": 86400\n        },\n        \"cleanupMode\": {\n            \"description\": \"Cleanup mode: 'full' deletes everything, 'anonymize' keeps metadata but removes PII.\",\n            \"enum\": [\n                \"full\",\n                \"anonymize\"\n            ],\n            \"type\": \"string\",\n            \"default\": \"full\"\n        }\n    }\n}\n</code></pre> <p> Response 200 OK </p> application/json <p></p><pre><code>{\n    \"ttlSeconds\": 86400,\n    \"cleanupMode\": \"full\"\n}\n</code></pre> \u26a0\ufe0f This example has been generated automatically from the schema and it is not accurate. Refer to the schema for more information.<p></p> Schema of the response body <pre><code>{\n    \"type\": \"object\",\n    \"properties\": {\n        \"ttlSeconds\": {\n            \"type\": \"number\",\n            \"description\": \"Time-to-live for sessions in seconds. If not set, uses global SESSION_TTL.\",\n            \"example\": 86400,\n            \"minimum\": 60\n        },\n        \"cleanupMode\": {\n            \"type\": \"string\",\n            \"description\": \"Cleanup mode: 'full' deletes everything, 'anonymize' keeps metadata but removes PII.\",\n            \"enum\": [\n                \"full\",\n                \"anonymize\"\n            ],\n            \"default\": \"full\"\n        }\n    }\n}\n</code></pre>"},{"location":"api/openapi/#delete-session-config","title":"DELETE /session-config","text":"<p>Reset session storage configuration</p> Description <p>Resets the session storage configuration to use global defaults.</p> <p>Input parameters</p> Parameter In Type Default Nullable Description <code>oauth2</code> header string N/A No <p> Response 200 OK </p>"},{"location":"api/openapi/#session-events","title":"Session Events","text":""},{"location":"api/openapi/#get-sessionidevents","title":"GET /session/{id}/events","text":"<p>Subscribe to session status updates</p> Description <p>Server-Sent Events endpoint for real-time session status updates. Requires JWT authentication via query parameter.</p> <p>Input parameters</p> Parameter In Type Default Nullable Description <code>id</code> path string No Session ID to subscribe to <code>token</code> query string No JWT access token for authentication <p> Response 200 OK </p>"},{"location":"api/openapi/#issuer","title":"Issuer","text":""},{"location":"api/openapi/#get-issuerconfig","title":"GET /issuer/config","text":"<p>Returns the issuance configurations for this tenant.</p> <p>Input parameters</p> Parameter In Type Default Nullable Description <code>oauth2</code> header string N/A No <p> Response 200 OK </p> application/json <p></p><pre><code>{\n    \"chainedAs\": null,\n    \"tenant\": null,\n    \"authServers\": [\n        \"string\"\n    ],\n    \"batchSize\": 10.12,\n    \"dPopRequired\": true,\n    \"walletAttestationRequired\": true,\n    \"walletProviderTrustLists\": [\n        \"string\"\n    ],\n    \"display\": [\n        {\n            \"name\": \"string\",\n            \"locale\": \"string\",\n            \"logo\": {\n                \"uri\": \"string\",\n                \"alt_text\": \"string\"\n            }\n        }\n    ],\n    \"createdAt\": \"2022-04-13T15:42:05.901Z\",\n    \"updatedAt\": \"2022-04-13T15:42:05.901Z\"\n}\n</code></pre> \u26a0\ufe0f This example has been generated automatically from the schema and it is not accurate. Refer to the schema for more information.<p></p> Schema of the response body <pre><code>{\n    \"type\": \"object\",\n    \"properties\": {\n        \"chainedAs\": {\n            \"description\": \"Configuration for Chained Authorization Server mode.\\nWhen enabled, EUDIPLO acts as an OAuth AS facade, delegating user authentication\\nto an upstream OIDC provider while issuing its own tokens with issuer_state.\",\n            \"allOf\": [\n                {\n                    \"$ref\": \"#/components/schemas/ChainedAsConfig\"\n                }\n            ]\n        },\n        \"tenant\": {\n            \"description\": \"The tenant that owns this object.\",\n            \"allOf\": [\n                {\n                    \"$ref\": \"#/components/schemas/TenantEntity\"\n                }\n            ]\n        },\n        \"authServers\": {\n            \"description\": \"Authentication server URL for the issuance process.\",\n            \"type\": \"array\",\n            \"items\": {\n                \"type\": \"string\"\n            }\n        },\n        \"batchSize\": {\n            \"type\": \"number\",\n            \"description\": \"Value to determine the amount of credentials that are issued in a batch.\\nDefault is 1.\"\n        },\n        \"dPopRequired\": {\n            \"type\": \"boolean\",\n            \"description\": \"Indicates whether DPoP is required for the issuance process. Default value is true.\"\n        },\n        \"walletAttestationRequired\": {\n            \"type\": \"boolean\",\n            \"description\": \"Indicates whether wallet attestation is required for the token endpoint.\\nWhen enabled, wallets must provide OAuth-Client-Attestation headers.\\nDefault value is false.\"\n        },\n        \"walletProviderTrustLists\": {\n            \"description\": \"URLs of trust lists containing trusted wallet providers.\\nThe wallet attestation's X.509 certificate will be validated against these trust lists.\\nIf empty and walletAttestationRequired is true, all wallet providers are rejected.\",\n            \"type\": \"array\",\n            \"items\": {\n                \"type\": \"string\"\n            }\n        },\n        \"display\": {\n            \"type\": \"array\",\n            \"items\": {\n                \"$ref\": \"#/components/schemas/DisplayInfo\"\n            }\n        },\n        \"createdAt\": {\n            \"format\": \"date-time\",\n            \"type\": \"string\",\n            \"description\": \"The timestamp when the VP request was created.\"\n        },\n        \"updatedAt\": {\n            \"format\": \"date-time\",\n            \"type\": \"string\",\n            \"description\": \"The timestamp when the VP request was last updated.\"\n        }\n    },\n    \"required\": [\n        \"tenant\",\n        \"display\",\n        \"createdAt\",\n        \"updatedAt\"\n    ]\n}\n</code></pre>"},{"location":"api/openapi/#post-issuerconfig","title":"POST /issuer/config","text":"<p>Stores the issuance configuration for this tenant.</p> <p>Input parameters</p> Parameter In Type Default Nullable Description <code>oauth2</code> header string N/A No <p>Request body</p> application/json <p></p><pre><code>{\n    \"chainedAs\": null,\n    \"authServers\": [\n        \"string\"\n    ],\n    \"batchSize\": 10.12,\n    \"dPopRequired\": true,\n    \"walletAttestationRequired\": true,\n    \"walletProviderTrustLists\": [\n        \"string\"\n    ],\n    \"display\": [\n        {\n            \"name\": \"string\",\n            \"locale\": \"string\",\n            \"logo\": {\n                \"uri\": \"string\",\n                \"alt_text\": \"string\"\n            }\n        }\n    ]\n}\n</code></pre> \u26a0\ufe0f This example has been generated automatically from the schema and it is not accurate. Refer to the schema for more information.<p></p> Schema of the request body <pre><code>{\n    \"type\": \"object\",\n    \"properties\": {\n        \"chainedAs\": {\n            \"description\": \"Configuration for Chained Authorization Server mode.\\nWhen enabled, EUDIPLO acts as an OAuth AS facade, delegating user authentication\\nto an upstream OIDC provider while issuing its own tokens with issuer_state.\",\n            \"allOf\": [\n                {\n                    \"$ref\": \"#/components/schemas/ChainedAsConfig\"\n                }\n            ]\n        },\n        \"authServers\": {\n            \"description\": \"Authentication server URL for the issuance process.\",\n            \"type\": \"array\",\n            \"items\": {\n                \"type\": \"string\"\n            }\n        },\n        \"batchSize\": {\n            \"type\": \"number\",\n            \"description\": \"Value to determine the amount of credentials that are issued in a batch.\\nDefault is 1.\"\n        },\n        \"dPopRequired\": {\n            \"type\": \"boolean\",\n            \"description\": \"Indicates whether DPoP is required for the issuance process. Default value is true.\"\n        },\n        \"walletAttestationRequired\": {\n            \"type\": \"boolean\",\n            \"description\": \"Indicates whether wallet attestation is required for the token endpoint.\\nWhen enabled, wallets must provide OAuth-Client-Attestation headers.\\nDefault value is false.\"\n        },\n        \"walletProviderTrustLists\": {\n            \"description\": \"URLs of trust lists containing trusted wallet providers.\\nThe wallet attestation's X.509 certificate will be validated against these trust lists.\\nIf empty and walletAttestationRequired is true, all wallet providers are rejected.\",\n            \"type\": \"array\",\n            \"items\": {\n                \"type\": \"string\"\n            }\n        },\n        \"display\": {\n            \"type\": \"array\",\n            \"items\": {\n                \"$ref\": \"#/components/schemas/DisplayInfo\"\n            }\n        }\n    },\n    \"required\": [\n        \"display\"\n    ]\n}\n</code></pre> <p> Response 201 Created </p> application/json Schema of the response body <pre><code>{\n    \"type\": \"object\"\n}\n</code></pre>"},{"location":"api/openapi/#get-issuercredentials","title":"GET /issuer/credentials","text":"<p>Returns the credential configurations for this tenant.</p> <p>Input parameters</p> Parameter In Type Default Nullable Description <code>oauth2</code> header string N/A No <p> Response 200 OK </p> application/json <p></p><pre><code>[\n    {\n        \"vct\": null,\n        \"iaeActions\": \"\",\n        \"embeddedDisclosurePolicy\": null,\n        \"id\": \"string\",\n        \"description\": \"string\",\n        \"tenant\": null,\n        \"config\": {\n            \"format\": \"mso_mdoc\",\n            \"display\": [\n                {\n                    \"name\": \"string\",\n                    \"description\": \"string\",\n                    \"locale\": \"string\",\n                    \"background_color\": \"string\",\n                    \"text_color\": \"string\",\n                    \"background_image\": {\n                        \"uri\": \"string\"\n                    },\n                    \"logo\": null\n                }\n            ],\n            \"scope\": \"string\",\n            \"docType\": \"string\",\n            \"namespace\": \"string\",\n            \"claimsByNamespace\": {}\n        },\n        \"claims\": {},\n        \"claimsWebhook\": null,\n        \"notificationWebhook\": null,\n        \"disclosureFrame\": {},\n        \"keyBinding\": true,\n        \"certId\": \"string\",\n        \"cert\": {\n            \"keyId\": \"039af178-3ca0-48f4-a2e4-7b1209f30376\",\n            \"id\": \"string\",\n            \"tenantId\": \"string\",\n            \"tenant\": null,\n            \"crt\": [\n                \"string\"\n            ],\n            \"usages\": [\n                {\n                    \"tenantId\": \"string\",\n                    \"certId\": \"string\",\n                    \"usage\": \"access\",\n                    \"cert\": null\n                }\n            ],\n            \"description\": \"string\",\n            \"key\": {\n                \"id\": \"string\",\n                \"description\": \"string\",\n                \"tenantId\": \"string\",\n                \"tenant\": null,\n                \"key\": {},\n                \"usage\": {},\n                \"certificates\": null,\n                \"createdAt\": \"2022-04-13T15:42:05.901Z\",\n                \"updatedAt\": \"2022-04-13T15:42:05.901Z\"\n            },\n            \"createdAt\": \"2022-04-13T15:42:05.901Z\",\n            \"updatedAt\": \"2022-04-13T15:42:05.901Z\"\n        },\n        \"statusManagement\": true,\n        \"lifeTime\": 10.12,\n        \"schema\": null\n    }\n]\n</code></pre> \u26a0\ufe0f This example has been generated automatically from the schema and it is not accurate. Refer to the schema for more information.<p></p> Schema of the response body <pre><code>{\n    \"type\": \"array\",\n    \"items\": {\n        \"$ref\": \"#/components/schemas/CredentialConfig\"\n    }\n}\n</code></pre>"},{"location":"api/openapi/#post-issuercredentials","title":"POST /issuer/credentials","text":"<p>Stores the credential configuration for this tenant.</p> <p>Input parameters</p> Parameter In Type Default Nullable Description <code>oauth2</code> header string N/A No <p>Request body</p> application/json <p></p><pre><code>{\n    \"vct\": null,\n    \"iaeActions\": \"\",\n    \"embeddedDisclosurePolicy\": null,\n    \"id\": \"string\",\n    \"description\": \"string\",\n    \"config\": {\n        \"format\": \"mso_mdoc\",\n        \"display\": [\n            {\n                \"name\": \"string\",\n                \"description\": \"string\",\n                \"locale\": \"string\",\n                \"background_color\": \"string\",\n                \"text_color\": \"string\",\n                \"background_image\": {\n                    \"uri\": \"string\"\n                },\n                \"logo\": null\n            }\n        ],\n        \"scope\": \"string\",\n        \"docType\": \"string\",\n        \"namespace\": \"string\",\n        \"claimsByNamespace\": {}\n    },\n    \"claims\": {},\n    \"claimsWebhook\": null,\n    \"notificationWebhook\": null,\n    \"disclosureFrame\": {},\n    \"keyBinding\": true,\n    \"certId\": \"string\",\n    \"statusManagement\": true,\n    \"lifeTime\": 10.12,\n    \"schema\": null\n}\n</code></pre> \u26a0\ufe0f This example has been generated automatically from the schema and it is not accurate. Refer to the schema for more information.<p></p> Schema of the request body <pre><code>{\n    \"type\": \"object\",\n    \"properties\": {\n        \"vct\": {\n            \"description\": \"VCT as a URI string (e.g., urn:eudi:pid:de:1) or as an object for EUDIPLO-hosted VCT\",\n            \"nullable\": true,\n            \"oneOf\": [\n                {\n                    \"type\": \"string\",\n                    \"description\": \"VCT URI string\"\n                },\n                {\n                    \"$ref\": \"#/components/schemas/VCT\"\n                }\n            ]\n        },\n        \"iaeActions\": {\n            \"type\": \"array\",\n            \"nullable\": true,\n            \"description\": \"List of IAE actions to execute before credential issuance\",\n            \"example\": \"\",\n            \"items\": {\n                \"oneOf\": [\n                    {\n                        \"$ref\": \"#/components/schemas/IaeActionOpenid4vpPresentation\"\n                    },\n                    {\n                        \"$ref\": \"#/components/schemas/IaeActionRedirectToWeb\"\n                    }\n                ]\n            }\n        },\n        \"embeddedDisclosurePolicy\": {\n            \"nullable\": true,\n            \"description\": \"Embedded disclosure policy (discriminated union by `policy`).\\nThe discriminator makes class-transformer instantiate the right subclass,\\nand then class-validator runs that subclass\u2019s rules.\",\n            \"oneOf\": [\n                {\n                    \"$ref\": \"#/components/schemas/AttestationBasedPolicy\"\n                },\n                {\n                    \"$ref\": \"#/components/schemas/NoneTrustPolicy\"\n                },\n                {\n                    \"$ref\": \"#/components/schemas/AllowListPolicy\"\n                },\n                {\n                    \"$ref\": \"#/components/schemas/RootOfTrustPolicy\"\n                }\n            ],\n            \"allOf\": [\n                {\n                    \"$ref\": \"#/components/schemas/EmbeddedDisclosurePolicy\"\n                }\n            ]\n        },\n        \"id\": {\n            \"type\": \"string\"\n        },\n        \"description\": {\n            \"type\": \"string\",\n            \"nullable\": true\n        },\n        \"config\": {\n            \"$ref\": \"#/components/schemas/IssuerMetadataCredentialConfig\"\n        },\n        \"claims\": {\n            \"type\": \"object\",\n            \"nullable\": true\n        },\n        \"claimsWebhook\": {\n            \"nullable\": true,\n            \"description\": \"Webhook to receive claims for the issuance process.\",\n            \"allOf\": [\n                {\n                    \"$ref\": \"#/components/schemas/WebhookConfig\"\n                }\n            ]\n        },\n        \"notificationWebhook\": {\n            \"nullable\": true,\n            \"description\": \"Webhook to receive claims for the issuance process.\",\n            \"allOf\": [\n                {\n                    \"$ref\": \"#/components/schemas/WebhookConfig\"\n                }\n            ]\n        },\n        \"disclosureFrame\": {\n            \"type\": \"object\",\n            \"nullable\": true\n        },\n        \"keyBinding\": {\n            \"type\": \"boolean\"\n        },\n        \"certId\": {\n            \"type\": \"string\",\n            \"description\": \"Reference to the certificate used for signing.\\nNote: No DB-level FK constraint because CertEntity has a composite PK\\n(id + tenantId) and SET NULL behavior cannot work when tenantId is\\npart of this entity's own PK.\"\n        },\n        \"statusManagement\": {\n            \"type\": \"boolean\"\n        },\n        \"lifeTime\": {\n            \"type\": \"number\"\n        },\n        \"schema\": {\n            \"nullable\": true,\n            \"allOf\": [\n                {\n                    \"$ref\": \"#/components/schemas/SchemaResponse\"\n                }\n            ]\n        }\n    },\n    \"required\": [\n        \"id\",\n        \"config\"\n    ]\n}\n</code></pre> <p> Response 201 Created </p> application/json Schema of the response body <pre><code>{\n    \"type\": \"object\"\n}\n</code></pre>"},{"location":"api/openapi/#get-issuercredentialsid","title":"GET /issuer/credentials/{id}","text":"<p>Returns a specific credential configuration by ID.</p> <p>Input parameters</p> Parameter In Type Default Nullable Description <code>oauth2</code> header string N/A No <code>id</code> path string No <p> Response 200 OK </p> application/json <p></p><pre><code>{\n    \"vct\": null,\n    \"iaeActions\": \"\",\n    \"embeddedDisclosurePolicy\": null,\n    \"id\": \"string\",\n    \"description\": \"string\",\n    \"tenant\": null,\n    \"config\": {\n        \"format\": \"mso_mdoc\",\n        \"display\": [\n            {\n                \"name\": \"string\",\n                \"description\": \"string\",\n                \"locale\": \"string\",\n                \"background_color\": \"string\",\n                \"text_color\": \"string\",\n                \"background_image\": {\n                    \"uri\": \"string\"\n                },\n                \"logo\": null\n            }\n        ],\n        \"scope\": \"string\",\n        \"docType\": \"string\",\n        \"namespace\": \"string\",\n        \"claimsByNamespace\": {}\n    },\n    \"claims\": {},\n    \"claimsWebhook\": null,\n    \"notificationWebhook\": null,\n    \"disclosureFrame\": {},\n    \"keyBinding\": true,\n    \"certId\": \"string\",\n    \"cert\": {\n        \"keyId\": \"039af178-3ca0-48f4-a2e4-7b1209f30376\",\n        \"id\": \"string\",\n        \"tenantId\": \"string\",\n        \"tenant\": null,\n        \"crt\": [\n            \"string\"\n        ],\n        \"usages\": [\n            {\n                \"tenantId\": \"string\",\n                \"certId\": \"string\",\n                \"usage\": \"access\",\n                \"cert\": null\n            }\n        ],\n        \"description\": \"string\",\n        \"key\": {\n            \"id\": \"string\",\n            \"description\": \"string\",\n            \"tenantId\": \"string\",\n            \"tenant\": null,\n            \"key\": {},\n            \"usage\": {},\n            \"certificates\": null,\n            \"createdAt\": \"2022-04-13T15:42:05.901Z\",\n            \"updatedAt\": \"2022-04-13T15:42:05.901Z\"\n        },\n        \"createdAt\": \"2022-04-13T15:42:05.901Z\",\n        \"updatedAt\": \"2022-04-13T15:42:05.901Z\"\n    },\n    \"statusManagement\": true,\n    \"lifeTime\": 10.12,\n    \"schema\": null\n}\n</code></pre> \u26a0\ufe0f This example has been generated automatically from the schema and it is not accurate. Refer to the schema for more information.<p></p> Schema of the response body <pre><code>{\n    \"type\": \"object\",\n    \"properties\": {\n        \"vct\": {\n            \"description\": \"VCT as a URI string (e.g., urn:eudi:pid:de:1) or as an object for EUDIPLO-hosted VCT\",\n            \"nullable\": true,\n            \"oneOf\": [\n                {\n                    \"type\": \"string\",\n                    \"description\": \"VCT URI string\"\n                },\n                {\n                    \"$ref\": \"#/components/schemas/VCT\"\n                }\n            ]\n        },\n        \"iaeActions\": {\n            \"type\": \"array\",\n            \"nullable\": true,\n            \"description\": \"List of IAE actions to execute before credential issuance\",\n            \"example\": \"\",\n            \"items\": {\n                \"oneOf\": [\n                    {\n                        \"$ref\": \"#/components/schemas/IaeActionOpenid4vpPresentation\"\n                    },\n                    {\n                        \"$ref\": \"#/components/schemas/IaeActionRedirectToWeb\"\n                    }\n                ]\n            }\n        },\n        \"embeddedDisclosurePolicy\": {\n            \"nullable\": true,\n            \"description\": \"Embedded disclosure policy (discriminated union by `policy`).\\nThe discriminator makes class-transformer instantiate the right subclass,\\nand then class-validator runs that subclass\u2019s rules.\",\n            \"oneOf\": [\n                {\n                    \"$ref\": \"#/components/schemas/AttestationBasedPolicy\"\n                },\n                {\n                    \"$ref\": \"#/components/schemas/NoneTrustPolicy\"\n                },\n                {\n                    \"$ref\": \"#/components/schemas/AllowListPolicy\"\n                },\n                {\n                    \"$ref\": \"#/components/schemas/RootOfTrustPolicy\"\n                }\n            ],\n            \"allOf\": [\n                {\n                    \"$ref\": \"#/components/schemas/EmbeddedDisclosurePolicy\"\n                }\n            ]\n        },\n        \"id\": {\n            \"type\": \"string\"\n        },\n        \"description\": {\n            \"type\": \"string\",\n            \"nullable\": true\n        },\n        \"tenant\": {\n            \"description\": \"The tenant that owns this object.\",\n            \"allOf\": [\n                {\n                    \"$ref\": \"#/components/schemas/TenantEntity\"\n                }\n            ]\n        },\n        \"config\": {\n            \"$ref\": \"#/components/schemas/IssuerMetadataCredentialConfig\"\n        },\n        \"claims\": {\n            \"type\": \"object\",\n            \"nullable\": true\n        },\n        \"claimsWebhook\": {\n            \"nullable\": true,\n            \"description\": \"Webhook to receive claims for the issuance process.\",\n            \"allOf\": [\n                {\n                    \"$ref\": \"#/components/schemas/WebhookConfig\"\n                }\n            ]\n        },\n        \"notificationWebhook\": {\n            \"nullable\": true,\n            \"description\": \"Webhook to receive claims for the issuance process.\",\n            \"allOf\": [\n                {\n                    \"$ref\": \"#/components/schemas/WebhookConfig\"\n                }\n            ]\n        },\n        \"disclosureFrame\": {\n            \"type\": \"object\",\n            \"nullable\": true\n        },\n        \"keyBinding\": {\n            \"type\": \"boolean\"\n        },\n        \"certId\": {\n            \"type\": \"string\",\n            \"description\": \"Reference to the certificate used for signing.\\nNote: No DB-level FK constraint because CertEntity has a composite PK\\n(id + tenantId) and SET NULL behavior cannot work when tenantId is\\npart of this entity's own PK.\"\n        },\n        \"cert\": {\n            \"$ref\": \"#/components/schemas/CertEntity\"\n        },\n        \"statusManagement\": {\n            \"type\": \"boolean\"\n        },\n        \"lifeTime\": {\n            \"type\": \"number\"\n        },\n        \"schema\": {\n            \"nullable\": true,\n            \"allOf\": [\n                {\n                    \"$ref\": \"#/components/schemas/SchemaResponse\"\n                }\n            ]\n        }\n    },\n    \"required\": [\n        \"id\",\n        \"tenant\",\n        \"config\"\n    ]\n}\n</code></pre>"},{"location":"api/openapi/#patch-issuercredentialsid","title":"PATCH /issuer/credentials/{id}","text":"<p>Updates a credential configuration by ID.</p> <p>Input parameters</p> Parameter In Type Default Nullable Description <code>oauth2</code> header string N/A No <code>id</code> path string No <p>Request body</p> application/json <p></p><pre><code>{\n    \"vct\": null,\n    \"iaeActions\": \"\",\n    \"embeddedDisclosurePolicy\": null,\n    \"id\": \"string\",\n    \"description\": \"string\",\n    \"config\": {\n        \"format\": \"mso_mdoc\",\n        \"display\": [\n            {\n                \"name\": \"string\",\n                \"description\": \"string\",\n                \"locale\": \"string\",\n                \"background_color\": \"string\",\n                \"text_color\": \"string\",\n                \"background_image\": {\n                    \"uri\": \"string\"\n                },\n                \"logo\": null\n            }\n        ],\n        \"scope\": \"string\",\n        \"docType\": \"string\",\n        \"namespace\": \"string\",\n        \"claimsByNamespace\": {}\n    },\n    \"claims\": {},\n    \"claimsWebhook\": null,\n    \"notificationWebhook\": null,\n    \"disclosureFrame\": {},\n    \"keyBinding\": true,\n    \"certId\": \"string\",\n    \"statusManagement\": true,\n    \"lifeTime\": 10.12,\n    \"schema\": null\n}\n</code></pre> \u26a0\ufe0f This example has been generated automatically from the schema and it is not accurate. Refer to the schema for more information.<p></p> Schema of the request body <pre><code>{\n    \"type\": \"object\",\n    \"properties\": {\n        \"vct\": {\n            \"description\": \"VCT as a URI string (e.g., urn:eudi:pid:de:1) or as an object for EUDIPLO-hosted VCT\",\n            \"nullable\": true,\n            \"oneOf\": [\n                {\n                    \"type\": \"string\",\n                    \"description\": \"VCT URI string\"\n                },\n                {\n                    \"$ref\": \"#/components/schemas/VCT\"\n                }\n            ]\n        },\n        \"iaeActions\": {\n            \"type\": \"array\",\n            \"nullable\": true,\n            \"description\": \"List of IAE actions to execute before credential issuance\",\n            \"example\": \"\",\n            \"items\": {\n                \"oneOf\": [\n                    {\n                        \"$ref\": \"#/components/schemas/IaeActionOpenid4vpPresentation\"\n                    },\n                    {\n                        \"$ref\": \"#/components/schemas/IaeActionRedirectToWeb\"\n                    }\n                ]\n            }\n        },\n        \"embeddedDisclosurePolicy\": {\n            \"nullable\": true,\n            \"description\": \"Embedded disclosure policy (discriminated union by `policy`).\\nThe discriminator makes class-transformer instantiate the right subclass,\\nand then class-validator runs that subclass\u2019s rules.\",\n            \"oneOf\": [\n                {\n                    \"$ref\": \"#/components/schemas/AttestationBasedPolicy\"\n                },\n                {\n                    \"$ref\": \"#/components/schemas/NoneTrustPolicy\"\n                },\n                {\n                    \"$ref\": \"#/components/schemas/AllowListPolicy\"\n                },\n                {\n                    \"$ref\": \"#/components/schemas/RootOfTrustPolicy\"\n                }\n            ],\n            \"allOf\": [\n                {\n                    \"$ref\": \"#/components/schemas/EmbeddedDisclosurePolicy\"\n                }\n            ]\n        },\n        \"id\": {\n            \"type\": \"string\"\n        },\n        \"description\": {\n            \"type\": \"string\",\n            \"nullable\": true\n        },\n        \"config\": {\n            \"$ref\": \"#/components/schemas/IssuerMetadataCredentialConfig\"\n        },\n        \"claims\": {\n            \"type\": \"object\",\n            \"nullable\": true\n        },\n        \"claimsWebhook\": {\n            \"nullable\": true,\n            \"description\": \"Webhook to receive claims for the issuance process.\",\n            \"allOf\": [\n                {\n                    \"$ref\": \"#/components/schemas/WebhookConfig\"\n                }\n            ]\n        },\n        \"notificationWebhook\": {\n            \"nullable\": true,\n            \"description\": \"Webhook to receive claims for the issuance process.\",\n            \"allOf\": [\n                {\n                    \"$ref\": \"#/components/schemas/WebhookConfig\"\n                }\n            ]\n        },\n        \"disclosureFrame\": {\n            \"type\": \"object\",\n            \"nullable\": true\n        },\n        \"keyBinding\": {\n            \"type\": \"boolean\"\n        },\n        \"certId\": {\n            \"type\": \"string\",\n            \"description\": \"Reference to the certificate used for signing.\\nNote: No DB-level FK constraint because CertEntity has a composite PK\\n(id + tenantId) and SET NULL behavior cannot work when tenantId is\\npart of this entity's own PK.\"\n        },\n        \"statusManagement\": {\n            \"type\": \"boolean\"\n        },\n        \"lifeTime\": {\n            \"type\": \"number\"\n        },\n        \"schema\": {\n            \"nullable\": true,\n            \"allOf\": [\n                {\n                    \"$ref\": \"#/components/schemas/SchemaResponse\"\n                }\n            ]\n        }\n    }\n}\n</code></pre> <p> Response 200 OK </p> application/json Schema of the response body <pre><code>{\n    \"type\": \"object\"\n}\n</code></pre>"},{"location":"api/openapi/#delete-issuercredentialsid","title":"DELETE /issuer/credentials/{id}","text":"<p>Deletes an credential configuration.</p> <p>Input parameters</p> Parameter In Type Default Nullable Description <code>oauth2</code> header string N/A No <code>id</code> path string No <p> Response 200 OK </p>"},{"location":"api/openapi/#post-issueroffer","title":"POST /issuer/offer","text":"<p>Create an offer for a credential.</p> <p>Input parameters</p> Parameter In Type Default Nullable Description <code>oauth2</code> header string N/A No <p>Request body</p> application/json <pre><code>{\n    \"response_type\": \"uri\",\n    \"credentialConfigurationIds\": [\n        \"pid\"\n    ],\n    \"flow\": \"pre_authorized_code\"\n}\n</code></pre> Schema of the request body <pre><code>{\n    \"type\": \"object\",\n    \"properties\": {\n        \"response_type\": {\n            \"enum\": [\n                \"uri\",\n                \"dc-api\"\n            ],\n            \"type\": \"string\",\n            \"examples\": [\n                {\n                    \"value\": \"qrcode\"\n                }\n            ],\n            \"description\": \"The type of response expected for the offer request.\"\n        },\n        \"credentialClaims\": {\n            \"type\": \"object\",\n            \"description\": \"Credential claims configuration per credential. Keys must match credentialConfigurationIds.\",\n            \"properties\": {\n                \"additionalProperties\": {\n                    \"oneOf\": [\n                        {\n                            \"type\": \"object\",\n                            \"properties\": {\n                                \"type\": {\n                                    \"type\": \"string\",\n                                    \"enum\": [\n                                        \"inline\"\n                                    ]\n                                },\n                                \"claims\": {\n                                    \"type\": \"object\",\n                                    \"additionalProperties\": true\n                                }\n                            },\n                            \"required\": [\n                                \"type\",\n                                \"claims\"\n                            ]\n                        },\n                        {\n                            \"type\": \"object\",\n                            \"properties\": {\n                                \"type\": {\n                                    \"type\": \"string\",\n                                    \"enum\": [\n                                        \"webhook\"\n                                    ]\n                                },\n                                \"webhook\": {\n                                    \"type\": \"object\"\n                                }\n                            },\n                            \"required\": [\n                                \"type\",\n                                \"webhook\"\n                            ]\n                        }\n                    ]\n                }\n            },\n            \"example\": {\n                \"citizen\": {\n                    \"type\": \"inline\",\n                    \"claims\": {\n                        \"given_name\": \"John\",\n                        \"family_name\": \"Doe\"\n                    }\n                }\n            }\n        },\n        \"flow\": {\n            \"description\": \"The flow type for the offer request.\",\n            \"enum\": [\n                \"authorization_code\",\n                \"pre_authorized_code\"\n            ],\n            \"type\": \"string\"\n        },\n        \"tx_code\": {\n            \"type\": \"string\",\n            \"description\": \"Transaction code for pre-authorized code flow.\"\n        },\n        \"tx_code_description\": {\n            \"type\": \"string\",\n            \"description\": \"Description for the transaction code (e.g., \\\"Please enter the PIN sent to your email\\\").\"\n        },\n        \"credentialConfigurationIds\": {\n            \"description\": \"List of credential configuration ids to be included in the offer.\",\n            \"type\": \"array\",\n            \"items\": {\n                \"type\": \"string\"\n            }\n        },\n        \"authorization_server\": {\n            \"type\": \"string\",\n            \"description\": \"Optional authorization server to be used for this issuance flow.\"\n        },\n        \"notifyWebhook\": {\n            \"description\": \"Webhook to notify about the status of the issuance process.\",\n            \"allOf\": [\n                {\n                    \"$ref\": \"#/components/schemas/WebhookConfig\"\n                }\n            ]\n        }\n    },\n    \"required\": [\n        \"response_type\",\n        \"flow\",\n        \"credentialConfigurationIds\"\n    ]\n}\n</code></pre> <p> Response 201 Created </p> application/jsonimage/png <p></p><pre><code>{\n    \"uri\": \"string\",\n    \"crossDeviceUri\": \"string\",\n    \"session\": \"string\"\n}\n</code></pre> \u26a0\ufe0f This example has been generated automatically from the schema and it is not accurate. Refer to the schema for more information.<p></p> Schema of the response body <pre><code>{\n    \"type\": \"object\",\n    \"properties\": {\n        \"uri\": {\n            \"type\": \"string\"\n        },\n        \"crossDeviceUri\": {\n            \"type\": \"string\",\n            \"description\": \"URI for cross-device flows (no redirect after completion)\"\n        },\n        \"session\": {\n            \"type\": \"string\"\n        }\n    },\n    \"required\": [\n        \"uri\",\n        \"session\"\n    ]\n}\n</code></pre> <p></p><pre><code>{\n    \"uri\": \"string\",\n    \"crossDeviceUri\": \"string\",\n    \"session\": \"string\"\n}\n</code></pre> \u26a0\ufe0f This example has been generated automatically from the schema and it is not accurate. Refer to the schema for more information.<p></p> Schema of the response body <pre><code>{\n    \"type\": \"object\",\n    \"properties\": {\n        \"uri\": {\n            \"type\": \"string\"\n        },\n        \"crossDeviceUri\": {\n            \"type\": \"string\",\n            \"description\": \"URI for cross-device flows (no redirect after completion)\"\n        },\n        \"session\": {\n            \"type\": \"string\"\n        }\n    },\n    \"required\": [\n        \"uri\",\n        \"session\"\n    ]\n}\n</code></pre>"},{"location":"api/openapi/#post-issuerdeferredtransactionidcomplete","title":"POST /issuer/deferred/{transactionId}/complete","text":"<p>Complete a deferred credential transaction</p> Description <p>Completes a pending deferred credential transaction by providing the claims. The credential will be generated and marked as ready for wallet retrieval.</p> <p>Input parameters</p> Parameter In Type Default Nullable Description <code>oauth2</code> header string N/A No <code>transactionId</code> path string No <p>Request body</p> application/json <pre><code>{\n    \"claims\": {\n        \"given_name\": \"John\",\n        \"family_name\": \"Doe\",\n        \"birthdate\": \"1990-01-15\"\n    }\n}\n</code></pre> Schema of the request body <pre><code>{\n    \"type\": \"object\",\n    \"properties\": {}\n}\n</code></pre> <p> Response 200 OK </p> application/json Schema of the response body <pre><code>{\n    \"type\": \"object\",\n    \"properties\": {}\n}\n</code></pre> <p> Response 404 Not Found </p>"},{"location":"api/openapi/#post-issuerdeferredtransactionidfail","title":"POST /issuer/deferred/{transactionId}/fail","text":"<p>Fail a deferred credential transaction</p> Description <p>Marks a deferred credential transaction as failed. The wallet will receive an invalid_transaction_id error when attempting retrieval.</p> <p>Input parameters</p> Parameter In Type Default Nullable Description <code>oauth2</code> header string N/A No <code>transactionId</code> path string No <p>Request body</p> application/json <pre><code>{\n    \"error\": \"Identity verification failed\"\n}\n</code></pre> Schema of the request body <pre><code>{\n    \"type\": \"object\",\n    \"properties\": {}\n}\n</code></pre> <p> Response 200 OK </p> application/json Schema of the response body <pre><code>{\n    \"type\": \"object\",\n    \"properties\": {}\n}\n</code></pre> <p> Response 404 Not Found </p>"},{"location":"api/openapi/#post-trust-list","title":"POST /trust-list","text":"<p>Creates a new trust list for the tenant</p> <p>Input parameters</p> Parameter In Type Default Nullable Description <code>oauth2</code> header string N/A No <p>Request body</p> application/json <p></p><pre><code>{\n    \"id\": \"string\",\n    \"certId\": \"string\",\n    \"entities\": [\n        {}\n    ],\n    \"description\": \"string\",\n    \"data\": {}\n}\n</code></pre> \u26a0\ufe0f This example has been generated automatically from the schema and it is not accurate. Refer to the schema for more information.<p></p> Schema of the request body <pre><code>{\n    \"type\": \"object\",\n    \"properties\": {\n        \"id\": {\n            \"type\": \"string\"\n        },\n        \"certId\": {\n            \"type\": \"string\"\n        },\n        \"entities\": {\n            \"type\": \"array\",\n            \"items\": {\n                \"type\": \"object\"\n            }\n        },\n        \"description\": {\n            \"type\": \"string\"\n        },\n        \"data\": {\n            \"type\": \"object\",\n            \"description\": \"The full trust list JSON (generated LoTE structure)\"\n        }\n    },\n    \"required\": [\n        \"entities\"\n    ]\n}\n</code></pre> <p> Response 201 Created </p> application/json <p></p><pre><code>{\n    \"id\": \"string\",\n    \"description\": \"string\",\n    \"tenantId\": \"string\",\n    \"tenant\": null,\n    \"certId\": \"string\",\n    \"cert\": {\n        \"keyId\": \"039af178-3ca0-48f4-a2e4-7b1209f30376\",\n        \"id\": \"string\",\n        \"tenantId\": \"string\",\n        \"tenant\": null,\n        \"crt\": [\n            \"string\"\n        ],\n        \"usages\": [\n            {\n                \"tenantId\": \"string\",\n                \"certId\": \"string\",\n                \"usage\": \"access\",\n                \"cert\": null\n            }\n        ],\n        \"description\": \"string\",\n        \"key\": {\n            \"id\": \"string\",\n            \"description\": \"string\",\n            \"tenantId\": \"string\",\n            \"tenant\": null,\n            \"key\": {},\n            \"usage\": {},\n            \"certificates\": null,\n            \"createdAt\": \"2022-04-13T15:42:05.901Z\",\n            \"updatedAt\": \"2022-04-13T15:42:05.901Z\"\n        },\n        \"createdAt\": \"2022-04-13T15:42:05.901Z\",\n        \"updatedAt\": \"2022-04-13T15:42:05.901Z\"\n    },\n    \"data\": {},\n    \"entityConfig\": [\n        {}\n    ],\n    \"sequenceNumber\": 10.12,\n    \"jwt\": \"string\",\n    \"createdAt\": \"2022-04-13T15:42:05.901Z\",\n    \"updatedAt\": \"2022-04-13T15:42:05.901Z\"\n}\n</code></pre> \u26a0\ufe0f This example has been generated automatically from the schema and it is not accurate. Refer to the schema for more information.<p></p> Schema of the response body <pre><code>{\n    \"type\": \"object\",\n    \"properties\": {\n        \"id\": {\n            \"type\": \"string\",\n            \"description\": \"Unique identifier for the trust list\"\n        },\n        \"description\": {\n            \"type\": \"string\"\n        },\n        \"tenantId\": {\n            \"type\": \"string\",\n            \"description\": \"The tenant ID for which the VP request is made.\"\n        },\n        \"tenant\": {\n            \"description\": \"The tenant that owns this object.\",\n            \"allOf\": [\n                {\n                    \"$ref\": \"#/components/schemas/TenantEntity\"\n                }\n            ]\n        },\n        \"certId\": {\n            \"type\": \"string\"\n        },\n        \"cert\": {\n            \"$ref\": \"#/components/schemas/CertEntity\"\n        },\n        \"data\": {\n            \"type\": \"object\",\n            \"description\": \"The full trust list JSON (generated LoTE structure)\"\n        },\n        \"entityConfig\": {\n            \"description\": \"The original entity configuration used to create this trust list.\\nStored for round-tripping when editing.\",\n            \"type\": \"array\",\n            \"items\": {\n                \"type\": \"object\"\n            }\n        },\n        \"sequenceNumber\": {\n            \"type\": \"number\",\n            \"description\": \"The sequence number for versioning (incremented on updates)\"\n        },\n        \"jwt\": {\n            \"type\": \"string\",\n            \"description\": \"The signed JWT representation of this trust list\"\n        },\n        \"createdAt\": {\n            \"format\": \"date-time\",\n            \"type\": \"string\"\n        },\n        \"updatedAt\": {\n            \"format\": \"date-time\",\n            \"type\": \"string\"\n        }\n    },\n    \"required\": [\n        \"id\",\n        \"tenantId\",\n        \"tenant\",\n        \"certId\",\n        \"cert\",\n        \"sequenceNumber\",\n        \"jwt\",\n        \"createdAt\",\n        \"updatedAt\"\n    ]\n}\n</code></pre>"},{"location":"api/openapi/#get-trust-list","title":"GET /trust-list","text":"<p>Returns all trust lists for the tenant</p> <p>Input parameters</p> Parameter In Type Default Nullable Description <code>oauth2</code> header string N/A No <p> Response 200 OK </p> application/json <p></p><pre><code>[\n    {\n        \"id\": \"string\",\n        \"description\": \"string\",\n        \"tenantId\": \"string\",\n        \"tenant\": null,\n        \"certId\": \"string\",\n        \"cert\": {\n            \"keyId\": \"039af178-3ca0-48f4-a2e4-7b1209f30376\",\n            \"id\": \"string\",\n            \"tenantId\": \"string\",\n            \"tenant\": null,\n            \"crt\": [\n                \"string\"\n            ],\n            \"usages\": [\n                {\n                    \"tenantId\": \"string\",\n                    \"certId\": \"string\",\n                    \"usage\": \"access\",\n                    \"cert\": null\n                }\n            ],\n            \"description\": \"string\",\n            \"key\": {\n                \"id\": \"string\",\n                \"description\": \"string\",\n                \"tenantId\": \"string\",\n                \"tenant\": null,\n                \"key\": {},\n                \"usage\": {},\n                \"certificates\": null,\n                \"createdAt\": \"2022-04-13T15:42:05.901Z\",\n                \"updatedAt\": \"2022-04-13T15:42:05.901Z\"\n            },\n            \"createdAt\": \"2022-04-13T15:42:05.901Z\",\n            \"updatedAt\": \"2022-04-13T15:42:05.901Z\"\n        },\n        \"data\": {},\n        \"entityConfig\": [\n            {}\n        ],\n        \"sequenceNumber\": 10.12,\n        \"jwt\": \"string\",\n        \"createdAt\": \"2022-04-13T15:42:05.901Z\",\n        \"updatedAt\": \"2022-04-13T15:42:05.901Z\"\n    }\n]\n</code></pre> \u26a0\ufe0f This example has been generated automatically from the schema and it is not accurate. Refer to the schema for more information.<p></p> Schema of the response body <pre><code>{\n    \"type\": \"array\",\n    \"items\": {\n        \"$ref\": \"#/components/schemas/TrustList\"\n    }\n}\n</code></pre>"},{"location":"api/openapi/#get-trust-listid","title":"GET /trust-list/{id}","text":"<p>Returns the trust list by id for the tenant</p> <p>Input parameters</p> Parameter In Type Default Nullable Description <code>oauth2</code> header string N/A No <code>id</code> path string No <p> Response 200 OK </p> application/json <p></p><pre><code>{\n    \"id\": \"string\",\n    \"description\": \"string\",\n    \"tenantId\": \"string\",\n    \"tenant\": null,\n    \"certId\": \"string\",\n    \"cert\": {\n        \"keyId\": \"039af178-3ca0-48f4-a2e4-7b1209f30376\",\n        \"id\": \"string\",\n        \"tenantId\": \"string\",\n        \"tenant\": null,\n        \"crt\": [\n            \"string\"\n        ],\n        \"usages\": [\n            {\n                \"tenantId\": \"string\",\n                \"certId\": \"string\",\n                \"usage\": \"access\",\n                \"cert\": null\n            }\n        ],\n        \"description\": \"string\",\n        \"key\": {\n            \"id\": \"string\",\n            \"description\": \"string\",\n            \"tenantId\": \"string\",\n            \"tenant\": null,\n            \"key\": {},\n            \"usage\": {},\n            \"certificates\": null,\n            \"createdAt\": \"2022-04-13T15:42:05.901Z\",\n            \"updatedAt\": \"2022-04-13T15:42:05.901Z\"\n        },\n        \"createdAt\": \"2022-04-13T15:42:05.901Z\",\n        \"updatedAt\": \"2022-04-13T15:42:05.901Z\"\n    },\n    \"data\": {},\n    \"entityConfig\": [\n        {}\n    ],\n    \"sequenceNumber\": 10.12,\n    \"jwt\": \"string\",\n    \"createdAt\": \"2022-04-13T15:42:05.901Z\",\n    \"updatedAt\": \"2022-04-13T15:42:05.901Z\"\n}\n</code></pre> \u26a0\ufe0f This example has been generated automatically from the schema and it is not accurate. Refer to the schema for more information.<p></p> Schema of the response body <pre><code>{\n    \"type\": \"object\",\n    \"properties\": {\n        \"id\": {\n            \"type\": \"string\",\n            \"description\": \"Unique identifier for the trust list\"\n        },\n        \"description\": {\n            \"type\": \"string\"\n        },\n        \"tenantId\": {\n            \"type\": \"string\",\n            \"description\": \"The tenant ID for which the VP request is made.\"\n        },\n        \"tenant\": {\n            \"description\": \"The tenant that owns this object.\",\n            \"allOf\": [\n                {\n                    \"$ref\": \"#/components/schemas/TenantEntity\"\n                }\n            ]\n        },\n        \"certId\": {\n            \"type\": \"string\"\n        },\n        \"cert\": {\n            \"$ref\": \"#/components/schemas/CertEntity\"\n        },\n        \"data\": {\n            \"type\": \"object\",\n            \"description\": \"The full trust list JSON (generated LoTE structure)\"\n        },\n        \"entityConfig\": {\n            \"description\": \"The original entity configuration used to create this trust list.\\nStored for round-tripping when editing.\",\n            \"type\": \"array\",\n            \"items\": {\n                \"type\": \"object\"\n            }\n        },\n        \"sequenceNumber\": {\n            \"type\": \"number\",\n            \"description\": \"The sequence number for versioning (incremented on updates)\"\n        },\n        \"jwt\": {\n            \"type\": \"string\",\n            \"description\": \"The signed JWT representation of this trust list\"\n        },\n        \"createdAt\": {\n            \"format\": \"date-time\",\n            \"type\": \"string\"\n        },\n        \"updatedAt\": {\n            \"format\": \"date-time\",\n            \"type\": \"string\"\n        }\n    },\n    \"required\": [\n        \"id\",\n        \"tenantId\",\n        \"tenant\",\n        \"certId\",\n        \"cert\",\n        \"sequenceNumber\",\n        \"jwt\",\n        \"createdAt\",\n        \"updatedAt\"\n    ]\n}\n</code></pre>"},{"location":"api/openapi/#put-trust-listid","title":"PUT /trust-list/{id}","text":"<p>Updates a trust list with new entities Creates a new version for audit and regenerates the JWT</p> <p>Input parameters</p> Parameter In Type Default Nullable Description <code>oauth2</code> header string N/A No <code>id</code> path string No <p>Request body</p> application/json <p></p><pre><code>{\n    \"id\": \"string\",\n    \"certId\": \"string\",\n    \"entities\": [\n        {}\n    ],\n    \"description\": \"string\",\n    \"data\": {}\n}\n</code></pre> \u26a0\ufe0f This example has been generated automatically from the schema and it is not accurate. Refer to the schema for more information.<p></p> Schema of the request body <pre><code>{\n    \"type\": \"object\",\n    \"properties\": {\n        \"id\": {\n            \"type\": \"string\"\n        },\n        \"certId\": {\n            \"type\": \"string\"\n        },\n        \"entities\": {\n            \"type\": \"array\",\n            \"items\": {\n                \"type\": \"object\"\n            }\n        },\n        \"description\": {\n            \"type\": \"string\"\n        },\n        \"data\": {\n            \"type\": \"object\",\n            \"description\": \"The full trust list JSON (generated LoTE structure)\"\n        }\n    },\n    \"required\": [\n        \"entities\"\n    ]\n}\n</code></pre> <p> Response 200 OK </p> application/json <p></p><pre><code>{\n    \"id\": \"string\",\n    \"description\": \"string\",\n    \"tenantId\": \"string\",\n    \"tenant\": null,\n    \"certId\": \"string\",\n    \"cert\": {\n        \"keyId\": \"039af178-3ca0-48f4-a2e4-7b1209f30376\",\n        \"id\": \"string\",\n        \"tenantId\": \"string\",\n        \"tenant\": null,\n        \"crt\": [\n            \"string\"\n        ],\n        \"usages\": [\n            {\n                \"tenantId\": \"string\",\n                \"certId\": \"string\",\n                \"usage\": \"access\",\n                \"cert\": null\n            }\n        ],\n        \"description\": \"string\",\n        \"key\": {\n            \"id\": \"string\",\n            \"description\": \"string\",\n            \"tenantId\": \"string\",\n            \"tenant\": null,\n            \"key\": {},\n            \"usage\": {},\n            \"certificates\": null,\n            \"createdAt\": \"2022-04-13T15:42:05.901Z\",\n            \"updatedAt\": \"2022-04-13T15:42:05.901Z\"\n        },\n        \"createdAt\": \"2022-04-13T15:42:05.901Z\",\n        \"updatedAt\": \"2022-04-13T15:42:05.901Z\"\n    },\n    \"data\": {},\n    \"entityConfig\": [\n        {}\n    ],\n    \"sequenceNumber\": 10.12,\n    \"jwt\": \"string\",\n    \"createdAt\": \"2022-04-13T15:42:05.901Z\",\n    \"updatedAt\": \"2022-04-13T15:42:05.901Z\"\n}\n</code></pre> \u26a0\ufe0f This example has been generated automatically from the schema and it is not accurate. Refer to the schema for more information.<p></p> Schema of the response body <pre><code>{\n    \"type\": \"object\",\n    \"properties\": {\n        \"id\": {\n            \"type\": \"string\",\n            \"description\": \"Unique identifier for the trust list\"\n        },\n        \"description\": {\n            \"type\": \"string\"\n        },\n        \"tenantId\": {\n            \"type\": \"string\",\n            \"description\": \"The tenant ID for which the VP request is made.\"\n        },\n        \"tenant\": {\n            \"description\": \"The tenant that owns this object.\",\n            \"allOf\": [\n                {\n                    \"$ref\": \"#/components/schemas/TenantEntity\"\n                }\n            ]\n        },\n        \"certId\": {\n            \"type\": \"string\"\n        },\n        \"cert\": {\n            \"$ref\": \"#/components/schemas/CertEntity\"\n        },\n        \"data\": {\n            \"type\": \"object\",\n            \"description\": \"The full trust list JSON (generated LoTE structure)\"\n        },\n        \"entityConfig\": {\n            \"description\": \"The original entity configuration used to create this trust list.\\nStored for round-tripping when editing.\",\n            \"type\": \"array\",\n            \"items\": {\n                \"type\": \"object\"\n            }\n        },\n        \"sequenceNumber\": {\n            \"type\": \"number\",\n            \"description\": \"The sequence number for versioning (incremented on updates)\"\n        },\n        \"jwt\": {\n            \"type\": \"string\",\n            \"description\": \"The signed JWT representation of this trust list\"\n        },\n        \"createdAt\": {\n            \"format\": \"date-time\",\n            \"type\": \"string\"\n        },\n        \"updatedAt\": {\n            \"format\": \"date-time\",\n            \"type\": \"string\"\n        }\n    },\n    \"required\": [\n        \"id\",\n        \"tenantId\",\n        \"tenant\",\n        \"certId\",\n        \"cert\",\n        \"sequenceNumber\",\n        \"jwt\",\n        \"createdAt\",\n        \"updatedAt\"\n    ]\n}\n</code></pre>"},{"location":"api/openapi/#delete-trust-listid","title":"DELETE /trust-list/{id}","text":"<p>Deletes a trust list</p> <p>Input parameters</p> Parameter In Type Default Nullable Description <code>oauth2</code> header string N/A No <code>id</code> path string No <p> Response 200 OK </p>"},{"location":"api/openapi/#get-trust-listidexport","title":"GET /trust-list/{id}/export","text":"<p>Exports the trust list in LoTE format</p> <p>Input parameters</p> Parameter In Type Default Nullable Description <code>oauth2</code> header string N/A No <code>id</code> path string No <p> Response 200 OK </p> application/json <p></p><pre><code>{\n    \"id\": \"string\",\n    \"certId\": \"string\",\n    \"entities\": [\n        {}\n    ],\n    \"description\": \"string\",\n    \"data\": {}\n}\n</code></pre> \u26a0\ufe0f This example has been generated automatically from the schema and it is not accurate. Refer to the schema for more information.<p></p> Schema of the response body <pre><code>{\n    \"type\": \"object\",\n    \"properties\": {\n        \"id\": {\n            \"type\": \"string\"\n        },\n        \"certId\": {\n            \"type\": \"string\"\n        },\n        \"entities\": {\n            \"type\": \"array\",\n            \"items\": {\n                \"type\": \"object\"\n            }\n        },\n        \"description\": {\n            \"type\": \"string\"\n        },\n        \"data\": {\n            \"type\": \"object\",\n            \"description\": \"The full trust list JSON (generated LoTE structure)\"\n        }\n    },\n    \"required\": [\n        \"entities\"\n    ]\n}\n</code></pre>"},{"location":"api/openapi/#get-trust-listidversions","title":"GET /trust-list/{id}/versions","text":"<p>Returns the version history for a trust list</p> <p>Input parameters</p> Parameter In Type Default Nullable Description <code>oauth2</code> header string N/A No <code>id</code> path string No <p> Response 200 OK </p> application/json <p></p><pre><code>[\n    {\n        \"id\": \"string\",\n        \"trustListId\": \"string\",\n        \"trustList\": {\n            \"id\": \"string\",\n            \"description\": \"string\",\n            \"tenantId\": \"string\",\n            \"tenant\": null,\n            \"certId\": \"string\",\n            \"cert\": {\n                \"keyId\": \"039af178-3ca0-48f4-a2e4-7b1209f30376\",\n                \"id\": \"string\",\n                \"tenantId\": \"string\",\n                \"tenant\": null,\n                \"crt\": [\n                    \"string\"\n                ],\n                \"usages\": [\n                    {\n                        \"tenantId\": \"string\",\n                        \"certId\": \"string\",\n                        \"usage\": \"access\",\n                        \"cert\": null\n                    }\n                ],\n                \"description\": \"string\",\n                \"key\": {\n                    \"id\": \"string\",\n                    \"description\": \"string\",\n                    \"tenantId\": \"string\",\n                    \"tenant\": null,\n                    \"key\": {},\n                    \"usage\": {},\n                    \"certificates\": null,\n                    \"createdAt\": \"2022-04-13T15:42:05.901Z\",\n                    \"updatedAt\": \"2022-04-13T15:42:05.901Z\"\n                },\n                \"createdAt\": \"2022-04-13T15:42:05.901Z\",\n                \"updatedAt\": \"2022-04-13T15:42:05.901Z\"\n            },\n            \"data\": {},\n            \"entityConfig\": [\n                {}\n            ],\n            \"sequenceNumber\": 10.12,\n            \"jwt\": \"string\",\n            \"createdAt\": \"2022-04-13T15:42:05.901Z\",\n            \"updatedAt\": \"2022-04-13T15:42:05.901Z\"\n        },\n        \"tenantId\": \"string\",\n        \"sequenceNumber\": 10.12,\n        \"data\": {},\n        \"entityConfig\": {},\n        \"jwt\": \"string\",\n        \"createdAt\": \"2022-04-13T15:42:05.901Z\"\n    }\n]\n</code></pre> \u26a0\ufe0f This example has been generated automatically from the schema and it is not accurate. Refer to the schema for more information.<p></p> Schema of the response body <pre><code>{\n    \"type\": \"array\",\n    \"items\": {\n        \"$ref\": \"#/components/schemas/TrustListVersion\"\n    }\n}\n</code></pre>"},{"location":"api/openapi/#get-trust-listidversionsversionid","title":"GET /trust-list/{id}/versions/{versionId}","text":"<p>Returns a specific version of a trust list</p> <p>Input parameters</p> Parameter In Type Default Nullable Description <code>oauth2</code> header string N/A No <code>id</code> path string No <code>versionId</code> path string No <p> Response 200 OK </p> application/json <p></p><pre><code>{\n    \"id\": \"string\",\n    \"trustListId\": \"string\",\n    \"trustList\": {\n        \"id\": \"string\",\n        \"description\": \"string\",\n        \"tenantId\": \"string\",\n        \"tenant\": null,\n        \"certId\": \"string\",\n        \"cert\": {\n            \"keyId\": \"039af178-3ca0-48f4-a2e4-7b1209f30376\",\n            \"id\": \"string\",\n            \"tenantId\": \"string\",\n            \"tenant\": null,\n            \"crt\": [\n                \"string\"\n            ],\n            \"usages\": [\n                {\n                    \"tenantId\": \"string\",\n                    \"certId\": \"string\",\n                    \"usage\": \"access\",\n                    \"cert\": null\n                }\n            ],\n            \"description\": \"string\",\n            \"key\": {\n                \"id\": \"string\",\n                \"description\": \"string\",\n                \"tenantId\": \"string\",\n                \"tenant\": null,\n                \"key\": {},\n                \"usage\": {},\n                \"certificates\": null,\n                \"createdAt\": \"2022-04-13T15:42:05.901Z\",\n                \"updatedAt\": \"2022-04-13T15:42:05.901Z\"\n            },\n            \"createdAt\": \"2022-04-13T15:42:05.901Z\",\n            \"updatedAt\": \"2022-04-13T15:42:05.901Z\"\n        },\n        \"data\": {},\n        \"entityConfig\": [\n            {}\n        ],\n        \"sequenceNumber\": 10.12,\n        \"jwt\": \"string\",\n        \"createdAt\": \"2022-04-13T15:42:05.901Z\",\n        \"updatedAt\": \"2022-04-13T15:42:05.901Z\"\n    },\n    \"tenantId\": \"string\",\n    \"sequenceNumber\": 10.12,\n    \"data\": {},\n    \"entityConfig\": {},\n    \"jwt\": \"string\",\n    \"createdAt\": \"2022-04-13T15:42:05.901Z\"\n}\n</code></pre> \u26a0\ufe0f This example has been generated automatically from the schema and it is not accurate. Refer to the schema for more information.<p></p> Schema of the response body <pre><code>{\n    \"type\": \"object\",\n    \"properties\": {\n        \"id\": {\n            \"type\": \"string\"\n        },\n        \"trustListId\": {\n            \"type\": \"string\"\n        },\n        \"trustList\": {\n            \"$ref\": \"#/components/schemas/TrustList\"\n        },\n        \"tenantId\": {\n            \"type\": \"string\"\n        },\n        \"sequenceNumber\": {\n            \"type\": \"number\",\n            \"description\": \"The sequence number at the time this version was created\"\n        },\n        \"data\": {\n            \"type\": \"object\",\n            \"description\": \"The full trust list JSON at this version\"\n        },\n        \"entityConfig\": {\n            \"type\": \"object\",\n            \"description\": \"The entity configuration at this version\"\n        },\n        \"jwt\": {\n            \"type\": \"string\",\n            \"description\": \"The signed JWT at this version\"\n        },\n        \"createdAt\": {\n            \"format\": \"date-time\",\n            \"type\": \"string\"\n        }\n    },\n    \"required\": [\n        \"id\",\n        \"trustListId\",\n        \"trustList\",\n        \"tenantId\",\n        \"sequenceNumber\",\n        \"data\",\n        \"jwt\",\n        \"createdAt\"\n    ]\n}\n</code></pre>"},{"location":"api/openapi/#get-tenantidtrust-listid","title":"GET /{tenantId}/trust-list/{id}","text":"<p>Returns the JWT of the trust list</p> <p>Input parameters</p> Parameter In Type Default Nullable Description <code>id</code> path string No <code>tenantId</code> path string No <p> Response 200 OK </p> application/json <p></p><pre><code>\"string\"\n</code></pre> \u26a0\ufe0f This example has been generated automatically from the schema and it is not accurate. Refer to the schema for more information.<p></p> Schema of the response body <pre><code>{\n    \"type\": \"string\"\n}\n</code></pre>"},{"location":"api/openapi/#verifier","title":"Verifier","text":""},{"location":"api/openapi/#get-verifierconfig","title":"GET /verifier/config","text":"<p>Returns the presentation request configurations.</p> <p>Input parameters</p> Parameter In Type Default Nullable Description <code>oauth2</code> header string N/A No <p> Response 200 OK </p> application/json <p></p><pre><code>[\n    {\n        \"id\": \"string\",\n        \"tenant\": null,\n        \"description\": \"string\",\n        \"lifeTime\": 10.12,\n        \"dcql_query\": null,\n        \"transaction_data\": [\n            {\n                \"type\": \"string\",\n                \"credential_ids\": [\n                    \"string\"\n                ]\n            }\n        ],\n        \"registrationCert\": null,\n        \"webhook\": null,\n        \"createdAt\": \"2022-04-13T15:42:05.901Z\",\n        \"updatedAt\": \"2022-04-13T15:42:05.901Z\",\n        \"attached\": [\n            {\n                \"format\": \"string\",\n                \"data\": {},\n                \"credential_ids\": [\n                    \"string\"\n                ]\n            }\n        ],\n        \"redirectUri\": \"https://example.com/callback?session={sessionId}\",\n        \"accessCertId\": \"string\"\n    }\n]\n</code></pre> \u26a0\ufe0f This example has been generated automatically from the schema and it is not accurate. Refer to the schema for more information.<p></p> Schema of the response body <pre><code>{\n    \"type\": \"array\",\n    \"items\": {\n        \"$ref\": \"#/components/schemas/PresentationConfig\"\n    }\n}\n</code></pre>"},{"location":"api/openapi/#post-verifierconfig","title":"POST /verifier/config","text":"<p>Store a presentation request configuration. If it already exists, it will be updated.</p> <p>Input parameters</p> Parameter In Type Default Nullable Description <code>oauth2</code> header string N/A No <p>Request body</p> application/json <p></p><pre><code>{\n    \"id\": \"string\",\n    \"description\": \"string\",\n    \"lifeTime\": 10.12,\n    \"dcql_query\": null,\n    \"transaction_data\": [\n        {\n            \"type\": \"string\",\n            \"credential_ids\": [\n                \"string\"\n            ]\n        }\n    ],\n    \"registrationCert\": null,\n    \"webhook\": null,\n    \"attached\": [\n        {\n            \"format\": \"string\",\n            \"data\": {},\n            \"credential_ids\": [\n                \"string\"\n            ]\n        }\n    ],\n    \"redirectUri\": \"https://example.com/callback?session={sessionId}\",\n    \"accessCertId\": \"string\"\n}\n</code></pre> \u26a0\ufe0f This example has been generated automatically from the schema and it is not accurate. Refer to the schema for more information.<p></p> Schema of the request body <pre><code>{\n    \"type\": \"object\",\n    \"properties\": {\n        \"id\": {\n            \"type\": \"string\",\n            \"description\": \"Unique identifier for the VP request.\"\n        },\n        \"description\": {\n            \"type\": \"string\",\n            \"nullable\": true,\n            \"description\": \"Description of the presentation configuration.\"\n        },\n        \"lifeTime\": {\n            \"type\": \"number\",\n            \"description\": \"Lifetime how long the presentation request is valid after creation, in seconds.\"\n        },\n        \"dcql_query\": {\n            \"description\": \"The DCQL query to be used for the VP request.\",\n            \"allOf\": [\n                {\n                    \"$ref\": \"#/components/schemas/DCQL\"\n                }\n            ]\n        },\n        \"transaction_data\": {\n            \"type\": \"array\",\n            \"items\": {\n                \"$ref\": \"#/components/schemas/TransactionData\"\n            }\n        },\n        \"registrationCert\": {\n            \"nullable\": true,\n            \"description\": \"The registration certificate request containing the necessary details.\",\n            \"allOf\": [\n                {\n                    \"$ref\": \"#/components/schemas/RegistrationCertificateRequest\"\n                }\n            ]\n        },\n        \"webhook\": {\n            \"nullable\": true,\n            \"description\": \"Optional webhook URL to receive the response.\",\n            \"allOf\": [\n                {\n                    \"$ref\": \"#/components/schemas/WebhookConfig\"\n                }\n            ]\n        },\n        \"attached\": {\n            \"nullable\": true,\n            \"description\": \"Attestation that should be attached\",\n            \"type\": \"array\",\n            \"items\": {\n                \"$ref\": \"#/components/schemas/PresentationAttachment\"\n            }\n        },\n        \"redirectUri\": {\n            \"type\": \"string\",\n            \"nullable\": true,\n            \"description\": \"Redirect URI to which the user-agent should be redirected after the presentation is completed.\\nYou can use the `{sessionId}` placeholder in the URI, which will be replaced with the actual session ID.\",\n            \"example\": \"https://example.com/callback?session={sessionId}\"\n        },\n        \"accessCertId\": {\n            \"type\": \"string\",\n            \"nullable\": true,\n            \"description\": \"Optional ID of the access certificate to use for signing the presentation request.\\nIf not provided, the default access certificate for the tenant will be used.\\n\\nNote: This is intentionally NOT a TypeORM relationship because CertEntity uses\\na composite primary key (id + tenantId), and SQLite cannot create foreign keys\\nthat reference only part of a composite primary key. The relationship is handled\\nat the application level in the service layer.\"\n        }\n    },\n    \"required\": [\n        \"id\",\n        \"dcql_query\"\n    ]\n}\n</code></pre> <p> Response 201 Created </p> application/json Schema of the response body <pre><code>{\n    \"type\": \"object\"\n}\n</code></pre>"},{"location":"api/openapi/#get-verifierconfigid","title":"GET /verifier/config/{id}","text":"<p>Get a presentation request configuration by its ID.</p> <p>Input parameters</p> Parameter In Type Default Nullable Description <code>oauth2</code> header string N/A No <code>id</code> path string No <p> Response 200 OK </p> application/json <p></p><pre><code>{\n    \"id\": \"string\",\n    \"tenant\": null,\n    \"description\": \"string\",\n    \"lifeTime\": 10.12,\n    \"dcql_query\": null,\n    \"transaction_data\": [\n        {\n            \"type\": \"string\",\n            \"credential_ids\": [\n                \"string\"\n            ]\n        }\n    ],\n    \"registrationCert\": null,\n    \"webhook\": null,\n    \"createdAt\": \"2022-04-13T15:42:05.901Z\",\n    \"updatedAt\": \"2022-04-13T15:42:05.901Z\",\n    \"attached\": [\n        {\n            \"format\": \"string\",\n            \"data\": {},\n            \"credential_ids\": [\n                \"string\"\n            ]\n        }\n    ],\n    \"redirectUri\": \"https://example.com/callback?session={sessionId}\",\n    \"accessCertId\": \"string\"\n}\n</code></pre> \u26a0\ufe0f This example has been generated automatically from the schema and it is not accurate. Refer to the schema for more information.<p></p> Schema of the response body <pre><code>{\n    \"type\": \"object\",\n    \"properties\": {\n        \"id\": {\n            \"type\": \"string\",\n            \"description\": \"Unique identifier for the VP request.\"\n        },\n        \"tenant\": {\n            \"description\": \"The tenant that owns this object.\",\n            \"allOf\": [\n                {\n                    \"$ref\": \"#/components/schemas/TenantEntity\"\n                }\n            ]\n        },\n        \"description\": {\n            \"type\": \"string\",\n            \"nullable\": true,\n            \"description\": \"Description of the presentation configuration.\"\n        },\n        \"lifeTime\": {\n            \"type\": \"number\",\n            \"description\": \"Lifetime how long the presentation request is valid after creation, in seconds.\"\n        },\n        \"dcql_query\": {\n            \"description\": \"The DCQL query to be used for the VP request.\",\n            \"allOf\": [\n                {\n                    \"$ref\": \"#/components/schemas/DCQL\"\n                }\n            ]\n        },\n        \"transaction_data\": {\n            \"type\": \"array\",\n            \"items\": {\n                \"$ref\": \"#/components/schemas/TransactionData\"\n            }\n        },\n        \"registrationCert\": {\n            \"nullable\": true,\n            \"description\": \"The registration certificate request containing the necessary details.\",\n            \"allOf\": [\n                {\n                    \"$ref\": \"#/components/schemas/RegistrationCertificateRequest\"\n                }\n            ]\n        },\n        \"webhook\": {\n            \"nullable\": true,\n            \"description\": \"Optional webhook URL to receive the response.\",\n            \"allOf\": [\n                {\n                    \"$ref\": \"#/components/schemas/WebhookConfig\"\n                }\n            ]\n        },\n        \"createdAt\": {\n            \"format\": \"date-time\",\n            \"type\": \"string\",\n            \"description\": \"The timestamp when the VP request was created.\"\n        },\n        \"updatedAt\": {\n            \"format\": \"date-time\",\n            \"type\": \"string\",\n            \"description\": \"The timestamp when the VP request was last updated.\"\n        },\n        \"attached\": {\n            \"nullable\": true,\n            \"description\": \"Attestation that should be attached\",\n            \"type\": \"array\",\n            \"items\": {\n                \"$ref\": \"#/components/schemas/PresentationAttachment\"\n            }\n        },\n        \"redirectUri\": {\n            \"type\": \"string\",\n            \"nullable\": true,\n            \"description\": \"Redirect URI to which the user-agent should be redirected after the presentation is completed.\\nYou can use the `{sessionId}` placeholder in the URI, which will be replaced with the actual session ID.\",\n            \"example\": \"https://example.com/callback?session={sessionId}\"\n        },\n        \"accessCertId\": {\n            \"type\": \"string\",\n            \"nullable\": true,\n            \"description\": \"Optional ID of the access certificate to use for signing the presentation request.\\nIf not provided, the default access certificate for the tenant will be used.\\n\\nNote: This is intentionally NOT a TypeORM relationship because CertEntity uses\\na composite primary key (id + tenantId), and SQLite cannot create foreign keys\\nthat reference only part of a composite primary key. The relationship is handled\\nat the application level in the service layer.\"\n        }\n    },\n    \"required\": [\n        \"id\",\n        \"tenant\",\n        \"dcql_query\",\n        \"createdAt\",\n        \"updatedAt\"\n    ]\n}\n</code></pre>"},{"location":"api/openapi/#patch-verifierconfigid","title":"PATCH /verifier/config/{id}","text":"<p>Update a presentation request configuration by its ID.</p> <p>Input parameters</p> Parameter In Type Default Nullable Description <code>oauth2</code> header string N/A No <code>id</code> path string No <p>Request body</p> application/json <p></p><pre><code>{\n    \"id\": \"string\",\n    \"description\": \"string\",\n    \"lifeTime\": 10.12,\n    \"dcql_query\": null,\n    \"transaction_data\": [\n        {\n            \"type\": \"string\",\n            \"credential_ids\": [\n                \"string\"\n            ]\n        }\n    ],\n    \"registrationCert\": null,\n    \"webhook\": null,\n    \"attached\": [\n        {\n            \"format\": \"string\",\n            \"data\": {},\n            \"credential_ids\": [\n                \"string\"\n            ]\n        }\n    ],\n    \"redirectUri\": \"https://example.com/callback?session={sessionId}\",\n    \"accessCertId\": \"string\"\n}\n</code></pre> \u26a0\ufe0f This example has been generated automatically from the schema and it is not accurate. Refer to the schema for more information.<p></p> Schema of the request body <pre><code>{\n    \"type\": \"object\",\n    \"properties\": {\n        \"id\": {\n            \"type\": \"string\",\n            \"description\": \"Unique identifier for the VP request.\"\n        },\n        \"description\": {\n            \"type\": \"string\",\n            \"nullable\": true,\n            \"description\": \"Description of the presentation configuration.\"\n        },\n        \"lifeTime\": {\n            \"type\": \"number\",\n            \"description\": \"Lifetime how long the presentation request is valid after creation, in seconds.\"\n        },\n        \"dcql_query\": {\n            \"description\": \"The DCQL query to be used for the VP request.\",\n            \"allOf\": [\n                {\n                    \"$ref\": \"#/components/schemas/DCQL\"\n                }\n            ]\n        },\n        \"transaction_data\": {\n            \"type\": \"array\",\n            \"items\": {\n                \"$ref\": \"#/components/schemas/TransactionData\"\n            }\n        },\n        \"registrationCert\": {\n            \"nullable\": true,\n            \"description\": \"The registration certificate request containing the necessary details.\",\n            \"allOf\": [\n                {\n                    \"$ref\": \"#/components/schemas/RegistrationCertificateRequest\"\n                }\n            ]\n        },\n        \"webhook\": {\n            \"nullable\": true,\n            \"description\": \"Optional webhook URL to receive the response.\",\n            \"allOf\": [\n                {\n                    \"$ref\": \"#/components/schemas/WebhookConfig\"\n                }\n            ]\n        },\n        \"attached\": {\n            \"nullable\": true,\n            \"description\": \"Attestation that should be attached\",\n            \"type\": \"array\",\n            \"items\": {\n                \"$ref\": \"#/components/schemas/PresentationAttachment\"\n            }\n        },\n        \"redirectUri\": {\n            \"type\": \"string\",\n            \"nullable\": true,\n            \"description\": \"Redirect URI to which the user-agent should be redirected after the presentation is completed.\\nYou can use the `{sessionId}` placeholder in the URI, which will be replaced with the actual session ID.\",\n            \"example\": \"https://example.com/callback?session={sessionId}\"\n        },\n        \"accessCertId\": {\n            \"type\": \"string\",\n            \"nullable\": true,\n            \"description\": \"Optional ID of the access certificate to use for signing the presentation request.\\nIf not provided, the default access certificate for the tenant will be used.\\n\\nNote: This is intentionally NOT a TypeORM relationship because CertEntity uses\\na composite primary key (id + tenantId), and SQLite cannot create foreign keys\\nthat reference only part of a composite primary key. The relationship is handled\\nat the application level in the service layer.\"\n        }\n    }\n}\n</code></pre> <p> Response 200 OK </p> application/json Schema of the response body <pre><code>{\n    \"type\": \"object\"\n}\n</code></pre>"},{"location":"api/openapi/#delete-verifierconfigid","title":"DELETE /verifier/config/{id}","text":"<p>Deletes a presentation request configuration by its ID.</p> <p>Input parameters</p> Parameter In Type Default Nullable Description <code>oauth2</code> header string N/A No <code>id</code> path string No <p> Response 200 OK </p>"},{"location":"api/openapi/#post-verifieroffer","title":"POST /verifier/offer","text":"<p>Create an presentation request that can be sent to the user</p> <p>Input parameters</p> Parameter In Type Default Nullable Description <code>oauth2</code> header string N/A No <p>Request body</p> application/json <pre><code>{\n    \"response_type\": \"uri\",\n    \"requestId\": \"pid\"\n}\n</code></pre> <pre><code>{\n    \"response_type\": \"dc-api\",\n    \"requestId\": \"pid\"\n}\n</code></pre> Schema of the request body <pre><code>{\n    \"type\": \"object\",\n    \"properties\": {\n        \"response_type\": {\n            \"type\": \"string\",\n            \"description\": \"The type of response expected from the presentation request.\",\n            \"enum\": [\n                \"uri\",\n                \"dc-api\"\n            ]\n        },\n        \"requestId\": {\n            \"type\": \"string\",\n            \"description\": \"Identifier of the presentation configuration\"\n        },\n        \"webhook\": {\n            \"description\": \"Webhook configuration to receive the response.\\nIf not provided, the configured webhook from the configuration will be used.\",\n            \"allOf\": [\n                {\n                    \"$ref\": \"#/components/schemas/WebhookConfig\"\n                }\n            ]\n        },\n        \"redirectUri\": {\n            \"type\": \"string\",\n            \"description\": \"Optional redirect URI to which the user-agent should be redirected after the presentation is completed.\\nYou can use the `{sessionId}` placeholder in the URI, which will be replaced with the actual session ID.\",\n            \"example\": \"https://example.com/callback?session={sessionId}\"\n        },\n        \"transaction_data\": {\n            \"description\": \"Optional transaction data to include in the OID4VP request.\\nIf provided, this will override the transaction_data from the presentation configuration.\",\n            \"type\": \"array\",\n            \"items\": {\n                \"$ref\": \"#/components/schemas/TransactionData\"\n            }\n        }\n    },\n    \"required\": [\n        \"response_type\",\n        \"requestId\"\n    ]\n}\n</code></pre> <p> Response 201 Created </p> application/jsonimage/png <p></p><pre><code>{\n    \"uri\": \"string\",\n    \"crossDeviceUri\": \"string\",\n    \"session\": \"string\"\n}\n</code></pre> \u26a0\ufe0f This example has been generated automatically from the schema and it is not accurate. Refer to the schema for more information.<p></p> Schema of the response body <pre><code>{\n    \"type\": \"object\",\n    \"properties\": {\n        \"uri\": {\n            \"type\": \"string\"\n        },\n        \"crossDeviceUri\": {\n            \"type\": \"string\",\n            \"description\": \"URI for cross-device flows (no redirect after completion)\"\n        },\n        \"session\": {\n            \"type\": \"string\"\n        }\n    },\n    \"required\": [\n        \"uri\",\n        \"session\"\n    ]\n}\n</code></pre> <p></p><pre><code>{\n    \"uri\": \"string\",\n    \"crossDeviceUri\": \"string\",\n    \"session\": \"string\"\n}\n</code></pre> \u26a0\ufe0f This example has been generated automatically from the schema and it is not accurate. Refer to the schema for more information.<p></p> Schema of the response body <pre><code>{\n    \"type\": \"object\",\n    \"properties\": {\n        \"uri\": {\n            \"type\": \"string\"\n        },\n        \"crossDeviceUri\": {\n            \"type\": \"string\",\n            \"description\": \"URI for cross-device flows (no redirect after completion)\"\n        },\n        \"session\": {\n            \"type\": \"string\"\n        }\n    },\n    \"required\": [\n        \"uri\",\n        \"session\"\n    ]\n}\n</code></pre>"},{"location":"api/openapi/#cache-management","title":"Cache Management","text":""},{"location":"api/openapi/#get-cachestats","title":"GET /cache/stats","text":"<p>Get cache statistics</p> Description <p>Returns statistics about the trust list and status list caches.</p> <p>Input parameters</p> Parameter In Type Default Nullable Description <code>oauth2</code> header string N/A No <p> Response 200 OK </p>"},{"location":"api/openapi/#delete-cache","title":"DELETE /cache","text":"<p>Clear all caches</p> Description <p>Clears both trust list and status list caches. Next verification will fetch fresh data.</p> <p>Input parameters</p> Parameter In Type Default Nullable Description <code>oauth2</code> header string N/A No <p> Response 204 No Content </p>"},{"location":"api/openapi/#delete-cachetrust-list","title":"DELETE /cache/trust-list","text":"<p>Clear trust list cache</p> Description <p>Clears the trust list cache. Next verification will fetch fresh trust lists.</p> <p>Input parameters</p> Parameter In Type Default Nullable Description <code>oauth2</code> header string N/A No <p> Response 204 No Content </p>"},{"location":"api/openapi/#delete-cachestatus-list","title":"DELETE /cache/status-list","text":"<p>Clear status list cache</p> Description <p>Clears the status list (revocation) cache. Next status check will fetch fresh status lists.</p> <p>Input parameters</p> Parameter In Type Default Nullable Description <code>oauth2</code> header string N/A No <p> Response 204 No Content </p>"},{"location":"api/openapi/#chained-as","title":"Chained AS","text":""},{"location":"api/openapi/#post-tenantchained-aspar","title":"POST /{tenant}/chained-as/par","text":"<p>Pushed Authorization Request</p> Description <p>Submit authorization request parameters. Returns a request_uri for use at the authorization endpoint.</p> <p>Input parameters</p> Parameter In Type Default Nullable Description <code>dpop</code> header string No <code>DPoP</code> header string No DPoP proof JWT <code>oauth-client-attestation</code> header string No <code>OAuth-Client-Attestation</code> header string No Wallet attestation JWT <code>oauth-client-attestation-pop</code> header string No <code>OAuth-Client-Attestation-PoP</code> header string No Wallet attestation proof-of-possession JWT <code>tenant</code> path string No Tenant identifier <p>Request body</p> application/json <p></p><pre><code>{\n    \"response_type\": \"code\",\n    \"client_id\": \"https://wallet.example.com\",\n    \"redirect_uri\": \"https://wallet.example.com/callback\",\n    \"code_challenge\": \"string\",\n    \"code_challenge_method\": \"S256\",\n    \"state\": \"string\",\n    \"scope\": \"openid credential\",\n    \"issuer_state\": \"string\",\n    \"authorization_details\": [\n        {}\n    ]\n}\n</code></pre> \u26a0\ufe0f This example has been generated automatically from the schema and it is not accurate. Refer to the schema for more information.<p></p> Schema of the request body <pre><code>{\n    \"type\": \"object\",\n    \"properties\": {\n        \"response_type\": {\n            \"type\": \"string\",\n            \"description\": \"OAuth response type (must be 'code')\",\n            \"example\": \"code\"\n        },\n        \"client_id\": {\n            \"type\": \"string\",\n            \"description\": \"Client identifier (wallet identifier)\",\n            \"example\": \"https://wallet.example.com\"\n        },\n        \"redirect_uri\": {\n            \"type\": \"string\",\n            \"description\": \"URI to redirect the wallet after authorization\",\n            \"example\": \"https://wallet.example.com/callback\"\n        },\n        \"code_challenge\": {\n            \"type\": \"string\",\n            \"description\": \"PKCE code challenge\"\n        },\n        \"code_challenge_method\": {\n            \"type\": \"string\",\n            \"description\": \"PKCE code challenge method (e.g., S256)\",\n            \"example\": \"S256\"\n        },\n        \"state\": {\n            \"type\": \"string\",\n            \"description\": \"State parameter (returned in redirect)\"\n        },\n        \"scope\": {\n            \"type\": \"string\",\n            \"description\": \"Scope requested\",\n            \"example\": \"openid credential\"\n        },\n        \"issuer_state\": {\n            \"type\": \"string\",\n            \"description\": \"Issuer state from credential offer\"\n        },\n        \"authorization_details\": {\n            \"description\": \"Authorization details (JSON array)\",\n            \"type\": \"array\",\n            \"items\": {\n                \"type\": \"object\"\n            }\n        }\n    },\n    \"required\": [\n        \"response_type\",\n        \"client_id\",\n        \"redirect_uri\"\n    ]\n}\n</code></pre> <p> Response 201 Created </p> application/json <p></p><pre><code>{\n    \"request_uri\": \"urn:ietf:params:oauth:request_uri:abc123\",\n    \"expires_in\": 600\n}\n</code></pre> \u26a0\ufe0f This example has been generated automatically from the schema and it is not accurate. Refer to the schema for more information.<p></p> Schema of the response body <pre><code>{\n    \"type\": \"object\",\n    \"properties\": {\n        \"request_uri\": {\n            \"type\": \"string\",\n            \"description\": \"The request URI to use at the authorization endpoint\",\n            \"example\": \"urn:ietf:params:oauth:request_uri:abc123\"\n        },\n        \"expires_in\": {\n            \"type\": \"number\",\n            \"description\": \"The lifetime of the request URI in seconds\",\n            \"example\": 600\n        }\n    },\n    \"required\": [\n        \"request_uri\",\n        \"expires_in\"\n    ]\n}\n</code></pre> <p> Response 400 Bad Request </p> application/json <p></p><pre><code>{\n    \"error\": \"invalid_request\",\n    \"error_description\": \"string\"\n}\n</code></pre> \u26a0\ufe0f This example has been generated automatically from the schema and it is not accurate. Refer to the schema for more information.<p></p> Schema of the response body <pre><code>{\n    \"type\": \"object\",\n    \"properties\": {\n        \"error\": {\n            \"type\": \"string\",\n            \"description\": \"Error code\",\n            \"example\": \"invalid_request\"\n        },\n        \"error_description\": {\n            \"type\": \"string\",\n            \"description\": \"Human-readable error description\"\n        }\n    },\n    \"required\": [\n        \"error\"\n    ]\n}\n</code></pre>"},{"location":"api/openapi/#get-tenantchained-asauthorize","title":"GET /{tenant}/chained-as/authorize","text":"<p>Authorization endpoint</p> Description <p>Validates the request_uri from PAR and redirects to the upstream OIDC provider for authentication.</p> <p>Input parameters</p> Parameter In Type Default Nullable Description <code>client_id</code> query string No Client identifier <code>request_uri</code> query string No Request URI from PAR response <code>tenant</code> path string No Tenant identifier <p> Response 200 OK </p> <p> Response 302 Found </p> <p> Response 400 Bad Request </p> application/json <p></p><pre><code>{\n    \"error\": \"invalid_request\",\n    \"error_description\": \"string\"\n}\n</code></pre> \u26a0\ufe0f This example has been generated automatically from the schema and it is not accurate. Refer to the schema for more information.<p></p> Schema of the response body <pre><code>{\n    \"type\": \"object\",\n    \"properties\": {\n        \"error\": {\n            \"type\": \"string\",\n            \"description\": \"Error code\",\n            \"example\": \"invalid_request\"\n        },\n        \"error_description\": {\n            \"type\": \"string\",\n            \"description\": \"Human-readable error description\"\n        }\n    },\n    \"required\": [\n        \"error\"\n    ]\n}\n</code></pre>"},{"location":"api/openapi/#get-tenantchained-ascallback","title":"GET /{tenant}/chained-as/callback","text":"<p>Upstream OIDC callback</p> Description <p>Receives the authorization response from the upstream OIDC provider, exchanges the code, and redirects back to the wallet.</p> <p>Input parameters</p> Parameter In Type Default Nullable Description <code>code</code> query string No <code>error</code> query string No <code>error_description</code> query string No <code>state</code> query string No <code>tenant</code> path string No Tenant identifier <p> Response 200 OK </p> <p> Response 302 Found </p> <p> Response 400 Bad Request </p> application/json <p></p><pre><code>{\n    \"error\": \"invalid_request\",\n    \"error_description\": \"string\"\n}\n</code></pre> \u26a0\ufe0f This example has been generated automatically from the schema and it is not accurate. Refer to the schema for more information.<p></p> Schema of the response body <pre><code>{\n    \"type\": \"object\",\n    \"properties\": {\n        \"error\": {\n            \"type\": \"string\",\n            \"description\": \"Error code\",\n            \"example\": \"invalid_request\"\n        },\n        \"error_description\": {\n            \"type\": \"string\",\n            \"description\": \"Human-readable error description\"\n        }\n    },\n    \"required\": [\n        \"error\"\n    ]\n}\n</code></pre>"},{"location":"api/openapi/#post-tenantchained-astoken","title":"POST /{tenant}/chained-as/token","text":"<p>Token endpoint</p> Description <p>Exchanges the authorization code for an access token containing issuer_state.</p> <p>Input parameters</p> Parameter In Type Default Nullable Description <code>dpop</code> header string No <code>DPoP</code> header string No DPoP proof JWT <code>tenant</code> path string No Tenant identifier <p>Request body</p> application/json <p></p><pre><code>{\n    \"grant_type\": \"authorization_code\",\n    \"code\": \"string\",\n    \"client_id\": \"string\",\n    \"redirect_uri\": \"string\",\n    \"code_verifier\": \"string\"\n}\n</code></pre> \u26a0\ufe0f This example has been generated automatically from the schema and it is not accurate. Refer to the schema for more information.<p></p> Schema of the request body <pre><code>{\n    \"type\": \"object\",\n    \"properties\": {\n        \"grant_type\": {\n            \"type\": \"string\",\n            \"description\": \"Grant type (must be 'authorization_code')\",\n            \"example\": \"authorization_code\"\n        },\n        \"code\": {\n            \"type\": \"string\",\n            \"description\": \"Authorization code received in the callback\"\n        },\n        \"client_id\": {\n            \"type\": \"string\",\n            \"description\": \"Client identifier\"\n        },\n        \"redirect_uri\": {\n            \"type\": \"string\",\n            \"description\": \"Redirect URI (must match the one used in PAR)\"\n        },\n        \"code_verifier\": {\n            \"type\": \"string\",\n            \"description\": \"PKCE code verifier\"\n        }\n    },\n    \"required\": [\n        \"grant_type\",\n        \"code\"\n    ]\n}\n</code></pre> <p> Response 200 OK </p> application/json <p></p><pre><code>{\n    \"access_token\": \"string\",\n    \"token_type\": \"DPoP\",\n    \"expires_in\": 3600,\n    \"scope\": \"string\",\n    \"authorization_details\": [\n        {}\n    ],\n    \"c_nonce\": \"string\",\n    \"c_nonce_expires_in\": 10.12\n}\n</code></pre> \u26a0\ufe0f This example has been generated automatically from the schema and it is not accurate. Refer to the schema for more information.<p></p> Schema of the response body <pre><code>{\n    \"type\": \"object\",\n    \"properties\": {\n        \"access_token\": {\n            \"type\": \"string\",\n            \"description\": \"The access token\"\n        },\n        \"token_type\": {\n            \"type\": \"string\",\n            \"description\": \"Token type (Bearer or DPoP)\",\n            \"example\": \"DPoP\"\n        },\n        \"expires_in\": {\n            \"type\": \"number\",\n            \"description\": \"Token lifetime in seconds\",\n            \"example\": 3600\n        },\n        \"scope\": {\n            \"type\": \"string\",\n            \"description\": \"Scope granted\"\n        },\n        \"authorization_details\": {\n            \"description\": \"Authorized credential configurations\",\n            \"type\": \"array\",\n            \"items\": {\n                \"type\": \"object\"\n            }\n        },\n        \"c_nonce\": {\n            \"type\": \"string\",\n            \"description\": \"C_NONCE for credential request\"\n        },\n        \"c_nonce_expires_in\": {\n            \"type\": \"number\",\n            \"description\": \"C_NONCE lifetime in seconds\"\n        }\n    },\n    \"required\": [\n        \"access_token\",\n        \"token_type\",\n        \"expires_in\"\n    ]\n}\n</code></pre> <p> Response 400 Bad Request </p> application/json <p></p><pre><code>{\n    \"error\": \"invalid_request\",\n    \"error_description\": \"string\"\n}\n</code></pre> \u26a0\ufe0f This example has been generated automatically from the schema and it is not accurate. Refer to the schema for more information.<p></p> Schema of the response body <pre><code>{\n    \"type\": \"object\",\n    \"properties\": {\n        \"error\": {\n            \"type\": \"string\",\n            \"description\": \"Error code\",\n            \"example\": \"invalid_request\"\n        },\n        \"error_description\": {\n            \"type\": \"string\",\n            \"description\": \"Human-readable error description\"\n        }\n    },\n    \"required\": [\n        \"error\"\n    ]\n}\n</code></pre> <p> Response 401 Unauthorized </p> application/json <p></p><pre><code>{\n    \"error\": \"invalid_request\",\n    \"error_description\": \"string\"\n}\n</code></pre> \u26a0\ufe0f This example has been generated automatically from the schema and it is not accurate. Refer to the schema for more information.<p></p> Schema of the response body <pre><code>{\n    \"type\": \"object\",\n    \"properties\": {\n        \"error\": {\n            \"type\": \"string\",\n            \"description\": \"Error code\",\n            \"example\": \"invalid_request\"\n        },\n        \"error_description\": {\n            \"type\": \"string\",\n            \"description\": \"Human-readable error description\"\n        }\n    },\n    \"required\": [\n        \"error\"\n    ]\n}\n</code></pre>"},{"location":"api/openapi/#get-tenantchained-aswell-knownjwksjson","title":"GET /{tenant}/chained-as/.well-known/jwks.json","text":"<p>JSON Web Key Set</p> Description <p>Returns the public keys for verifying tokens issued by this Chained AS.</p> <p>Input parameters</p> Parameter In Type Default Nullable Description <code>tenant</code> path string No Tenant identifier <p> Response 200 OK </p>"},{"location":"api/openapi/#get-tenantchained-aswell-knownoauth-authorization-server","title":"GET /{tenant}/chained-as/.well-known/oauth-authorization-server","text":"<p>OAuth AS Metadata</p> Description <p>Returns the OAuth Authorization Server metadata for the Chained AS.</p> <p>Input parameters</p> Parameter In Type Default Nullable Description <code>tenant</code> path string No Tenant identifier <p> Response 200 OK </p>"},{"location":"api/openapi/#registrar","title":"Registrar","text":""},{"location":"api/openapi/#get-registrarconfig","title":"GET /registrar/config","text":"<p>Get registrar configuration</p> <p>Input parameters</p> Parameter In Type Default Nullable Description <code>oauth2</code> header string N/A No <p> Response 200 OK </p> application/json <p></p><pre><code>{\n    \"registrarUrl\": \"https://sandbox.eudi-wallet.org/api\",\n    \"oidcUrl\": \"https://auth.example.com/realms/my-realm\",\n    \"clientId\": \"registrar-client\",\n    \"clientSecret\": \"string\",\n    \"username\": \"admin@example.com\",\n    \"password\": \"string\",\n    \"tenantId\": \"string\",\n    \"tenant\": null\n}\n</code></pre> \u26a0\ufe0f This example has been generated automatically from the schema and it is not accurate. Refer to the schema for more information.<p></p> Schema of the response body <pre><code>{\n    \"type\": \"object\",\n    \"properties\": {\n        \"registrarUrl\": {\n            \"type\": \"string\",\n            \"description\": \"The base URL of the registrar API\",\n            \"format\": \"uri\",\n            \"example\": \"https://sandbox.eudi-wallet.org/api\"\n        },\n        \"oidcUrl\": {\n            \"type\": \"string\",\n            \"description\": \"The OIDC issuer URL for authentication (e.g., Keycloak realm URL)\",\n            \"format\": \"uri\",\n            \"example\": \"https://auth.example.com/realms/my-realm\"\n        },\n        \"clientId\": {\n            \"type\": \"string\",\n            \"description\": \"The OIDC client ID for the registrar\",\n            \"example\": \"registrar-client\"\n        },\n        \"clientSecret\": {\n            \"type\": \"string\",\n            \"description\": \"The OIDC client secret (optional, for confidential clients)\"\n        },\n        \"username\": {\n            \"type\": \"string\",\n            \"description\": \"The username for OIDC login\",\n            \"example\": \"admin@example.com\"\n        },\n        \"password\": {\n            \"type\": \"string\",\n            \"description\": \"The password for OIDC login (stored in plaintext)\"\n        },\n        \"tenantId\": {\n            \"type\": \"string\",\n            \"description\": \"The tenant ID this configuration belongs to.\"\n        },\n        \"tenant\": {\n            \"description\": \"The tenant that owns this configuration.\",\n            \"allOf\": [\n                {\n                    \"$ref\": \"#/components/schemas/TenantEntity\"\n                }\n            ]\n        }\n    },\n    \"required\": [\n        \"registrarUrl\",\n        \"oidcUrl\",\n        \"clientId\",\n        \"username\",\n        \"password\",\n        \"tenantId\",\n        \"tenant\"\n    ]\n}\n</code></pre> <p> Response 404 Not Found </p>"},{"location":"api/openapi/#post-registrarconfig","title":"POST /registrar/config","text":"<p>Create or replace registrar configuration</p> <p>Input parameters</p> Parameter In Type Default Nullable Description <code>oauth2</code> header string N/A No <p>Request body</p> application/json <p></p><pre><code>{\n    \"registrarUrl\": \"https://sandbox.eudi-wallet.org/api\",\n    \"oidcUrl\": \"https://auth.example.com/realms/my-realm\",\n    \"clientId\": \"registrar-client\",\n    \"clientSecret\": \"string\",\n    \"username\": \"admin@example.com\",\n    \"password\": \"string\"\n}\n</code></pre> \u26a0\ufe0f This example has been generated automatically from the schema and it is not accurate. Refer to the schema for more information.<p></p> Schema of the request body <pre><code>{\n    \"type\": \"object\",\n    \"properties\": {\n        \"registrarUrl\": {\n            \"type\": \"string\",\n            \"description\": \"The base URL of the registrar API\",\n            \"format\": \"uri\",\n            \"example\": \"https://sandbox.eudi-wallet.org/api\"\n        },\n        \"oidcUrl\": {\n            \"type\": \"string\",\n            \"description\": \"The OIDC issuer URL for authentication (e.g., Keycloak realm URL)\",\n            \"format\": \"uri\",\n            \"example\": \"https://auth.example.com/realms/my-realm\"\n        },\n        \"clientId\": {\n            \"type\": \"string\",\n            \"description\": \"The OIDC client ID for the registrar\",\n            \"example\": \"registrar-client\"\n        },\n        \"clientSecret\": {\n            \"type\": \"string\",\n            \"description\": \"The OIDC client secret (optional, for confidential clients)\"\n        },\n        \"username\": {\n            \"type\": \"string\",\n            \"description\": \"The username for OIDC login\",\n            \"example\": \"admin@example.com\"\n        },\n        \"password\": {\n            \"type\": \"string\",\n            \"description\": \"The password for OIDC login (stored in plaintext)\"\n        }\n    },\n    \"required\": [\n        \"registrarUrl\",\n        \"oidcUrl\",\n        \"clientId\",\n        \"username\",\n        \"password\"\n    ]\n}\n</code></pre> <p> Response 201 Created </p> application/json <p></p><pre><code>{\n    \"registrarUrl\": \"https://sandbox.eudi-wallet.org/api\",\n    \"oidcUrl\": \"https://auth.example.com/realms/my-realm\",\n    \"clientId\": \"registrar-client\",\n    \"clientSecret\": \"string\",\n    \"username\": \"admin@example.com\",\n    \"password\": \"string\",\n    \"tenantId\": \"string\",\n    \"tenant\": null\n}\n</code></pre> \u26a0\ufe0f This example has been generated automatically from the schema and it is not accurate. Refer to the schema for more information.<p></p> Schema of the response body <pre><code>{\n    \"type\": \"object\",\n    \"properties\": {\n        \"registrarUrl\": {\n            \"type\": \"string\",\n            \"description\": \"The base URL of the registrar API\",\n            \"format\": \"uri\",\n            \"example\": \"https://sandbox.eudi-wallet.org/api\"\n        },\n        \"oidcUrl\": {\n            \"type\": \"string\",\n            \"description\": \"The OIDC issuer URL for authentication (e.g., Keycloak realm URL)\",\n            \"format\": \"uri\",\n            \"example\": \"https://auth.example.com/realms/my-realm\"\n        },\n        \"clientId\": {\n            \"type\": \"string\",\n            \"description\": \"The OIDC client ID for the registrar\",\n            \"example\": \"registrar-client\"\n        },\n        \"clientSecret\": {\n            \"type\": \"string\",\n            \"description\": \"The OIDC client secret (optional, for confidential clients)\"\n        },\n        \"username\": {\n            \"type\": \"string\",\n            \"description\": \"The username for OIDC login\",\n            \"example\": \"admin@example.com\"\n        },\n        \"password\": {\n            \"type\": \"string\",\n            \"description\": \"The password for OIDC login (stored in plaintext)\"\n        },\n        \"tenantId\": {\n            \"type\": \"string\",\n            \"description\": \"The tenant ID this configuration belongs to.\"\n        },\n        \"tenant\": {\n            \"description\": \"The tenant that owns this configuration.\",\n            \"allOf\": [\n                {\n                    \"$ref\": \"#/components/schemas/TenantEntity\"\n                }\n            ]\n        }\n    },\n    \"required\": [\n        \"registrarUrl\",\n        \"oidcUrl\",\n        \"clientId\",\n        \"username\",\n        \"password\",\n        \"tenantId\",\n        \"tenant\"\n    ]\n}\n</code></pre> <p> Response 400 Bad Request </p>"},{"location":"api/openapi/#patch-registrarconfig","title":"PATCH /registrar/config","text":"<p>Update registrar configuration</p> <p>Input parameters</p> Parameter In Type Default Nullable Description <code>oauth2</code> header string N/A No <p>Request body</p> application/json <p></p><pre><code>{\n    \"registrarUrl\": \"https://sandbox.eudi-wallet.org/api\",\n    \"oidcUrl\": \"https://auth.example.com/realms/my-realm\",\n    \"clientId\": \"registrar-client\",\n    \"clientSecret\": \"string\",\n    \"username\": \"admin@example.com\",\n    \"password\": \"string\"\n}\n</code></pre> \u26a0\ufe0f This example has been generated automatically from the schema and it is not accurate. Refer to the schema for more information.<p></p> Schema of the request body <pre><code>{\n    \"type\": \"object\",\n    \"properties\": {\n        \"registrarUrl\": {\n            \"type\": \"string\",\n            \"description\": \"The base URL of the registrar API\",\n            \"format\": \"uri\",\n            \"example\": \"https://sandbox.eudi-wallet.org/api\"\n        },\n        \"oidcUrl\": {\n            \"type\": \"string\",\n            \"description\": \"The OIDC issuer URL for authentication (e.g., Keycloak realm URL)\",\n            \"format\": \"uri\",\n            \"example\": \"https://auth.example.com/realms/my-realm\"\n        },\n        \"clientId\": {\n            \"type\": \"string\",\n            \"description\": \"The OIDC client ID for the registrar\",\n            \"example\": \"registrar-client\"\n        },\n        \"clientSecret\": {\n            \"type\": \"string\",\n            \"description\": \"The OIDC client secret (optional, for confidential clients)\"\n        },\n        \"username\": {\n            \"type\": \"string\",\n            \"description\": \"The username for OIDC login\",\n            \"example\": \"admin@example.com\"\n        },\n        \"password\": {\n            \"type\": \"string\",\n            \"description\": \"The password for OIDC login (stored in plaintext)\"\n        }\n    }\n}\n</code></pre> <p> Response 200 OK </p> application/json <p></p><pre><code>{\n    \"registrarUrl\": \"https://sandbox.eudi-wallet.org/api\",\n    \"oidcUrl\": \"https://auth.example.com/realms/my-realm\",\n    \"clientId\": \"registrar-client\",\n    \"clientSecret\": \"string\",\n    \"username\": \"admin@example.com\",\n    \"password\": \"string\",\n    \"tenantId\": \"string\",\n    \"tenant\": null\n}\n</code></pre> \u26a0\ufe0f This example has been generated automatically from the schema and it is not accurate. Refer to the schema for more information.<p></p> Schema of the response body <pre><code>{\n    \"type\": \"object\",\n    \"properties\": {\n        \"registrarUrl\": {\n            \"type\": \"string\",\n            \"description\": \"The base URL of the registrar API\",\n            \"format\": \"uri\",\n            \"example\": \"https://sandbox.eudi-wallet.org/api\"\n        },\n        \"oidcUrl\": {\n            \"type\": \"string\",\n            \"description\": \"The OIDC issuer URL for authentication (e.g., Keycloak realm URL)\",\n            \"format\": \"uri\",\n            \"example\": \"https://auth.example.com/realms/my-realm\"\n        },\n        \"clientId\": {\n            \"type\": \"string\",\n            \"description\": \"The OIDC client ID for the registrar\",\n            \"example\": \"registrar-client\"\n        },\n        \"clientSecret\": {\n            \"type\": \"string\",\n            \"description\": \"The OIDC client secret (optional, for confidential clients)\"\n        },\n        \"username\": {\n            \"type\": \"string\",\n            \"description\": \"The username for OIDC login\",\n            \"example\": \"admin@example.com\"\n        },\n        \"password\": {\n            \"type\": \"string\",\n            \"description\": \"The password for OIDC login (stored in plaintext)\"\n        },\n        \"tenantId\": {\n            \"type\": \"string\",\n            \"description\": \"The tenant ID this configuration belongs to.\"\n        },\n        \"tenant\": {\n            \"description\": \"The tenant that owns this configuration.\",\n            \"allOf\": [\n                {\n                    \"$ref\": \"#/components/schemas/TenantEntity\"\n                }\n            ]\n        }\n    },\n    \"required\": [\n        \"registrarUrl\",\n        \"oidcUrl\",\n        \"clientId\",\n        \"username\",\n        \"password\",\n        \"tenantId\",\n        \"tenant\"\n    ]\n}\n</code></pre> <p> Response 400 Bad Request </p> <p> Response 404 Not Found </p>"},{"location":"api/openapi/#delete-registrarconfig","title":"DELETE /registrar/config","text":"<p>Delete registrar configuration</p> <p>Input parameters</p> Parameter In Type Default Nullable Description <code>oauth2</code> header string N/A No <p> Response 204 No Content </p>"},{"location":"api/openapi/#post-registraraccess-certificate","title":"POST /registrar/access-certificate","text":"<p>Create an access certificate for a key</p> Description <p>Creates an access certificate at the registrar for the specified key. Requires a relying party to be already registered at the registrar. The certificate is automatically stored in EUDIPLO.</p> <p>Input parameters</p> Parameter In Type Default Nullable Description <code>oauth2</code> header string N/A No <p>Request body</p> application/json <p></p><pre><code>{\n    \"keyId\": \"my-signing-key\"\n}\n</code></pre> \u26a0\ufe0f This example has been generated automatically from the schema and it is not accurate. Refer to the schema for more information.<p></p> Schema of the request body <pre><code>{\n    \"type\": \"object\",\n    \"properties\": {\n        \"keyId\": {\n            \"type\": \"string\",\n            \"description\": \"The ID of the key to create an access certificate for\",\n            \"example\": \"my-signing-key\"\n        }\n    },\n    \"required\": [\n        \"keyId\"\n    ]\n}\n</code></pre> <p> Response 201 Created </p> application/json <p></p><pre><code>{\n    \"id\": \"string\",\n    \"crt\": \"string\"\n}\n</code></pre> \u26a0\ufe0f This example has been generated automatically from the schema and it is not accurate. Refer to the schema for more information.<p></p> Schema of the response body <pre><code>{\n    \"type\": \"object\",\n    \"properties\": {\n        \"id\": {\n            \"type\": \"string\",\n            \"description\": \"The certificate ID at the registrar\"\n        },\n        \"crt\": {\n            \"type\": \"string\",\n            \"description\": \"The certificate in PEM format\"\n        }\n    }\n}\n</code></pre> <p> Response 400 Bad Request </p> <p> Response 404 Not Found </p>"},{"location":"api/openapi/#storage","title":"Storage","text":""},{"location":"api/openapi/#post-storage","title":"POST /storage","text":"<p>Upload files that belong to a tenant like images</p> <p>Input parameters</p> Parameter In Type Default Nullable Description <code>oauth2</code> header string N/A No <p>Request body</p> multipart/form-data <p></p><pre><code>{\n    \"file\": \"TG9yZW0gaXBzdW0gZG9sb3Igc2l0IGFtZXQ=\"\n}\n</code></pre> \u26a0\ufe0f This example has been generated automatically from the schema and it is not accurate. Refer to the schema for more information.<p></p> Schema of the request body <pre><code>{\n    \"type\": \"object\",\n    \"properties\": {\n        \"file\": {\n            \"type\": \"string\",\n            \"format\": \"binary\"\n        }\n    },\n    \"required\": [\n        \"file\"\n    ]\n}\n</code></pre> <p> Response 201 Created </p> application/json Schema of the response body <pre><code>{\n    \"type\": \"object\"\n}\n</code></pre>"},{"location":"api/openapi/#get-storagekey","title":"GET /storage/{key}","text":"<p>Input parameters</p> Parameter In Type Default Nullable Description <code>key</code> path string No <p> Response 200 OK </p>"},{"location":"api/openapi/#schemas","title":"Schemas","text":""},{"location":"api/openapi/#allowlistpolicy","title":"AllowListPolicy","text":"Name Type <code>policy</code> string <code>values</code> Array&lt;string&gt;"},{"location":"api/openapi/#apikeyconfig","title":"ApiKeyConfig","text":"Name Type <code>headerName</code> string <code>value</code> string"},{"location":"api/openapi/#attestationbasedpolicy","title":"AttestationBasedPolicy","text":"Name Type <code>policy</code> string <code>values</code> Array&lt;PolicyCredential&gt;"},{"location":"api/openapi/#authenticationmethodauth","title":"AuthenticationMethodAuth","text":"Name Type <code>config</code> AuthenticationUrlConfig <code>method</code> string"},{"location":"api/openapi/#authenticationmethodnone","title":"AuthenticationMethodNone","text":"Name Type <code>method</code> string"},{"location":"api/openapi/#authenticationmethodpresentation","title":"AuthenticationMethodPresentation","text":"Name Type <code>config</code> PresentationDuringIssuanceConfig <code>method</code> string"},{"location":"api/openapi/#authenticationurlconfig","title":"AuthenticationUrlConfig","text":"Name Type <code>url</code> string <code>webhook</code>"},{"location":"api/openapi/#authorizequeries","title":"AuthorizeQueries","text":"Name Type <code>auth_session</code> string <code>client_id</code> string <code>code_challenge</code> string <code>code_challenge_method</code> string <code>dpop_jkt</code> string <code>issuer_state</code> string <code>redirect_uri</code> string <code>request_uri</code> string <code>resource</code> string <code>response_type</code> string <code>scope</code> string <code>state</code> string"},{"location":"api/openapi/#certentity","title":"CertEntity","text":"Name Type <code>createdAt</code> string(date-time) <code>crt</code> Array&lt;string&gt; <code>description</code> string <code>id</code> string <code>key</code> KeyEntity <code>keyId</code> string <code>tenant</code> <code>tenantId</code> string <code>updatedAt</code> string(date-time) <code>usages</code> Array&lt;CertUsageEntity&gt;"},{"location":"api/openapi/#certimportdto","title":"CertImportDto","text":"Name Type <code>certUsageTypes</code> Array&lt;string&gt; <code>crt</code> Array&lt;string&gt; <code>description</code> string <code>id</code> string <code>keyId</code> string <code>subjectName</code> string"},{"location":"api/openapi/#certresponsedto","title":"CertResponseDto","text":"Name Type <code>id</code> string"},{"location":"api/openapi/#certupdatedto","title":"CertUpdateDto","text":"Name Type <code>certUsageTypes</code> Array&lt;string&gt; <code>description</code> string <code>usages</code> Array&lt;CertUsageEntity&gt;"},{"location":"api/openapi/#certusageentity","title":"CertUsageEntity","text":"Name Type <code>cert</code> CertEntity <code>certId</code> string <code>tenantId</code> string <code>usage</code> string"},{"location":"api/openapi/#chainedasconfig","title":"ChainedAsConfig","text":"Name Type <code>enabled</code> boolean <code>requireDPoP</code> boolean <code>token</code> <code>upstream</code>"},{"location":"api/openapi/#chainedaserrorresponsedto","title":"ChainedAsErrorResponseDto","text":"Name Type <code>error</code> string <code>error_description</code> string"},{"location":"api/openapi/#chainedasparrequestdto","title":"ChainedAsParRequestDto","text":"Name Type <code>authorization_details</code> Array&lt;&gt; <code>client_id</code> string <code>code_challenge</code> string <code>code_challenge_method</code> string <code>issuer_state</code> string <code>redirect_uri</code> string <code>response_type</code> string <code>scope</code> string <code>state</code> string"},{"location":"api/openapi/#chainedasparresponsedto","title":"ChainedAsParResponseDto","text":"Name Type <code>expires_in</code> number <code>request_uri</code> string"},{"location":"api/openapi/#chainedastokenconfig","title":"ChainedAsTokenConfig","text":"Name Type <code>lifetimeSeconds</code> number <code>signingKeyId</code> string"},{"location":"api/openapi/#chainedastokenrequestdto","title":"ChainedAsTokenRequestDto","text":"Name Type <code>client_id</code> string <code>code</code> string <code>code_verifier</code> string <code>grant_type</code> string <code>redirect_uri</code> string"},{"location":"api/openapi/#chainedastokenresponsedto","title":"ChainedAsTokenResponseDto","text":"Name Type <code>access_token</code> string <code>authorization_details</code> Array&lt;&gt; <code>c_nonce</code> string <code>c_nonce_expires_in</code> number <code>expires_in</code> number <code>scope</code> string <code>token_type</code> string"},{"location":"api/openapi/#claim","title":"Claim","text":"Name Type <code>path</code> Array&lt;string&gt;"},{"location":"api/openapi/#claimsquery","title":"ClaimsQuery","text":"Name Type <code>id</code> string <code>path</code> Array&lt;string&gt; <code>values</code> Array&lt;&gt;"},{"location":"api/openapi/#cliententity","title":"ClientEntity","text":"Name Type <code>allowedIssuanceConfigs</code> Array&lt;string&gt; <code>allowedPresentationConfigs</code> Array&lt;string&gt; <code>clientId</code> string <code>description</code> string <code>roles</code> Array&lt;string&gt; <code>secret</code> string <code>tenant</code> <code>tenantId</code> string"},{"location":"api/openapi/#clientsecretresponsedto","title":"ClientSecretResponseDto","text":"Name Type <code>secret</code> string"},{"location":"api/openapi/#completedeferreddto","title":"CompleteDeferredDto","text":""},{"location":"api/openapi/#createaccesscertificatedto","title":"CreateAccessCertificateDto","text":"Name Type <code>keyId</code> string"},{"location":"api/openapi/#createclientdto","title":"CreateClientDto","text":"Name Type <code>allowedIssuanceConfigs</code> Array&lt;string&gt; <code>allowedPresentationConfigs</code> Array&lt;string&gt; <code>clientId</code> string <code>description</code> string <code>roles</code> Array&lt;string&gt; <code>secret</code> string"},{"location":"api/openapi/#createregistrarconfigdto","title":"CreateRegistrarConfigDto","text":"Name Type <code>clientId</code> string <code>clientSecret</code> string <code>oidcUrl</code> string(uri) <code>password</code> string <code>registrarUrl</code> string(uri) <code>username</code> string"},{"location":"api/openapi/#createstatuslistdto","title":"CreateStatusListDto","text":"Name Type <code>bits</code> number <code>capacity</code> number <code>certId</code> string <code>credentialConfigurationId</code> string"},{"location":"api/openapi/#createtenantdto","title":"CreateTenantDto","text":"Name Type <code>description</code> string <code>id</code> string <code>name</code> string <code>roles</code> Array&lt;string&gt; <code>sessionConfig</code> <code>statusListConfig</code>"},{"location":"api/openapi/#credentialconfig","title":"CredentialConfig","text":"Name Type <code>cert</code> CertEntity <code>certId</code> string <code>claims</code> <code>claimsWebhook</code> <code>config</code> IssuerMetadataCredentialConfig <code>description</code> string| null <code>disclosureFrame</code> <code>embeddedDisclosurePolicy</code> <code>iaeActions</code> Array&lt;&gt; <code>id</code> string <code>keyBinding</code> boolean <code>lifeTime</code> number <code>notificationWebhook</code> <code>schema</code> <code>statusManagement</code> boolean <code>tenant</code> <code>vct</code>"},{"location":"api/openapi/#credentialconfigcreate","title":"CredentialConfigCreate","text":"Name Type <code>certId</code> string <code>claims</code> <code>claimsWebhook</code> <code>config</code> IssuerMetadataCredentialConfig <code>description</code> string| null <code>disclosureFrame</code> <code>embeddedDisclosurePolicy</code> <code>iaeActions</code> Array&lt;&gt; <code>id</code> string <code>keyBinding</code> boolean <code>lifeTime</code> number <code>notificationWebhook</code> <code>schema</code> <code>statusManagement</code> boolean <code>vct</code>"},{"location":"api/openapi/#credentialconfigupdate","title":"CredentialConfigUpdate","text":"Name Type <code>certId</code> string <code>claims</code> <code>claimsWebhook</code> <code>config</code> IssuerMetadataCredentialConfig <code>description</code> string| null <code>disclosureFrame</code> <code>embeddedDisclosurePolicy</code> <code>iaeActions</code> Array&lt;&gt; <code>id</code> string <code>keyBinding</code> boolean <code>lifeTime</code> number <code>notificationWebhook</code> <code>schema</code> <code>statusManagement</code> boolean <code>vct</code>"},{"location":"api/openapi/#credentialquery","title":"CredentialQuery","text":"Name Type <code>claims</code> Array&lt;Claim&gt; <code>format</code> string <code>id</code> string <code>meta</code> <code>multiple</code> boolean <code>trusted_authorities</code> Array&lt;TrustedAuthorityQuery&gt;"},{"location":"api/openapi/#credentialsetquery","title":"CredentialSetQuery","text":"Name Type <code>options</code> Array&lt;Array&lt;string&gt;&gt; <code>required</code> boolean"},{"location":"api/openapi/#dcql","title":"DCQL","text":"Name Type <code>credential_sets</code> Array&lt;CredentialSetQuery&gt; <code>credentials</code> Array&lt;CredentialQuery&gt;"},{"location":"api/openapi/#deferredoperationresponse","title":"DeferredOperationResponse","text":""},{"location":"api/openapi/#display","title":"Display","text":"Name Type <code>background_color</code> string <code>background_image</code> DisplayImage <code>description</code> string <code>locale</code> string <code>logo</code> DisplayImage <code>name</code> string <code>text_color</code> string"},{"location":"api/openapi/#displayimage","title":"DisplayImage","text":"Name Type <code>uri</code> string"},{"location":"api/openapi/#displayinfo","title":"DisplayInfo","text":"Name Type <code>locale</code> string <code>logo</code> DisplayLogo <code>name</code> string"},{"location":"api/openapi/#displaylogo","title":"DisplayLogo","text":"Name Type <code>alt_text</code> string <code>uri</code> string"},{"location":"api/openapi/#embeddeddisclosurepolicy","title":"EmbeddedDisclosurePolicy","text":"Name Type <code>policy</code> string"},{"location":"api/openapi/#faildeferreddto","title":"FailDeferredDto","text":""},{"location":"api/openapi/#fileuploaddto","title":"FileUploadDto","text":"Name Type <code>file</code> string(binary)"},{"location":"api/openapi/#iaeactionopenid4vppresentation","title":"IaeActionOpenid4vpPresentation","text":"Name Type <code>label</code> string <code>presentationConfigId</code> string <code>type</code> string"},{"location":"api/openapi/#iaeactionredirecttoweb","title":"IaeActionRedirectToWeb","text":"Name Type <code>callbackUrl</code> string(uri) <code>description</code> string <code>label</code> string <code>type</code> string <code>url</code> string(uri)"},{"location":"api/openapi/#importtenantdto","title":"ImportTenantDto","text":"Name Type <code>description</code> string <code>name</code> string"},{"location":"api/openapi/#issuanceconfig","title":"IssuanceConfig","text":"Name Type <code>authServers</code> Array&lt;string&gt; <code>batchSize</code> number <code>chainedAs</code> <code>createdAt</code> string(date-time) <code>display</code> Array&lt;DisplayInfo&gt; <code>dPopRequired</code> boolean <code>tenant</code> <code>updatedAt</code> string(date-time) <code>walletAttestationRequired</code> boolean <code>walletProviderTrustLists</code> Array&lt;string&gt;"},{"location":"api/openapi/#issuancedto","title":"IssuanceDto","text":"Name Type <code>authServers</code> Array&lt;string&gt; <code>batchSize</code> number <code>chainedAs</code> <code>display</code> Array&lt;DisplayInfo&gt; <code>dPopRequired</code> boolean <code>walletAttestationRequired</code> boolean <code>walletProviderTrustLists</code> Array&lt;string&gt;"},{"location":"api/openapi/#issuermetadatacredentialconfig","title":"IssuerMetadataCredentialConfig","text":"Name Type <code>claimsByNamespace</code> <code>display</code> Array&lt;Display&gt; <code>docType</code> string <code>format</code> string <code>namespace</code> string <code>scope</code> string"},{"location":"api/openapi/#key_1","title":"Key","text":"Name Type <code>alg</code> string <code>crv</code> string <code>d</code> string <code>kty</code> string <code>x</code> string <code>y</code> string"},{"location":"api/openapi/#keyentity","title":"KeyEntity","text":"Name Type <code>certificates</code> Array&lt;CertEntity&gt; <code>createdAt</code> string(date-time) <code>description</code> string <code>id</code> string <code>key</code> <code>tenant</code> <code>tenantId</code> string <code>updatedAt</code> string(date-time) <code>usage</code>"},{"location":"api/openapi/#keyimportdto","title":"KeyImportDto","text":"Name Type <code>description</code> string <code>id</code> string <code>key</code>"},{"location":"api/openapi/#nonetrustpolicy","title":"NoneTrustPolicy","text":"Name Type <code>policy</code> string"},{"location":"api/openapi/#offerrequestdto","title":"OfferRequestDto","text":"Name Type <code>authorization_server</code> string <code>credentialClaims</code> Example: <code>{'citizen': {'type': 'inline', 'claims': {'given_name': 'John', 'family_name': 'Doe'}}}</code> <code>credentialConfigurationIds</code> Array&lt;string&gt; <code>flow</code> string <code>notifyWebhook</code> <code>response_type</code> string <code>tx_code</code> string <code>tx_code_description</code> string"},{"location":"api/openapi/#offerresponse","title":"OfferResponse","text":"Name Type <code>crossDeviceUri</code> string <code>session</code> string <code>uri</code> string"},{"location":"api/openapi/#policycredential","title":"PolicyCredential","text":"Name Type <code>claims</code> Array&lt;ClaimsQuery&gt; <code>credential_sets</code> Array&lt;CredentialSetQuery&gt; <code>credentials</code> Array&lt;CredentialQuery&gt;"},{"location":"api/openapi/#presentationattachment","title":"PresentationAttachment","text":"Name Type <code>credential_ids</code> Array&lt;string&gt; <code>data</code> <code>format</code> string"},{"location":"api/openapi/#presentationconfig","title":"PresentationConfig","text":"Name Type <code>accessCertId</code> string| null <code>attached</code> Array&lt;PresentationAttachment&gt; <code>createdAt</code> string(date-time) <code>dcql_query</code> <code>description</code> string| null <code>id</code> string <code>lifeTime</code> number <code>redirectUri</code> string| null <code>registrationCert</code> <code>tenant</code> <code>transaction_data</code> Array&lt;TransactionData&gt; <code>updatedAt</code> string(date-time) <code>webhook</code>"},{"location":"api/openapi/#presentationconfigcreatedto","title":"PresentationConfigCreateDto","text":"Name Type <code>accessCertId</code> string| null <code>attached</code> Array&lt;PresentationAttachment&gt; <code>dcql_query</code> <code>description</code> string| null <code>id</code> string <code>lifeTime</code> number <code>redirectUri</code> string| null <code>registrationCert</code> <code>transaction_data</code> Array&lt;TransactionData&gt; <code>webhook</code>"},{"location":"api/openapi/#presentationconfigupdatedto","title":"PresentationConfigUpdateDto","text":"Name Type <code>accessCertId</code> string| null <code>attached</code> Array&lt;PresentationAttachment&gt; <code>dcql_query</code> <code>description</code> string| null <code>id</code> string <code>lifeTime</code> number <code>redirectUri</code> string| null <code>registrationCert</code> <code>transaction_data</code> Array&lt;TransactionData&gt; <code>webhook</code>"},{"location":"api/openapi/#presentationduringissuanceconfig","title":"PresentationDuringIssuanceConfig","text":"Name Type <code>type</code> string"},{"location":"api/openapi/#presentationrequest","title":"PresentationRequest","text":"Name Type <code>redirectUri</code> string <code>requestId</code> string <code>response_type</code> string <code>transaction_data</code> Array&lt;TransactionData&gt; <code>webhook</code>"},{"location":"api/openapi/#registrarconfigentity","title":"RegistrarConfigEntity","text":"Name Type <code>clientId</code> string <code>clientSecret</code> string <code>oidcUrl</code> string(uri) <code>password</code> string <code>registrarUrl</code> string(uri) <code>tenant</code> <code>tenantId</code> string <code>username</code> string"},{"location":"api/openapi/#registrationcertificaterequest","title":"RegistrationCertificateRequest","text":"Name Type <code>jwt</code> string"},{"location":"api/openapi/#rootoftrustpolicy","title":"RootOfTrustPolicy","text":"Name Type <code>policy</code> string <code>values</code> string"},{"location":"api/openapi/#schemaresponse","title":"SchemaResponse","text":"Name Type <code>$schema</code> string <code>description</code> string <code>properties</code> <code>required</code> Array&lt;string&gt; <code>title</code> string <code>type</code> string"},{"location":"api/openapi/#session_1","title":"Session","text":"Name Type <code>auth_queries</code> <code>authorization_code</code> string <code>clientId</code> string <code>createdAt</code> string(date-time) <code>credentialPayload</code> <code>credentials</code> Array&lt;&gt; <code>expiresAt</code> string(date-time) <code>externalIssuer</code> string <code>externalSubject</code> string <code>id</code> string <code>notifications</code> Array&lt;&gt; <code>notifyWebhook</code> <code>offer</code> <code>offerUrl</code> string <code>parsedWebhook</code> <code>redirectUri</code> string| null <code>request_uri</code> string <code>requestId</code> string <code>requestObject</code> string <code>requestUrl</code> string <code>responseUri</code> string <code>status</code> string <code>tenant</code> <code>tenantId</code> string <code>transaction_data</code> Array&lt;TransactionData&gt; <code>updatedAt</code> string(date-time) <code>useDcApi</code> boolean <code>vp_nonce</code> string"},{"location":"api/openapi/#sessionstorageconfig","title":"SessionStorageConfig","text":"Name Type <code>cleanupMode</code> string <code>ttlSeconds</code> number"},{"location":"api/openapi/#statuslistconfig","title":"StatusListConfig","text":"Name Type <code>bits</code> number <code>capacity</code> number <code>enableAggregation</code> boolean <code>immediateUpdate</code> boolean <code>ttl</code> number"},{"location":"api/openapi/#statuslistresponsedto","title":"StatusListResponseDto","text":"Name Type <code>availableEntries</code> number <code>bits</code> number <code>capacity</code> number <code>certId</code> string| null <code>createdAt</code> string(date-time) <code>credentialConfigurationId</code> string| null <code>expiresAt</code> string(date-time)| null <code>id</code> string <code>tenantId</code> string <code>uri</code> string <code>usedEntries</code> number"},{"location":"api/openapi/#statusupdatedto","title":"StatusUpdateDto","text":"Name Type <code>credentialConfigurationId</code> string <code>sessionId</code> string <code>status</code> number"},{"location":"api/openapi/#tenantentity","title":"TenantEntity","text":"Name Type <code>clients</code> Array&lt;ClientEntity&gt; <code>description</code> string <code>id</code> string <code>name</code> string <code>sessionConfig</code> <code>status</code> string <code>statusListConfig</code>"},{"location":"api/openapi/#transactiondata","title":"TransactionData","text":"Name Type <code>credential_ids</code> Array&lt;string&gt; <code>type</code> string"},{"location":"api/openapi/#trustedauthorityquery","title":"TrustedAuthorityQuery","text":"Name Type <code>type</code> string <code>values</code> Array&lt;string&gt;"},{"location":"api/openapi/#trustlist","title":"TrustList","text":"Name Type <code>cert</code> CertEntity <code>certId</code> string <code>createdAt</code> string(date-time) <code>data</code> <code>description</code> string <code>entityConfig</code> Array&lt;&gt; <code>id</code> string <code>jwt</code> string <code>sequenceNumber</code> number <code>tenant</code> <code>tenantId</code> string <code>updatedAt</code> string(date-time)"},{"location":"api/openapi/#trustlistcreatedto","title":"TrustListCreateDto","text":"Name Type <code>certId</code> string <code>data</code> <code>description</code> string <code>entities</code> Array&lt;&gt; <code>id</code> string"},{"location":"api/openapi/#trustlistversion","title":"TrustListVersion","text":"Name Type <code>createdAt</code> string(date-time) <code>data</code> <code>entityConfig</code> <code>id</code> string <code>jwt</code> string <code>sequenceNumber</code> number <code>tenantId</code> string <code>trustList</code> TrustList <code>trustListId</code> string"},{"location":"api/openapi/#updateclientdto","title":"UpdateClientDto","text":"Name Type <code>allowedIssuanceConfigs</code> Array&lt;string&gt; <code>allowedPresentationConfigs</code> Array&lt;string&gt; <code>description</code> string <code>roles</code> Array&lt;string&gt;"},{"location":"api/openapi/#updatekeydto","title":"UpdateKeyDto","text":"Name Type <code>description</code> string <code>id</code> string"},{"location":"api/openapi/#updateregistrarconfigdto","title":"UpdateRegistrarConfigDto","text":"Name Type <code>clientId</code> string <code>clientSecret</code> string <code>oidcUrl</code> string(uri) <code>password</code> string <code>registrarUrl</code> string(uri) <code>username</code> string"},{"location":"api/openapi/#updatesessionconfigdto","title":"UpdateSessionConfigDto","text":"Name Type <code>cleanupMode</code> string <code>ttlSeconds</code> number| null"},{"location":"api/openapi/#updatestatuslistconfigdto","title":"UpdateStatusListConfigDto","text":"Name Type <code>bits</code> number| null <code>capacity</code> number| null <code>enableAggregation</code> boolean| null <code>immediateUpdate</code> boolean| null <code>ttl</code> number| null"},{"location":"api/openapi/#updatestatuslistdto","title":"UpdateStatusListDto","text":"Name Type <code>certId</code> string| null <code>credentialConfigurationId</code> string| null"},{"location":"api/openapi/#updatetenantdto","title":"UpdateTenantDto","text":"Name Type <code>description</code> string <code>name</code> string <code>roles</code> Array&lt;string&gt; <code>sessionConfig</code> <code>statusListConfig</code>"},{"location":"api/openapi/#upstreamoidcconfig","title":"UpstreamOidcConfig","text":"Name Type <code>clientId</code> string <code>clientSecret</code> string <code>issuer</code> string(uri) <code>scopes</code> Array&lt;string&gt;"},{"location":"api/openapi/#vct","title":"VCT","text":"Name Type <code>description</code> string <code>extends</code> string <code>extends#integrity</code> string <code>name</code> string <code>schema_uri</code> string <code>schema_uri#integrity</code> string <code>vct</code> string"},{"location":"api/openapi/#webhookauthconfigheader","title":"WebHookAuthConfigHeader","text":"Name Type <code>config</code> <code>type</code> string"},{"location":"api/openapi/#webhookauthconfignone","title":"WebHookAuthConfigNone","text":"Name Type <code>type</code> string"},{"location":"api/openapi/#webhookconfig","title":"WebhookConfig","text":"Name Type <code>auth</code> <code>url</code> string"},{"location":"api/openapi/#security-schemes","title":"Security schemes","text":"Name Type Scheme Description oauth2 oauth2"},{"location":"api/openapi/#more-documentation","title":"More documentation","text":"<p>Documentation</p> For more information: https://openwallet-foundation-labs.github.io/eudiplo/latest/"},{"location":"api/session-events/","title":"Session Events (SSE)","text":""},{"location":"api/session-events/#real-time-session-status-updates","title":"Real-time Session Status Updates","text":"<p>EUDIPLO provides a Server-Sent Events (SSE) endpoint for receiving real-time session status updates. This allows clients to subscribe to session changes without polling, reducing server load and providing instant feedback.</p>"},{"location":"api/session-events/#sse-endpoint","title":"SSE Endpoint","text":"<pre><code>GET /session/:id/events?token=JWT_TOKEN\n</code></pre>"},{"location":"api/session-events/#authentication","title":"Authentication","text":"<p>The SSE endpoint requires JWT authentication via a query parameter. This is because the browser's <code>EventSource</code> API does not support custom headers.</p> Parameter Type Required Description <code>id</code> string Yes The session ID to subscribe to <code>token</code> string Yes Valid JWT access token"},{"location":"api/session-events/#response-format","title":"Response Format","text":"<p>The endpoint returns a stream of Server-Sent Events. Each event contains:</p> <pre><code>{\n    \"id\": \"session-uuid\",\n    \"status\": \"active|fetched|completed|expired|failed\",\n    \"updatedAt\": \"2024-01-15T12:00:00.000Z\"\n}\n</code></pre>"},{"location":"api/session-events/#session-status-values","title":"Session Status Values","text":"Status Description <code>active</code> Session created, waiting for wallet interaction <code>fetched</code> Credential offer/presentation request fetched by wallet <code>completed</code> Session successfully completed <code>expired</code> Session expired before completion <code>failed</code> Session failed due to an error"},{"location":"api/session-events/#usage-examples","title":"Usage Examples","text":""},{"location":"api/session-events/#javascript-browser","title":"JavaScript (Browser)","text":"<pre><code>// Get a valid JWT token first\nconst token = await getAccessToken();\n\n// Create EventSource with token as query parameter\nconst eventSource = new EventSource(`/session/${sessionId}/events?token=${token}`);\n\n// Handle incoming status updates\neventSource.onmessage = (event) =&gt; {\n    const data = JSON.parse(event.data);\n    console.log(`Session ${data.id} status: ${data.status}`);\n\n    // Close connection when session reaches terminal state\n    if (['completed', 'expired', 'failed'].includes(data.status)) {\n        eventSource.close();\n    }\n};\n\n// Handle connection errors\neventSource.onerror = (error) =&gt; {\n    console.error('SSE connection error:', error);\n    eventSource.close();\n};\n</code></pre>"},{"location":"api/session-events/#nodejs","title":"Node.js","text":"<pre><code>import EventSource from 'eventsource';\n\nconst token = 'your-jwt-token';\nconst sessionId = 'session-uuid';\n\nconst eventSource = new EventSource(\n    `http://localhost:3000/session/${sessionId}/events?token=${token}`\n);\n\neventSource.onmessage = (event) =&gt; {\n    const data = JSON.parse(event.data);\n    console.log('Status update:', data);\n};\n\neventSource.onerror = (error) =&gt; {\n    console.error('Connection error:', error);\n};\n</code></pre>"},{"location":"api/session-events/#curl","title":"cURL","text":"<pre><code>curl -N \"http://localhost:3000/session/${SESSION_ID}/events?token=${JWT_TOKEN}\"\n</code></pre>"},{"location":"api/session-events/#connection-behavior","title":"Connection Behavior","text":"<ul> <li>Initial Event: Upon connection, the endpoint immediately sends the current   session status.</li> <li>Auto-reconnect: Browsers automatically reconnect if the connection drops.</li> <li>Keep-alive: The server maintains the connection until the client   disconnects or the session reaches a terminal state.</li> </ul>"},{"location":"api/session-events/#error-responses","title":"Error Responses","text":"Status Code Description 401 Missing or invalid JWT token 404 Session not found"},{"location":"api/session-events/#best-practices","title":"Best Practices","text":"<ol> <li> <p>Token expiration: Ensure your JWT token has sufficient lifetime for the    expected session duration. Consider refreshing the token before it expires.</p> </li> <li> <p>Close on completion: Always close the <code>EventSource</code> when the session    reaches a terminal state (<code>completed</code>, <code>expired</code>, or <code>failed</code>) to free    resources.</p> </li> <li> <p>Error handling: Implement proper error handling to manage connection    failures gracefully.</p> </li> <li> <p>Fallback polling: For environments that don't support SSE, implement a    fallback to polling the <code>GET /session/:id</code> endpoint.</p> </li> </ol>"},{"location":"architecture/","title":"Overview","text":""},{"location":"architecture/#architecture-overview","title":"Architecture Overview","text":"<p>EUDIPLO is a lightweight middleware designed to bridge the gap between existing systems and the emerging ecosystem of EUDI Wallets. Instead of implementing complex protocols such as OpenID4VP, SD-JWT, or DIDComm themselves, developers can run EUDIPLO as a standalone Docker container and interact with it via simple APIs or configuration files.</p> <p>It acts as an adapter between trusted infrastructure and local applications or web services. EUDIPLO handles the complexities of the EUDI Wallet ecosystem, allowing you to focus on your core business logic without worrying about the underlying protocols.</p>"},{"location":"architecture/#what-eudiplo-is-and-isnt","title":"What EUDIPLO Is (and Isn't)","text":"<p>Understanding EUDIPLO's role helps you integrate it correctly:</p>"},{"location":"architecture/#eudiplo-is-a-protocol-adapter-middleware","title":"EUDIPLO is a Protocol Adapter / Middleware","text":"\u2705 What EUDIPLO IS \u274c What EUDIPLO IS NOT A protocol translator \u2013 converts simple API calls to OID4VCI/OID4VP A Backend-for-Frontend (BFF) \u2013 it doesn't serve your UI or aggregate APIs A credential factory \u2013 signs and packages credentials in standard formats A proxy \u2013 it doesn't forward requests transparently A session manager \u2013 tracks issuance and verification flows A wallet \u2013 it issues TO wallets, it doesn't store credentials for users A key manager \u2013 securely stores and uses cryptographic keys An identity provider \u2013 it doesn't authenticate end users (use Keycloak, etc.)"},{"location":"architecture/#typical-integration-pattern","title":"Typical Integration Pattern","text":"<p>For a visual overview, see the system diagram on the home page.</p> <pre><code>flowchart LR\n    subgraph Your System\n        A[Your Backend]\n    end\n\n    subgraph EUDIPLO\n        B[REST API]\n        C[Protocol Engine]\n    end\n\n    subgraph Wallet\n        D[EUDI Wallet]\n    end\n\n    A --&gt;|Simple JSON API| B\n    B --&gt; C\n    C &lt;--&gt;|OID4VCI / OID4VP| D\n    C -.-&gt;|Webhooks| A</code></pre> <p>Issuance Flow: Your backend calls EUDIPLO's simple REST API \u2192 EUDIPLO handles OID4VCI protocol \u2192 Wallet receives credential</p> <p>Verification Flow: Your backend requests verification \u2192 EUDIPLO creates OID4VP request \u2192 Wallet presents credential \u2192 EUDIPLO validates and notifies your backend via webhook</p>"},{"location":"architecture/#when-to-use-eudiplo","title":"When to Use EUDIPLO","text":"<ul> <li>You want to issue or verify EUDI Wallet credentials without implementing OID4VCI/OID4VP yourself</li> <li>You need a protocol-agnostic layer between your existing systems and wallets</li> <li>You want to experiment with EUDI protocols in a sandbox environment</li> </ul>"},{"location":"architecture/#when-not-to-use-eudiplo","title":"When NOT to Use EUDIPLO","text":"<ul> <li>You need a user-facing authentication service (use Keycloak + EUDIPLO instead)</li> <li>You want to build a wallet application (EUDIPLO is for issuers/verifiers)</li> <li>You need a simple API gateway or reverse proxy</li> </ul>"},{"location":"architecture/#structure","title":"Structure","text":"<p>EUDIPLO is built on a modular architecture, where each module is a plug-and-play component responsible for a specific system function. This design promotes separation of concerns, maintainability, and easy integration of new features.</p> <p>The core modules include:</p> <ul> <li>Database: Stores application and credential data.</li> <li>Key Management: Handles secure storage and management of cryptographic keys.</li> <li>Identity and Access Management: Manages access to the tenant's resources.</li> <li>Storage: Provides persistent storage for files and artifacts.</li> </ul> <p>Modules are activated via environment variable configuration. You select which backend to use globally for each module by setting the appropriate environment variables before starting EUDIPLO.</p> <p>Note: EUDIPLO is not designed to set individual database or storage options per tenant. All tenants share the same backend configuration for each module. If you need to switch backends, you are responsible for writing your own migration strategy to move existing data.</p> <p>This modular approach allows you to run EUDIPLO with simple local backends during development, and swap to scalable, secure services in production\u2014without changing your application code.</p> <p>For example, switching from local key management to HashiCorp Vault only requires updating your configuration.</p> <pre><code>flowchart TD\n    A(EUDIPLO)\n    B{{Databases}}\n    C{{Key Management}}\n    D{{Identity and Access Management}}\n    E{{Storage}}\n\n    A --&gt; B\n    B --&gt; B1[SQLite]\n    B --&gt; B2[PostgreSQL]\n\n    A --&gt; C\n    C --&gt; C1[Unencrypted DB]\n    C --&gt; C2[HashiCorp Vault]\n\n    A --&gt; D\n    D --&gt; D1[Local]\n    D --&gt; D2[Keycloak]\n\n    A --&gt; E\n    E --&gt; E1[Local]\n    E --&gt; E2[S3]</code></pre>"},{"location":"architecture/#deployment","title":"Deployment","text":"<p>EUDIPLO is shipped as a Docker image. It can be run with minimal setup via a <code>.env</code> file. You can mount:</p> <ul> <li>a <code>config/</code> directory for SQLite data or credential configuration</li> <li>optional integration with Vault for key storage</li> </ul> <p>EUDIPLO can be deployed as:</p> <ul> <li>a standalone local service (e.g., during development)</li> <li>a backend service in production (e.g., behind a gateway)</li> </ul> <p>You can find examples of deployments in the deployment directory.</p> <p>For configuration management, see Configuration Import to learn how to bootstrap your deployment with pre-configured credentials and workflows.</p>"},{"location":"architecture/#integration-patterns","title":"Integration Patterns","text":"<p>You can use EUDIPLO as:</p> <ul> <li>An internal credential issuance service for your citizen portal, education   platform, or company registry</li> <li>A verifier bridge to validate wallets without deeply integrating OpenID4VP   etc.</li> <li>A testing sandbox for experimenting with EUDI protocols</li> </ul>"},{"location":"architecture/#extensibility","title":"Extensibility","text":"<p>EUDIPLO is modular and extensible:</p> <ul> <li>Add new key management backends (e.g., AWS KMS)</li> <li>Customize issuance templates</li> <li>Extend the API layer with business-specific endpoints</li> </ul>"},{"location":"architecture/chained-as/","title":"Chained Authorization Server","text":""},{"location":"architecture/chained-as/#chained-authorization-server","title":"Chained Authorization Server","text":"<p>The Chained Authorization Server (Chained AS) is an optional mode where EUDIPLO acts as an OAuth 2.0 Authorization Server facade. Instead of implementing user authentication directly, it delegates to an upstream OIDC provider while issuing its own access tokens with custom claims for session correlation.</p>"},{"location":"architecture/chained-as/#overview","title":"Overview","text":"<p>In credential issuance flows using the authorization code grant, the wallet needs an access token to request credentials. Typically, this token comes from either:</p> <ol> <li>EUDIPLO's built-in AS - Simple setup, but requires EUDIPLO to handle user authentication</li> <li>External AS (e.g., Keycloak) - Uses existing identity infrastructure, but requires the AS to include <code>issuer_state</code> claim</li> </ol> <p>The Chained AS provides a third option: EUDIPLO acts as the AS but delegates authentication to an upstream OIDC provider. This combines the benefits of both approaches without requiring modifications to your existing OIDC provider.</p>"},{"location":"architecture/chained-as/#architecture","title":"Architecture","text":"<pre><code>flowchart TB\n    subgraph Wallet\n        W[EUDI Wallet]\n    end\n\n    subgraph EUDIPLO\n        subgraph ChainedAS[\"Chained AS\"]\n            PAR[PAR Endpoint]\n            AUTH[Authorize]\n            CB[Callback]\n            TOK[Token]\n        end\n        VCI[OID4VCI Endpoints]\n        SM[Session Manager]\n    end\n\n    subgraph Upstream[\"Upstream OIDC Provider\"]\n        UA[/authorize]\n        UT[/token]\n    end\n\n    W --&gt;|1. PAR| PAR\n    PAR --&gt;|2. Create session| SM\n    W --&gt;|3. Authorize| AUTH\n    AUTH --&gt;|4. Redirect| UA\n    UA --&gt;|5. User authenticates| UA\n    UA --&gt;|6. Callback| CB\n    CB --&gt;|7. Exchange code| UT\n    CB --&gt;|8. Store identity| SM\n    W --&gt;|9. Token request| TOK\n    TOK --&gt;|10. Issue token| W\n    W --&gt;|11. Credential request| VCI\n    VCI --&gt;|12. Lookup session| SM</code></pre>"},{"location":"architecture/chained-as/#session-flow-states","title":"Session Flow States","text":"<p>The Chained AS maintains session state through the OAuth flow:</p> <pre><code>stateDiagram-v2\n    [*] --&gt; PENDING_AUTHORIZE: PAR Request\n    PENDING_AUTHORIZE --&gt; PENDING_UPSTREAM_CALLBACK: Wallet visits /authorize\n    PENDING_UPSTREAM_CALLBACK --&gt; AUTHORIZED: Upstream callback received\n    AUTHORIZED --&gt; TOKEN_ISSUED: Token exchanged\n    TOKEN_ISSUED --&gt; [*]\n\n    PENDING_AUTHORIZE --&gt; [*]: Expired\n    PENDING_UPSTREAM_CALLBACK --&gt; [*]: Expired/Error\n    AUTHORIZED --&gt; [*]: Expired</code></pre>"},{"location":"architecture/chained-as/#token-structure","title":"Token Structure","text":"<p>Access tokens issued by the Chained AS are JWTs signed by EUDIPLO containing:</p> Claim Description <code>iss</code> Chained AS issuer URL (<code>{PUBLIC_URL}/{tenant}/chained-as</code>) <code>sub</code> Client ID of the requesting wallet <code>aud</code> EUDIPLO credential issuer URL <code>issuer_state</code> Session ID for credential offer correlation <code>client_id</code> Wallet's client identifier <code>upstream_sub</code> Subject from upstream ID token <code>upstream_iss</code> Issuer from upstream ID token <code>cnf.jkt</code> DPoP key thumbprint (if DPoP enabled)"},{"location":"architecture/chained-as/#comparison-with-other-modes","title":"Comparison with Other Modes","text":"Feature Built-in AS External AS Chained AS User authentication EUDIPLO handles External provider External provider Token issuer EUDIPLO External EUDIPLO <code>issuer_state</code> in token \u2705 Automatic \u274c Requires customization \u2705 Automatic Session correlation \u2705 Native \u26a0\ufe0f Via webhook \u2705 Native Modify external provider N/A Required Not required DPoP support \u2705 Depends on provider \u2705 Wallet attestation \u2705 \u274c Not possible \u2705"},{"location":"architecture/chained-as/#security-considerations","title":"Security Considerations","text":""},{"location":"architecture/chained-as/#client-secret-management","title":"Client Secret Management","text":"<p>The upstream client secret is stored in the issuance configuration. Consider:</p> <ul> <li>Using environment variables for secrets in production</li> <li>Rotating secrets periodically</li> <li>Using a secrets manager for enterprise deployments</li> </ul>"},{"location":"architecture/chained-as/#pkce","title":"PKCE","text":"<p>The Chained AS enforces PKCE (Proof Key for Code Exchange) for all authorization flows to prevent authorization code interception attacks.</p>"},{"location":"architecture/chained-as/#dpop","title":"DPoP","text":"<p>When <code>requireDPoP</code> is enabled, wallets must provide a DPoP proof with their token request. The proof's public key thumbprint is bound to the access token via the <code>cnf.jkt</code> claim.</p>"},{"location":"architecture/chained-as/#state-parameter","title":"State Parameter","text":"<p>The Chained AS generates a cryptographically random state parameter for the upstream authorization request, preventing CSRF attacks.</p>"},{"location":"architecture/chained-as/#configuration","title":"Configuration","text":"<p>See Issuance Configuration &gt; Chained Authorization Server for configuration details and examples.</p>"},{"location":"architecture/chained-as/#endpoints-reference","title":"Endpoints Reference","text":"<p>All endpoints are tenant-scoped:</p> Endpoint Method Auth Description <code>/{tenant}/chained-as/par</code> POST None Pushed Authorization Request - initiates the flow <code>/{tenant}/chained-as/authorize</code> GET None Authorization endpoint - redirects to upstream <code>/{tenant}/chained-as/callback</code> GET None Handles upstream callback <code>/{tenant}/chained-as/token</code> POST None Exchanges code for access token <code>/{tenant}/chained-as/.well-known/oauth-authorization-server</code> GET None AS metadata discovery <code>/{tenant}/chained-as/.well-known/jwks.json</code> GET None Public keys for token verification"},{"location":"architecture/chained-as/#upstream-provider-requirements","title":"Upstream Provider Requirements","text":"<p>The upstream OIDC provider must:</p> <ol> <li>Support OIDC Discovery - Publish <code>.well-known/openid-configuration</code></li> <li>Support Authorization Code Flow - With <code>response_type=code</code></li> <li>Allow Confidential Clients - Client credentials authentication at token endpoint</li> <li>Return ID Tokens - Include <code>sub</code> and <code>iss</code> claims</li> </ol> <p>Tested providers:</p> <ul> <li>Keycloak</li> <li>Auth0</li> <li>Azure AD / Entra ID</li> <li>Google Identity Platform</li> </ul>"},{"location":"architecture/configuration-import/","title":"Config Import","text":""},{"location":"architecture/configuration-import/#configuration-import","title":"Configuration Import","text":"<p>EUDIPLO supports importing configurations from JSON files on application startup. This feature allows you to pre-configure credentials, issuance workflows, and presentation verification rules without using the API.</p>"},{"location":"architecture/configuration-import/#overview","title":"Overview","text":"<p>The configuration import system automatically loads and validates JSON configuration files from the <code>config/</code> directory when the application starts. This is particularly useful for:</p> <ul> <li>Development environments - Pre-load test configurations</li> <li>Production deployments - Bootstrap with standard configurations</li> <li>CI/CD pipelines - Automated environment setup</li> <li>Multi-tenant scenarios - Bulk import tenant-specific configurations</li> </ul> <p>When running locally with nodejs, the default directory is <code>assets/config/</code>.</p>"},{"location":"architecture/configuration-import/#configuration","title":"Configuration","text":"Key Type Notes <code>CONFIG_IMPORT</code> <code>boolean</code> Run one-off config import on startup  (default: <code>false</code>) <code>CONFIG_IMPORT_FORCE</code> <code>boolean</code> Force overwrite on config import  (default: <code>false</code>) <code>CONFIG_FOLDER</code> <code>string</code> Path to config import folder  (default: <code>/path/to/config/folder</code>) <code>CONFIG_VARIABLE_STRICT</code> <code>alternatives</code> Strict mode for config import.  (default: <code>skip</code>)"},{"location":"architecture/configuration-import/#key-points","title":"Key Points","text":"<ul> <li>Tenant isolation: Each tenant has its own folder (e.g., <code>tenant1</code>,   <code>company-xyz</code>)</li> <li>Configuration types: types of configurations are supported</li> <li>File naming: Not relevant since the <code>id</code> is taken from the content of the file. For keys, the id is based on the <code>kid</code> field in the JSON   file and not based on the filename.</li> <li>Nested structure: Credentials and issuance configs are grouped under   <code>issuance/</code></li> <li>Key management: Cryptographic keys are stored in the <code>keys/</code> directory and   will be imported automatically. After the import, the keys can be removed from   the import folder. Some implementations like HashiCorp Vault do not support the import feature.</li> </ul>"},{"location":"architecture/configuration-import/#configuration-types","title":"Configuration Types","text":""},{"location":"architecture/configuration-import/#cryptographic-keys","title":"Cryptographic Keys","text":"<p>Location: <code>config/{tenant}/keys/*.json</code></p> <p>Import cryptographic keys for signing and certificate operations.</p> <p>Example Structure:</p> <pre><code>{\n    \"privateKey\": {\n        \"kty\": \"EC\",\n        \"x\": \"pmn8SKQKZ0t2zFlrUXzJaJwwQ0WnQxcSYoS_D6ZSGho\",\n        \"y\": \"rMd9JTAovcOI_OvOXWCWZ1yVZieVYK2UgvB2IPuSk2o\",\n        \"crv\": \"P-256\",\n        \"d\": \"rqv47L1jWkbFAGMCK8TORQ1FknBUYGY6OLU1dYHNDqU\",\n        \"kid\": \"039af178-3ca0-48f4-a2e4-7b1209f30376\",\n        \"alg\": \"ES256\"\n    },\n    \"crt\": \"-----BEGIN CERTIFICATE-----\\n...\\n-----END CERTIFICATE-----\"\n}\n</code></pre> <p>Key Features:</p> <ul> <li>Multiple keys per tenant: Import several keys for different issuance   configurations</li> <li>Key ID from filename: The filename (without <code>.json</code>) becomes the key ID   (typically a UUID)</li> <li>Optional certificates: Include X.509 certificates in PEM format</li> <li>Algorithm support: ES256 (ECDSA P-256)</li> <li>Validation: Full schema validation during import</li> </ul>"},{"location":"architecture/configuration-import/#certificates","title":"Certificates","text":"<p>Location: <code>config/{tenant}/certs/*.json</code></p> <p>Import X.509 certificates for signing operations and certificate chain validation.</p> <p>Example Structure:</p> <pre><code>{\n    \"keyId\": \"039af178-3ca0-48f4-a2e4-7b1209f30376\",\n    \"isAccessCert\": true,\n    \"isSigningCert\": true,\n    \"description\": \"Imported self-signed certificate\",\n    \"crt\": \"-----BEGIN CERTIFICATE-----\\nMIIBYTCCAQigAwIBAgIBATAKBggqhkjOPQQDAjAWMRQwEgYDVQQDEwtSb290IFRl\\nbmFudDAeFw0yNTEyMTUwNzIxMzBaFw0yNjEyMTUwNzIxMzBaMBYxFDASBgNVBAMT\\nC1Jvb3QgVGVuYW50MFkwEwYHKoZIzj0CAQYIKoZIzj0DAQcDQgAEpmn8SKQKZ0t2\\nzFlrUXzJaJwwQ0WnQxcSYoS/D6ZSGhqsx30lMCi9w4j8685dYJZnXJVmJ5VgrZSC\\n8HYg+5KTaqNHMEUwFAYDVR0RBA0wC4IJbG9jYWxob3N0MA4GA1UdDwEB/wQEAwIF\\noDAdBgNVHQ4EFgQUd8hzqa0NGWHfP9Uf3LcdDZ5eGGEwCgYIKoZIzj0EAwIDRwAw\\nRAIgFfvs2dhqKXaDe+7zjmyTrEgRgb5IjcYONZ+6Rewt/nUCIFYCw9lF0Lbr00ca\\ngUPSm5jJNWFYV3UjFl9zY73W8Rz8\\n-----END CERTIFICATE-----\"\n}\n</code></pre> <p>Key Features:</p> <ul> <li>Key reference: Links certificate to an imported cryptographic key via <code>keyId</code></li> <li>Certificate types: Mark certificates as access certificates and/or signing certificates</li> <li>PEM format: Certificates must be in PEM format with <code>\\n</code> escape sequences</li> <li>Certificate chain support: Import multiple certificates to establish trust chains</li> <li>Optional description: Add human-readable descriptions for certificate management</li> <li>Validation: Schema validation ensures proper certificate format and structure</li> </ul> <p>Certificate Usage Types:</p> <ul> <li><code>isAccessCert</code>: Certificate used for authenticating access to protected resources</li> <li><code>isSigningCert</code>: Certificate used for signing credentials and tokens</li> </ul> <p>Both flags can be set to <code>true</code> if the certificate serves both purposes.</p> <p>PEM Format Notes:</p> <ul> <li>Use <code>\\n</code> escape sequences for line breaks in JSON</li> <li>Include both <code>-----BEGIN CERTIFICATE-----</code> and <code>-----END CERTIFICATE-----</code> headers</li> <li>The certificate content should be base64-encoded between the headers</li> </ul>"},{"location":"architecture/configuration-import/#credential-configurations","title":"Credential Configurations","text":"<p>Location: <code>config/{tenant}/issuance/credentials/*.json</code></p> <p>Define credential templates and schemas.</p> <p>Schema Reference: Credential Config API</p>"},{"location":"architecture/configuration-import/#issuance-configurations","title":"Issuance Configurations","text":"<p>Location: <code>config/{tenant}/issuance/issuance/*.json</code></p> <p>Define issuance workflows and authentication requirements.</p> <p>Schema Reference: Issuance Config API</p>"},{"location":"architecture/configuration-import/#presentation-configurations","title":"Presentation Configurations","text":"<p>Location: <code>config/{tenant}/presentation/*.json</code></p> <p>Define verification requirements for credential presentations.</p> <p>Schema Reference: Presentation Config API</p>"},{"location":"architecture/configuration-import/#trust-list-configurations","title":"Trust List Configurations","text":"<p>Location: <code>config/{tenant}/trust-lists/*.json</code></p> <p>Define trust lists for credential verification. Trust lists specify which issuers and revocation services are trusted when verifying credentials during presentation flows.</p> <p>Schema Reference: Trust List API</p> <p>For detailed information on trust lists and their role in credential verification, see Trust Framework.</p>"},{"location":"architecture/configuration-import/#status-list-configurations","title":"Status List Configurations","text":"<p>Location: <code>config/{tenant}/status-lists/*.json</code></p> <p>Pre-create status lists for credential revocation and suspension tracking. Status lists are used to track the status of issued credentials without revealing which specific credential is being checked.</p> <p>Schema Reference: Status List API</p> <p>For detailed information on status lists and their role in credential lifecycle management, see Status Management.</p>"},{"location":"architecture/configuration-import/#client-configurations","title":"Client Configurations","text":"<p>Location: <code>config/{tenant}/clients/*.json</code></p> <p>Define client-specific configurations, including client IDs, secrets, and permissions.</p> <p>Schema Reference: Client Config API</p>"},{"location":"architecture/configuration-import/#image-configuration","title":"Image Configuration","text":"<p>Location: <code>config/{tenant}/images/*</code></p> <p>Uploads the images to be used in in the issuer display information or for credential configs. The reference to the image is done via the filename, e.g. <code>logo.png</code> instead of a full URL like:</p> <pre><code>{\n    \"display\": [\n        {\n            \"name\": \"PID\",\n            \"description\": \"PID Credential\",\n            \"locale\": \"en-US\",\n            \"background_color\": \"#FFFFFF\",\n            \"text_color\": \"#000000\",\n            \"background_image\": {\n                \"uri\": \"identity-card.jpg\"\n            },\n            \"logo\": {\n                \"uri\": \"logo.jpg\"\n            }\n        }\n    ]\n}\n</code></pre> <p>When the image can not be found, the image reference is ignored.</p>"},{"location":"architecture/configuration-import/#import-process","title":"Import Process","text":""},{"location":"architecture/configuration-import/#startup-validation","title":"Startup Validation","text":"<p>During application startup, EUDIPLO:</p> <ul> <li>Checks environment variables - Only imports if <code>CONFIG_IMPORT=true</code></li> <li>Scans tenant directories - Processes each tenant folder independently</li> <li>Validates file structure - Ensures required subdirectories exist</li> <li>Reads JSON files - Parses each configuration file</li> </ul>"},{"location":"architecture/configuration-import/#environment-variable-placeholders","title":"Environment Variable Placeholders","text":"<p>Configuration files can contain dynamic placeholders that are replaced at import time before validation.</p>"},{"location":"architecture/configuration-import/#syntax","title":"Syntax","text":"<p><code>\"value\": \"${VAR_NAME}\"</code> \u2013 replaced by the environment variable <code>VAR_NAME</code> if it is set and non-empty.</p> <p><code>\"value\": \"${VAR_NAME:defaultValue}\"</code> \u2013 uses <code>VAR_NAME</code> from the environment if present; otherwise falls back to <code>defaultValue</code>.</p> <p>Placeholders are resolved recursively in all string fields of imported JSON objects (arrays, nested objects included). Binary buffers are ignored.</p>"},{"location":"architecture/configuration-import/#strict-mode-levels","title":"Strict Mode Levels","text":"<p><code>CONFIG_VARIABLE_STRICT</code> supports three levels to control behavior when a placeholder has no environment value and no default:</p> <ul> <li><code>abort</code>: Throw immediately and abort the entire import process.</li> <li><code>skip</code>: Throw for the current file (caught and logged as <code>ImportError</code>), skip that file and continue.</li> <li><code>ignore</code>: Keep the placeholder as-is, log a warning (<code>ImportPlaceholder</code>), and continue processing.</li> </ul> <p>Default behavior is <code>skip</code> in production recommendations.</p>"},{"location":"architecture/configuration-import/#examples","title":"Examples","text":"<pre><code>// Given process.env.CLIENT_ID_ROOT = \"root-123\"\n{\n    \"clientId\": \"${CLIENT_ID_ROOT}\", // =&gt; \"root-123\"\n    \"clientSecret\": \"${CLIENT_SECRET_ROOT:dev-secret}\", // =&gt; \"dev-secret\" if CLIENT_SECRET_ROOT unset\n}\n</code></pre> <p>Strict failure example (<code>CONFIG_VARIABLE_STRICT=abort</code>):</p> <pre><code>{ \"apiKey\": \"${API_KEY}\" } // throws if API_KEY not set\n</code></pre> <p>Non-strict warning example (<code>CONFIG_VARIABLE_STRICT=ignore</code> or absent / false):</p> <pre><code>{ \"apiKey\": \"${API_KEY}\" } // remains \"${API_KEY}\" and logs a warning\n</code></pre>"},{"location":"architecture/configuration-import/#logging-events","title":"Logging Events","text":"Event Condition <code>ImportPlaceholder</code> Non-strict mode, missing env and no default <code>ImportError</code> Strict mode, missing env and no default (file skipped) <code>ValidationError</code> Placeholder substituted but subsequent schema validation fails"},{"location":"architecture/configuration-import/#recommendations","title":"Recommendations","text":"<ul> <li>Prefer <code>${VAR:default}</code> for optional values to avoid noisy warnings.</li> <li>Use <code>CONFIG_VARIABLE_STRICT=true</code> in production to detect misconfiguration early.</li> <li>Keep secrets in environment variables; use defaults only for non-sensitive fallbacks.</li> </ul> <p>Note: Placeholder replacement occurs BEFORE class-validator schema validation so resolved values are validated, not the raw <code>${...}</code> tokens.</p>"},{"location":"architecture/configuration-import/#built-in-placeholders","title":"Built-in Placeholders","text":"<p>In addition to environment variable placeholders, EUDIPLO provides built-in placeholders that are replaced at runtime when configurations are used.</p>"},{"location":"architecture/configuration-import/#tenant_url","title":"<code>&lt;TENANT_URL&gt;</code>","text":"<p>The <code>&lt;TENANT_URL&gt;</code> placeholder allows configurations to be instance-independent. When a configuration is used, this placeholder is automatically replaced with the full URL including the host and tenant ID.</p> <p>Use Case: This is particularly useful for portable configurations that need to reference URLs within the same tenant but should work across different deployments (e.g., development, staging, production) without modification.</p> <p>Common Examples:</p> <ul> <li>Verifiable Credential Type (vct): Use <code>&lt;TENANT_URL&gt;/credentials/pid</code> as the <code>vct</code> value to create instance-independent credential type identifiers</li> <li>Trust List references: Point to trust lists hosted on the same instance, e.g., <code>&lt;TENANT_URL&gt;/trust-lists/eu-trust-list</code></li> </ul> <p>Example:</p> <pre><code>{\n    \"vct\": \"&lt;TENANT_URL&gt;/credentials/pid\",\n    \"trustList\": \"&lt;TENANT_URL&gt;/trust-lists/my-trust-list\"\n}\n</code></pre> <p>When used in a tenant with ID <code>company-xyz</code> on host <code>https://eudiplo.example.com</code>, the placeholder is replaced with:</p> <pre><code>{\n    \"vct\": \"https://eudiplo.example.com/company-xyz/credentials/pid\",\n    \"trustList\": \"https://eudiplo.example.com/company-xyz/trust-lists/my-trust-list\"\n}\n</code></pre> <p>This enables sharing configuration files between environments without hardcoding URLs.</p>"},{"location":"architecture/configuration-import/#validation-and-processing","title":"Validation and Processing","text":"<p>For each configuration file:</p> <ul> <li>JSON parsing - Validates file syntax</li> <li>Schema validation - Uses the same validators as the API endpoints</li> <li>Dependency checking - Verifies referenced configurations exist</li> <li>Duplicate handling - Respects <code>CONFIG_IMPORT_FORCE</code> setting</li> </ul>"},{"location":"architecture/configuration-import/#error-handling","title":"Error Handling","text":"<p>Invalid configurations are handled gracefully:</p> <ul> <li>Validation errors are logged with detailed information</li> <li>Invalid files are skipped - Import continues with remaining files</li> <li>Missing dependencies are reported</li> <li>Existing configurations are preserved unless force mode is enabled</li> </ul>"},{"location":"architecture/configuration-import/#logging","title":"Logging","text":"<p>Import activities are logged with structured information:</p> <pre><code>{\n    \"event\": \"Import\",\n    \"tenant\": \"company-xyz\",\n    \"files\": 5,\n    \"message\": \"5 credential configs imported for company-xyz\"\n}\n</code></pre> <p>Key import logging:</p> <pre><code>{\n    \"event\": \"Import\",\n    \"tenant\": \"company-xyz\",\n    \"message\": \"3 keys imported for company-xyz\"\n}\n</code></pre> <p>Error logging includes detailed validation information:</p> <pre><code>{\n    \"event\": \"ValidationError\",\n    \"file\": \"invalid-config.json\",\n    \"tenant\": \"company-xyz\",\n    \"errors\": [\n        {\n            \"property\": \"credentialConfigs\",\n            \"constraints\": { \"isArray\": \"credentialConfigs must be an array\" },\n            \"value\": \"not-an-array\"\n        }\n    ]\n}\n</code></pre>"},{"location":"architecture/configuration-import/#best-practices","title":"Best Practices","text":""},{"location":"architecture/configuration-import/#configuration-management","title":"Configuration Management","text":"<ul> <li>Use descriptive filenames that reflect the configuration purpose</li> <li>Test configurations in development before deploying</li> <li>Document tenant-specific configurations</li> </ul>"},{"location":"architecture/configuration-import/#production-deployment","title":"Production Deployment","text":"<ul> <li>Set <code>CONFIG_IMPORT=true</code> only for initial deployment</li> <li>Use <code>CONFIG_IMPORT_FORCE=false</code> to prevent accidental overwrites</li> <li>Monitor logs for validation errors during startup</li> <li>Manage configurations via API after initial import</li> </ul>"},{"location":"architecture/configuration-import/#multi-tenant-setup","title":"Multi-Tenant Setup","text":"<pre><code># Organize by tenant/organization\nassets/config/\n\u251c\u2500\u2500 acme-corp/\n\u2502   \u251c\u2500\u2500 keys/\n\u2502   \u251c\u2500\u2500 certs/\n\u2502   \u251c\u2500\u2500 issuance/\n\u2502   \u251c\u2500\u2500 presentation/\n\u2502   \u251c\u2500\u2500 trustlists/\n\u2502   \u2514\u2500\u2500 status-lists/\n\u251c\u2500\u2500 university-x/\n\u2502   \u251c\u2500\u2500 keys/\n\u2502   \u251c\u2500\u2500 certs/\n\u2502   \u251c\u2500\u2500 issuance/\n\u2502   \u251c\u2500\u2500 presentation/\n\u2502   \u251c\u2500\u2500 trustlists/\n\u2502   \u2514\u2500\u2500 status-lists/\n\u2514\u2500\u2500 government-agency/\n    \u251c\u2500\u2500 keys/\n    \u251c\u2500\u2500 certs/\n    \u251c\u2500\u2500 issuance/\n    \u251c\u2500\u2500 presentation/\n    \u251c\u2500\u2500 trustlists/\n    \u2514\u2500\u2500 status-lists/\n</code></pre> <p>Even when you just have one tenant, use a folder structure to prepare for future multi-tenancy.</p>"},{"location":"architecture/configuration-import/#troubleshooting","title":"Troubleshooting","text":""},{"location":"architecture/configuration-import/#common-issues","title":"Common Issues","text":"<p>Import not running: Check <code>CONFIG_IMPORT=true</code> is set</p> <p>Configurations not updating: Set <code>CONFIG_IMPORT_FORCE=true</code> to overwrite existing</p> <p>Validation errors: Check logs for specific validation failures and schema requirements</p> <p>Missing dependencies: Ensure credential configs are imported before issuance configs that reference them</p> <p>Key validation errors: Check that imported keys use supported algorithms (ES256) and have valid JWK format</p> <p>Certificate import issues: Verify certificates are in PEM format and match the imported private key</p>"},{"location":"architecture/configuration-import/#security-considerations","title":"Security Considerations","text":"<ul> <li>File permissions - Ensure config files have appropriate read permissions</li> <li>Tenant isolation - Verify tenant boundaries are properly maintained</li> </ul> <p>Warning</p> <p>Avoid storing sensitive information (e.g., private keys, secrets) in configuration files. Use environment variables for sensitive data and reference them using placeholders.</p>"},{"location":"architecture/database/","title":"Database","text":""},{"location":"architecture/database/#databases","title":"Databases","text":"<p>This service uses TypeORM for data persistence. By default, a local SQLite database is used, but the system also supports PostgreSQL and can be extended to work with other engines such as MySQL thanks to TypeORM\u2019s flexible architecture.</p>"},{"location":"architecture/database/#configuration","title":"Configuration","text":"Key Type Notes <code>DB_TYPE</code> <code>string</code> Database type  (default: <code>sqlite</code>) <code>DB_HOST</code> <code>string</code> Database host [when DB_TYPE is {\"override\":true} | \"sqlite\" \u2192 otherwise required] <code>DB_PORT</code> <code>number</code> Database port [when DB_TYPE is {\"override\":true} | \"sqlite\" \u2192 otherwise required] <code>DB_USERNAME</code> <code>string</code> Database username [when DB_TYPE is {\"override\":true} | \"sqlite\" \u2192 otherwise required] <code>DB_PASSWORD</code> <code>string</code> Database password [when DB_TYPE is {\"override\":true} | \"sqlite\" \u2192 otherwise required] <code>DB_DATABASE</code> <code>string</code> Database name [when DB_TYPE is {\"override\":true} | \"sqlite\" \u2192 otherwise required]"},{"location":"architecture/database/#sqlite-default","title":"SQLite (Default)","text":"<p>When using <code>DB_TYPE=sqlite</code>, the service will store its data in a local file-based SQLite database located at the path defined by the <code>FOLDER</code> variable (<code>./config</code> by default). This setup is lightweight and ideal for:</p> <ul> <li>Development</li> <li>Testing</li> <li>Prototyping</li> </ul> <p>No additional database server is required.</p>"},{"location":"architecture/database/#postgresql","title":"PostgreSQL","text":"<p>To connect to a PostgreSQL instance, set the following environment variables:</p> <pre><code>DB_TYPE=postgres\nDB_HOST=your-hostname\nDB_PORT=5432\nDB_USERNAME=your-username\nDB_PASSWORD=your-password\nDB_DATABASE=your-database\n</code></pre> <p>This mode is suitable for:</p> <ul> <li>Production deployments</li> <li>Multi-instance setups</li> <li>Scenarios requiring scalability and better concurrency handling</li> </ul> <p>Make sure your database is reachable and properly initialized before starting the service.</p>"},{"location":"architecture/database/#encryption-at-rest","title":"Encryption at Rest","text":"<p>EUDIPLO encrypts sensitive data at rest using AES-256-GCM authenticated encryption. This protects cryptographic keys and personal information stored in the database from unauthorized access, even if the database itself is compromised.</p>"},{"location":"architecture/database/#encrypted-fields","title":"Encrypted Fields","text":"<p>The following data is automatically encrypted before being written to the database:</p> Entity Field Data Type <code>KeyEntity</code> <code>key</code> Private JWK material <code>Session</code> <code>credentials</code> Verified presentation claims (PII) <code>Session</code> <code>credentialPayload</code> Issuance offer data <code>Session</code> <code>auth_queries</code> Authorization query data <code>Session</code> <code>offer</code> Credential offer object <code>InteractiveAuthSession</code> <code>presentationData</code> OpenID4VP presentation data <code>InteractiveAuthSession</code> <code>completedStepsData</code> Step completion results <code>InteractiveAuthSession</code> <code>authorizationDetails</code> Authorization details"},{"location":"architecture/database/#encryption-key-sources","title":"Encryption Key Sources","text":"<p>The encryption key can be sourced from different providers, configured via <code>ENCRYPTION_KEY_SOURCE</code>:</p> Source Description Security Level Use Case <code>env</code> Derived from <code>MASTER_SECRET</code> via HKDF Development Local dev, testing <code>vault</code> Fetched from HashiCorp Vault at startup Production Self-hosted, on-prem <code>aws</code> Fetched from AWS Secrets Manager Production AWS-native deployments <code>azure</code> Fetched from Azure Key Vault Production Azure-native deployments <p>Security Hardening</p> <p>When using <code>vault</code>, <code>aws</code>, or <code>azure</code>, the encryption key is only in RAM \u2014 it's never stored in environment variables. This means a compromised container cannot retrieve the key via <code>env</code> or <code>/proc/*/environ</code> commands.</p>"},{"location":"architecture/database/#environment-based-key-development","title":"Environment-based Key (Development)","text":"<pre><code>ENCRYPTION_KEY_SOURCE=env  # default\nMASTER_SECRET=your-jwt-secret  # key derived via HKDF\n</code></pre>"},{"location":"architecture/database/#hashicorp-vault","title":"HashiCorp Vault","text":"<pre><code>ENCRYPTION_KEY_SOURCE=vault\nVAULT_ADDR=https://vault.example.com:8200\nVAULT_TOKEN=hvs.your-token\nVAULT_ENCRYPTION_KEY_PATH=secret/data/eudiplo/encryption-key  # optional, defaults shown\n\n# Create the key in Vault:\nvault kv put secret/eudiplo/encryption-key key=$(openssl rand -base64 32)\n</code></pre>"},{"location":"architecture/database/#aws-secrets-manager","title":"AWS Secrets Manager","text":"<pre><code>ENCRYPTION_KEY_SOURCE=aws\nAWS_REGION=us-east-1\nAWS_ENCRYPTION_SECRET_NAME=eudiplo/encryption-key\n\n# Create the key in AWS:\naws secretsmanager create-secret \\\n  --name eudiplo/encryption-key \\\n  --secret-string $(openssl rand -base64 32)\n</code></pre> <p>Uses IAM roles automatically when running in EKS/ECS (no credentials needed).</p>"},{"location":"architecture/database/#azure-key-vault","title":"Azure Key Vault","text":"<pre><code>ENCRYPTION_KEY_SOURCE=azure\nAZURE_KEYVAULT_URL=https://myvault.vault.azure.net\nAZURE_ENCRYPTION_SECRET_NAME=eudiplo-encryption-key\n\n# Create the key in Azure:\naz keyvault secret set \\\n  --vault-name myvault \\\n  --name eudiplo-encryption-key \\\n  --value $(openssl rand -base64 32)\n</code></pre> <p>Uses Managed Identity automatically when running in Azure (no credentials needed).</p>"},{"location":"architecture/database/#key-requirements","title":"Key Requirements","text":"<p>The encryption key must be:</p> <ul> <li>256 bits (32 bytes)</li> <li>Encoded as: Base64 (44 characters) or Hex (64 characters)</li> </ul> <p>Generate a secure key:</p> <pre><code># Base64 (recommended)\nopenssl rand -base64 32\n\n# Hex\nopenssl rand -hex 32\n</code></pre>"},{"location":"architecture/database/#migration-from-unencrypted-data","title":"Migration from Unencrypted Data","text":"<p>If upgrading from a version without encryption, EUDIPLO automatically handles migration:</p> <ol> <li>Reading: Unencrypted data is detected and read normally</li> <li>Writing: All writes use encryption</li> </ol> <p>To fully encrypt existing data, update each record (e.g., via a migration script or by re-creating keys/sessions).</p> <p>Important: Key Recovery</p> <p>If you lose your encryption key, all encrypted data becomes unrecoverable. Ensure you:</p> <ul> <li>Use a secrets manager with backup/versioning</li> <li>Document the key's location for disaster recovery</li> <li>Test key rotation procedures</li> </ul> <p>Database Column Type Change</p> <p>Encrypted columns use <code>text</code> type instead of <code>json</code>. If you have custom migrations or database constraints on these columns, update them accordingly.</p>"},{"location":"architecture/database/#extensibility","title":"Extensibility","text":"<p>Because this service uses TypeORM, it is easy to integrate additional database engines such as:</p> <ul> <li>MySQL / MariaDB</li> <li>Microsoft SQL Server</li> <li>Oracle</li> </ul> <p>To add support for a new engine:</p> <ul> <li>Install the appropriate TypeORM driver (e.g., <code>mysql2</code>)</li> <li>Set <code>DB_TYPE</code> to the corresponding engine name</li> <li>Configure the necessary connection options via environment variables</li> </ul> <p>Let us know if you need help extending support for additional databases.</p>"},{"location":"architecture/database/#multi-tenant-database-schema","title":"Multi-Tenant Database Schema","text":"<p>EUDIPLO supports multi-tenancy, allowing multiple tenants to share the same database while keeping their data isolated. This is achieved by adding a <code>tenantId</code> column to relevant entities and filtering all queries by this identifier.</p>"},{"location":"architecture/database/#tenant-isolation-in-database","title":"Tenant Isolation in Database","text":"<p>In multi-tenant mode, data isolation is achieved through a <code>tenantId</code> column in all relevant entities:</p>"},{"location":"architecture/database/#core-entities-with-tenant-support","title":"Core Entities with Tenant Support","text":"<p>Session Entity:</p> <pre><code>@Entity()\nexport class Session {\n    @PrimaryColumn('uuid')\n    id: string;\n\n    @Column('varchar')\n    tenantId: string; // Tenant ID for multi-tenancy support\n\n    // ... other fields\n}\n</code></pre> <p>Issuance Configuration Entity:</p> <pre><code>@Entity()\nexport class IssuanceConfig {\n    @PrimaryColumn('varchar')\n    id: string;\n\n    @Column('varchar')\n    tenantId: string;\n\n    // ... other fields\n}\n</code></pre>"},{"location":"architecture/database/#database-queries","title":"Database Queries","text":"<p>All database operations automatically filter by <code>tenantId</code> when in multi-tenant mode:</p> <pre><code>// Example: Get sessions for specific tenant\nreturn this.sessionRepository.findBy({ tenantId });\n\n// Example: Update session with tenant scope\nreturn this.sessionRepository.update({ id: sessionId, tenantId }, updateData);\n</code></pre>"},{"location":"architecture/iae/","title":"Interactive Authorization (IAE)","text":""},{"location":"architecture/iae/#interactive-authorization-endpoint-iae","title":"Interactive Authorization Endpoint (IAE)","text":"<p>The Interactive Authorization Endpoint (IAE) enables user interactions during the credential issuance flow. It allows wallets to request user authorization through a sequence of configurable actions before credential issuance completes.</p> <p>This is particularly useful for:</p> <ul> <li>Identity verification \u2013 Request a verifiable presentation from the wallet (e.g., PID, mDL)</li> <li>Web-based flows \u2013 Redirect users to complete forms, payments, or external verification</li> <li>Multi-step authorization \u2013 Combine multiple actions in sequence (e.g., present ID, then complete KYC form)</li> </ul>"},{"location":"architecture/iae/#how-it-works","title":"How It Works","text":"<p>The IAE is part of the OID4VCI authorization code flow. When a wallet initiates issuance with <code>interaction_types_supported</code>, EUDIPLO responds with the first required action. The wallet must complete each action in sequence before receiving an authorization code.</p> <pre><code>sequenceDiagram\n    autonumber\n    actor Wallet as EUDI Wallet\n    participant EUDIPLO as Middleware\n    participant Service as Your Backend\n\n    Wallet-&gt;&gt;EUDIPLO: Authorization Request&lt;br/&gt;(interaction_types_supported)\n    EUDIPLO--&gt;&gt;Wallet: IAE Response (Step 1: openid4vp)\n\n    Wallet-&gt;&gt;EUDIPLO: OpenID4VP Presentation\n    EUDIPLO--&gt;&gt;Wallet: IAE Response (Step 2: redirect_to_web)\n\n    Wallet-&gt;&gt;Service: User completes web form\n    Service-&gt;&gt;EUDIPLO: Callback with code_verifier\n    EUDIPLO--&gt;&gt;Wallet: Authorization Code\n\n    Wallet-&gt;&gt;EUDIPLO: Token Request\n    EUDIPLO--&gt;&gt;Wallet: Access Token\n\n    Wallet-&gt;&gt;EUDIPLO: Credential Request\n    EUDIPLO--&gt;&gt;Wallet: Credential</code></pre>"},{"location":"architecture/iae/#supported-action-types","title":"Supported Action Types","text":"<p>IAE supports the following action types, which can be combined in any order:</p> Action Type Description <code>openid4vp_presentation</code> Request a verifiable presentation from the wallet using OpenID4VP <code>redirect_to_web</code> Redirect the user to a web page for additional interaction (forms, payment)"},{"location":"architecture/iae/#configuring-iae-actions","title":"Configuring IAE Actions","text":"<p>IAE actions are configured per credential configuration. You can define a sequence of actions that must be completed before credential issuance.</p>"},{"location":"architecture/iae/#example-single-presentation","title":"Example: Single Presentation","text":"<p>Request a PID presentation before issuing a credential:</p> <pre><code>{\n    \"credentialConfigId\": \"citizen-credential\",\n    \"iaeActions\": [\n        {\n            \"type\": \"openid4vp_presentation\",\n            \"label\": \"Identity Verification\",\n            \"presentationConfigId\": \"pid-presentation-config\"\n        }\n    ]\n}\n</code></pre>"},{"location":"architecture/iae/#example-multi-step-flow","title":"Example: Multi-Step Flow","text":"<p>First verify identity with a presentation, then redirect to a web form:</p> <pre><code>{\n    \"credentialConfigId\": \"organization-credential\",\n    \"iaeActions\": [\n        {\n            \"type\": \"openid4vp_presentation\",\n            \"label\": \"Identity Verification\",\n            \"presentationConfigId\": \"pid-presentation-config\"\n        },\n        {\n            \"type\": \"redirect_to_web\",\n            \"label\": \"Complete Registration\",\n            \"url\": \"https://example.com/register?session={auth_session}\",\n            \"description\": \"Please complete the organization registration form\"\n        }\n    ]\n}\n</code></pre>"},{"location":"architecture/iae/#action-types-reference","title":"Action Types Reference","text":""},{"location":"architecture/iae/#openid4vp-presentation","title":"OpenID4VP Presentation","text":"<p>Requests a verifiable presentation from the wallet.</p> Field Type Required Description <code>type</code> string Yes Must be <code>\"openid4vp_presentation\"</code> <code>label</code> string No Display label for this step <code>presentationConfigId</code> string Yes ID of the presentation configuration to use <p>The presentation configuration defines which credentials and claims to request. See Presentation Configuration for details.</p>"},{"location":"architecture/iae/#redirect-to-web","title":"Redirect to Web","text":"<p>Redirects the user to a web page for additional interaction.</p> Field Type Required Description <code>type</code> string Yes Must be <code>\"redirect_to_web\"</code> <code>label</code> string No Display label for this step <code>url</code> string Yes URL to redirect the user to (supports <code>{auth_session}</code> placeholder) <code>callbackUrl</code> string No URL for the external service to redirect back to <code>description</code> string No Instructions for the user (displayed in wallet) <p>The <code>{auth_session}</code> placeholder in the URL is replaced with the session identifier, allowing your backend to correlate the web interaction with the issuance flow.</p>"},{"location":"architecture/iae/#completing-web-based-actions","title":"Completing Web-Based Actions","text":"<p>When using <code>redirect_to_web</code>, your backend must signal completion by calling back to EUDIPLO with a <code>code_verifier</code>:</p> <pre><code>POST /{tenantId}/oid4vci/authorize/interactive\nContent-Type: application/json\n\n{\n    \"auth_session\": \"&lt;session-id&gt;\",\n    \"code_verifier\": \"&lt;unique-verifier&gt;\"\n}\n</code></pre> <p>EUDIPLO will verify the <code>code_verifier</code> and either:</p> <ul> <li>Return the next action (if more steps remain), or</li> <li>Issue the authorization code (if all steps are complete)</li> </ul>"},{"location":"architecture/iae/#session-state","title":"Session State","text":"<p>During the IAE flow, EUDIPLO tracks:</p> Field Description <code>currentStepIndex</code> Index of the current action (0-based) <code>completedStepsData</code> Data collected from each completed step <code>iaeActions</code> The configured action sequence <p>This state is managed automatically. Your backend only needs to respond to the configured actions.</p>"},{"location":"architecture/iae/#claims-webhook-integration","title":"Claims Webhook Integration","text":"<p>When an <code>openid4vp_presentation</code> action is completed, EUDIPLO can call a claims webhook to transform the verified presentation data into credential claims.</p> <p>See Webhooks for configuration details.</p>"},{"location":"architecture/iae/#fallback-behavior","title":"Fallback Behavior","text":"<p>If no <code>iaeActions</code> are configured for a credential, EUDIPLO falls back to the wallet's <code>interaction_types_supported</code> preference:</p> <ol> <li>If the wallet supports <code>openid4vp</code> and a presentation configuration exists \u2192 use OpenID4VP</li> <li>If the wallet supports <code>redirect_to_web</code> \u2192 use web redirect</li> <li>Otherwise \u2192 return an error</li> </ol> <p>This ensures backward compatibility with wallets that don't support multi-step flows.</p>"},{"location":"architecture/iae/#error-handling","title":"Error Handling","text":"<p>IAE errors are returned as JSON:</p> <pre><code>{\n    \"error\": \"invalid_request\",\n    \"error_description\": \"Missing required field: code_verifier\"\n}\n</code></pre> <p>Common errors:</p> Error Code Description <code>invalid_request</code> Missing required parameters <code>invalid_auth_session</code> Session not found or expired <code>invalid_code_verifier</code> Code verifier mismatch for web authorization <code>presentation_failed</code> OpenID4VP presentation verification failed"},{"location":"architecture/key-management/","title":"Key Management","text":""},{"location":"architecture/key-management/#key-management","title":"Key Management","text":"<p>The keys used for signing operations in EUDIPLO can be managed in multiple ways, depending on the selected key management type (<code>KM_TYPE</code>).</p> <p>\ud83d\udca1 Encryption operations are always proceed with database stored keys for not and independent from the used KeyManagement Module.</p>"},{"location":"architecture/key-management/#configuration","title":"Configuration","text":"Key Type Notes <code>KM_TYPE</code> <code>string</code> The key management type  (default: <code>db</code>) <code>VAULT_URL</code> <code>string</code> The URL of the Vault server [when KM_TYPE is {\"override\":true} | \"vault\" \u2192 then required] <code>VAULT_TOKEN</code> <code>string</code> The token for accessing the Vault [when KM_TYPE is {\"override\":true} | \"vault\" \u2192 then required]"},{"location":"architecture/key-management/#database-based-key-management","title":"Database based Key Management","text":"<p>When <code>KM_TYPE=db</code> (default), keys are stored unencrypted in the database. This mode is ideal for development or testing.</p>"},{"location":"architecture/key-management/#multiple-key-support","title":"Multiple Key Support","text":"<p>Each tenant can manage multiple cryptographic keys simultaneously. Each key has a unique key id and is also isolated via the <code>tenant_id</code> field.</p> <p>Each key file contains the private key in JWK format:</p> <pre><code>{\n    \"kty\": \"EC\",\n    \"x\": \"pmn8SKQKZ0t2zFlrUXzJaJwwQ0WnQxcSYoS_D6ZSGho\",\n    \"y\": \"rMd9JTAovcOI_OvOXWCWZ1yVZieVYK2UgvB2IPuSk2o\",\n    \"crv\": \"P-256\",\n    \"d\": \"rqv47L1jWkbFAGMCK8TORQ1FknBUYGY6OLU1dYHNDqU\",\n    \"kid\": \"039af178-3ca0-48f4-a2e4-7b1209f30376\",\n    \"alg\": \"ES256\"\n}\n</code></pre>"},{"location":"architecture/key-management/#automatic-key-generation","title":"Automatic Key Generation","text":"<p>On startup, if no keys are found for a tenant, the service will automatically generate a new key pair. Even when using the database mode, the private key will never be exposed by the api.</p>"},{"location":"architecture/key-management/#vault-hashicorp-vault","title":"Vault (HashiCorp Vault)","text":"<p>To use HashiCorp Vault for key management, configure the following:</p> <pre><code>KM_TYPE=vault\nVAULT_URL=http://localhost:8200/v1/transit\nVAULT_TOKEN=your-vault-token\n</code></pre> <p>For each tenant, a new secret engine is created in Vault with the path <code>{tenantId}</code>.</p> <p>To issue credentials, you need to have a signed certificate for the public key that is bound to your domain.</p> <p>In this mode:</p> <ul> <li>All signing operations are delegated to Vault via its API.</li> <li>The private key never leaves the Vault server.</li> <li>Access can be tightly controlled using Vault\u2019s policies and authentication   mechanisms.</li> </ul> <p>Vault is well-suited for production environments where secure, auditable key usage is required.</p>"},{"location":"architecture/key-management/#extensibility","title":"Extensibility","text":"<p>The key management system is designed to be extensible. You can integrate other key management backends such as:</p> <ul> <li>\ud83d\udd10 AWS KMS</li> <li>\ud83d\udd10 Azure Key Vault</li> <li>\ud83d\udd10 Google Cloud KMS</li> <li>\ud83d\udd10 Hardware Security Modules (HSMs)</li> </ul> <p>To add a new backend:</p> <ul> <li>Implement the key service interface.</li> <li>Extend the module factory to support a new <code>KM_TYPE</code>.</li> </ul> <pre><code>// Example (in code):\nKM_TYPE = awskms;\n</code></pre> <p>If you need help integrating a new provider, feel free to open an issue or contact the maintainers.</p>"},{"location":"architecture/key-management/#certificates","title":"Certificates","text":"<p>EUDIPLO supports comprehensive management of X.509 certificates that are linked to cryptographic keys. Certificates can be used to verify the authenticity of public keys and establish trust between parties.</p>"},{"location":"architecture/key-management/#certificate-management","title":"Certificate Management","text":"<p>Certificates are managed separately from keys and can be associated with any imported key. Each certificate has a unique identifier and is linked to a key via the <code>keyId</code> field.</p> <p>Certificate Types:</p> <ul> <li>Access Certificates (<code>isAccessCert</code>): Used for authenticating access to protected resources</li> <li>Signing Certificates (<code>isSigningCert</code>): Used for signing credentials and tokens</li> </ul> <p>A single certificate can serve both purposes by setting both flags to <code>true</code>.</p>"},{"location":"architecture/key-management/#certificate-operations","title":"Certificate Operations","text":"<p>The certificate management API provides endpoints for creating, reading, updating, and deleting certificates. For detailed endpoint specifications, parameters, and request/response schemas, see:</p> <p>API Reference: Certificate API Endpoints</p> <p>Available operations:</p> <ul> <li>List all certificates for a tenant</li> <li>Get certificate details by ID</li> <li>Create/Import certificate for a specific key</li> <li>Update certificate metadata and type flags</li> <li>Delete certificate</li> <li>Generate self-signed certificate for a key</li> </ul>"},{"location":"architecture/key-management/#self-signed-certificate-generation","title":"Self-Signed Certificate Generation","text":"<p>Generate a self-signed certificate for an existing key using the dedicated endpoint. This automatically creates a certificate with:</p> <ul> <li>Subject: Common Name based on tenant configuration</li> <li>Validity: 1 year from generation</li> <li>Algorithm: Matches the key algorithm (ES256)</li> <li>Extensions: Subject Alternative Name (SAN) for localhost</li> </ul> <p>API Reference: Self-Signed Certificate Generation</p>"},{"location":"architecture/key-management/#certificate-import-via-configuration","title":"Certificate Import via Configuration","text":"<p>Certificates can be imported during application startup using the configuration system.</p> <p>Directory Structure:</p> <pre><code>assets/config/\n\u2514\u2500\u2500 tenant-1/\n    \u2514\u2500\u2500 certs/\n        \u251c\u2500\u2500 signing-cert.json\n        \u2514\u2500\u2500 access-cert.json\n</code></pre> <p>Certificate File Format:</p> <pre><code>{\n    \"keyId\": \"039af178-3ca0-48f4-a2e4-7b1209f30376\",\n    \"isAccessCert\": true,\n    \"isSigningCert\": true,\n    \"description\": \"Production certificate\",\n    \"crt\": \"-----BEGIN CERTIFICATE-----\\nMIIBYTCCAQigAwIB...\\n-----END CERTIFICATE-----\"\n}\n</code></pre> <p>See Configuration Import for more details.</p>"},{"location":"architecture/key-management/#certificate-chain-support","title":"Certificate Chain Support","text":"<p>EUDIPLO supports certificate chains for establishing trust hierarchies. Import multiple certificates and link them to the same key to build a chain from leaf to root certificate.</p>"},{"location":"architecture/key-management/#certificate-validation","title":"Certificate Validation","text":"<p>Certificates are validated during import:</p> <ul> <li>PEM format verification</li> <li>Public key matching with associated key</li> <li>Certificate expiration checking</li> <li>X.509 standard compliance</li> </ul>"},{"location":"architecture/key-management/#certificate-format","title":"Certificate Format","text":"<p>Certificates must be in PEM format with proper line breaks:</p> <ul> <li>Use <code>\\n</code> escape sequences in JSON</li> <li>Include both <code>-----BEGIN CERTIFICATE-----</code> and <code>-----END CERTIFICATE-----</code> headers</li> <li>Base64-encoded DER content between headers</li> </ul> <p>When a new key pair is generated, a self-signed certificate is also created. This certificate includes the public key and is stored alongside the key files. The certificate can be overwritten any time via the API.</p> <p>When using the Registrar, it will generate a certificate for the public key that can be used to secure the OID4VCI and OID4VP requests. Each tenant will only have one access certificate.</p> <p>Note: In the future the access certificate generation will follow the official standard that is under development right now.</p>"},{"location":"architecture/key-management/#multi-tenant-key-management","title":"Multi-Tenant Key Management","text":""},{"location":"architecture/key-management/#automatic-key-generation_1","title":"Automatic Key Generation","text":"<p>Tenant Initialization Process:</p> <ol> <li>Client registers with credentials (<code>client_id</code>, <code>client_secret</code>)</li> <li>Cryptographic key pair automatically generated</li> <li>Keys stored in tenant-specific location</li> <li>Generation of certificate for public key</li> </ol>"},{"location":"architecture/key-management/#key-import-and-management","title":"Key Import and Management","text":"<p>EUDIPLO supports importing existing keys through multiple methods to accommodate different deployment scenarios and security requirements.</p> <p>The <code>kid</code> provided in the key files is used to identify and manage keys within the system. An optional <code>description</code> field can be included for additional context.</p>"},{"location":"architecture/key-management/#api-based-key-import","title":"API-Based Key Import","text":"<p>Import keys through the REST API using authenticated requests:</p> <p>Endpoint: <code>POST /key</code></p> <p>Request Body:</p> <pre><code>{\n    \"privateKey\": {\n        \"kty\": \"EC\",\n        \"x\": \"pmn8SKQKZ0t2zFlrUXzJaJwwQ0WnQxcSYoS_D6ZSGho\",\n        \"y\": \"rMd9JTAovcOI_OvOXWCWZ1yVZieVYK2UgvB2IPuSk2o\",\n        \"crv\": \"P-256\",\n        \"d\": \"rqv47L1jWkbFAGMCK8TORQ1FknBUYGY6OLU1dYHNDqU\",\n        \"kid\": \"039af178-3ca0-48f4-a2e4-7b1209f30376\",\n        \"alg\": \"ES256\"\n    },\n    \"description\": \"Optional key description\",\n    \"crt\": \"-----BEGIN CERTIFICATE-----\\n...optional certificate...\\n-----END CERTIFICATE-----\"\n}\n</code></pre> <p>Response:</p> <pre><code>{\n    \"id\": \"039af178-3ca0-48f4-a2e4-7b1209f30376\"\n}\n</code></pre>"},{"location":"architecture/key-management/#configuration-based-key-import","title":"Configuration-Based Key Import","text":"<p>Import keys automatically during application startup using the configuration import system.</p> <p>Environment Variables:</p> <pre><code>CONFIG_IMPORT=true\nCONFIG_IMPORT_FORCE=false  # Set to true to overwrite existing keys\n</code></pre> <p>Directory Structure:</p> <pre><code>assets/config/\n\u251c\u2500\u2500 tenant-1/\n\u2502   \u2514\u2500\u2500 keys/\n\u2502       \u251c\u2500\u2500 primary-key.json\n\u2502       \u251c\u2500\u2500 backup-key.json\n\u2502       \u2514\u2500\u2500 legacy-key.json\n\u2514\u2500\u2500 tenant-2/\n    \u2514\u2500\u2500 keys/\n        \u2514\u2500\u2500 signing-key.json\n</code></pre> <p>Key File Format:</p> <pre><code>{\n    \"privateKey\": {\n        \"kty\": \"EC\",\n        \"x\": \"...\",\n        \"y\": \"...\",\n        \"crv\": \"P-256\",\n        \"d\": \"...\",\n        \"kid\": \"unique-key-identifier\",\n        \"alg\": \"ES256\"\n    },\n    \"crt\": \"-----BEGIN CERTIFICATE-----\\n...\\n-----END CERTIFICATE-----\"\n}\n</code></pre>"},{"location":"architecture/key-management/#key-management-operations","title":"Key Management Operations","text":"<p>For detailed key management endpoints, parameters, and request/response schemas, see:</p> <p>API Reference: Key Management API Endpoints</p> <p>Available operations include listing keys, importing keys, and managing key metadata.</p>"},{"location":"architecture/key-management/#supported-key-formats","title":"Supported Key Formats","text":"<ul> <li>Algorithm Support: ES256 (ECDSA P-256)</li> <li>Key Format: JSON Web Key (JWK) format</li> <li>Certificate Support: Optional X.509 certificates in PEM format</li> <li>Key Generation: Automatic generation if no keys exist</li> </ul>"},{"location":"architecture/sessions/","title":"Sessions","text":""},{"location":"architecture/sessions/#sessions-management","title":"Sessions Management","text":"<p>EUDIPLO manages sessions for credential issuance and verification, bound to each tenant. When using the Interactive Authorization Endpoint (IAE), the session tracks the multi-step authorization flow, including completed steps and collected data. Sessions are stored in the database and can be managed via the <code>/sessions</code> endpoint. You can retrieve a specific session via <code>/sessions/{id}</code>.</p>"},{"location":"architecture/sessions/#session-cleanup","title":"Session Cleanup","text":"<p>To tidy up old sessions, an interval is set to clean up older sessions. The cleanup behavior can be configured both globally (via environment variables) and per-tenant (via the Session Config API or the client UI).</p> <p>Other elements like persisted status mapping (the binding between a session ID and a status list reference) are not deleted with this process.</p>"},{"location":"architecture/sessions/#cleanup-modes","title":"Cleanup Modes","text":"<p>EUDIPLO supports two cleanup modes:</p> <ul> <li>Full (default): Deletes the entire session record from the database.</li> <li>Anonymize: Keeps session metadata (ID, original status, timestamps)   but removes personal data including credentials, credential payloads, auth   queries, offers, and request objects.</li> </ul> <p>Anonymize mode is useful for audit and compliance scenarios where you need to retain evidence that a session occurred without storing personal data. The original session status is preserved, so historical statistics remain accurate. For real-time monitoring, use the Prometheus metrics exposed by EUDIPLO.</p>"},{"location":"architecture/sessions/#per-tenant-configuration","title":"Per-Tenant Configuration","text":"<p>Each tenant can override the global session settings via the <code>/session-config</code> endpoint or through the client UI under Session Management &gt; Session Config.</p> <p>For the full API specification, see the Session Config API.</p>"},{"location":"architecture/sessions/#configuration-options","title":"Configuration Options","text":"Field Type Description <code>ttlSeconds</code> <code>number</code> Time-to-live in seconds (minimum 60). Omit to use global default. <code>cleanupMode</code> <code>string</code> Either <code>full</code> or <code>anonymize</code>. Omit to use global default."},{"location":"architecture/sessions/#global-configuration","title":"Global Configuration","text":"<p>The global defaults are configured via environment variables:</p> Key Type Notes <code>SESSION_TIDY_UP_INTERVAL</code> <code>number</code> Interval in seconds to run session tidy up  (default: <code>3600</code>) <code>SESSION_TTL</code> <code>number</code> Default time to live for sessions in seconds. Can be overridden per tenant.  (default: <code>86400</code>) <code>SESSION_CLEANUP_MODE</code> <code>string</code> Default cleanup mode when sessions expire. 'full' deletes the entire session, 'anonymize' keeps metadata but removes personal data. Can be overridden per tenant.  (default: <code>full</code>)"},{"location":"architecture/status-management/","title":"Status Management","text":""},{"location":"architecture/status-management/#status-management","title":"Status Management","text":"<p>EUDIPLO provides comprehensive status management for issued credentials through the OAuth Token Status List specification (RFC 9528). This allows issuers to revoke or suspend credentials without requiring direct communication with the credential holder.</p>"},{"location":"architecture/status-management/#overview","title":"Overview","text":"<p>Status management enables credential lifecycle operations such as:</p> <ul> <li>Revocation - Permanently invalidate a credential</li> <li>Suspension - Temporarily disable a credential (can be reinstated)</li> <li>Status verification - Verifiers can check credential validity in real-time</li> </ul> <p>Status lists are privacy-preserving: verifiers can check if a credential is valid without learning which specific credential is being checked (beyond the list index).</p>"},{"location":"architecture/status-management/#how-it-works","title":"How It Works","text":"<pre><code>sequenceDiagram\n    participant Issuer\n    participant StatusList as Status List Service\n    participant Verifier\n    participant Wallet\n\n    Issuer-&gt;&gt;StatusList: Issue credential with status index\n    Note over StatusList: Credential assigned index 42\n\n    Wallet-&gt;&gt;Verifier: Present credential\n    Verifier-&gt;&gt;StatusList: GET /status-list/{id}\n    StatusList--&gt;&gt;Verifier: JWT with status bits\n    Note over Verifier: Check bit at index 42\n\n    Issuer-&gt;&gt;StatusList: Revoke credential (set bit)\n    Note over StatusList: Index 42 now indicates revocation</code></pre> <p>Each credential is assigned an index in a status list. The status list is a compressed bit array where each bit (or group of bits) represents the status of one credential. Verifiers fetch the status list and check the bit at the credential's index.</p>"},{"location":"architecture/status-management/#configuration","title":"Configuration","text":""},{"location":"architecture/status-management/#environment-variables","title":"Environment Variables","text":"Key Type Notes <code>STATUS_CAPACITY</code> <code>number</code> The default capacity of the status list. Can be overridden per tenant.  (default: <code>10000</code>) <code>STATUS_BITS</code> <code>number</code> The default number of bits used per status entry. Can be overridden per tenant.  (default: <code>1</code>) <code>STATUS_TTL</code> <code>number</code> The default TTL in seconds for status list JWTs. Verifiers can cache the JWT until expiration. Can be overridden per tenant.  (default: <code>3600</code>) <code>STATUS_IMMEDIATE_UPDATE</code> <code>boolean</code> If true, regenerate status list JWT immediately on every status change. If false (default), use lazy regeneration when TTL expires. Can be overridden per tenant.  (default: <code>false</code>) <code>STATUS_ENABLE_AGGREGATION</code> <code>boolean</code> If true (default), include aggregation_uri in status list JWTs. This allows relying parties to pre-fetch all status lists for offline validation per RFC draft-ietf-oauth-status-list Section 9. Can be overridden per tenant.  (default: <code>true</code>)"},{"location":"architecture/status-management/#per-tenant-configuration","title":"Per-Tenant Configuration","text":"<p>Each tenant can override the default status list settings via the API or web client:</p> <pre><code>{\n    \"defaultBits\": 1,\n    \"defaultCapacity\": 100000,\n    \"ttl\": 3600,\n    \"immediateUpdate\": false\n}\n</code></pre> Field Description <code>defaultBits</code> Bits per status entry (1, 2, 4, or 8). More bits allow more status values. <code>defaultCapacity</code> Maximum number of credentials per status list <code>ttl</code> Time-to-live for the status list JWT in seconds <code>immediateUpdate</code> Whether to regenerate the JWT immediately on status changes"},{"location":"architecture/status-management/#status-list-structure","title":"Status List Structure","text":""},{"location":"architecture/status-management/#bits-per-status","title":"Bits Per Status","text":"<p>The <code>bits</code> parameter determines how many distinct status values are possible:</p> Bits Values Use Case 1 2 (0-1) Simple valid/revoked 2 4 (0-3) Valid, suspended, revoked, reserved 4 16 (0-15) Multiple suspension reasons 8 256 (0-255) Complex status workflows"},{"location":"architecture/status-management/#capacity","title":"Capacity","text":"<p>The capacity determines how many credentials can use a single status list:</p> <ul> <li>10,000 - Small deployments, faster updates</li> <li>100,000 - Medium deployments (default)</li> <li>1,000,000 - Large-scale production</li> </ul> <p>Larger capacities mean larger JWT payloads but fewer status lists to manage.</p>"},{"location":"architecture/status-management/#jwt-caching-and-ttl","title":"JWT Caching and TTL","text":"<p>Per RFC 9528, status list JWTs include time-based claims for caching:</p> <pre><code>{\n  \"iss\": \"https://issuer.example.com\",\n  \"sub\": \"https://issuer.example.com/status-list/abc123\",\n  \"iat\": 1704067200,\n  \"exp\": 1704070800,\n  \"ttl\": 3600,\n  \"status_list\": { ... }\n}\n</code></pre> Claim Description <code>iat</code> Issued-at timestamp (REQUIRED) <code>exp</code> Expiration timestamp (RECOMMENDED) <code>ttl</code> Time-to-live hint in seconds (RECOMMENDED)"},{"location":"architecture/status-management/#regeneration-modes","title":"Regeneration Modes","text":"<p>EUDIPLO supports two JWT regeneration strategies:</p>"},{"location":"architecture/status-management/#lazy-mode-default","title":"Lazy Mode (Default)","text":"<p>The JWT is regenerated only when:</p> <ol> <li>A verifier requests the status list AND</li> <li>The current JWT has expired (<code>exp</code> &lt; now)</li> </ol> <p>This minimizes computation but means status changes may not be immediately visible to verifiers until the TTL expires.</p> <pre><code>TTL = 1 hour\n\u251c\u2500 10:00 - Credential revoked (JWT not regenerated)\n\u251c\u2500 10:30 - Verifier checks (gets cached JWT, sees valid)\n\u251c\u2500 11:00 - JWT expires\n\u2514\u2500 11:05 - Verifier checks (new JWT generated, sees revoked)\n</code></pre>"},{"location":"architecture/status-management/#immediate-mode","title":"Immediate Mode","text":"<p>When <code>immediateUpdate</code> is enabled, the JWT is regenerated immediately whenever a status entry changes. This ensures verifiers always see the latest status but increases computational overhead.</p> <pre><code>\u251c\u2500 10:00 - Credential revoked (JWT regenerated immediately)\n\u2514\u2500 10:01 - Verifier checks (sees revoked)\n</code></pre> <p>Performance Consideration</p> <p>Immediate mode can impact performance with frequent status changes. Consider lazy mode with shorter TTLs for high-volume scenarios.</p>"},{"location":"architecture/status-management/#choosing-ttl-values","title":"Choosing TTL Values","text":"Scenario Recommended TTL Notes High security 5-15 minutes Quick propagation of revocations Standard 1 hour Balance of freshness and caching Low-change 24 hours Minimize server load"},{"location":"architecture/status-management/#status-lists-and-credential-configs","title":"Status Lists and Credential Configs","text":""},{"location":"architecture/status-management/#automatic-creation","title":"Automatic Creation","text":"<p>When issuing a credential with status management enabled, EUDIPLO automatically:</p> <ol> <li>Finds an available status list for the credential configuration</li> <li>Creates a new shared status list if none have capacity</li> <li>Assigns the next available index to the credential</li> </ol>"},{"location":"architecture/status-management/#capacity-exhaustion","title":"Capacity Exhaustion","text":"<p>When a status list runs out of available indexes:</p> <p>For shared lists: EUDIPLO automatically creates a new shared status list and continues issuance seamlessly. No manual intervention is required.</p> <p>For bound lists: If a status list is bound to a specific credential configuration and reaches capacity:</p> <ol> <li>EUDIPLO will not automatically create a new bound list</li> <li>It will fall back to using shared lists if available</li> <li>If no shared lists have capacity, a new shared list is created</li> </ol> <p>Pre-creating Bound Lists</p> <p>If you require all credentials of a specific type to use dedicated status lists, pre-create multiple bound lists with sufficient capacity, or monitor usage and create new bound lists before reaching capacity.</p>"},{"location":"architecture/status-management/#binding-to-credential-configurations","title":"Binding to Credential Configurations","text":"<p>Status lists can be:</p> <ul> <li>Shared - Used by any credential configuration in the tenant</li> <li>Bound - Exclusively used by a specific credential configuration</li> </ul> <p>Binding is useful when:</p> <ul> <li>Different credential types have different revocation policies</li> <li>You want separate capacity management per credential type</li> <li>Compliance requires isolated status tracking</li> </ul>"},{"location":"architecture/status-management/#certificate-pinning","title":"Certificate Pinning","text":"<p>By default, status list JWTs are signed with the tenant's default signing certificate. You can pin a specific certificate to a status list for:</p> <ul> <li>Key rotation scenarios</li> <li>Compliance with specific signing requirements</li> <li>Isolation of signing keys per use case</li> </ul>"},{"location":"architecture/status-management/#api-operations","title":"API Operations","text":"<p>The Status Management API provides endpoints for managing status lists and updating credential status entries.</p> <p>Full API Reference: Status Management API</p> <p>Key operations include:</p> Operation Description List status lists Get all status lists for the tenant Get status list Retrieve a specific status list by ID Create status list Create a new status list with optional binding Update status list Modify binding or certificate assignment Delete status list Remove an empty status list Update entry Change the status value at a specific index"},{"location":"architecture/status-management/#public-status-list-endpoint","title":"Public Status List Endpoint","text":"<p>The status list JWT is served at a public endpoint for verifiers:</p> <pre><code>GET /{tenant}/status-management/status-list/{listId}\n</code></pre> <p>This endpoint requires no authentication and returns the cached status list JWT. Verifiers should respect the <code>exp</code> and <code>ttl</code> claims for caching.</p>"},{"location":"architecture/status-management/#web-client","title":"Web Client","text":"<p>The web client provides a user-friendly interface for status management:</p>"},{"location":"architecture/status-management/#status-list-overview","title":"Status List Overview","text":"<p>Navigate to Status Lists to see all status lists with:</p> <ul> <li>Capacity and usage statistics</li> <li>JWT expiration status (Valid, Expiring, Expired)</li> <li>Bound credential configuration</li> <li>Certificate assignment</li> </ul>"},{"location":"architecture/status-management/#creating-status-lists","title":"Creating Status Lists","text":"<p>Click Create to manually create a status list with:</p> <ul> <li>Optional credential configuration binding</li> <li>Optional certificate pinning</li> </ul>"},{"location":"architecture/status-management/#configuration_1","title":"Configuration","text":"<p>Click Settings (\u2699\ufe0f) to configure tenant defaults:</p> <ul> <li>Default bits per status</li> <li>Default capacity</li> <li>TTL for JWT caching</li> <li>Immediate update mode</li> </ul>"},{"location":"architecture/status-management/#import-configuration","title":"Import Configuration","text":"<p>Status lists can be pre-created via configuration import:</p> <p>Location: <code>config/{tenant}/status-lists/*.json</code></p> <pre><code>{\n    \"credentialConfigurationId\": \"org.iso.18013.5.1.mDL\",\n    \"certId\": \"status-signing-cert\"\n}\n</code></pre> <p>See Configuration Import for more details.</p>"},{"location":"architecture/status-management/#status-list-aggregation","title":"Status List Aggregation","text":"<p>EUDIPLO supports Status List Aggregation per RFC 9528 Section 9, enabling verifiers to pre-fetch all status lists for offline validation.</p> <p>When enabled:</p> <ul> <li>Each status list JWT includes an <code>aggregation_uri</code> claim</li> <li>The issuer metadata includes <code>status_list_aggregation_endpoint</code></li> <li>A public endpoint returns all status list URIs for the tenant</li> </ul>"},{"location":"architecture/status-management/#configuration_2","title":"Configuration","text":"<p>Aggregation is enabled by default. Configure via environment variable or per-tenant settings:</p> <pre><code>STATUS_ENABLE_AGGREGATION=true  # default\n</code></pre> <p>Or per-tenant:</p> <pre><code>{\n    \"enableAggregation\": true\n}\n</code></pre>"},{"location":"architecture/status-management/#best-practices","title":"Best Practices","text":""},{"location":"architecture/status-management/#security","title":"Security","text":"<ol> <li>Use appropriate TTLs - Shorter for high-security credentials</li> <li>Monitor capacity - Create new lists before reaching capacity</li> <li>Rotate signing keys - Use certificate pinning for key rotation</li> </ol>"},{"location":"architecture/status-management/#performance","title":"Performance","text":"<ol> <li>Use lazy mode for high-volume scenarios</li> <li>Set reasonable capacity - Balance between list size and management overhead</li> <li>Cache status lists - Verifiers should respect <code>exp</code> and <code>ttl</code> claims</li> </ol>"},{"location":"architecture/status-management/#operations","title":"Operations","text":"<ol> <li>Pre-create status lists for predictable capacity planning</li> <li>Monitor JWT expiration in the web client</li> <li>Use binding when credential types have different lifecycles</li> </ol>"},{"location":"architecture/storage/","title":"Storage","text":""},{"location":"architecture/storage/#file-storage","title":"File Storage","text":"<p>This service supports flexible file storage options, allowing you to choose between local disk storage and Amazon S3-compatible object storage. The storage backend is fully configurable via environment variables.</p> <p>\ud83d\udca1 Storage configuration is dynamic and can be switched between local and S3 by setting the appropriate environment variables.</p>"},{"location":"architecture/storage/#configuration","title":"Configuration","text":"Key Type Notes <code>STORAGE_DRIVER</code> <code>string</code> The storage driver to use  (default: <code>local</code>) <code>LOCAL_STORAGE_DIR</code> <code>string</code> The directory to store files in when using local storage [when STORAGE_DRIVER is {\"override\":true} | \"local\" \u2192 then default=undefined] <code>S3_REGION</code> <code>string</code> The AWS region for the S3 bucket [when STORAGE_DRIVER is {\"override\":true} | \"s3\" \u2192 then required] <code>S3_BUCKET</code> <code>string</code> The name of the S3 bucket [when STORAGE_DRIVER is {\"override\":true} | \"s3\" \u2192 then required] <code>S3_ACCESS_KEY_ID</code> <code>string</code> The access key ID for the S3 bucket [when STORAGE_DRIVER is {\"override\":true} | \"s3\" \u2192 then required] <code>S3_SECRET_ACCESS_KEY</code> <code>string</code> The secret access key for the S3 bucket [when STORAGE_DRIVER is {\"override\":true} | \"s3\" \u2192 then required] <code>S3_ENDPOINT</code> <code>string</code> The endpoint URL for the S3 service (for S3-compatible services) [when STORAGE_DRIVER is {\"override\":true} | \"s3\"] <code>S3_FORCE_PATH_STYLE</code> <code>boolean</code> Whether to force path-style URLs for S3 [when STORAGE_DRIVER is {\"override\":true} | \"s3\" \u2192 then default=false] <code>S3_PUBLIC_BASE_URL</code> <code>string</code> The public base URL for the S3 bucket [when STORAGE_DRIVER is {\"override\":true} | \"s3\" \u2192 then required]"},{"location":"architecture/storage/#local-storage-default","title":"Local Storage (Default)","text":"<p>When <code>STORAGE_DRIVER=local</code>, files are stored on the local filesystem in the directory specified by <code>LOCAL_STORAGE_DIR</code>. This is ideal for:</p> <ul> <li>Development</li> <li>Testing</li> <li>Simple deployments</li> </ul> <p>No external storage service is required.</p>"},{"location":"architecture/storage/#amazon-s3-s3-compatible-storage","title":"Amazon S3 / S3-Compatible Storage","text":"<p>To use S3 or a compatible service (e.g., MinIO), set the following environment variables:</p> <pre><code>STORAGE_DRIVER=s3\nS3_REGION=your-region\nS3_BUCKET=your-bucket\nS3_ACCESS_KEY_ID=your-access-key\nS3_SECRET_ACCESS_KEY=your-secret-key\nS3_PUBLIC_BASE_URL=https://your-bucket.s3.amazonaws.com/\n# Optional for custom endpoints:\nS3_ENDPOINT=https://minio.example.com\nS3_FORCE_PATH_STYLE=true\n</code></pre> <p>This mode is suitable for:</p> <ul> <li>Production deployments</li> <li>Scalable storage needs</li> <li>Cloud-native architectures</li> </ul> <p>Ensure your S3 bucket is accessible and properly configured.</p>"},{"location":"architecture/storage/#extensibility","title":"Extensibility","text":"<p>The storage system is designed to be extensible. You can add support for other storage backends by implementing the <code>FileStorage</code> interface and registering your adapter.</p> <p>To add a new backend:</p> <ul> <li>Implement a new adapter class (see <code>LocalFileStorage</code> and <code>S3FileStorage</code> for examples)</li> <li>Register your adapter in the storage module</li> <li>Add configuration options as needed</li> </ul> <p>Contact us if you need help integrating additional storage providers.</p>"},{"location":"architecture/storage/#accessibility","title":"Accessibility","text":"<p>Files can be uploaded via the <code>/storage</code> endpoint, an access token is required to protect this endpoint and to associate files with the correct tenant. You can also use the Web Client to upload the images or logos for the issuer metadata or for the credential configuration.</p> <p>When using the <code>local</code> storage driver, files are served via <code>/storage/&lt;file-id&gt;</code>. In case of S3, files are served via the S3 public base URL without an expiration date.</p> <p>TODO: we may add an expiration date for S3 URLs in the future since the issuer metadata are not long lived and just session based.</p>"},{"location":"architecture/storage/#multi-tenant-storage","title":"Multi-Tenant Storage","text":"<p>EUDIPLO supports multi-tenancy for file storage. Files are associated with a <code>tenantId</code> to ensure data isolation between tenants.</p>"},{"location":"architecture/storage/#tenant-isolation-in-storage","title":"Tenant Isolation in Storage","text":"<p>Files are stored with metadata indicating the owning tenant. All file operations are scoped by <code>tenantId</code>:</p>"},{"location":"architecture/storage/#file-entity-example","title":"File Entity Example","text":"<pre><code>@Entity()\nexport class FileEntity {\n  @PrimaryGeneratedColumn('uuid')\n  id: string;\n\n  @Column('varchar')\n  tenantId: string; // Tenant ID for multi-tenancy support\n\n  // ... other fields\n}\n</code></pre>"},{"location":"architecture/storage/#storage-operations","title":"Storage Operations","text":"<p>All file service operations filter by <code>tenantId</code>:</p> <pre><code>// Example: List files for a tenant\nreturn this.fileRepository.findBy({ tenantId });\n\n// Example: Save file for a tenant\nfile.tenantId = tenantId;\nreturn this.fileRepository.save(file);\n</code></pre>"},{"location":"architecture/storage/#summary","title":"Summary","text":"<ul> <li>Choose between local and S3 storage via environment variables</li> <li>Easily extend to other storage backends</li> <li>Multi-tenant support ensures data isolation</li> <li>Configuration is dynamic and environment-driven</li> </ul>"},{"location":"architecture/supported-protocols/","title":"Supported Protocols","text":""},{"location":"architecture/supported-protocols/#supported-protocols","title":"Supported Protocols","text":"<p>EUDIPLO is deliberately limited to protocols that are part of the European Digital Identity Wallet (EUDI Wallet) ecosystem. This focused scope reduces implementation complexity, improves long-term maintainability, and ensures a consistent trust model across services.</p> <p>Rather than being a general-purpose verifiable credentials broker, EUDIPLO aligns strictly with the specifications endorsed by the EU regulatory and technical framework.</p>"},{"location":"architecture/supported-protocols/#protocols-supported","title":"Protocols Supported","text":"Protocol Description OpenID for Verifiable Credential Issuance (OID4VCI) Enables issuers to deliver verifiable credentials to EUDI Wallets using OAuth-based flows. OpenID for Verifiable Presentations (OID4VP) Allows services to request and verify credentials presented by EUDI Wallet holders. Selective Disclosure JWT VC (SD-JWT VC) Data model for credentials allowing selective disclosure of individual claims by the user. Mobile Driving License (mDOC/mDL) ISO 18013-5 standard for mobile driving licenses and other mobile documents. OAuth Token Status List Mechanism for determining revocation or suspension status of issued credentials."},{"location":"architecture/supported-protocols/#oid4vci-features","title":"OID4VCI Features","text":"<p>EUDIPLO implements the following OID4VCI features:</p> Feature Status Description Pre-Authorized Code Flow \u2705 Issue credentials without user authentication at the issuer Authorization Code Flow \u2705 Issue credentials with user authentication Batch Credential Issuance \u2705 Issue multiple credentials in a single request Deferred Credential Endpoint \u2705 Support for credentials that cannot be issued immediately Notification Endpoint \u2705 Receive wallet acknowledgment of credential acceptance/rejection DPoP (Demonstrating Proof-of-Possession) \u2705 Enhanced security with proof-of-possession tokens Wallet Attestation \u2705 Verify wallet provider trustworthiness <p>These standards are evolving in coordination with EU-level pilot projects and working groups. EUDIPLO tracks these developments closely to provide early, stable support as specifications mature.</p>"},{"location":"architecture/supported-protocols/#why-not-more","title":"Why Not More?","text":"<p>By limiting scope to official EUDI Wallet protocols, EUDIPLO avoids:</p> <ul> <li>Incompatibilities with reference implementations</li> <li>Bloated code from supporting rarely used formats</li> <li>Uncertain trust assumptions from broader ecosystems</li> </ul> <p>This makes EUDIPLO especially suitable for:</p> <ul> <li>Public sector services integrating with national wallet pilots</li> <li>Companies targeting pan-European credential workflows</li> <li>Developers seeking a reliable, minimal abstraction layer over complex specs</li> </ul>"},{"location":"architecture/supported-protocols/#oidf-conformance","title":"OIDF Conformance","text":"<p>EUDIPLO has been tested against the OpenID Foundation (OIDF) Conformance Suite to ensure strict compliance with protocol specifications:</p> <ul> <li>\u2705 OID4VCI (OpenID for Verifiable Credential Issuance) - Conformance tested</li> <li>\u2705 OID4VP (OpenID for Verifiable Presentations) - Conformance tested</li> </ul> <p>These conformance tests validate that EUDIPLO correctly implements the protocol flows, security requirements, and interoperability features specified by the OpenID Foundation.</p>"},{"location":"architecture/supported-protocols/#running-conformance-tests","title":"Running Conformance Tests","text":"<p>To run the OIDF conformance tests yourself:</p> <ol> <li>Deploy EUDIPLO to a publicly accessible instance (required for the hosted OIDF test suite)</li> <li>Run the conformance test suite:</li> </ol> <pre><code>cd apps/backend\npnpm run test:e2e:oidf\n</code></pre> <p>These tests execute against your running instance and communicate with the hosted OIDF conformance suite to validate protocol compliance.</p> <p>For more details on testing, see the Testing Guide.</p>"},{"location":"architecture/tenant/","title":"Tenant-Based","text":""},{"location":"architecture/tenant/#tenant-based-architecture","title":"Tenant-Based Architecture","text":"<p>EUDIPLO uses a tenant-based architecture that enables you to manage configurations and data for multiple clients or environments within a single deployment. This model is designed for multi-tenancy: a single EUDIPLO instance can serve multiple organizations (e.g., relying parties, issuers, verifiers) or environments (e.g., staging, testing, production) while keeping their data and configurations separate.</p> <p>You do not need to deploy separate applications for each tenant; instead, all tenants are centrally managed through one deployment.</p>"},{"location":"architecture/tenant/#tenant-isolation","title":"Tenant Isolation","text":"<p>Each tenant is logically isolated. Isolation is currently implemented via a <code>tenantId</code> column in all database entities, with the following guarantees:</p> <ul> <li>Separate configurations: Tenant-specific settings stored in the database.</li> <li>Isolated database records: All queries scoped by <code>tenantId</code>.</li> <li>Independent key management: Cryptographic keys are bound to a tenant context.</li> <li>Dedicated session management: Sessions are created and validated per tenant.</li> <li>Individual credential configurations: Issuance and presentation templates can differ per tenant.</li> </ul> <p>For now, separation is row-based via <code>tenantId</code>. Future improvements may include per-tenant databases or row-level security (RLS) enforcement for stronger isolation.</p> <p>All API calls are tenant-scoped. Access control and endpoint protection are covered in the Authentication documentation.</p>"},{"location":"architecture/tenant/#tenant-lifecycle","title":"Tenant Lifecycle","text":"<p>A tenant goes through several stages:</p> <ul> <li>Provisioning (Create Tenant): A tenant is initialized on first use. Default configurations (keys, session settings) are created when calling the <code>/client</code> endpoint.</li> <li>Enable: The tenant becomes active; sessions, keys, and credential templates can be used.</li> <li>Suspend: A tenant can be disabled (e.g., revoking OIDC client access). Data remains in place but is inaccessible.</li> <li>Re-Enable: Suspended tenants can be reactivated without data loss.</li> <li>Delete: A full removal workflow, including key destruction and data wiping.</li> </ul>"},{"location":"architecture/tenant/#tenant-management","title":"Tenant Management","text":"<p>When a protected endpoint is called, EUDIPLO enforces tenant isolation and role-based access control by extracting the tenant ID and user roles from the provided JWT access token. Each endpoint requires specific roles; see the Protected Endpoints section in the Authentication documentation for details.</p>"},{"location":"architecture/tenant/#client-management-via-web-client","title":"Client Management via Web Client","text":"<ul> <li>Clients can be either managed by EUDIPLO by storing the client secrets (securely hashed with bcrypt) in the database or by using an external OIDC provider like Keycloak.</li> <li>The web client authenticates against the OIDC provider and interacts with EUDIPLO using the provided access token.</li> </ul> <p>From the UI you can:</p> <ul> <li>Create and delete tenants</li> <li>Manage the tenants' clients</li> <li>Manage the issuance and presentation configs of the tenants.</li> </ul> <p>Client secrets are hashed</p> <p>Client secrets are securely hashed before storage and cannot be retrieved later. When creating a new tenant or client, save the displayed secret immediately\u2014it won't be shown again. If lost, use the Rotate Secret button to generate a new one.</p> <p>Even with tenant management privileges, users will only see tenant-scoped data. EUDIPLO enforces tenant context based on the access token.</p>"},{"location":"architecture/tenant/#client-management-via-the-api","title":"Client Management via the API","text":"<ul> <li><code>/tenant</code> endpoint allows programmatic management of tenants.</li> <li><code>/client</code> endpoint allows programmatic management of clients. Based on the access token the tenant context is extracted to perform actions on the specific tenant's clients.</li> </ul>"},{"location":"architecture/tenant/#authentication-methods","title":"Authentication Methods","text":"<p>Instead of client secrets, you may use any authentication method supported by your OIDC provider. EUDIPLO only validates the access token; it does not care how authentication was performed. When using EUDIPLO as the OIDC provider, only clientID + clientSecret is supported for now.</p>"},{"location":"architecture/tenant/#security-considerations","title":"Security Considerations","text":"<ul> <li>Access control: All API calls are validated against tenant context and roles embedded in the access token.</li> </ul> <p>See also:</p> <ul> <li>Authentication</li> <li>Key Management</li> <li>Credential Configuration</li> </ul>"},{"location":"architecture/trust-framework/","title":"Trust Framework","text":""},{"location":"architecture/trust-framework/#trust-framework","title":"Trust Framework","text":"<p>EUDIPLO implements a trust framework for credential verification based on the ETSI TS 119 602 standard (List of Trusted Entities - LoTE). This ensures that credentials are only accepted from authorized issuers and that revocation information comes from the correct authority.</p>"},{"location":"architecture/trust-framework/#overview","title":"Overview","text":"<p>When verifying a credential presentation, EUDIPLO needs to answer two critical questions:</p> <ol> <li>Was this credential issued by a trusted entity?</li> <li>Is the revocation status provided by an authorized source?</li> </ol> <p>Trust lists solve this by maintaining a registry of:</p> <ul> <li>Issuance Certificates: Certificates authorized to sign credentials</li> <li>Revocation Certificates: Certificates authorized to sign status lists</li> </ul> <p>Issuance and Revocation Certificate Pairing</p> <p>Each trusted entity defines both an issuance certificate and a revocation certificate. When verifying a credential, EUDIPLO ensures that the status list is signed by the revocation certificate from the same entity that issued the credential. This prevents an attacker from using a valid issuance certificate with a rogue status list.</p>"},{"location":"architecture/trust-framework/#trust-list-structure","title":"Trust List Structure","text":"<p>A trust list in EUDIPLO follows the LoTE (List of Trusted Entities) format and contains:</p>"},{"location":"architecture/trust-framework/#metadata","title":"Metadata","text":"<ul> <li>ID: Unique identifier for the trust list</li> <li>Description: Human-readable description</li> <li>Signing Certificate: Certificate used to sign the trust list itself</li> <li>Version/Sequence Number: Tracks trust list updates</li> </ul>"},{"location":"architecture/trust-framework/#trusted-entities","title":"Trusted Entities","text":"<p>Each entity represents an authorized issuer with:</p> <ul> <li>Issuance Certificate: Used to verify credential signatures</li> <li>Revocation Certificate: Used to verify status list signatures</li> <li>Entity Information: Name, country, contact details</li> </ul> <pre><code>graph TD\n    TL[Trust List] --&gt; E1[Entity 1]\n    TL --&gt; E2[Entity 2]\n    TL --&gt; E3[Entity N...]\n\n    E1 --&gt; IC1[Issuance Cert]\n    E1 --&gt; RC1[Revocation Cert]\n    E1 --&gt; I1[Entity Info]\n\n    E2 --&gt; IC2[Issuance Cert]\n    E2 --&gt; RC2[Revocation Cert]\n    E2 --&gt; I2[Entity Info]</code></pre>"},{"location":"architecture/trust-framework/#how-trust-verification-works","title":"How Trust Verification Works","text":""},{"location":"architecture/trust-framework/#credential-verification-flow","title":"Credential Verification Flow","text":"<p>When a credential is presented for verification:</p> <pre><code>sequenceDiagram\n    participant W as Wallet\n    participant V as EUDIPLO Verifier\n    participant TL as Trust List\n    participant SL as Status List\n\n    W-&gt;&gt;V: Present credential (with x5c chain)\n    V-&gt;&gt;TL: Look up trusted entities\n    V-&gt;&gt;V: Find matching issuance cert\n    Note over V: Credential chains to Entity X's&lt;br/&gt;issuance certificate\n    V-&gt;&gt;SL: Fetch status list\n    V-&gt;&gt;V: Verify status list signature\n    Note over V: Status list must be signed by&lt;br/&gt;Entity X's revocation cert\n    V-&gt;&gt;W: Verification result</code></pre>"},{"location":"architecture/trust-framework/#certificate-chain-matching","title":"Certificate Chain Matching","text":"<p>EUDIPLO supports two modes for matching certificates:</p> <ol> <li> <p>CA Mode: The trust list contains CA certificates. The credential's    certificate chain must terminate at the trusted CA.</p> </li> <li> <p>Pinned Mode: The trust list contains end-entity certificates. The    credential's leaf certificate must exactly match the pinned certificate.</p> </li> </ol>"},{"location":"architecture/trust-framework/#creating-trust-lists","title":"Creating Trust Lists","text":""},{"location":"architecture/trust-framework/#via-configuration-import","title":"Via Configuration Import","text":"<p>Create a JSON file in <code>config/{tenant}/trust-lists/</code>:</p> <pre><code>\n</code></pre>"},{"location":"architecture/trust-framework/#via-api","title":"Via API","text":"<p>Use the Trust List API endpoints:</p> <pre><code># Create a trust list\ncurl -X POST \"${BASE_URL}/trust-list\" \\\n  -H \"Authorization: Bearer ${TOKEN}\" \\\n  -H \"Content-Type: application/json\" \\\n  -d '{\n    \"id\": \"my-trust-list\",\n    \"description\": \"Production Trust List\",\n    \"certId\": \"signing-cert-id\",\n    \"entities\": [...]\n  }'\n</code></pre>"},{"location":"architecture/trust-framework/#entity-types","title":"Entity Types","text":""},{"location":"architecture/trust-framework/#internal-entities","title":"Internal Entities","text":"<p>Reference certificates already managed in EUDIPLO:</p> <pre><code>{\n    \"type\": \"internal\",\n    \"issuerCertId\": \"uuid-of-issuance-cert\",\n    \"revocationCertId\": \"uuid-of-revocation-cert\",\n    \"info\": {\n        \"name\": \"Organization Name\",\n        \"country\": \"DE\"\n    }\n}\n</code></pre> <p>Use Case: You are an issuer and want to publish a trust list containing your own certificates that are already managed by EUDIPLO.</p> <p>Benefits:</p> <ul> <li>Seamless integration with certificates managed in EUDIPLO</li> <li>Certificates are validated and linked automatically</li> <li>Easy to maintain as certificates are updated in the system</li> </ul>"},{"location":"architecture/trust-framework/#external-entities","title":"External Entities","text":"<p>Include PEM certificates directly:</p> <pre><code>{\n    \"type\": \"external\",\n    \"issuerCertPem\": \"-----BEGIN CERTIFICATE-----\\n...\\n-----END CERTIFICATE-----\",\n    \"revocationCertPem\": \"-----BEGIN CERTIFICATE-----\\n...\\n-----END CERTIFICATE-----\",\n    \"info\": {\n        \"name\": \"External Issuer\",\n        \"country\": \"US\"\n    }\n}\n</code></pre> <p>Use Case: You are a verifier and want to accept credentials from external issuers that are not managed by your EUDIPLO instance.</p> <p>Benefits:</p> <ul> <li>Accept credentials from third-party issuers</li> <li>No need to import external certificates into EUDIPLO's key management</li> <li>Enable cross-organization and cross-border credential acceptance</li> </ul>"},{"location":"architecture/trust-framework/#public-trust-list-endpoint","title":"Public Trust List Endpoint","text":"<p>Trust lists are published as signed JWTs at:</p> <pre><code>GET /{tenantId}/trust-list/{trustListId}\n</code></pre> <p>This allows:</p> <ul> <li>Other verifiers to synchronize trust information</li> <li>Auditors to verify the trust chain</li> </ul> <p>The JWT is signed by the certificate specified in <code>certId</code> and follows the LoTE format from ETSI TS 119 602.</p>"},{"location":"architecture/trust-framework/#best-practices","title":"Best Practices","text":""},{"location":"architecture/trust-framework/#trust-list-management","title":"Trust List Management","text":"<ul> <li>Use separate certificates for issuance and revocation per entity</li> <li>Version your trust lists to track changes over time</li> <li>Sign trust lists with a dedicated certificate (not an issuance cert)</li> <li>Document entity information thoroughly for audit purposes</li> </ul>"},{"location":"architecture/trust-framework/#security-considerations","title":"Security Considerations","text":"<ul> <li>Protect signing keys: The trust list signing certificate should be highly   protected</li> <li>Review entities carefully: Only add thoroughly vetted issuers</li> <li>Monitor for compromise: Have a process to remove compromised entities</li> <li>Use certificate expiration: Ensure certificates have appropriate validity   periods</li> </ul>"},{"location":"architecture/trust-framework/#multi-tenant-deployments","title":"Multi-Tenant Deployments","text":"<ul> <li>Each tenant can maintain their own trust lists</li> <li>Trust lists are isolated per tenant</li> <li>Consider creating shared trust lists for common issuers</li> </ul>"},{"location":"architecture/trust-framework/#integration-with-presentation-verification","title":"Integration with Presentation Verification","text":"<p>Trust lists are used during presentation verification to:</p> <ol> <li>Validate issuer trust: Check if the credential's issuer certificate    chains to a trusted entity</li> <li>Validate status list trust: Ensure the status list is signed by the    correct revocation certificate from the same entity</li> <li>Provide issuer information: Return entity metadata (name, country) as    part of verification results</li> </ol> <p>For configuring presentation verification with trust lists, see Presentation Configuration.</p>"},{"location":"architecture/trust-framework/#troubleshooting","title":"Troubleshooting","text":""},{"location":"architecture/trust-framework/#common-issues","title":"Common Issues","text":"<p>Credential verification fails with \"No trusted entity match\":</p> <ul> <li>Verify the credential's x5c chain is present</li> <li>Check that the issuer's certificate is in the trust list</li> <li>Ensure certificate thumbprints match</li> </ul> <p>Status list verification fails:</p> <ul> <li>Verify the status list JWT has an x5c chain</li> <li>Check that the revocation certificate from the same entity is configured</li> <li>Ensure the status list certificate hasn't expired</li> </ul> <p>Trust list JWT is invalid:</p> <ul> <li>Check that <code>certId</code> points to a valid signing certificate</li> <li>Verify the signing certificate hasn't expired</li> <li>Ensure the certificate has signing permissions</li> </ul>"},{"location":"architecture/trust-framework/#related-documentation","title":"Related Documentation","text":"<ul> <li>Configuration Import - Import   trust lists via configuration files</li> <li>Key Management - Managing certificates   for trust lists</li> <li>Presentation Configuration - Configuring   presentation verification</li> </ul>"},{"location":"architecture/webhooks/","title":"Webhooks","text":""},{"location":"architecture/webhooks/#webhooks","title":"Webhooks","text":"<p>EUDIPLO supports webhook endpoints that let external services actively participate in issuance and presentation flows.</p> <p>While webhooks are optional, they make the overall process more dynamic\u2014for example:</p> <ul> <li>requesting credential data from your backend service only when needed,</li> <li>notifying your system when a wallet has completed a flow, or</li> <li>deferring credential issuance when your backend needs time to process (e.g., KYC verification, approval workflows).</li> </ul>"},{"location":"architecture/webhooks/#supported-webhook-scenarios","title":"Supported Webhook Scenarios","text":"Flow Purpose Credential Issuance Webhook Dynamically provides claims during the credential request process. Deferred Issuance Webhook Signals that credential issuance should be deferred for later retrieval. Presentation Webhook Receives verified claims from the wallet. Notification Webhook Receives status updates (e.g., accepted or denied) about issuance flows. <p>Interactive Authorization (IAE)</p> <p>For user interactions during issuance (e.g., verifiable presentations, web-based verification), see Interactive Authorization Endpoint.</p>"},{"location":"architecture/webhooks/#example-webhook-service","title":"Example Webhook Service","text":"<p>A simple webhook simulator is available in the test/webhook directory. It can be run locally or deployed to a Cloudflare Worker, and is a good starting point for testing webhook functionality.</p>"},{"location":"architecture/webhooks/#webhook-configuration","title":"Webhook Configuration","text":"<p>A webhook configuration object defines how EUDIPLO interacts with your service.</p> <p>It must include:</p> <ul> <li><code>url</code>: The endpoint URL. EUDIPLO sends an HTTP <code>POST</code> request with JSON data.</li> <li><code>auth</code>: (Optional) Authentication configuration.<ul> <li><code>type</code>: Authentication type. Currently supported:<ul> <li><code>apiKey</code> \u2013 sends a key in a request header.</li> </ul> </li> </ul> </li> </ul>"},{"location":"architecture/webhooks/#example","title":"Example","text":"<pre><code>{\n    \"url\": \"http://localhost:8787/consume\",\n    \"auth\": {\n        \"type\": \"apiKey\",\n        \"config\": {\n            \"headerName\": \"x-api-key\",\n            \"value\": \"your-api-key\"\n        }\n    }\n}\n</code></pre>"},{"location":"architecture/webhooks/#claims-webhook","title":"Claims Webhook","text":"<p>The claims webhook allows EUDIPLO to fetch attributes dynamically instead of embedding them in the credential offer. This is useful if:</p> <ul> <li>claims are not known in advance, or</li> <li> <p>you want to avoid including sensitive data in the offer for privacy reasons.</p> </li> <li> <p>Pre-authenticated / Authenticated flows:   Called during the credential request.   If no webhook is configured, EUDIPLO falls back to claims provided in the credential offer or defined in the credential configuration.</p> </li> <li> <p>Interactive Authorization (IAE) with presentation:   When using IAE with an <code>openid4vp_presentation</code> action, the webhook is called after the wallet completes the presentation.   EUDIPLO sends verified claims to your service, which must respond with the claims to persist in the credential.   This avoids your service needing to manage state between the authentication and issuance phases.   See Interactive Authorization Endpoint for details.</p> </li> </ul> <pre><code>{\n    \"claimsWebhook\": {\n        \"url\": \"http://localhost:8787/process\",\n        \"auth\": {\n            \"type\": \"apiKey\",\n            \"config\": {\n                \"headerName\": \"x-api-key\",\n                \"value\": \"your-api-key\"\n            }\n        }\n    }\n}\n</code></pre>"},{"location":"architecture/webhooks/#claims-webhook-request-format","title":"Claims Webhook Request Format","text":"<p>EUDIPLO sends an HTTP <code>POST</code> request with the following structure:</p> <pre><code>{\n    \"session\": \"a6318799-dff4-4b60-9d1d-58703611bd23\",\n    \"credential_configuration_id\": \"EmployeeBadge\",\n    \"identity\": {\n        \"iss\": \"https://idp.example.com/realms/myrealm\",\n        \"sub\": \"user-uuid-from-idp\",\n        \"token_claims\": {\n            \"email\": \"user@example.com\",\n            \"preferred_username\": \"jdoe\",\n            \"given_name\": \"John\",\n            \"family_name\": \"Doe\"\n        }\n    },\n    \"credentials\": []\n}\n</code></pre> Field Type Description <code>session</code> string The session ID identifying the issuance request <code>credential_configuration_id</code> string The ID of the credential configuration being requested <code>identity</code> object Identity context from the authorization flow (see below) <code>credentials</code> array Presented credentials (only for IAE with presentation flows)"},{"location":"architecture/webhooks/#identity-object","title":"Identity Object","text":"<p>The <code>identity</code> object contains information about the authenticated user. Its contents depend on the authorization flow used:</p> Field Type Description <code>iss</code> string The issuer URL of the authorization server <code>sub</code> string The subject identifier (user ID) from the authorization server <code>token_claims</code> object All available claims from the access token (and ID token for Chained AS)"},{"location":"architecture/webhooks/#identity-sources-by-flow","title":"Identity Sources by Flow","text":"Flow Identity Source External AS Claims from the external authorization server's access token Chained AS Claims from the upstream OIDC provider (merged ID token + access token) Pre-authenticated Not available (no user authentication) IAE Identity from the IAE interaction (presentation or web redirect) <p>Token Claims</p> <p>The <code>token_claims</code> field contains all available claims from the token\u2014EUDIPLO does not filter them. This gives your webhook full flexibility to use any claim the authorization server provides. For Chained AS flows, ID token claims take precedence over access token claims when both contain the same field.</p>"},{"location":"architecture/webhooks/#deferred-credential-issuance","title":"Deferred Credential Issuance","text":"<p>Deferred issuance allows your backend to signal that the credential cannot be issued immediately. This is useful when:</p> <ul> <li>Background verification is required (e.g., KYC, identity proofing)</li> <li>An approval workflow must be completed</li> <li>External data sources need time to respond</li> <li>The credential requires asynchronous processing</li> </ul>"},{"location":"architecture/webhooks/#how-it-works","title":"How It Works","text":"<p>When the claims webhook returns a deferred response, EUDIPLO:</p> <ol> <li>Stores the pending request with a <code>transaction_id</code></li> <li>Returns HTTP 202 (Accepted) to the wallet with the <code>transaction_id</code></li> <li>The wallet polls the deferred credential endpoint until the credential is ready</li> </ol> <pre><code>sequenceDiagram\n    autonumber\n    actor Wallet as EUDI Wallet\n    participant EUDIPLO as Middleware\n    participant Service as Your Backend\n\n    Wallet-&gt;&gt;EUDIPLO: Credential Request\n    EUDIPLO-&gt;&gt;Service: Claims Webhook\n    Service--&gt;&gt;EUDIPLO: { \"deferred\": true, \"interval\": 5 }\n    EUDIPLO--&gt;&gt;Wallet: HTTP 202 + transaction_id\n\n    loop Polling (every interval seconds)\n        Wallet-&gt;&gt;EUDIPLO: GET /deferred_credential\n        alt Credential not ready\n            EUDIPLO--&gt;&gt;Wallet: { \"error\": \"issuance_pending\", \"interval\": 5 }\n        else Credential ready\n            EUDIPLO--&gt;&gt;Wallet: { \"credential\": \"...\" }\n        end\n    end</code></pre>"},{"location":"architecture/webhooks/#webhook-response-for-deferred-issuance","title":"Webhook Response for Deferred Issuance","text":"<p>To trigger deferred issuance, your webhook should return:</p> <pre><code>{\n    \"deferred\": true,\n    \"interval\": 5\n}\n</code></pre> Field Type Description <code>deferred</code> boolean Set to <code>true</code> to defer the credential issuance <code>interval</code> number Recommended polling interval in seconds (default: 5)"},{"location":"architecture/webhooks/#completing-deferred-issuance","title":"Completing Deferred Issuance","text":"<p>Once your backend has completed processing, you need to call EUDIPLO's API to provide the credential:</p> <pre><code># Complete the deferred transaction with the credential\nPOST /issuer/deferred/{transactionId}/complete\nContent-Type: application/json\nAuthorization: Bearer &lt;your-token&gt;\n\n{\n    \"credential\": \"&lt;the-issued-credential-string&gt;\"\n}\n</code></pre> <p>Or, if the issuance failed:</p> <pre><code># Mark the deferred transaction as failed\nPOST /issuer/deferred/{transactionId}/fail\nContent-Type: application/json\nAuthorization: Bearer &lt;your-token&gt;\n\n{\n    \"errorMessage\": \"KYC verification failed\"\n}\n</code></pre>"},{"location":"architecture/webhooks/#deferred-credential-errors","title":"Deferred Credential Errors","text":"<p>When the wallet polls the deferred credential endpoint, it may receive:</p> Error Code HTTP Status Description <code>issuance_pending</code> 400 Credential is still being processed. Retry later. <code>invalid_transaction_id</code> 400 Transaction not found, expired, or already retrieved. <p>The <code>issuance_pending</code> error includes an <code>interval</code> field indicating when to retry:</p> <pre><code>{\n    \"error\": \"issuance_pending\",\n    \"error_description\": \"The credential issuance is still pending\",\n    \"interval\": 5\n}\n</code></pre>"},{"location":"architecture/webhooks/#transaction-lifecycle","title":"Transaction Lifecycle","text":"<p>Deferred transactions have the following states:</p> Status Description <code>pending</code> Waiting for your backend to complete processing <code>ready</code> Credential is ready for wallet retrieval <code>retrieved</code> Wallet has successfully retrieved the credential <code>expired</code> Transaction expired (default: 24 hours) <code>failed</code> Issuance failed due to an error <p>Transaction Expiry</p> <p>Deferred transactions expire after 24 hours by default. Expired transactions are automatically cleaned up hourly.</p>"},{"location":"architecture/webhooks/#notification-webhook","title":"Notification Webhook","text":"<p>The notification webhook receives the outcome of the issuance process (e.g., accepted or denied). This confirms that the wallet has received and accepted the credential.</p> <pre><code>{\n    \"notifyWebhook\": {\n        \"url\": \"http://localhost:8787/notify\",\n        \"auth\": {\n            \"type\": \"apiKey\",\n            \"config\": {\n                \"headerName\": \"x-api-key\",\n                \"value\": \"your-api-key\"\n            }\n        }\n    }\n}\n</code></pre> <p>If no notification webhook is configured, you can fetch the session result by querying the <code>/session</code> endpoint with the <code>sessionId</code>.</p>"},{"location":"architecture/webhooks/#presentation-webhook","title":"Presentation Webhook","text":"<p>The presentation webhook receives verified claims from the wallet after a presentation flow completes.</p> <pre><code>{\n    \"webhook\": {\n        \"url\": \"http://localhost:8787/notify\",\n        \"auth\": {\n            \"type\": \"apiKey\",\n            \"config\": {\n                \"headerName\": \"x-api-key\",\n                \"value\": \"your-api-key\"\n            }\n        }\n    }\n}\n</code></pre>"},{"location":"architecture/webhooks/#webhook-request-format","title":"Webhook Request Format","text":"<p>EUDIPLO sends an HTTP <code>POST</code> request with the following structure:</p> <ul> <li><code>credentials</code>: Array of credential objects. Each includes:<ul> <li><code>id</code>: The ID of the DCQL query.</li> <li><code>values</code>: The claims presented by the wallet.<ul> <li>SD-JWT VC\u2013specific fields (e.g., <code>cnf</code>, <code>status</code>) are removed for simplicity.</li> </ul> </li> <li><code>error</code>: Present instead of <code>values</code> if verification failed.</li> </ul> </li> <li><code>session</code>: The session ID identifying the request.</li> </ul> <pre><code>{\n    \"credentials\": [\n        {\n            \"id\": \"pid\",\n            \"values\": {\n                \"iss\": \"https://service.eudi-wallet.dev\",\n                \"iat\": 1751884150,\n                \"vct\": \"https://service.eudi-wallet.dev/credentials/vct/pid\",\n                \"address\": {\n                    \"locality\": \"K\u00d6LN\",\n                    \"postal_code\": \"51147\",\n                    \"street_address\": \"HEIDESTRA\u1e9eE 17\"\n                }\n            }\n        },\n        {\n            \"id\": \"citizen\",\n            \"error\": \"Credential verification failed: invalid signature\"\n        }\n    ],\n    \"session\": \"a6318799-dff4-4b60-9d1d-58703611bd23\"\n}\n</code></pre> <p>Info</p> <p>Requests always use <code>Content-Type: application/json</code>. A retry mechanism is not yet implemented\u2014if a webhook fails, the process halts. Retry support may be added in the future.</p>"},{"location":"architecture/webhooks/#webhook-response-format","title":"Webhook Response Format","text":"<p>A response is required for:</p> <ul> <li>IAE with presentation webhooks, and</li> <li>issuance webhooks.</li> </ul> <p>The response must be a JSON object keyed by the credential configuration ID. Each entry contains the claims to issue.</p>"},{"location":"architecture/webhooks/#example-response","title":"Example Response","text":"<p>Issuing a credential with ID <code>citizen</code>:</p> <pre><code>{\n    \"citizen\": {\n        \"town\": \"BERLIN\"\n    }\n}\n</code></pre> <p>This response is injected into the issuance flow to create the final credential.</p>"},{"location":"deployment/","title":"Overview","text":""},{"location":"deployment/#deployment-options","title":"Deployment Options","text":"<p>EUDIPLO can be deployed in various ways depending on your needs, from local development to production Kubernetes clusters.</p>"},{"location":"deployment/#quick-comparison","title":"Quick Comparison","text":"Method Best For Complexity Production Ready Docker Compose Local development, demos \u2b50 Easy \u274c No Kubernetes Production, scalability \u2b50\u2b50\u2b50 Advanced \u2705 Yes Single Container Quick testing \u2b50 Very Easy \u274c No"},{"location":"deployment/#deployment-methods","title":"Deployment Methods","text":""},{"location":"deployment/#docker-compose","title":"Docker Compose","text":"<p>The fastest way to get EUDIPLO running locally with all dependencies (PostgreSQL, MinIO).</p> <p>Perfect for:</p> <ul> <li>\ud83d\udc68\u200d\ud83d\udcbb Local development</li> <li>\ud83c\udfaf Feature testing</li> <li>\ud83d\udcfa Demos and presentations</li> </ul> <p>See: Quick Start Guide</p>"},{"location":"deployment/#kubernetes","title":"Kubernetes","text":"<p>Production-ready deployment with high availability, auto-scaling, and monitoring.</p> <p>Perfect for:</p> <ul> <li>\ud83c\udfe2 Production environments</li> <li>\u2601\ufe0f Cloud deployments (AWS, Azure, GCP)</li> <li>\ud83d\udcc8 Scalable applications</li> <li>\ud83d\udd04 High availability requirements</li> </ul> <p>See: Kubernetes Deployment Guide</p>"},{"location":"deployment/#single-container-docker","title":"Single Container (Docker)","text":"<p>Minimal setup for quick testing without dependencies.</p> <p>Perfect for:</p> <ul> <li>\u26a1 Quick API testing</li> <li>\ud83e\uddea CI/CD pipelines</li> <li>\ud83d\udce6 Embedded use cases</li> </ul> <pre><code>docker run -d \\\n  --name eudiplo \\\n  -p 3000:3000 \\\n  ghcr.io/openwallet-foundation-labs/eudiplo:latest\n</code></pre> <p>External Dependencies Required</p> <p>Single container mode requires external PostgreSQL and S3-compatible storage (MinIO/AWS S3) configured via environment variables.</p>"},{"location":"deployment/#tlshttps-configuration","title":"TLS/HTTPS Configuration","text":"<p>EUDIPLO supports built-in TLS termination for serving HTTPS directly without a reverse proxy. This is useful for simple deployments or development environments.</p> <p>See: TLS Configuration Guide</p>"},{"location":"deployment/#production-checklist","title":"Production Checklist","text":"<p>Before deploying to production, ensure you:</p> <ul> <li> Changed all default credentials (MASTER_SECRET, database passwords)</li> <li> Configured TLS/HTTPS with valid certificates</li> <li> Set up database backups</li> <li> Configured monitoring and alerting</li> <li> Reviewed resource limits and scaling policies</li> <li> Set up log aggregation</li> <li> Configured network policies and firewalls</li> <li> Implemented secret management (e.g., HashiCorp Vault, AWS Secrets Manager)</li> <li> Reviewed Architecture documentation</li> </ul>"},{"location":"deployment/#next-steps","title":"Next Steps","text":"<ul> <li>New to EUDIPLO? Start with Quick Start</li> <li>Ready for K8s? See Kubernetes Deployment</li> <li>Need help? Visit our GitHub Issues</li> </ul>"},{"location":"deployment/docker-compose/","title":"Docker Compose","text":""},{"location":"deployment/docker-compose/#docker-compose-deployment","title":"Docker Compose Deployment","text":"<p>Deploy EUDIPLO using Docker Compose for local development, testing, and small-scale production environments. Docker Compose provides an easy way to run multi-container applications with minimal configuration.</p>"},{"location":"deployment/docker-compose/#overview","title":"Overview","text":"<p>EUDIPLO offers three Docker Compose deployment options:</p> Deployment Use Case Database Key Storage Production Ready Quick Start Quick testing, demos None (ephemeral) Ephemeral \u274c No Minimal Development, testing SQLite Filesystem \u26a0\ufe0f Limited Full Production, staging PostgreSQL Vault \u2705 Yes"},{"location":"deployment/docker-compose/#prerequisites","title":"Prerequisites","text":"<p>Before you begin, ensure you have:</p> <ul> <li>Docker installed (Get Docker)</li> <li>Docker Compose V2 or later (included with Docker Desktop)</li> <li>Basic understanding of Docker concepts</li> </ul> <p>Verify installation:</p> <pre><code>docker --version\ndocker compose version\n</code></pre>"},{"location":"deployment/docker-compose/#quick-start-root-directory","title":"Quick Start (Root Directory)","text":"<p>The fastest way to get EUDIPLO running for quick testing.</p>"},{"location":"deployment/docker-compose/#setup","title":"Setup","text":"<p>From the repository root, create an <code>.env</code> file with required credentials:</p> <pre><code>cp .env.example .env\n\n# Generate required credentials\necho \"MASTER_SECRET=$(openssl rand -base64 32)\" &gt;&gt; .env\necho \"AUTH_CLIENT_ID=demo\" &gt;&gt; .env\necho \"AUTH_CLIENT_SECRET=demo-secret\" &gt;&gt; .env\n</code></pre>"},{"location":"deployment/docker-compose/#start-services","title":"Start Services","text":"<pre><code>docker compose up -d\n</code></pre> <p>This starts:</p> <ul> <li>Backend API on port 3000</li> <li>Client UI on port 4200</li> </ul>"},{"location":"deployment/docker-compose/#access-applications","title":"Access Applications","text":"<ul> <li>Backend API: http://localhost:3000/api</li> <li>Backend Health: http://localhost:3000/health</li> <li>Client UI: http://localhost:4200</li> </ul>"},{"location":"deployment/docker-compose/#stop-services","title":"Stop Services","text":"<pre><code>docker compose down\n</code></pre> <p>Ephemeral Storage</p> <p>This deployment uses default in-memory storage. All data is lost when containers stop. Use Minimal or Full deployment for persistent storage.</p>"},{"location":"deployment/docker-compose/#minimal-deployment","title":"Minimal Deployment","text":"<p>Ideal for development and testing with persistent storage but without production dependencies.</p>"},{"location":"deployment/docker-compose/#features","title":"Features","text":"<ul> <li>\u2705 Persistent Storage - SQLite database</li> <li>\u2705 Filesystem Keys - Keys stored on local filesystem</li> <li>\u2705 Simple Setup - No external dependencies</li> <li>\u2705 Fast Startup - Minimal overhead</li> <li>\u26a0\ufe0f Limited Scalability - Not suitable for high-traffic production</li> </ul>"},{"location":"deployment/docker-compose/#setup_1","title":"Setup","text":"<p>Navigate to minimal deployment:</p> <pre><code>cd deployment/minimal\n</code></pre> <p>Copy and configure environment:</p> <pre><code>cp example.env .env\n</code></pre> <p>Edit <code>.env</code>:</p> <pre><code># Public URL (for OAuth redirects)\nPUBLIC_URL=http://localhost:3000\n\n# Environment\nNODE_ENV=development\n</code></pre>"},{"location":"deployment/docker-compose/#deploy","title":"Deploy","text":"<p>Start services:</p> <pre><code>docker compose up -d\n</code></pre> <p>Watch logs:</p> <pre><code>docker compose logs -f\n</code></pre>"},{"location":"deployment/docker-compose/#access-applications_1","title":"Access Applications","text":"<ul> <li>Backend API: http://localhost:3000/api</li> <li>Client UI: http://localhost:4200</li> </ul>"},{"location":"deployment/docker-compose/#data-persistence","title":"Data Persistence","text":"<p>Data is stored in Docker volumes:</p> <pre><code># View volumes\ndocker volume ls | grep minimal\n\n# Inspect volume\ndocker volume inspect minimal_eudiplo-config\n</code></pre>"},{"location":"deployment/docker-compose/#stop-and-cleanup","title":"Stop and Cleanup","text":"<pre><code># Stop services\ndocker compose down\n\n# Remove volumes (deletes all data)\ndocker compose down -v\n</code></pre>"},{"location":"deployment/docker-compose/#full-deployment-production","title":"Full Deployment (Production)","text":"<p>Production-ready deployment with PostgreSQL, HashiCorp Vault, and MinIO object storage.</p>"},{"location":"deployment/docker-compose/#features_1","title":"Features","text":"<ul> <li>\u2705 PostgreSQL Database - Relational database for transactional data</li> <li>\u2705 HashiCorp Vault - Secure key management</li> <li>\u2705 MinIO - S3-compatible object storage</li> <li>\u2705 Health Checks - Automatic restart on failure</li> <li>\u2705 Docker Networks - Isolated networking</li> <li>\u2705 Persistent Volumes - Data survives restarts</li> </ul>"},{"location":"deployment/docker-compose/#architecture","title":"Architecture","text":"<pre><code>\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502  Client (4200)  \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n         \u2502\n\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u25bc\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510      \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502 Backend (3000)  \u2502\u25c4\u2500\u2500\u2500\u2500\u25ba\u2502 PostgreSQL   \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518      \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n         \u2502\n         \u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u25ba\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n         \u2502               \u2502 Vault (8200) \u2502\n         \u2502               \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n         \u2502\n         \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u25ba\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n                         \u2502 MinIO (9000) \u2502\n                         \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n</code></pre>"},{"location":"deployment/docker-compose/#setup_2","title":"Setup","text":"<p>Navigate to full deployment:</p> <pre><code>cd deployment/full\n</code></pre> <p>Copy and configure environment:</p> <pre><code>cp example.env .env\n</code></pre> <p>Edit <code>.env</code> with your configuration:</p> <pre><code># Public URL (change for production)\nPUBLIC_URL=https://your-domain.com\n\n# Environment\nNODE_ENV=production\n\n# PostgreSQL Configuration\nDB_TYPE=postgres\nDB_HOST=database\nDB_PORT=5432\nDB_USERNAME=eudiplo_user\nDB_PASSWORD=strong-secure-password-here\nDB_DATABASE=eudiplo\n\n# HashiCorp Vault\nVAULT_TOKEN=your-vault-root-token\nVAULT_ADDR=http://vault:8200\n\n# MinIO (S3-compatible storage)\nMINIO_ROOT_USER=minioadmin\nMINIO_ROOT_PASSWORD=minioadmin-secure-password\n\n# Application Secrets\nMASTER_SECRET=your-secret-jwt-key-change-in-production\nAUTH_CLIENT_ID=your-client-id\nAUTH_CLIENT_SECRET=your-client-secret\n\n# Metrics Protection (optional but recommended)\nMETRICS_TOKEN=your-metrics-bearer-token\n\n# Logging\nLOG_LEVEL=info\n</code></pre> <p>Security Warning</p> <p>Never use default credentials in production! Change all passwords, tokens, and secrets before deploying.</p>"},{"location":"deployment/docker-compose/#deploy_1","title":"Deploy","text":"<p>Start all services:</p> <pre><code>docker compose up -d\n</code></pre> <p>Watch startup logs:</p> <pre><code>docker compose logs -f\n</code></pre> <p>Wait for all services to be healthy:</p> <pre><code>docker compose ps\n</code></pre> <p>Expected output:</p> <pre><code>NAME                    STATUS              PORTS\nfull-database-1         Up (healthy)        5432/tcp\nfull-vault-1            Up                  0.0.0.0:8200-&gt;8200/tcp\nfull-minio-1            Up (healthy)        0.0.0.0:9000-9001-&gt;9000-9001/tcp\nfull-eudiplo-1          Up (healthy)        0.0.0.0:3000-&gt;3000/tcp\nfull-eudiplo-client-1   Up (healthy)        0.0.0.0:4200-&gt;80/tcp\n</code></pre>"},{"location":"deployment/docker-compose/#access-applications_2","title":"Access Applications","text":"<ul> <li>Backend API: http://localhost:3000/api</li> <li>Backend Health: http://localhost:3000/health</li> <li>Client UI: http://localhost:4200</li> <li>Vault UI: http://localhost:8200 (Token: from VAULT_TOKEN)</li> <li>MinIO Console: http://localhost:9001 (Login: MINIO_ROOT_USER/PASSWORD)</li> </ul>"},{"location":"deployment/docker-compose/#service-management","title":"Service Management","text":"<p>View running services:</p> <pre><code>docker compose ps\n</code></pre> <p>View logs:</p> <pre><code># All services\ndocker compose logs -f\n\n# Specific service\ndocker compose logs -f eudiplo\ndocker compose logs -f database\n</code></pre> <p>Restart a service:</p> <pre><code>docker compose restart eudiplo\n</code></pre> <p>Stop services:</p> <pre><code>docker compose down\n</code></pre> <p>Remove all data:</p> <pre><code>docker compose down -v\n</code></pre>"},{"location":"deployment/docker-compose/#testing-verification","title":"Testing &amp; Verification","text":""},{"location":"deployment/docker-compose/#health-checks","title":"Health Checks","text":"<p>Verify backend health:</p> <pre><code>curl http://localhost:3000/health\n</code></pre> <p>Expected response:</p> <pre><code>{\n    \"status\": \"ok\",\n    \"info\": {\n        \"database\": {\n            \"status\": \"up\"\n        }\n    },\n    \"version\": \"main\"\n}\n</code></pre>"},{"location":"deployment/docker-compose/#database-connection","title":"Database Connection","text":"<p>Connect to PostgreSQL (full deployment):</p> <pre><code>docker compose exec database psql -U eudiplo_user -d eudiplo\n</code></pre> <p>Inside psql:</p> <pre><code>\\dt           -- List tables\n\\l            -- List databases\n\\q            -- Quit\n</code></pre>"},{"location":"deployment/docker-compose/#vault-access","title":"Vault Access","text":"<p>Access Vault UI:</p> <ol> <li>Navigate to http://localhost:8200</li> <li>Sign in with token from <code>.env</code> (VAULT_TOKEN)</li> <li>Verify EUDIPLO secrets are stored</li> </ol> <p>Via CLI:</p> <pre><code>docker compose exec vault vault status\n</code></pre>"},{"location":"deployment/docker-compose/#minio-verification","title":"MinIO Verification","text":"<ol> <li>Navigate to http://localhost:9001</li> <li>Login with credentials from <code>.env</code></li> <li>Verify buckets are created</li> </ol> <p>Via CLI:</p> <pre><code>docker compose exec minio mc ls\n</code></pre>"},{"location":"deployment/docker-compose/#troubleshooting","title":"Troubleshooting","text":""},{"location":"deployment/docker-compose/#services-not-starting","title":"Services Not Starting","text":"<p>Check service status:</p> <pre><code>docker compose ps\n</code></pre> <p>View logs for failed service:</p> <pre><code>docker compose logs &lt;service-name&gt;\n</code></pre> <p>Common issues:</p> <ol> <li> <p>Port already in use:</p> <pre><code># Find process using port\nlsof -i :3000\n\n# Kill process or change port in docker-compose.yml\n</code></pre> </li> <li> <p>Database not ready:</p> <pre><code># Check database health\ndocker compose exec database pg_isready -U eudiplo_user\n\n# Restart backend after database is ready\ndocker compose restart eudiplo\n</code></pre> </li> <li> <p>Permission errors:</p> <pre><code># Fix volume permissions\nsudo chown -R $(id -u):$(id -g) ./config\n</code></pre> </li> </ol>"},{"location":"deployment/docker-compose/#connection-refused-errors","title":"Connection Refused Errors","text":"<p>If backend can't connect to database:</p> <pre><code># Verify database is running\ndocker compose ps database\n\n# Check database logs\ndocker compose logs database\n\n# Verify network connectivity\ndocker compose exec eudiplo ping database\n</code></pre>"},{"location":"deployment/docker-compose/#data-persistence-issues","title":"Data Persistence Issues","text":"<p>Verify volumes are created:</p> <pre><code># List volumes\ndocker volume ls\n\n# Inspect volume\ndocker volume inspect full_db_data\n</code></pre>"},{"location":"deployment/docker-compose/#vault-unsealing","title":"Vault Unsealing","text":"<p>If Vault is sealed:</p> <pre><code># Check status\ndocker compose exec vault vault status\n\n# In dev mode, Vault auto-unseals\n# For production, follow Vault unsealing procedures\n</code></pre>"},{"location":"deployment/docker-compose/#configuration","title":"Configuration","text":""},{"location":"deployment/docker-compose/#environment-variables","title":"Environment Variables","text":"<p>Common environment variables:</p> Variable Description Default <code>PUBLIC_URL</code> Public URL for OAuth redirects <code>http://localhost:3000</code> <code>NODE_ENV</code> Environment (development/production) <code>development</code> <code>DB_TYPE</code> Database type (postgres/sqlite) <code>postgres</code> <code>DB_HOST</code> Database hostname <code>database</code> <code>DB_PORT</code> Database port <code>5432</code> <code>DB_USERNAME</code> Database username - <code>DB_PASSWORD</code> Database password - <code>DB_DATABASE</code> Database name <code>eudiplo</code> <code>VAULT_TOKEN</code> Vault root token - <code>VAULT_ADDR</code> Vault address <code>http://vault:8200</code> <code>MASTER_SECRET</code> Master secret for JWT and encryption - (required) <code>AUTH_CLIENT_ID</code> OAuth client ID - (required) <code>AUTH_CLIENT_SECRET</code> OAuth client secret - (required) <code>METRICS_TOKEN</code> Bearer token for /metrics endpoint - (unprotected) <code>LOG_LEVEL</code> Logging level <code>info</code> <p>See Configuration Documentation for complete list.</p>"},{"location":"deployment/docker-compose/#custom-ports","title":"Custom Ports","text":"<p>Edit <code>docker-compose.yml</code> to change exposed ports:</p> <pre><code>services:\n    eudiplo:\n        ports:\n            - '8080:3000' # Change 3000 to 8080\n\n    eudiplo-client:\n        ports:\n            - '8081:80' # Change 4200 to 8081\n</code></pre>"},{"location":"deployment/docker-compose/#resource-limits","title":"Resource Limits","text":"<p>Add resource limits to prevent resource exhaustion:</p> <pre><code>services:\n    eudiplo:\n        deploy:\n            resources:\n                limits:\n                    cpus: '1.0'\n                    memory: 512M\n                reservations:\n                    cpus: '0.5'\n                    memory: 256M\n</code></pre>"},{"location":"deployment/docker-compose/#updating","title":"Updating","text":""},{"location":"deployment/docker-compose/#update-to-latest-images","title":"Update to Latest Images","text":"<p>Pull latest images:</p> <pre><code>docker compose pull\n</code></pre> <p>Restart services:</p> <pre><code>docker compose up -d\n</code></pre>"},{"location":"deployment/docker-compose/#update-to-specific-version","title":"Update to Specific Version","text":"<p>Edit <code>docker-compose.yml</code>:</p> <pre><code>services:\n    eudiplo:\n        image: ghcr.io/openwallet-foundation-labs/eudiplo:v1.2.3\n\n    eudiplo-client:\n        image: ghcr.io/openwallet-foundation-labs/eudiplo-client:v1.2.3\n</code></pre> <p>Then:</p> <pre><code>docker compose up -d\n</code></pre>"},{"location":"deployment/docker-compose/#backup-restore","title":"Backup &amp; Restore","text":""},{"location":"deployment/docker-compose/#backup-postgresql-database","title":"Backup PostgreSQL Database","text":"<pre><code># Create backup\ndocker compose exec database pg_dump -U eudiplo_user eudiplo &gt; backup.sql\n\n# Or with Docker\ndocker compose exec -T database pg_dump -U eudiplo_user eudiplo &gt; backup.sql\n</code></pre>"},{"location":"deployment/docker-compose/#restore-postgresql-database","title":"Restore PostgreSQL Database","text":"<pre><code># Stop backend\ndocker compose stop eudiplo\n\n# Restore\ncat backup.sql | docker compose exec -T database psql -U eudiplo_user eudiplo\n\n# Start backend\ndocker compose start eudiplo\n</code></pre>"},{"location":"deployment/docker-compose/#backup-vault-data","title":"Backup Vault Data","text":"<pre><code># Create volume backup\ndocker run --rm \\\n  -v full_vault_data:/data \\\n  -v $(pwd):/backup \\\n  alpine tar czf /backup/vault-backup.tar.gz -C /data .\n</code></pre>"},{"location":"deployment/docker-compose/#backup-minio-data","title":"Backup MinIO Data","text":"<pre><code># Create volume backup\ndocker run --rm \\\n  -v full_minio_data:/data \\\n  -v $(pwd):/backup \\\n  alpine tar czf /backup/minio-backup.tar.gz -C /data .\n</code></pre>"},{"location":"deployment/docker-compose/#monitoring","title":"Monitoring","text":""},{"location":"deployment/docker-compose/#view-resource-usage","title":"View Resource Usage","text":"<pre><code>docker stats\n</code></pre>"},{"location":"deployment/docker-compose/#check-logs","title":"Check Logs","text":"<pre><code># Follow all logs\ndocker compose logs -f\n\n# Last 100 lines\ndocker compose logs --tail=100\n\n# Specific time range\ndocker compose logs --since 2h\n</code></pre>"},{"location":"deployment/docker-compose/#health-check-status","title":"Health Check Status","text":"<pre><code># Check all services health\ndocker compose ps\n\n# Backend health endpoint\ncurl http://localhost:3000/health\n\n# Database health\ndocker compose exec database pg_isready -U eudiplo_user\n</code></pre>"},{"location":"deployment/docker-compose/#production-considerations","title":"Production Considerations","text":""},{"location":"deployment/docker-compose/#security","title":"Security","text":"<p>Before deploying to production:</p> <ol> <li>Change all default credentials (database passwords, Vault token, JWT secret)</li> <li>Use HTTPS with valid SSL certificates (not self-signed)</li> <li>Enable firewall and restrict port access</li> <li>Use secrets management instead of <code>.env</code> files</li> <li>Regular security updates for all images</li> <li>Enable Docker Content Trust for image verification</li> <li>Configure <code>ENCRYPTION_KEY_SOURCE=vault</code> so the encryption key is only in RAM, not in environment variables (see Encryption at Rest)</li> </ol>"},{"location":"deployment/docker-compose/#secret-management-strategies","title":"Secret Management Strategies","text":"<p>EUDIPLO requires several secrets (database credentials, JWT secret, encryption key, etc.). While the quick-start uses <code>.env</code> files, production deployments should use proper secret management.</p>"},{"location":"deployment/docker-compose/#credential-categories","title":"Credential Categories","text":"Secret Risk Level Dev/Test Approach Production Approach <code>DB_PASSWORD</code> High <code>.env</code> file Docker Secrets / Vault Agent <code>MASTER_SECRET</code> Critical <code>.env</code> file Docker Secrets / Vault Agent <code>AUTH_CLIENT_SECRET</code> Critical <code>.env</code> file Docker Secrets / Vault Agent <code>S3_SECRET_ACCESS_KEY</code> High <code>.env</code> file Docker Secrets / IAM Role <code>ENCRYPTION_KEY</code> Critical <code>.env</code> file Application-level fetch (built-in)"},{"location":"deployment/docker-compose/#option-1-docker-secrets-docker-swarm","title":"Option 1: Docker Secrets (Docker Swarm)","text":"<p>Docker Secrets provide encrypted secret storage for Swarm mode:</p> <pre><code># Create secrets\necho \"your-db-password\" | docker secret create db_password -\necho \"your-jwt-secret\" | docker secret create master_secret -\necho \"your-auth-client-secret\" | docker secret create auth_client_secret -\n</code></pre> <p>Reference in <code>docker-compose.yml</code>:</p> <pre><code>version: '3.8'\nservices:\n    eudiplo:\n        image: eudiplo/backend:latest\n        secrets:\n            - db_password\n            - master_secret\n            - auth_client_secret\n        environment:\n            DB_PASSWORD_FILE: /run/secrets/db_password\n            MASTER_SECRET_FILE: /run/secrets/master_secret\n            AUTH_CLIENT_SECRET_FILE: /run/secrets/auth_client_secret\n\nsecrets:\n    db_password:\n        external: true\n    master_secret:\n        external: true\n    auth_client_secret:\n        external: true\n</code></pre> <p>File-based Secrets</p> <p>Docker Secrets are mounted as files at <code>/run/secrets/&lt;secret_name&gt;</code>. The application reads secret values from these files at startup.</p>"},{"location":"deployment/docker-compose/#option-2-vault-agent-sidecar","title":"Option 2: Vault Agent Sidecar","text":"<p>Run HashiCorp Vault Agent alongside the application to inject secrets:</p> <pre><code>services:\n    vault-agent:\n        image: hashicorp/vault:latest\n        command: agent -config=/vault/config/agent.hcl\n        volumes:\n            - vault-secrets:/vault/secrets\n            - ./vault-agent-config.hcl:/vault/config/agent.hcl:ro\n\n    eudiplo:\n        image: eudiplo/backend:latest\n        depends_on:\n            - vault-agent\n        volumes:\n            - vault-secrets:/vault/secrets:ro\n        environment:\n            DB_PASSWORD_FILE: /vault/secrets/db_password\n            MASTER_SECRET_FILE: /vault/secrets/master_secret\n\nvolumes:\n    vault-secrets:\n</code></pre> <p>Vault Agent config (<code>vault-agent-config.hcl</code>):</p> <pre><code>vault {\n  address = \"https://vault.example.com:8200\"\n}\n\nauto_auth {\n  method \"approle\" {\n    config = {\n      role_id_file_path   = \"/vault/config/role-id\"\n      secret_id_file_path = \"/vault/config/secret-id\"\n    }\n  }\n}\n\ntemplate {\n  source      = \"/vault/config/secrets.ctmpl\"\n  destination = \"/vault/secrets/env\"\n}\n</code></pre>"},{"location":"deployment/docker-compose/#option-3-environment-file-encryption","title":"Option 3: Environment File Encryption","text":"<p>For simpler setups, encrypt the <code>.env</code> file at rest:</p> <pre><code># Encrypt .env with age or sops\nage -e -r age1... .env &gt; .env.encrypted\n\n# Decrypt at deployment time\nage -d .env.encrypted &gt; .env\ndocker compose up -d\nrm .env  # Remove plaintext immediately\n</code></pre>"},{"location":"deployment/docker-compose/#why-encryption-key-is-different","title":"Why Encryption Key Is Different","text":"<p>The <code>ENCRYPTION_KEY</code> uses application-level fetching (via <code>ENCRYPTION_KEY_SOURCE</code>) because:</p> <ol> <li>TypeORM Transformer Singleton: The encryption transformer must be initialized before any database operations</li> <li>Runtime-Only Access: The key is fetched once at startup and kept only in memory</li> <li>Built-in Support: Configure <code>ENCRYPTION_KEY_SOURCE=vault</code> in the Full deployment to fetch the key from Vault at runtime</li> </ol> <p>For all other secrets, infrastructure-level injection (Docker Secrets, Vault Agent) is preferred.</p>"},{"location":"deployment/docker-compose/#high-availability","title":"High Availability","text":"<p>Docker Compose is not suitable for high-availability production deployments because:</p> <ul> <li>\u274c Single host only (no multi-node support)</li> <li>\u274c No automatic failover</li> <li>\u274c Limited scaling capabilities</li> <li>\u274c Manual orchestration required</li> </ul> <p>For production with HA requirements, use:</p> <ul> <li>\u2705 Kubernetes (see Kubernetes Deployment)</li> <li>\u2705 Docker Swarm (basic orchestration)</li> <li>\u2705 Managed container services (AWS ECS, Azure Container Instances)</li> </ul>"},{"location":"deployment/docker-compose/#vault-production-setup","title":"Vault Production Setup","text":"<p>Vault Dev Mode</p> <p>The full deployment uses Vault in dev mode, which is NOT production-safe. Data is ephemeral and unsealing is automatic.</p> <p>For production Vault:</p> <ol> <li>Use production mode with persistent storage</li> <li>Configure auto-unsealing (AWS KMS, Azure Key Vault, GCP KMS)</li> <li>Enable audit logging</li> <li>Set up backup and disaster recovery</li> <li>Use access control policies (ACLs)</li> </ol> <p>Resources:</p> <ul> <li>Vault Production Hardening</li> <li>Docker Vault Setup</li> <li>Vault Docker Example</li> </ul>"},{"location":"deployment/docker-compose/#database-considerations","title":"Database Considerations","text":"<p>For production PostgreSQL:</p> <ul> <li>\u2705 Enable connection pooling (PgBouncer)</li> <li>\u2705 Configure regular backups (pg_dump, WAL archiving)</li> <li>\u2705 Set up replication for high availability</li> <li>\u2705 Monitor performance metrics</li> <li>\u2705 Use volume backups or external storage</li> </ul>"},{"location":"deployment/docker-compose/#logging-monitoring","title":"Logging &amp; Monitoring","text":"<p>Configure centralized logging:</p> <pre><code>services:\n    eudiplo:\n        logging:\n            driver: 'json-file'\n            options:\n                max-size: '10m'\n                max-file: '3'\n</code></pre> <p>Or use external logging (Loki, ELK):</p> <pre><code>logging:\n    driver: 'loki'\n    options:\n        loki-url: 'http://loki:3100/loki/api/v1/push'\n</code></pre>"},{"location":"deployment/docker-compose/#when-to-use-docker-compose-vs-kubernetes","title":"When to Use Docker Compose vs Kubernetes","text":""},{"location":"deployment/docker-compose/#use-docker-compose-when","title":"Use Docker Compose When","text":"<p>\u2705 Local development and testing \u2705 Single-server deployment with moderate traffic \u2705 Quick demos and proof of concepts \u2705 Internal tools with low availability requirements \u2705 Cost-effective small-scale deployments</p>"},{"location":"deployment/docker-compose/#use-kubernetes-when","title":"Use Kubernetes When","text":"<p>\u2705 Production environments with high availability needs \u2705 Multi-node clusters for scalability \u2705 Auto-scaling based on load \u2705 Zero-downtime deployments \u2705 Cloud-native infrastructure \u2705 Complex networking and service mesh</p> <p>See: Kubernetes Deployment Guide</p>"},{"location":"deployment/docker-compose/#advanced-configuration","title":"Advanced Configuration","text":""},{"location":"deployment/docker-compose/#using-external-database","title":"Using External Database","text":"<p>Instead of containerized PostgreSQL, use external database:</p> <p>Edit <code>docker-compose.yml</code>:</p> <pre><code>services:\n    eudiplo:\n        environment:\n            - DB_HOST=your-database-host.com\n            - DB_PORT=5432\n            - DB_SSL=true # Enable SSL for external DB\n        # Remove database service and dependency\n</code></pre> <p>Remove database service from <code>docker-compose.yml</code>.</p>"},{"location":"deployment/docker-compose/#custom-docker-network","title":"Custom Docker Network","text":"<p>Connect to existing Docker network:</p> <pre><code>networks:\n    eudiplo-network:\n        external: true\n        name: my-existing-network\n</code></pre>"},{"location":"deployment/docker-compose/#build-from-source","title":"Build from Source","text":"<p>Instead of using pre-built images:</p> <pre><code>services:\n    eudiplo:\n        build:\n            context: ../..\n            dockerfile: Dockerfile\n            target: eudiplo\n        # Remove 'image' line\n</code></pre> <p>Build and start:</p> <pre><code>docker compose build\ndocker compose up -d\n</code></pre>"},{"location":"deployment/docker-compose/#cleanup","title":"Cleanup","text":""},{"location":"deployment/docker-compose/#remove-all-containers","title":"Remove All Containers","text":"<pre><code>docker compose down\n</code></pre>"},{"location":"deployment/docker-compose/#remove-volumes-data-loss","title":"Remove Volumes (Data Loss)","text":"<pre><code>docker compose down -v\n</code></pre>"},{"location":"deployment/docker-compose/#remove-images","title":"Remove Images","text":"<pre><code>docker compose down --rmi all\n</code></pre>"},{"location":"deployment/docker-compose/#complete-cleanup","title":"Complete Cleanup","text":"<pre><code># Remove everything including volumes\ndocker compose down -v --rmi all --remove-orphans\n\n# Remove dangling images\ndocker image prune -a\n\n# Remove unused volumes\ndocker volume prune\n</code></pre>"},{"location":"deployment/docker-compose/#support-resources","title":"Support &amp; Resources","text":"<ul> <li>Documentation: https://openwallet-foundation-labs.github.io/eudiplo/latest/</li> <li>GitHub Issues: https://github.com/openwallet-foundation-labs/eudiplo/issues</li> <li>Discord Community: https://discord.gg/58ys8XfXDu</li> <li>Docker Compose Docs: https://docs.docker.com/compose/</li> </ul>"},{"location":"deployment/docker-compose/#next-steps","title":"Next Steps","text":"<ul> <li>\ud83d\udcd6 Explore Architecture to understand EUDIPLO design</li> <li>\ud83d\udd10 Configure Key Management</li> <li>\ud83d\udd11 Set up API Authentication</li> <li>\u2638\ufe0f Deploy to Kubernetes for production</li> <li>\ud83d\udcca Enable Monitoring</li> </ul>"},{"location":"deployment/kubernetes/","title":"Kubernetes","text":""},{"location":"deployment/kubernetes/#kubernetes-deployment","title":"Kubernetes Deployment","text":"<p>Deploy EUDIPLO on Kubernetes with PostgreSQL and MinIO (S3-compatible storage), optimized for production use and Docker Desktop local testing.</p>"},{"location":"deployment/kubernetes/#architecture","title":"Architecture","text":"<p>The Kubernetes deployment includes:</p> <ul> <li>EUDIPLO Backend - Main application service (Node.js)</li> <li>EUDIPLO Client - Web UI served by nginx</li> <li>PostgreSQL - Relational database with persistent storage</li> <li>MinIO - S3-compatible object storage for file uploads</li> <li>Ingress - HTTP routing with domain-based access</li> </ul> <p>All components include:</p> <ul> <li>\u2705 Security contexts (non-root users)</li> <li>\u2705 Health probes (readiness, liveness, startup)</li> <li>\u2705 Resource limits (CPU/memory)</li> <li>\u2705 Persistent storage (StatefulSets with PVCs)</li> </ul>"},{"location":"deployment/kubernetes/#prerequisites","title":"Prerequisites","text":""},{"location":"deployment/kubernetes/#1-kubernetes-cluster","title":"1. Kubernetes Cluster","text":"Docker Desktop (Local)Production Cluster <p>Enable Kubernetes in Docker Desktop:</p> <ol> <li>Open Docker Desktop \u2192 Settings \u2192 Kubernetes</li> <li>Check \"Enable Kubernetes\"</li> <li>Click \"Apply &amp; Restart\"</li> <li>Wait for Kubernetes to start (green indicator)</li> </ol> <p>Verify installation: </p><pre><code>kubectl version --client\nkubectl cluster-info\n</code></pre><p></p> <p>Ensure you have:</p> <ul> <li><code>kubectl</code> configured to access your cluster</li> <li>Cluster admin permissions</li> <li>Storage provisioner configured (for PVCs)</li> <li>LoadBalancer or Ingress controller available</li> </ul>"},{"location":"deployment/kubernetes/#2-install-ingress-nginx-controller","title":"2. Install ingress-nginx Controller","text":"<p>Docker Desktop Users</p> <p>This step is required for accessing services via domain names.</p> <pre><code># Install ingress-nginx\nkubectl apply -f https://raw.githubusercontent.com/kubernetes/ingress-nginx/controller-v1.11.1/deploy/static/provider/cloud/deploy.yaml\n\n# Wait for it to be ready\nkubectl wait --namespace ingress-nginx \\\n  --for=condition=ready pod \\\n  --selector=app.kubernetes.io/component=controller \\\n  --timeout=120s\n</code></pre>"},{"location":"deployment/kubernetes/#3-configure-environment-variables","title":"3. Configure Environment Variables","text":"<p>Navigate to the Kubernetes manifests directory:</p> <pre><code>cd deployment/k8s\n</code></pre> <p>Copy the example configuration:</p> <pre><code>cp .env.example .env\n</code></pre> <p>Edit <code>.env</code> with your values:</p> <pre><code># Public URL (for OAuth redirects and OIDC)\nPUBLIC_URL=http://eudiplo.localtest.me\n\n# PostgreSQL Configuration\nDB_USERNAME=eudiplo\nDB_PASSWORD=changeme123\nDB_DATABASE=eudiplo\n\n# MinIO Configuration\nMINIO_ROOT_USER=minioadmin\nMINIO_ROOT_PASSWORD=minioadmin123\nMINIO_BUCKET=uploads\n\n# Application Secrets (ALL REQUIRED when not using external OIDC)\nMASTER_SECRET=your-secret-jwt-key-change-in-production\nAUTH_CLIENT_ID=your-client-id\nAUTH_CLIENT_SECRET=your-client-secret\n\n# Logging\nLOG_LEVEL=info\n</code></pre> <p>Security Alert</p> <p>The demo credentials will trigger security warnings in the application logs. Always change these values for production deployments!</p>"},{"location":"deployment/kubernetes/#deployment-steps","title":"Deployment Steps","text":""},{"location":"deployment/kubernetes/#1-create-namespace-and-secret","title":"1. Create Namespace and Secret","text":"<pre><code># Create dedicated namespace\nkubectl create namespace eudiplo\n\n# Create Kubernetes secret from .env file\nkubectl -n eudiplo create secret generic eudiplo-env --from-env-file=.env\n</code></pre>"},{"location":"deployment/kubernetes/#2-deploy-all-resources","title":"2. Deploy All Resources","text":"<p>Using Kustomize (recommended):</p> <pre><code>kubectl apply -k .\n</code></pre> <p>Or apply individual manifests:</p> <pre><code>kubectl apply -f namespace.yaml\nkubectl apply -f postgres-statefulset.yaml\nkubectl apply -f postgres-service.yaml\nkubectl apply -f minio-statefulset.yaml\nkubectl apply -f minio-service.yaml\nkubectl apply -f minio-bucket-job.yaml\nkubectl apply -f eudiplo-deployment.yaml\nkubectl apply -f eudiplo-service.yaml\nkubectl apply -f eudiplo-client-deployment.yaml\nkubectl apply -f eudiplo-client-service.yaml\nkubectl apply -f ingress.yaml\n</code></pre>"},{"location":"deployment/kubernetes/#3-verify-deployment","title":"3. Verify Deployment","text":"<p>Check all resources:</p> <pre><code>kubectl -n eudiplo get all\n</code></pre> <p>Watch pods until all are Running:</p> <pre><code>kubectl -n eudiplo get pods -w\n</code></pre> <p>Expected output (all Running/Completed):</p> <pre><code>NAME                                  READY   STATUS      RESTARTS   AGE\npod/eudiplo-xxxxxxxxxx-xxxxx          1/1     Running     0          2m\npod/eudiplo-client-xxxxxxxxxx-xxxxx   1/1     Running     0          2m\npod/postgres-0                        1/1     Running     0          3m\npod/minio-0                           1/1     Running     0          3m\npod/minio-mc-bootstrap-xxxxx          0/1     Completed   0          2m\n</code></pre> <p>Check logs if pods are not starting:</p> <pre><code>kubectl -n eudiplo logs -f deployment/eudiplo\nkubectl -n eudiplo logs -f deployment/eudiplo-client\nkubectl -n eudiplo logs -f statefulset/postgres\nkubectl -n eudiplo logs -f statefulset/minio\nkubectl -n eudiplo logs -f job/minio-mc-bootstrap\n</code></pre>"},{"location":"deployment/kubernetes/#access-the-application","title":"Access the Application","text":""},{"location":"deployment/kubernetes/#option-1-using-ingress-recommended","title":"Option 1: Using Ingress (Recommended)","text":"<p>Access via domain names (works automatically with <code>localtest.me</code>):</p> <ul> <li>Backend API: http://eudiplo.localtest.me/api</li> <li>Backend Health: http://eudiplo.localtest.me/health</li> <li>Client UI: http://eudiplo-client.localtest.me/</li> <li>MinIO Console: http://minio-console.localtest.me/</li> </ul> <p>Why localtest.me?</p> <p>The <code>localtest.me</code> domain automatically resolves to <code>127.0.0.1</code>, eliminating the need to edit <code>/etc/hosts</code>.</p>"},{"location":"deployment/kubernetes/#option-2-port-forwarding","title":"Option 2: Port Forwarding","text":"<p>If ingress isn't working, use port-forward as fallback:</p> <pre><code># Backend API (port 3000)\nkubectl -n eudiplo port-forward svc/eudiplo 3000:3000 &amp;\n\n# Client UI (port 4200 \u2192 80)\nkubectl -n eudiplo port-forward svc/eudiplo-client 4200:80 &amp;\n\n# MinIO Console (port 9001)\nkubectl -n eudiplo port-forward svc/minio 9001:9001 &amp;\n\n# PostgreSQL (for debugging, port 5432)\nkubectl -n eudiplo port-forward svc/postgres 5432:5432 &amp;\n</code></pre> <p>Then access:</p> <ul> <li>Backend: http://localhost:3000/api</li> <li>Client: http://localhost:4200/</li> <li>MinIO Console: http://localhost:9001/</li> </ul> <p>Kill all port-forwards:</p> <pre><code>pkill -f \"kubectl.*port-forward\"\n</code></pre>"},{"location":"deployment/kubernetes/#testing-verification","title":"Testing &amp; Verification","text":""},{"location":"deployment/kubernetes/#health-checks","title":"Health Checks","text":"<p>Verify the backend is healthy:</p> <pre><code># Using ingress\ncurl http://eudiplo.localtest.me/health\n\n# Using port-forward\ncurl http://localhost:3000/health\n</code></pre> <p>Expected response:</p> <pre><code>{\n    \"status\": \"ok\",\n    \"info\": {\n        \"database\": {\n            \"status\": \"up\"\n        }\n    },\n    \"version\": \"main\"\n}\n</code></pre>"},{"location":"deployment/kubernetes/#minio-console-access","title":"MinIO Console Access","text":"<ol> <li>Navigate to http://minio-console.localtest.me/</li> <li>Login with credentials from <code>.env</code>:<ul> <li>Username: <code>minioadmin</code> (MINIO_ROOT_USER)</li> <li>Password: <code>minioadmin123</code> (MINIO_ROOT_PASSWORD)</li> </ul> </li> <li>Verify the <code>uploads</code> bucket exists</li> </ol> <p>Verify bucket creation via logs:</p> <pre><code>kubectl -n eudiplo logs job/minio-mc-bootstrap\n</code></pre>"},{"location":"deployment/kubernetes/#database-connection","title":"Database Connection","text":"<p>Connect to PostgreSQL:</p> <pre><code>kubectl -n eudiplo exec -it statefulset/postgres -- psql -U eudiplo -d eudiplo\n</code></pre> <p>Inside psql:</p> <pre><code>\\dt           -- List tables\n\\l            -- List databases\n\\q            -- Quit\n</code></pre>"},{"location":"deployment/kubernetes/#application-logs","title":"Application Logs","text":"<p>Follow backend logs:</p> <pre><code>kubectl -n eudiplo logs -f deployment/eudiplo\n</code></pre> <p>Follow client logs:</p> <pre><code>kubectl -n eudiplo logs -f deployment/eudiplo-client\n</code></pre> <p>View all pod logs:</p> <pre><code>kubectl -n eudiplo logs -l app=eudiplo --tail=50\n</code></pre>"},{"location":"deployment/kubernetes/#troubleshooting","title":"Troubleshooting","text":""},{"location":"deployment/kubernetes/#pods-not-starting","title":"Pods Not Starting","text":"<p>Check pod status and events:</p> <pre><code># Describe pod\nkubectl -n eudiplo describe pod &lt;pod-name&gt;\n\n# Check namespace events\nkubectl -n eudiplo get events --sort-by='.lastTimestamp'\n\n# Check init containers (if pod is in Init:X/Y state)\nkubectl -n eudiplo logs &lt;pod-name&gt; -c wait-for-postgres\nkubectl -n eudiplo logs &lt;pod-name&gt; -c wait-for-minio\n</code></pre>"},{"location":"deployment/kubernetes/#ingress-not-working","title":"Ingress Not Working","text":"<p>Verify ingress-nginx controller:</p> <pre><code># Check controller pods\nkubectl -n ingress-nginx get pods\n\n# Verify ingress resource\nkubectl -n eudiplo describe ingress eudiplo-ingress\n\n# Check ingress-nginx logs\nkubectl -n ingress-nginx logs -l app.kubernetes.io/component=controller --tail=100\n</code></pre> <p>Fallback to port-forward (see Option 2 above).</p>"},{"location":"deployment/kubernetes/#database-connection-errors","title":"Database Connection Errors","text":"<p>Verify PostgreSQL is ready:</p> <pre><code>kubectl -n eudiplo exec statefulset/postgres -- pg_isready\n</code></pre> <p>Check database credentials:</p> <pre><code>kubectl -n eudiplo get secret eudiplo-env -o jsonpath='{.data.DB_USERNAME}' | base64 -d\nkubectl -n eudiplo get secret eudiplo-env -o jsonpath='{.data.DB_PASSWORD}' | base64 -d\n</code></pre> <p>Restart backend if credentials were updated:</p> <pre><code>kubectl -n eudiplo rollout restart deployment/eudiplo\n</code></pre>"},{"location":"deployment/kubernetes/#minio-connection-issues","title":"MinIO Connection Issues","text":"<p>Check MinIO health:</p> <pre><code>kubectl -n eudiplo exec statefulset/minio -- wget -qO- http://localhost:9000/minio/health/ready\n</code></pre> <p>Verify bucket creation job:</p> <pre><code>kubectl -n eudiplo logs job/minio-mc-bootstrap\n</code></pre> <p>Re-run bucket creation if needed:</p> <pre><code>kubectl -n eudiplo delete job minio-mc-bootstrap\nkubectl apply -f minio-bucket-job.yaml\n</code></pre>"},{"location":"deployment/kubernetes/#storage-issues","title":"Storage Issues","text":"<p>Check Persistent Volume Claims:</p> <pre><code>kubectl -n eudiplo get pvc\n</code></pre> <p>Describe PVC for issues:</p> <pre><code>kubectl -n eudiplo describe pvc postgres-data-postgres-0\nkubectl -n eudiplo describe pvc minio-data-minio-0\n</code></pre> <p>Check available storage classes:</p> <pre><code>kubectl get storageclass\n</code></pre>"},{"location":"deployment/kubernetes/#updating-configuration","title":"Updating Configuration","text":""},{"location":"deployment/kubernetes/#update-environment-variables","title":"Update Environment Variables","text":"<p>Edit <code>.env</code> file, then update the secret:</p> <pre><code># Delete old secret\nkubectl -n eudiplo delete secret eudiplo-env\n\n# Create new secret\nkubectl -n eudiplo create secret generic eudiplo-env --from-env-file=.env\n\n# Restart all deployments to pick up changes\nkubectl -n eudiplo rollout restart deployment/eudiplo\nkubectl -n eudiplo rollout restart deployment/eudiplo-client\nkubectl -n eudiplo rollout restart statefulset/postgres\nkubectl -n eudiplo rollout restart statefulset/minio\n</code></pre>"},{"location":"deployment/kubernetes/#update-image-version","title":"Update Image Version","text":"<p>Update to a specific version:</p> <pre><code>kubectl -n eudiplo set image deployment/eudiplo \\\n  eudiplo=ghcr.io/openwallet-foundation-labs/eudiplo:v1.2.3\n</code></pre> <p>Or edit deployment directly:</p> <pre><code>kubectl -n eudiplo edit deployment eudiplo\n</code></pre> <p>Watch rollout status:</p> <pre><code>kubectl -n eudiplo rollout status deployment/eudiplo\n</code></pre>"},{"location":"deployment/kubernetes/#cleanup","title":"Cleanup","text":""},{"location":"deployment/kubernetes/#remove-all-resources","title":"Remove All Resources","text":"<p>Delete everything in the namespace:</p> <pre><code>kubectl delete namespace eudiplo\n</code></pre> <p>Or selectively delete resources:</p> <pre><code>kubectl delete -k .\n</code></pre>"},{"location":"deployment/kubernetes/#remove-persistent-data","title":"Remove Persistent Data","text":"<p>Data Loss Warning</p> <p>This permanently deletes all database and storage data!</p> <pre><code># Delete Persistent Volume Claims\nkubectl -n eudiplo delete pvc --all\n\n# Verify deletion\nkubectl -n eudiplo get pvc\n</code></pre>"},{"location":"deployment/kubernetes/#production-considerations","title":"Production Considerations","text":"<p>Before deploying to production, address these critical areas:</p>"},{"location":"deployment/kubernetes/#1-security","title":"1. Security","text":"<ul> <li>Change all default secrets (MASTER_SECRET, database passwords, MinIO credentials)</li> <li>Enable TLS/HTTPS using cert-manager or LoadBalancer with TLS termination</li> <li>Implement network policies to restrict pod-to-pod communication</li> <li>Apply Pod Security Standards (restricted PSS to namespace)</li> <li>Use external secret management (HashiCorp Vault, AWS Secrets Manager, Azure Key Vault)</li> <li>Configure <code>ENCRYPTION_KEY_SOURCE</code> to <code>vault</code>, <code>aws</code>, or <code>azure</code> so the encryption key is only in RAM (see Encryption at Rest)</li> </ul>"},{"location":"deployment/kubernetes/#secret-management-strategies","title":"Secret Management Strategies","text":"<p>EUDIPLO requires several secrets (database credentials, JWT secret, encryption key, etc.). The recommended approach is to use infrastructure-level secret injection rather than storing secrets in <code>.env</code> files or passing them directly as environment variables.</p>"},{"location":"deployment/kubernetes/#credential-categories","title":"Credential Categories","text":"Secret Risk Level Recommended Approach <code>DB_PASSWORD</code> High External Secrets Operator / Vault Agent <code>MASTER_SECRET</code> Critical External Secrets Operator / Vault Agent <code>AUTH_CLIENT_SECRET</code> Critical External Secrets Operator / Vault Agent <code>S3_SECRET_ACCESS_KEY</code> High IRSA (AWS) / Workload Identity (Azure/GCP) <code>ENCRYPTION_KEY</code> Critical Application-level fetch (built-in support)"},{"location":"deployment/kubernetes/#option-1-external-secrets-operator-recommended","title":"Option 1: External Secrets Operator (Recommended)","text":"<p>The External Secrets Operator syncs secrets from external providers into Kubernetes Secrets.</p> <pre><code># Install External Secrets Operator\nhelm repo add external-secrets https://charts.external-secrets.io\nhelm install external-secrets external-secrets/external-secrets \\\n-n external-secrets --create-namespace\n</code></pre> <p>Example SecretStore for AWS Secrets Manager:</p> <pre><code>apiVersion: external-secrets.io/v1beta1\nkind: SecretStore\nmetadata:\n    name: aws-secrets-manager\n    namespace: eudiplo\nspec:\n    provider:\n        aws:\n            service: SecretsManager\n            region: eu-central-1\n            auth:\n                jwt:\n                    serviceAccountRef:\n                        name: eudiplo-sa\n---\napiVersion: external-secrets.io/v1beta1\nkind: ExternalSecret\nmetadata:\n    name: eudiplo-secrets\n    namespace: eudiplo\nspec:\n    refreshInterval: 1h\n    secretStoreRef:\n        name: aws-secrets-manager\n        kind: SecretStore\n    target:\n        name: eudiplo-env\n        creationPolicy: Owner\n    data:\n        - secretKey: DB_PASSWORD\n          remoteRef:\n              key: eudiplo/production\n              property: db_password\n        - secretKey: MASTER_SECRET\n          remoteRef:\n              key: eudiplo/production\n              property: master_secret\n        - secretKey: AUTH_CLIENT_SECRET\n          remoteRef:\n              key: eudiplo/production\n              property: auth_client_secret\n</code></pre> <p>Example SecretStore for HashiCorp Vault:</p> <pre><code>apiVersion: external-secrets.io/v1beta1\nkind: SecretStore\nmetadata:\n    name: vault\n    namespace: eudiplo\nspec:\n    provider:\n        vault:\n            server: 'https://vault.example.com'\n            path: 'secret'\n            version: 'v2'\n            auth:\n                kubernetes:\n                    mountPath: 'kubernetes'\n                    role: 'eudiplo'\n---\napiVersion: external-secrets.io/v1beta1\nkind: ExternalSecret\nmetadata:\n    name: eudiplo-secrets\n    namespace: eudiplo\nspec:\n    refreshInterval: 1h\n    secretStoreRef:\n        name: vault\n        kind: SecretStore\n    target:\n        name: eudiplo-env\n    data:\n        - secretKey: DB_PASSWORD\n          remoteRef:\n              key: eudiplo/credentials\n              property: db_password\n        - secretKey: MASTER_SECRET\n          remoteRef:\n              key: eudiplo/credentials\n              property: master_secret\n</code></pre>"},{"location":"deployment/kubernetes/#option-2-vault-agent-sidecar","title":"Option 2: Vault Agent Sidecar","text":"<p>Use the Vault Agent Injector to inject secrets directly into pods:</p> <pre><code>apiVersion: apps/v1\nkind: Deployment\nmetadata:\n    name: eudiplo\nspec:\n    template:\n        metadata:\n            annotations:\n                vault.hashicorp.com/agent-inject: 'true'\n                vault.hashicorp.com/role: 'eudiplo'\n                vault.hashicorp.com/agent-inject-secret-config: 'secret/eudiplo/credentials'\n                vault.hashicorp.com/agent-inject-template-config: |\n                    {{- with secret \"secret/eudiplo/credentials\" -}}\n                    export DB_PASSWORD=\"{{ .Data.data.db_password }}\"\n                    export MASTER_SECRET=\"{{ .Data.data.master_secret }}\"\n                    export AUTH_CLIENT_SECRET=\"{{ .Data.data.auth_client_secret }}\"\n                    {{- end -}}\n</code></pre>"},{"location":"deployment/kubernetes/#option-3-cloud-native-iam-for-s3storage","title":"Option 3: Cloud-Native IAM (for S3/Storage)","text":"<p>For S3 credentials, prefer IAM-based authentication:</p> AWS (IRSA)Azure (Workload Identity)GCP (Workload Identity) <pre><code>apiVersion: v1\nkind: ServiceAccount\nmetadata:\n  name: eudiplo-sa\n  annotations:\n    eks.amazonaws.com/role-arn: arn:aws:iam::123456789:role/eudiplo-s3-role\n</code></pre> <p>No <code>S3_ACCESS_KEY_ID</code> or <code>S3_SECRET_ACCESS_KEY</code> needed\u2014the SDK uses IRSA automatically.</p> <pre><code>apiVersion: v1\nkind: ServiceAccount\nmetadata:\n  name: eudiplo-sa\n  annotations:\n    azure.workload.identity/client-id: \"&lt;managed-identity-client-id&gt;\"\n</code></pre> <pre><code>apiVersion: v1\nkind: ServiceAccount\nmetadata:\n  name: eudiplo-sa\n  annotations:\n    iam.gke.io/gcp-service-account: eudiplo@project.iam.gserviceaccount.com\n</code></pre>"},{"location":"deployment/kubernetes/#why-encryption-key-is-different","title":"Why Encryption Key Is Different","text":"<p>The <code>ENCRYPTION_KEY</code> uses application-level fetching (via <code>ENCRYPTION_KEY_SOURCE</code>) because:</p> <ol> <li>TypeORM Transformer Singleton: The encryption transformer must be initialized before any database operations, which happens during module bootstrap</li> <li>Runtime-Only Access: The key is fetched once at startup and kept only in memory\u2014never written to disk or environment</li> <li>Built-in Support: EUDIPLO has native integrations for Vault, AWS Secrets Manager, and Azure Key Vault</li> </ol> <p>For all other secrets, rely on infrastructure-level injection as described above.</p>"},{"location":"deployment/kubernetes/#2-high-availability","title":"2. High Availability","text":"<ul> <li>Increase replicas for backend and client deployments</li> <li>Deploy PostgreSQL HA solution (Patroni, Zalando Postgres Operator)</li> <li>Configure MinIO in distributed mode or use managed S3 (AWS S3, Azure Blob)</li> <li>Add Pod Disruption Budgets to ensure availability during updates</li> </ul>"},{"location":"deployment/kubernetes/#3-monitoring-observability","title":"3. Monitoring &amp; Observability","text":"<ul> <li>Deploy Prometheus for metrics collection</li> <li>Deploy Grafana for visualization</li> <li>Configure alerting for critical issues (disk full, pod restarts, high error rates)</li> <li>Set up log aggregation (ELK stack, Loki, CloudWatch)</li> <li>Enable distributed tracing (Jaeger, Tempo)</li> </ul>"},{"location":"deployment/kubernetes/#4-backup-disaster-recovery","title":"4. Backup &amp; Disaster Recovery","text":"<ul> <li>Schedule PostgreSQL backups (pg_dump, WAL archiving, managed backup solutions)</li> <li>Configure MinIO replication or use managed S3 with versioning</li> <li>Test restore procedures regularly</li> <li>Document recovery time objectives (RTO) and recovery point objectives (RPO)</li> </ul>"},{"location":"deployment/kubernetes/#5-performance-scaling","title":"5. Performance &amp; Scaling","text":"<ul> <li>Review resource limits based on actual load testing</li> <li>Configure Horizontal Pod Autoscaler (HPA) for backend/client</li> <li>Use caching (Redis) for session management</li> <li>Optimize database queries and add indexes</li> <li>Consider CDN for static assets</li> </ul>"},{"location":"deployment/kubernetes/#6-storage","title":"6. Storage","text":"<ul> <li>Use production-grade storage class with replication (AWS EBS gp3, Azure Premium SSD)</li> <li>Configure volume snapshots for point-in-time recovery</li> <li>Monitor disk usage and set up alerts</li> <li>Plan for storage growth</li> </ul>"},{"location":"deployment/kubernetes/#advanced-configuration","title":"Advanced Configuration","text":""},{"location":"deployment/kubernetes/#enable-debug-logging","title":"Enable Debug Logging","text":"<p>Update LOG_LEVEL in <code>.env</code>:</p> <pre><code>LOG_LEVEL=debug\n</code></pre> <p>Recreate secret and restart:</p> <pre><code>kubectl -n eudiplo delete secret eudiplo-env\nkubectl -n eudiplo create secret generic eudiplo-env --from-env-file=.env\nkubectl -n eudiplo rollout restart deployment/eudiplo\n</code></pre>"},{"location":"deployment/kubernetes/#scale-deployments","title":"Scale Deployments","text":"<p>Scale backend to 3 replicas:</p> <pre><code>kubectl -n eudiplo scale deployment/eudiplo --replicas=3\n</code></pre> <p>Scale client to 2 replicas:</p> <pre><code>kubectl -n eudiplo scale deployment/eudiplo-client --replicas=2\n</code></pre> <p>Verify scaling:</p> <pre><code>kubectl -n eudiplo get deployment\n</code></pre>"},{"location":"deployment/kubernetes/#resource-monitoring","title":"Resource Monitoring","text":"<p>Check resource usage:</p> <pre><code># Pod metrics (requires metrics-server)\nkubectl -n eudiplo top pods\n\n# Node metrics\nkubectl -n eudiplo top nodes\n</code></pre> <p>View resource requests/limits:</p> <pre><code>kubectl -n eudiplo describe deployment eudiplo | grep -A5 \"Limits\\|Requests\"\n</code></pre>"},{"location":"deployment/kubernetes/#configure-horizontal-pod-autoscaler","title":"Configure Horizontal Pod Autoscaler","text":"<p>Create HPA for backend (requires metrics-server):</p> <pre><code>kubectl -n eudiplo autoscale deployment eudiplo \\\n  --cpu-percent=70 \\\n  --min=2 \\\n  --max=10\n</code></pre> <p>Monitor HPA:</p> <pre><code>kubectl -n eudiplo get hpa -w\n</code></pre>"},{"location":"deployment/kubernetes/#manifest-reference","title":"Manifest Reference","text":"<p>The deployment includes the following Kubernetes resources:</p> File Type Purpose <code>namespace.yaml</code> Namespace Isolated namespace for all resources <code>postgres-statefulset.yaml</code> StatefulSet PostgreSQL database with persistent storage <code>postgres-service.yaml</code> Service Internal DNS for database access <code>minio-statefulset.yaml</code> StatefulSet MinIO object storage with persistent storage <code>minio-service.yaml</code> Service Internal DNS for MinIO API and Console <code>minio-bucket-job.yaml</code> Job One-time bucket creation and configuration <code>eudiplo-deployment.yaml</code> Deployment EUDIPLO backend application <code>eudiplo-service.yaml</code> Service Internal DNS for backend API <code>eudiplo-client-deployment.yaml</code> Deployment EUDIPLO web client (nginx) <code>eudiplo-client-service.yaml</code> Service Internal DNS for web client <code>ingress.yaml</code> Ingress HTTP routing to services <code>kustomization.yaml</code> Kustomize Manifest aggregation and management"},{"location":"deployment/kubernetes/#technical-details","title":"Technical Details","text":""},{"location":"deployment/kubernetes/#security-contexts","title":"Security Contexts","text":"<p>All pods run with security contexts:</p> <ul> <li>Non-root users: PostgreSQL (UID 999), MinIO (UID 1000), Backend (UID 1000), Client (UID 101)</li> <li>Dropped capabilities: All containers drop ALL Linux capabilities</li> <li>No privilege escalation: <code>allowPrivilegeEscalation: false</code></li> <li>Read-only root filesystem: Where applicable (init containers)</li> </ul>"},{"location":"deployment/kubernetes/#health-probes","title":"Health Probes","text":"<p>All services include comprehensive health probes:</p> <ul> <li>Readiness Probe: Determines when pod is ready to receive traffic</li> <li>Liveness Probe: Detects when pod needs to be restarted</li> <li>Startup Probe: Provides extra time for slow-starting applications</li> </ul>"},{"location":"deployment/kubernetes/#init-containers","title":"Init Containers","text":"<p>Proper startup ordering via init containers:</p> <ol> <li>Backend waits for: PostgreSQL ready + MinIO ready</li> <li>Client waits for: Backend healthy</li> <li>Bucket job waits for: MinIO ready</li> </ol>"},{"location":"deployment/kubernetes/#persistent-storage","title":"Persistent Storage","text":"<p>StatefulSets use PersistentVolumeClaims:</p> <ul> <li>PostgreSQL: 10Gi for database files (<code>/var/lib/postgresql/data</code>)</li> <li>MinIO: 10Gi for object storage (<code>/data</code>)</li> </ul> <p>PVCs use the cluster's default StorageClass (Docker Desktop includes one by default).</p>"},{"location":"deployment/kubernetes/#support-resources","title":"Support &amp; Resources","text":"<ul> <li>Documentation: https://openwallet-foundation-labs.github.io/eudiplo/latest/</li> <li>GitHub Issues: https://github.com/openwallet-foundation-labs/eudiplo/issues</li> <li>Discord Community: https://discord.gg/58ys8XfXDu</li> <li>Source Code: https://github.com/openwallet-foundation-labs/eudiplo</li> </ul>"},{"location":"deployment/kubernetes/#next-steps","title":"Next Steps","text":"<ul> <li>\ud83d\udcd6 Learn about EUDIPLO Architecture</li> <li>\ud83d\udd10 Configure Key Management</li> <li>\ud83d\udcca Set up Monitoring</li> <li>\ud83d\udd11 Explore API Authentication</li> </ul>"},{"location":"deployment/tls/","title":"TLS/HTTPS","text":""},{"location":"deployment/tls/#tlshttps-configuration","title":"TLS/HTTPS Configuration","text":"<p>EUDIPLO supports built-in TLS termination, allowing you to serve HTTPS directly from the application without requiring a reverse proxy like Nginx or Traefik.</p>"},{"location":"deployment/tls/#overview","title":"Overview","text":"Method Best For Complexity Recommendation Built-in TLS Simple deployments, development \u2b50 Easy Small-scale, single instance Reverse Proxy Production, load balancing \u2b50\u2b50 Medium Large-scale, multi-instance"},{"location":"deployment/tls/#built-in-tls-configuration","title":"Built-in TLS Configuration","text":""},{"location":"deployment/tls/#environment-variables","title":"Environment Variables","text":"Variable Required Description <code>TLS_ENABLED</code> Yes Set to <code>true</code> to enable TLS <code>TLS_CERT_PATH</code> Yes Path to the TLS certificate file (PEM format) <code>TLS_KEY_PATH</code> Yes Path to the TLS private key file (PEM format) <code>TLS_CA_PATH</code> No Path to CA certificate chain (for client verification) <code>TLS_KEY_PASSPHRASE</code> No Passphrase for encrypted private key files"},{"location":"deployment/tls/#basic-setup","title":"Basic Setup","text":"<ol> <li> <p>Generate or obtain TLS certificates</p> <p>For development, you can generate a self-signed certificate:</p> <pre><code># Generate a self-signed certificate valid for 365 days\nopenssl req -x509 -newkey rsa:4096 -keyout key.pem -out cert.pem -days 365 -nodes \\\n    -subj \"/CN=localhost\"\n</code></pre> <p>For production, use certificates from a trusted Certificate Authority (CA) like Let's Encrypt.</p> </li> <li> <p>Configure environment variables</p> <p>Add the following to your <code>.env</code> file:</p> <pre><code>TLS_ENABLED=true\nTLS_CERT_PATH=/path/to/cert.pem\nTLS_KEY_PATH=/path/to/key.pem\n\n# Update PUBLIC_URL to use HTTPS\nPUBLIC_URL=https://your-domain.com:3000\n</code></pre> </li> <li> <p>Start the application</p> <p>The application will automatically use HTTPS when TLS is enabled.</p> </li> </ol>"},{"location":"deployment/tls/#docker-compose-example","title":"Docker Compose Example","text":"<p>To use built-in TLS with Docker Compose, mount your certificates as volumes:</p> <pre><code>services:\n    eudiplo:\n        image: ghcr.io/openwallet-foundation-labs/eudiplo:latest\n        ports:\n            - '3000:3000'\n        environment:\n            TLS_ENABLED: 'true'\n            TLS_CERT_PATH: /certs/cert.pem\n            TLS_KEY_PATH: /certs/key.pem\n            PUBLIC_URL: https://your-domain.com:3000\n        volumes:\n            - ./certs:/certs:ro\n</code></pre>"},{"location":"deployment/tls/#using-lets-encrypt-certificates","title":"Using Let's Encrypt Certificates","text":"<p>When using Let's Encrypt certificates (e.g., via Certbot), point to the certificate files:</p> <pre><code>TLS_ENABLED=true\nTLS_CERT_PATH=/etc/letsencrypt/live/your-domain.com/fullchain.pem\nTLS_KEY_PATH=/etc/letsencrypt/live/your-domain.com/privkey.pem\n</code></pre> <p>Certificate Renewal</p> <p>Let's Encrypt certificates expire every 90 days. Set up automatic renewal with Certbot and restart the application after renewal to pick up new certificates.</p>"},{"location":"deployment/tls/#with-ca-certificate-chain","title":"With CA Certificate Chain","text":"<p>For mutual TLS (mTLS) or when you need to verify client certificates:</p> <pre><code>TLS_ENABLED=true\nTLS_CERT_PATH=/path/to/cert.pem\nTLS_KEY_PATH=/path/to/key.pem\nTLS_CA_PATH=/path/to/ca-chain.pem\n</code></pre>"},{"location":"deployment/tls/#with-encrypted-private-key","title":"With Encrypted Private Key","text":"<p>If your private key is encrypted with a passphrase:</p> <pre><code>TLS_ENABLED=true\nTLS_CERT_PATH=/path/to/cert.pem\nTLS_KEY_PATH=/path/to/encrypted-key.pem\nTLS_KEY_PASSPHRASE=your-key-passphrase\n</code></pre>"},{"location":"deployment/tls/#reverse-proxy-alternative","title":"Reverse Proxy Alternative","text":"<p>For production deployments with multiple instances or advanced load balancing, consider using a reverse proxy:</p>"},{"location":"deployment/tls/#nginx-example","title":"Nginx Example","text":"<pre><code>server {\n    listen 443 ssl http2;\n    server_name your-domain.com;\n\n    ssl_certificate /etc/letsencrypt/live/your-domain.com/fullchain.pem;\n    ssl_certificate_key /etc/letsencrypt/live/your-domain.com/privkey.pem;\n\n    # Modern TLS configuration\n    ssl_protocols TLSv1.2 TLSv1.3;\n    ssl_ciphers ECDHE-ECDSA-AES128-GCM-SHA256:ECDHE-RSA-AES128-GCM-SHA256;\n    ssl_prefer_server_ciphers off;\n\n    location / {\n        proxy_pass http://localhost:3000;\n        proxy_http_version 1.1;\n        proxy_set_header Upgrade $http_upgrade;\n        proxy_set_header Connection 'upgrade';\n        proxy_set_header Host $host;\n        proxy_set_header X-Real-IP $remote_addr;\n        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;\n        proxy_set_header X-Forwarded-Proto $scheme;\n        proxy_cache_bypass $http_upgrade;\n    }\n}\n</code></pre>"},{"location":"deployment/tls/#traefik-example-docker-compose","title":"Traefik Example (Docker Compose)","text":"<pre><code>services:\n    traefik:\n        image: traefik:v3.0\n        command:\n            - '--providers.docker=true'\n            - '--entrypoints.websecure.address=:443'\n            - '--certificatesresolvers.letsencrypt.acme.tlschallenge=true'\n            - '--certificatesresolvers.letsencrypt.acme.email=your-email@example.com'\n            - '--certificatesresolvers.letsencrypt.acme.storage=/letsencrypt/acme.json'\n        ports:\n            - '443:443'\n        volumes:\n            - '/var/run/docker.sock:/var/run/docker.sock:ro'\n            - 'letsencrypt:/letsencrypt'\n\n    eudiplo:\n        image: ghcr.io/openwallet-foundation-labs/eudiplo:latest\n        labels:\n            - 'traefik.enable=true'\n            - 'traefik.http.routers.eudiplo.rule=Host(`your-domain.com`)'\n            - 'traefik.http.routers.eudiplo.entrypoints=websecure'\n            - 'traefik.http.routers.eudiplo.tls.certresolver=letsencrypt'\n        environment:\n            PUBLIC_URL: https://your-domain.com\n\nvolumes:\n    letsencrypt:\n</code></pre>"},{"location":"deployment/tls/#security-considerations","title":"Security Considerations","text":"<p>!!! warning \"Production Security\" - Never use self-signed certificates in production. Use certificates from trusted CAs. - Keep private keys secure. Restrict file permissions (<code>chmod 600 key.pem</code>). - Use strong TLS configuration. Prefer TLS 1.2+ and modern cipher suites. - Rotate certificates regularly. Set up automated renewal for Let's Encrypt.</p>"},{"location":"deployment/tls/#recommended-tls-configuration","title":"Recommended TLS Configuration","text":"<p>The built-in TLS uses Node.js defaults, which are generally secure. For advanced configuration, consider using a reverse proxy that offers more fine-grained control over TLS settings.</p>"},{"location":"deployment/tls/#troubleshooting","title":"Troubleshooting","text":""},{"location":"deployment/tls/#tls-not-enabled-despite-configuration","title":"TLS Not Enabled Despite Configuration","text":"<p>Check that:</p> <ol> <li><code>TLS_ENABLED</code> is set to <code>true</code> (case-insensitive)</li> <li>Both <code>TLS_CERT_PATH</code> and <code>TLS_KEY_PATH</code> are set</li> <li>Certificate and key files exist at the specified paths</li> <li>The application has read permissions for the certificate files</li> </ol> <p>The application logs will show warnings if TLS configuration is incomplete:</p> <pre><code>\u26a0\ufe0f TLS_ENABLED is true but TLS_CERT_PATH or TLS_KEY_PATH is not set. Falling back to HTTP.\n</code></pre>"},{"location":"deployment/tls/#certificate-verification-errors","title":"Certificate Verification Errors","text":"<p>If clients report certificate errors:</p> <ol> <li>Ensure the certificate matches the hostname</li> <li>Include the full certificate chain in <code>TLS_CERT_PATH</code></li> <li>Verify the certificate is not expired</li> </ol>"},{"location":"deployment/tls/#permission-errors","title":"Permission Errors","text":"<pre><code># Set proper permissions for certificate files\nchmod 644 cert.pem\nchmod 600 key.pem\n</code></pre>"},{"location":"deployment/tls/#verifying-tls-configuration","title":"Verifying TLS Configuration","text":"<p>After starting the application with TLS enabled, verify the configuration:</p> <pre><code># Check if HTTPS is working\ncurl -v https://localhost:3000/health\n\n# For self-signed certificates, use -k to skip verification\ncurl -k https://localhost:3000/health\n\n# Check certificate details\nopenssl s_client -connect localhost:3000 -showcerts\n</code></pre> <p>The startup logs will show the TLS status:</p> <pre><code>\ud83d\udd12 TLS:            Enabled\n</code></pre>"},{"location":"development/","title":"Development","text":""},{"location":"development/#development","title":"Development","text":"<p>EUDIPLO is organized as a monorepo workspace containing multiple applications:</p> <ul> <li>Backend: NestJS API server (<code>apps/backend/</code>)</li> <li>Client: Angular web interface (<code>apps/client/</code>)</li> <li>Webhook: Cloudflare Worker for testing (<code>apps/webhook/</code>)</li> </ul>"},{"location":"development/#quick-start","title":"Quick Start","text":"<pre><code># Install all dependencies\npnpm install\n\n# Start all applications\npnpm run dev\n\n# Or start specific applications\npnpm --filter @eudiplo/backend run start:dev\npnpm --filter @eudiplo/client run dev\n</code></pre> <p>See Workspace Structure for detailed information about the monorepo organization.</p>"},{"location":"development/#backend-nestjs","title":"Backend (NestJS)","text":"<p>The backend is built with NestJS, a progressive Node.js framework for building efficient, scalable server-side applications using TypeScript.</p>"},{"location":"development/#documentation-with-compodoc","title":"Documentation with Compodoc","text":"<p>Compodoc provides a comprehensive overview of the codebase, including:</p> <ul> <li>Modules</li> <li>Controllers</li> <li>Services</li> <li>DTOs</li> <li>Dependencies</li> </ul> <pre><code>pnpm run compodoc:start\n</code></pre> <p>A rendered version is included.</p>"},{"location":"development/#source-code-structure","title":"Source Code Structure","text":"<p>Each module typically contains its own:</p> <ul> <li><code>controller.ts</code> \u2014 API endpoints</li> <li><code>service.ts</code> \u2014 Business logic</li> <li><code>dto/</code> \u2014 Data Transfer Objects</li> <li><code>entities/</code> \u2014 TypeORM entities (if needed)</li> </ul>"},{"location":"development/#additional-documentation","title":"Additional Documentation","text":"<ul> <li>API Authentication - Guide for using OAuth2   authentication with the API</li> <li>Code Quality Standards - Code formatting, linting, and style guidelines</li> <li>Contributing Guidelines - How to contribute to the project</li> <li>Testing Guide - How to run and write tests</li> <li>Logging - Configuring logging for development   and production</li> <li>Documentation Versioning - Managing documentation versions</li> </ul>"},{"location":"development/#scripts","title":"Scripts","text":"<p>Useful development scripts:</p> <pre><code># Development\npnpm run start:dev        # Start the app in watch mode\npnpm run start:debug      # Start with debug mode and watch\npnpm run build            # Build the application\n\n# Testing\npnpm run test             # Run unit tests\npnpm run test:watch       # Run tests in watch mode\npnpm run test:e2e         # Run end-to-end tests\npnpm run test:cov         # Run tests with coverage\npnpm run test:debug       # Run tests with debug mode\n\n# Code Quality\npnpm run format           # Format all files with Biome\npnpm run format:check     # Check formatting without changes\npnpm run lint             # Run linting checks\npnpm run lint:fix         # Fix linting issues automatically\n\n# Documentation\npnpm run compodoc         # Generate Compodoc documentation\npnpm run compodoc:serve   # Serve Compodoc docs locally (port 3001)\npnpm run doc:watch        # Serve MkDocs documentation with live reload\npnpm run doc:build        # Build all documentation (Swagger + Compodoc + MkDocs)\n</code></pre> <p>\ud83d\udca1 Compodoc output is stored in the <code>doc/compodoc</code> folder and served statically by the application.</p>"},{"location":"development/#contributions","title":"Contributions","text":"<p>Feel free to contribute by improving documentation, fixing bugs, or extending functionality. Make sure to follow the coding standards and write tests where applicable.</p>"},{"location":"development/code-quality/","title":"Code Quality","text":""},{"location":"development/code-quality/#code-quality-standards","title":"Code Quality Standards","text":"<p>This project uses Biome for code formatting, linting, and import organization to ensure consistent code quality across the codebase.</p>"},{"location":"development/code-quality/#biome-configuration","title":"Biome Configuration","text":"<p>Biome has replaced ESLint and Prettier in this project for better performance and a unified tooling experience. The configuration is defined in <code>biome.json</code> at the project root.</p>"},{"location":"development/code-quality/#key-settings","title":"Key Settings","text":"<ul> <li>Semicolons: Always required (<code>\"always\"</code>)</li> <li>Indentation: 4 spaces</li> <li>Quote Style: Double quotes preferred</li> <li>Line Width: 80 characters</li> <li>Parameter Decorators: Enabled for NestJS compatibility (<code>unsafeParameterDecoratorsEnabled: true</code>)</li> </ul>"},{"location":"development/code-quality/#available-commands","title":"Available Commands","text":"<pre><code># Format all files\npnpm run format\n\n# Check formatting without making changes\npnpm run format:check\n\n# Run linting checks\npnpm run lint\n\n# Fix linting issues automatically\npnpm run lint:fix\n</code></pre>"},{"location":"development/code-quality/#ide-setup","title":"IDE Setup","text":""},{"location":"development/code-quality/#vs-code-recommended","title":"VS Code (Recommended)","text":"<ol> <li>Install the Biome extension:</li> </ol> <pre><code>Extension ID: biomejs.biome\n</code></pre> <ol> <li>Workspace settings are pre-configured in <code>.vscode/settings.json</code>:</li> <li>Format on save enabled</li> <li>Biome set as default formatter</li> <li>Auto-organize imports on save</li> <li>Quick fixes applied automatically</li> </ol>"},{"location":"development/code-quality/#other-editors","title":"Other Editors","text":"<p>For other editors, refer to the Biome Editor Integration guide.</p>"},{"location":"development/code-quality/#file-coverage","title":"File Coverage","text":"<p>Biome processes the following file types:</p> <ul> <li>TypeScript files: <code>src/**/*.ts</code>, <code>test/**/*.ts</code>, <code>src/**/*.spec.ts</code></li> <li>JavaScript files: <code>*.js</code>, <code>*.mjs</code></li> <li>JSON files: <code>*.json</code>, <code>*.jsonc</code></li> </ul>"},{"location":"development/code-quality/#pre-commit-hooks","title":"Pre-commit Hooks","text":"<p>Consider setting up pre-commit hooks to automatically format and lint code:</p> <pre><code># Example using husky + lint-staged\npnpm add -D husky lint-staged\n\n# In package.json\n\"lint-staged\": {\n  \"*.{ts,js,json}\": [\"pnpm run format\", \"pnpm run lint:fix\"]\n}\n</code></pre>"},{"location":"development/code-quality/#code-style-guidelines","title":"Code Style Guidelines","text":""},{"location":"development/code-quality/#typescriptjavascript","title":"TypeScript/JavaScript","text":"<ul> <li>Use explicit types where beneficial for readability</li> <li>Prefer <code>const</code> over <code>let</code> when variables don't change</li> <li>Use meaningful variable and function names</li> <li>Add JSDoc comments for public APIs</li> <li>Destructure objects when accessing multiple properties</li> </ul>"},{"location":"development/code-quality/#nestjs-specific","title":"NestJS Specific","text":"<ul> <li>Use parameter decorators (e.g., <code>@Body()</code>, <code>@Param()</code>)</li> <li>Organize imports: external packages, then internal modules</li> <li>Use dependency injection consistently</li> <li>Follow NestJS naming conventions for controllers, services, modules</li> </ul>"},{"location":"development/code-quality/#example","title":"Example","text":"<pre><code>import { Injectable } from '@nestjs/common';\nimport { ConfigService } from '@nestjs/config';\n\n/**\n * Service for managing user authentication.\n */\n@Injectable()\nexport class AuthService {\n  constructor(private readonly configService: ConfigService) {}\n\n  /**\n   * Validates user credentials.\n   * @param email User's email address\n   * @param password User's password\n   * @returns Authentication result\n   */\n  async validateUser(email: string, password: string): Promise&lt;boolean&gt; {\n    const isValid = await this.checkCredentials(email, password);\n    return isValid;\n  }\n}\n</code></pre>"},{"location":"development/contributing/","title":"Contributing Guide","text":""},{"location":"development/contributing/#contributing","title":"Contributing","text":"<p>Thank you for considering contributing to EUDIPLO!</p> <p>Please refer to the CONTRIBUTING.md file in the root of the repository for detailed guidelines on:</p> <ul> <li>Reporting issues</li> <li>Suggesting features</li> <li>Setting up the development environment</li> <li>Submitting pull requests</li> </ul>"},{"location":"development/documentation-versioning/","title":"Documentation Versioning","text":""},{"location":"development/documentation-versioning/#documentation-versioning","title":"Documentation Versioning","text":"<p>This project uses mike to manage multiple versions of the documentation.</p>"},{"location":"development/documentation-versioning/#available-versions","title":"Available Versions","text":"<ul> <li>main: Always reflects the current state of the main branch</li> <li>latest: Documentation for the most recent stable release</li> <li>Specific Versions: Documentation for specific releases (e.g., <code>1.2.3</code>)   accessible via direct URL</li> </ul>"},{"location":"development/documentation-versioning/#how-it-works","title":"How It Works","text":""},{"location":"development/documentation-versioning/#automatic-deployment","title":"Automatic Deployment","text":"<ol> <li>Main Branch Updates: When code is pushed to <code>main</code>, the documentation is    automatically built and deployed as the <code>main</code> version</li> <li>Releases: When a new release is published:<ul> <li>Documentation is deployed as <code>latest</code></li> <li><code>latest</code> becomes the default/recommended documentation version</li> <li>The specific version (e.g., <code>1.2.3</code>) is also available via direct URL   access</li> </ul> </li> </ol>"},{"location":"development/documentation-versioning/#version-strategy","title":"Version Strategy","text":"<ul> <li>Version Selector Shows: <code>main</code>, <code>latest</code> (clean and simple)</li> <li>Direct Access Available: You can still access specific versions like   <code>/1.2.3/</code> directly via URL</li> <li>Latest Points To: The most recent stable release</li> <li>Default: <code>latest</code> is set as the default documentation version</li> </ul>"},{"location":"development/documentation-versioning/#version-switching","title":"Version Switching","text":"<p>Users can switch between documentation versions using the version selector in the top navigation bar of the documentation site.</p>"},{"location":"development/documentation-versioning/#local-development","title":"Local Development","text":"<p>For local development with versioning:</p> <pre><code># First time setup: Initialize mike with a main version\npnpm run doc:init\n\n# Serve versioned docs locally\npnpm run doc:serve-versions\n\n# Deploy a development version\npnpm run doc:deploy-dev\n\n# Deploy a major version manually (example: version 1)\npnpm run doc:deploy-major 1 latest\n\n# List all deployed versions\npnpm run doc:list-versions\n\n# Delete a specific version (be careful!)\npnpm run doc:delete-version [version-name]\n</code></pre> <p>Note: If you get a 404 error when first running <code>pnpm run doc:serve-versions</code>, you need to run <code>pnpm run doc:init</code> first to initialize mike with at least one version.</p>"},{"location":"development/documentation-versioning/#manual-deployment","title":"Manual Deployment","text":"<p>You can manually trigger documentation deployment using the GitHub Actions workflow dispatch feature in the repository's Actions tab.</p>"},{"location":"development/documentation-versioning/#accessing-documentation-versions","title":"Accessing Documentation Versions","text":"<p>Once deployed, the documentation versions are available at:</p> <ul> <li>Latest Stable:   https://openwallet-foundation-labs.github.io/eudiplo/latest/   (points to latest major version)</li> <li>Development:   https://openwallet-foundation-labs.github.io/eudiplo/main/   (alias: <code>/latest-dev/</code>)</li> <li>Major Versions: <code>https://openwallet-foundation-labs.github.io/eudiplo/1/</code>,   <code>https://openwallet-foundation-labs.github.io/eudiplo/2/</code>, etc.</li> <li>Specific Versions:   <code>https://openwallet-foundation-labs.github.io/eudiplo/v1.2.3/</code> (direct access   only, not in version selector)</li> <li>Version Selector: Available in the top navigation, shows only major   versions + main</li> </ul>"},{"location":"development/documentation-versioning/#structure","title":"Structure","text":"<ul> <li>Documentation lives in the <code>docs/</code> directory</li> <li>API documentation is auto-generated from Swagger/OpenAPI specs</li> <li>Code documentation is auto-generated using Compodoc</li> <li>The site is built using MkDocs with the Material theme</li> </ul>"},{"location":"development/logging-configuration/","title":"Logging","text":""},{"location":"development/logging-configuration/#logging-configuration","title":"Logging Configuration","text":"<p>The EUDIPLO Service provides flexible logging configuration to help with debugging, monitoring, and auditing.</p>"},{"location":"development/logging-configuration/#configuration","title":"Configuration","text":""},{"location":"development/logging-configuration/#basic-log-level-configuration","title":"Basic Log Level Configuration","text":"<p>Control the overall log level using the <code>LOG_LEVEL</code> environment variable:</p> <pre><code># Show all logs (debug, info, warn, error)\nLOG_LEVEL=debug\n\n# Show only info, warn, error (default)\nLOG_LEVEL=info\n\n# Show only warnings and errors\nLOG_LEVEL=warn\n\n# Show only errors\nLOG_LEVEL=error\n</code></pre>"},{"location":"development/logging-configuration/#logging-destinations","title":"Logging Destinations","text":""},{"location":"development/logging-configuration/#console-logging","title":"Console Logging","text":"<p>Console logging is always enabled with formatting determined by the <code>LOG_FORMAT</code> configuration:</p> <pre><code># Pretty formatting for human readability (default in development)\nLOG_FORMAT=pretty\n\n# JSON formatting for machine parsing (default in production)\nLOG_FORMAT=json\n</code></pre>"},{"location":"development/logging-configuration/#file-logging","title":"File Logging","text":"<p>The application supports logging to both console and file simultaneously, which is useful for debugging, auditing, and persisting logs for later analysis.</p> <p>File logging is controlled via environment variables:</p> Variable Description Default <code>LOG_TO_FILE</code> Enable logging to file <code>false</code> <code>LOG_FILE_PATH</code> Path to the log file <code>./logs/session.log</code> <p>When <code>LOG_TO_FILE</code> is set to <code>true</code>, the system will:</p> <ol> <li>Write all logs to the console with pretty formatting as usual</li> <li>Write the same logs to the specified file in <code>LOG_FILE_PATH</code> in JSON format</li> <li>Use synchronous file writes to ensure message order is maintained</li> </ol>"},{"location":"development/logging-configuration/#message-order-synchronization","title":"Message Order Synchronization","text":"<p>The file logging is configured with <code>sync: true</code> to ensure that log messages are written in the exact order they are generated. This is especially important for session logging where the sequence of events matters.</p>"},{"location":"development/logging-configuration/#usage-example","title":"Usage Example","text":"<p>To enable file logging, add the following to your <code>.env</code> file or environment variables:</p> <pre><code>LOG_TO_FILE=true\nLOG_FILE_PATH=./logs/sessions.log\n</code></pre>"},{"location":"development/logging-configuration/#log-file-format","title":"Log File Format","text":"<p>The log files are written in JSON format for easy parsing and analysis by external tools. Each log entry is a complete JSON object on a new line.</p>"},{"location":"development/logging-configuration/#log-rotation","title":"Log Rotation","text":"<p>The current implementation does not include built-in log rotation. For production environments, it is recommended to use external log rotation tools like <code>logrotate</code> to manage log file size and retention.</p>"},{"location":"development/logging-configuration/#disabling-specific-logger-services","title":"Disabling Specific Logger Services","text":""},{"location":"development/logging-configuration/#http-requestresponse-logging","title":"HTTP Request/Response Logging","text":"<p>To disable automatic HTTP request and response logging from Pino (useful during development when you want to reduce log noise):</p> <pre><code># Disable HTTP request/response logging\nLOG_ENABLE_HTTP_LOGGER=false\n\n# Enable HTTP request/response logging\nLOG_ENABLE_HTTP_LOGGER=true\n</code></pre> <p>Note: This controls the built-in HTTP logging from the Pino HTTP logger. Session-specific logging is controlled separately.</p>"},{"location":"development/logging-configuration/#sessionloggerservice","title":"SessionLoggerService","text":"<p>To disable all session-related logging (useful during debugging when you want to focus on other components):</p> <pre><code># Disable SessionLoggerService logs\nLOG_ENABLE_SESSION_LOGGER=false\n\n# Enable SessionLoggerService logs\nLOG_ENABLE_SESSION_LOGGER=true\n</code></pre>"},{"location":"development/logging-configuration/#development-scenarios","title":"Development Scenarios","text":""},{"location":"development/logging-configuration/#debugging-authentication-issues","title":"Debugging Authentication Issues","text":"<pre><code>LOG_LEVEL=debug\nLOG_ENABLE_SESSION_LOGGER=true\nLOG_ENABLE_HTTP_LOGGER=false\n</code></pre> <p>This will show detailed debug logs but hide HTTP request noise.</p>"},{"location":"development/logging-configuration/#monitoring-session-flows","title":"Monitoring Session Flows","text":"<pre><code>LOG_LEVEL=info\nLOG_ENABLE_SESSION_LOGGER=true\nLOG_ENABLE_HTTP_LOGGER=false\n</code></pre> <p>This will show all session flow events for monitoring credential issuance and verification, but without HTTP request logs.</p>"},{"location":"development/logging-configuration/#full-development-logging","title":"Full Development Logging","text":"<pre><code>LOG_LEVEL=debug\nLOG_ENABLE_SESSION_LOGGER=true\nLOG_ENABLE_HTTP_LOGGER=true\n</code></pre> <p>This will show everything including HTTP requests, responses, and session flows.</p>"},{"location":"development/logging-configuration/#production-monitoring","title":"Production Monitoring","text":"<pre><code>LOG_LEVEL=warn\nLOG_ENABLE_SESSION_LOGGER=true\nLOG_ENABLE_HTTP_LOGGER=false\nLOG_TO_FILE=true\nLOG_FILE_PATH=/var/log/eudiplo/session.log\n</code></pre> <p>This will only show warnings, errors, and important session events without HTTP noise, and write all logs to a file for later analysis.</p>"},{"location":"development/logging-configuration/#log-structure","title":"Log Structure","text":"<p>Session logs include structured data:</p> <pre><code>{\n  \"level\": \"info\",\n  \"time\": \"2025-07-20T10:30:45.123Z\",\n  \"context\": \"SessionLoggerService\",\n  \"sessionId\": \"session_123\",\n  \"tenantId\": \"tenant_456\",\n  \"flowType\": \"OID4VCI\",\n  \"event\": \"flow_start\",\n  \"stage\": \"initialization\",\n  \"msg\": \"[OID4VCI] Flow started for session session_123 in tenant tenant_456\"\n}\n</code></pre>"},{"location":"development/logging-configuration/#environment-configuration","title":"Environment Configuration","text":"<p>Add these to your <code>.env</code> file:</p> <pre><code># Basic logging\nLOG_LEVEL=info\nLOG_FORMAT=pretty\n\n# Logging destinations\nLOG_TO_FILE=false\nLOG_FILE_PATH=./logs/session.log\n\n# HTTP request/response logging control\nLOG_ENABLE_HTTP_LOGGER=false\n\n# Session logger control\nLOG_ENABLE_SESSION_LOGGER=true\n</code></pre>"},{"location":"development/logging-configuration/#runtime-control","title":"Runtime Control","text":"<p>You can control logging at runtime by restarting the service with different environment variables, or by implementing log level changes via API endpoints if needed.</p>"},{"location":"development/running-locally/","title":"Running Locally","text":""},{"location":"development/running-locally/#running-locally","title":"Running Locally","text":"<p>This guide will help you run the project locally for development or testing purposes.</p> <p>EUDIPLO is now organized as a monorepo workspace containing:</p> <ul> <li>Backend (<code>apps/backend/</code>) - NestJS API server</li> <li>Client (<code>apps/client/</code>) - Angular web interface</li> <li>Webhook (<code>apps/webhook/</code>) - Cloudflare Worker for testing</li> </ul>"},{"location":"development/running-locally/#prerequisites","title":"Prerequisites","text":"<p>Before you start, make sure you have the following tools installed:</p> <ul> <li>Node.js (version 22+ recommended)</li> <li>pnpm (package manager for monorepo workspaces)</li> <li>Git</li> <li>ngrok (optional, for exposing a public URL)</li> <li>Docker (optional, for supporting services or containerized deployment)</li> </ul> <p>No Node.js installation required</p> <p>If you can't or prefer not to install Node.js locally, you can use Dev Containers to develop entirely inside a Docker container. See Dev Container Setup below.</p>"},{"location":"development/running-locally/#1-clone-the-repository","title":"1. Clone the Repository","text":"<pre><code>git clone https://github.com/openwallet-foundation-labs/eudiplo\ncd eudiplo\n</code></pre>"},{"location":"development/running-locally/#2-install-dependencies","title":"2. Install Dependencies","text":"<p>Install all workspace dependencies:</p> <pre><code>corepack enable\npnpm install\n</code></pre> <p>This will install dependencies for all applications in the workspace.</p>"},{"location":"development/running-locally/#3-set-up-environment-variables","title":"3. Set Up Environment Variables","text":"<p>Create a <code>.env</code> file in the root of the project:</p> <pre><code>cp .env.example .env\n</code></pre> <p>Configure Python environment for documentation (optional):</p> <pre><code>pnpm run setup:python\n</code></pre> <p>To allow your wallet to interact with your service, a public HTTPS URL is required. You can use ngrok to expose your local server:</p> <p>TODO: check if it also runs in a local network when using wallets.</p> <pre><code>ngrok http 3000\n</code></pre> <p>ngrok will display a public HTTPS URL like:</p> <pre><code>https://f8e3-84-123-45-67.ngrok.io\n</code></pre> <p>Use this value in your <code>.env</code>:</p> <pre><code>PUBLIC_URL=https://f8e3-84-123-45-67.ngrok.io\n</code></pre> <p>\ud83d\udca1 The project validates your environment variables on startup using Joi. If <code>PUBLIC_URL</code> is missing or invalid, the app may fail to register with external services.</p> <p>Check out the Key Management or Database sections for more information on how to configure key storage and database options beyond the default settings.</p>"},{"location":"development/running-locally/#4-start-the-applications","title":"4. Start the Applications","text":""},{"location":"development/running-locally/#option-a-start-all-services-with-docker-compose","title":"Option A: Start All Services with Docker Compose","text":"<pre><code># Start both backend and client\ndocker compose up -d\n\n# View logs\ndocker compose logs -f\n</code></pre>"},{"location":"development/running-locally/#option-b-start-individual-applications","title":"Option B: Start Individual Applications","text":"<p>Start the Backend (NestJS API):</p> <pre><code>pnpm --filter @eudiplo/backend run start:dev\n</code></pre> <p>Start the Client (Angular UI) - in another terminal:</p> <pre><code>pnpm --filter @eudiplo/client run dev\n</code></pre> <p>Start the Webhook (for testing) - in another terminal:</p> <pre><code>pnpm --filter test-rp run dev\n</code></pre>"},{"location":"development/running-locally/#option-c-start-all-applications-locally","title":"Option C: Start All Applications Locally","text":"<pre><code># Start all applications in development mode\npnpm run dev\n</code></pre> <p>This will:</p> <ul> <li>Compile and watch your TypeScript code</li> <li>Reload on changes</li> <li>Use your <code>.env</code> configuration for keys, database, and registrar access</li> </ul> <p>Make sure any external services (like PostgreSQL or Vault) are available, either locally or through Docker.</p>"},{"location":"development/running-locally/#5-access-the-services","title":"5. Access the Services","text":"<p>Once running, the applications are accessible at:</p> <p>Backend API:</p> <pre><code>http://localhost:3000\n</code></pre> <p>Client Web Interface:</p> <pre><code>http://localhost:4200\n</code></pre> <p>Or via the public URL configured with ngrok:</p> <pre><code>https://f8e3-84-123-45-67.ngrok.io\n</code></pre>"},{"location":"development/running-locally/#dev-container-setup","title":"Dev Container Setup","text":"<p>If you can't install Node.js locally (e.g., restricted environment) or prefer a consistent development environment, you can use VS Code Dev Containers to develop entirely inside a Docker container.</p>"},{"location":"development/running-locally/#prerequisites_1","title":"Prerequisites","text":"<ul> <li>Docker installed and running</li> <li>Visual Studio Code with the Dev Containers extension</li> </ul>"},{"location":"development/running-locally/#quick-start-with-dev-containers","title":"Quick Start with Dev Containers","text":"<ol> <li> <p>Clone and open in VS Code:</p> <pre><code>git clone https://github.com/openwallet-foundation-labs/eudiplo.git\ncd eudiplo\ncode .\n</code></pre> </li> <li> <p>Reopen in Container:</p> <ul> <li>Press F1 and select \"Dev Containers: Reopen in Container\"</li> <li>Or click the green button in the bottom-left corner \u2192 \"Reopen in Container\"</li> </ul> </li> <li> <p>Wait for setup - The container builds and dependencies install automatically (first run takes a few minutes)</p> </li> <li> <p>Start development:</p> <pre><code>pnpm dev          # Start both backend and client\n# Or run separately:\npnpm dev:backend  # Start backend only (port 3000)\npnpm dev:client   # Start client only (port 4200)\n</code></pre> </li> </ol>"},{"location":"development/running-locally/#github-codespaces","title":"GitHub Codespaces","text":"<p>You can also use GitHub Codespaces for cloud-based development:</p> <ol> <li>Go to the repository on GitHub</li> <li>Click Code \u2192 Codespaces \u2192 Create codespace on main</li> </ol> <p>The codespace automatically uses the devcontainer configuration.</p>"},{"location":"development/running-locally/#whats-included","title":"What's Included","text":"<p>The development container includes:</p> Tool Version Purpose Node.js 24 JavaScript runtime pnpm latest Package manager Python 3 system Documentation tools Git system Version control Zsh system Shell with Oh My Zsh <p>Pre-configured VS Code extensions:</p> <ul> <li>ESLint &amp; Biome (linting/formatting)</li> <li>Angular Language Service</li> <li>Docker extension</li> <li>GitLens</li> <li>REST Client</li> </ul>"},{"location":"development/running-locally/#port-forwarding","title":"Port Forwarding","text":"<p>Ports are automatically forwarded:</p> Port Service 3000 Backend API 4200 Client UI"},{"location":"development/running-locally/#6-troubleshooting","title":"6. Troubleshooting","text":"<ul> <li>Double-check <code>.env</code> values for typos or missing entries. Changes in the <code>.env</code>   file require a restart of the application.</li> <li>Ensure required external services (e.g. Vault, PostgreSQL) are running.</li> <li>Clear NestJS cache with <code>rm -rf dist node_modules &amp;&amp; pnpm install</code>.</li> <li>If ngrok fails, make sure port 3000 isn't blocked or already in use.</li> </ul>"},{"location":"development/testing/","title":"Testing","text":""},{"location":"development/testing/#testing","title":"Testing","text":"<p>EUDIPLO is designed to be robust and easy to test both in development and CI environments. This guide outlines how to run, write, and automate tests for the project.</p> <p>The current focus is on end-to-end (E2E) tests, which verify the overall functionality of the application.</p>"},{"location":"development/testing/#oidf-conformance-tests","title":"OIDF Conformance Tests","text":"<p>EUDIPLO includes dedicated tests for validating compliance with the OpenID Foundation (OIDF) conformance suite for OID4VCI and OID4VP. These tests ensure that the implementation of OID4VCI (OpenID for Verifiable Credential Issuance) and OID4VP (OpenID for Verifiable Presentations) strictly follows the protocol specifications.</p> <p>The test are part of the E2E tests that run in the Github Action CI pipeline for a pull request and on the <code>main</code> branch.</p> <p>Info</p> <p>Because there are no public docker images available, we are building them in a parallel github repo. Images of the suite will be build daily.</p>"},{"location":"development/testing/#e2e-tests","title":"E2E Tests","text":"<p>Right now EUDIPLO has only implemented end-to-end (E2E) tests that are stored in the <code>/test</code> folder. These tests are designed to verify the overall functionality of the application, including interactions with external services like the EUDI Wallet.</p> <p>The following command will run the E2E tests and also provide a coverage report:</p> <pre><code>pnpm run test:e2e\n</code></pre> <p>It is also accessible via codecov.</p> <p>During writing E2E tests, you can use it in watch mode to automatically re-run tests on file changes:</p> <pre><code>pnpm run test:e2e:watch\n</code></pre>"},{"location":"development/testing/#linting","title":"Linting","text":"<p>Before pushing code, check linting rules and fix them:</p> <pre><code>pnpm run lint\n</code></pre>"},{"location":"development/testing/#github-actions","title":"GitHub Actions","text":"<p>Tests run automatically on every push to <code>main</code> or pull request via GitHub Actions.</p> <p>You can find the workflow config in <code>.github/workflows/ci-and-release.yml</code>.</p>"},{"location":"development/testing/#running-tests-locally","title":"Running Tests Locally","text":"<p>To run all unit and integration tests locally:</p> <pre><code>pnpm run test\n</code></pre> <p>Or with watch mode:</p> <pre><code>pnpm run test:watch\n</code></pre> <p>This uses Vitest under the hood, which is configured for NestJS.</p>"},{"location":"development/testing/#test-coverage","title":"Test Coverage","text":"<p>The coverage is generated when running the E2E tests.</p> <p>This generates a report in the <code>/coverage</code> folder. Open <code>coverage/index.html</code> in your browser to view it.</p>"},{"location":"development/testing/#test-structure","title":"Test Structure","text":"<p>Tests are located next to their implementation files:</p> <pre><code>src/\n  service/\n    my.service.ts\n    my.service.spec.ts  &lt;-- Test file\n</code></pre> <p>Info</p> <p>At this point EUDIPLO only has E2E tests. Unit and integration tests may be added in the future.</p>"},{"location":"development/versioning/","title":"Versioning","text":""},{"location":"development/versioning/#versioning-releases","title":"Versioning &amp; Releases","text":"<p>This project follows a structured release strategy that balances stability with ongoing development.</p>"},{"location":"development/versioning/#semantic-versioning","title":"Semantic Versioning","text":"<p>We use Semantic Versioning (<code>MAJOR.MINOR.PATCH</code>) for all tagged releases.</p> <ul> <li>MAJOR \u2013 breaking changes</li> <li>MINOR \u2013 new features, backwards compatible</li> <li>PATCH \u2013 bug fixes and internal improvements</li> </ul> <p>Example: <code>1.2.3</code> means the 3<sup>rd</sup> patch release of the 2<sup>nd</sup> minor version of the 1<sup>st</sup> major version.</p>"},{"location":"development/versioning/#development-builds-from-main","title":"Development Builds from <code>main</code>","text":"<p>Every push to the <code>main</code> branch automatically builds a Docker image and publishes it with the <code>:main</code> tag.</p> <p>Use this tag for development environments:</p> <pre><code>ghcr.io/openwallet-foundation-labs/eudiplo:main\n</code></pre> <p>\u26a0\ufe0f <code>main</code> is always moving and may contain untagged or unreleased features.</p>"},{"location":"development/versioning/#stable-releases","title":"Stable Releases","text":"<p>Stable releases are published via GitHub tags and follow semantic versioning. Each release creates both a versioned tag and updates the <code>:latest</code> tag:</p> <pre><code>ghcr.io/openwallet-foundation-labs/eudiplo:1.2.3\nghcr.io/openwallet-foundation-labs/eudiplo:latest\n</code></pre> <p>The <code>:latest</code> tag always points to the most recent stable release and is recommended for production use.</p>"},{"location":"development/versioning/#pre-releases","title":"Pre-Releases","text":"<p>Optionally, pre-release tags such as <code>1.3.0-alpha.1</code> may be published for testing upcoming features:</p> <pre><code>ghcr.io/openwallet-foundation-labs/eudiplo:1.3.0-alpha.1\n</code></pre>"},{"location":"development/versioning/#release-automation","title":"Release Automation","text":"<p>Releases are managed using <code>semantic-release</code>. It:</p> <ul> <li>Analyzes commit messages</li> <li>Determines the next version</li> <li>Publishes a GitHub release</li> <li>Pushes Docker images</li> </ul> <p>Make sure to follow the Conventional Commits specification when contributing to ensure proper versioning.</p>"},{"location":"development/versioning/#summary","title":"Summary","text":"Tag Source Use Case <code>main</code> <code>main</code> branch Development <code>latest</code> GitHub release Production (Latest) <code>x.y.z</code> (e.g. <code>1.2.3</code>) GitHub release Specific Version <code>x.y.z-alpha.N</code> GitHub pre-release Feature Preview / RC"},{"location":"development/workspace-structure/","title":"Workspace Structure","text":"<pre><code>\u251c\u2500\u2500 docs/                          # Documentation\n\u251c\u2500\u2500 deployment/                    # Docker Compose configurations\n\u251c\u2500\u2500 package.json                   # Root workspace configuration\n\u251c\u2500\u2500 pnpm-workspace.yaml           # pnpm workspace definition\n\u2514\u2500\u2500 docker-compose.yml            # Development compose file\n</code></pre>"},{"location":"development/workspace-structure/#applications","title":"\ud83c\udfd7\ufe0f Applications","text":""},{"location":"development/workspace-structure/#backend-eudiplobackend","title":"Backend (<code>@eudiplo/backend</code>)","text":"<ul> <li>Technology: NestJS with TypeScript</li> <li>Purpose: Core API server for EUDI Wallet integration</li> <li>Port: 3000</li> <li>Key Features:<ul> <li>OID4VCI, OID4VP, SD-JWT VC support</li> <li>OAuth2 authentication</li> <li>Pluggable key management</li> <li>Database abstraction</li> </ul> </li> </ul>"},{"location":"development/workspace-structure/#client-eudiploclient","title":"Client (<code>@eudiplo/client</code>)","text":"<ul> <li>Technology: Angular with TypeScript</li> <li>Purpose: Web interface for EUDIPLO management</li> <li>Port: 4200</li> <li>Key Features:<ul> <li>Credential issuance configuration</li> <li>Presentation request management</li> <li>Real-time monitoring</li> <li>Admin dashboard</li> </ul> </li> </ul>"},{"location":"development/workspace-structure/#webhook-test-rp","title":"Webhook (<code>test-rp</code>)","text":"<ul> <li>Technology: Cloudflare Worker</li> <li>Purpose: Testing relying party implementation</li> <li>Key Features:<ul> <li>Webhook endpoints for testing</li> <li>Presentation verification</li> <li>Development utilities</li> </ul> </li> </ul>"},{"location":"development/workspace-structure/#workspace-commands","title":"\ud83d\udd27 Workspace Commands","text":"<p>The workspace provides several convenient commands:</p>"},{"location":"development/workspace-structure/#development","title":"Development","text":"<pre><code># Install all dependencies\npnpm install\n</code></pre>"},{"location":"development/workspace-structure/#applications-domains","title":"\ud83c\udfd7\ufe0f Applications &amp; Domains","text":""},{"location":"development/workspace-structure/#backend-eudiplobackend_1","title":"Backend (<code>@eudiplo/backend</code>)","text":"<ul> <li>Technology: NestJS with TypeScript</li> <li>Purpose: Core API server for EUDI Wallet integration</li> <li>Port: 3000</li> <li>Structure: Domain-driven, modular<ul> <li>core/: Platform infrastructure (health, metrics, app info)</li> <li>shared/: Utilities, guards, filters, helpers</li> <li>issuer/: Credential Issuer (configuration, issuance, lifecycle)</li> <li>verifier/: Presentation Verifier (presentation, offer, OID4VP)</li> <li>registrar/: Entity onboarding and registry</li> <li>auth/, crypto/, database/, session/, storage/: Infrastructure modules</li> </ul> </li> </ul>"},{"location":"development/workspace-structure/#client-eudiploclient_1","title":"Client (<code>@eudiplo/client</code>)","text":"<ul> <li>Technology: Angular with TypeScript</li> <li>Purpose: Web interface for EUDIPLO management</li> <li>Port: 4200</li> <li>Features: Credential config, presentation management, monitoring, admin dashboard</li> </ul>"},{"location":"development/workspace-structure/#webhook-eudiplowebhook","title":"Webhook (<code>@eudiplo/webhook</code>)","text":"<ul> <li>Technology: Cloudflare Worker</li> <li>Purpose: Testing relying party implementation</li> <li>Features: Webhook endpoints, presentation verification</li> </ul>"},{"location":"development/workspace-structure/#sdk-eudiploeudiplo-sdk","title":"SDK (<code>@eudiplo/eudiplo-sdk</code>)","text":"<ul> <li>Technology: TypeScript</li> <li>Purpose: Programmatic access to EUDIPLO APIs</li> </ul>"},{"location":"development/workspace-structure/#other-packages","title":"Other Packages","text":"<ul> <li>schemas/: JSON Schemas for API/data validation</li> <li>assets/: Static configuration, root trust lists, uploads</li> <li>monitor/: Prometheus/Grafana monitoring setup</li> </ul> <pre><code># Check code quality across workspace\npnpm run lint\npnpm run format:check\n\n# Fix issues automatically\npnpm run lint:fix\npnpm run format\n</code></pre>"},{"location":"development/workspace-structure/#docker-deployment","title":"\ud83d\udc33 Docker &amp; Deployment","text":"<p>Each application has its own optimized Dockerfile:</p> <ul> <li>Backend: <code>apps/backend/Dockerfile</code> (multi-stage build)</li> <li>Client: <code>apps/client/Dockerfile</code> (Angular build, nginx serving)</li> <li>Webhook: <code>apps/webhook/Dockerfile</code> (Cloudflare Worker)</li> </ul> <p>The root <code>docker-compose.yml</code> orchestrates all main services:</p> <pre><code># Start both services\ndocker compose up -d\n\n# Build and start\ndocker compose up -d --build\n\n# View logs\ndocker compose logs -f\n</code></pre>"},{"location":"development/workspace-structure/#dependency-management","title":"\ud83d\udce6 Dependency Management","text":"<p>The workspace uses pnpm for efficient dependency management:</p> <ul> <li>Shared dependencies are hoisted to the root <code>node_modules</code></li> <li>App-specific dependencies remain in their respective <code>node_modules</code></li> <li>Lockfile (<code>pnpm-lock.yaml</code>) ensures consistent installs across environments</li> </ul>"},{"location":"development/workspace-structure/#adding-dependencies","title":"Adding Dependencies","text":"<pre><code># Add to workspace root (shared utilities)\npnpm add dependency-name\n\n# Add to specific application\npnpm --filter @eudiplo/backend add dependency-name\npnpm --filter @eudiplo/client add dependency-name\n</code></pre>"},{"location":"development/workspace-structure/#benefits","title":"\ud83d\ude80 Benefits","text":"<p>This workspace structure provides:</p> <ol> <li>Domain-driven clarity: Business logic, infrastructure, and cross-cutting concerns are clearly separated</li> <li>Code Sharing: Common utilities and types can be shared between applications</li> <li>Unified Tooling: Single configuration for linting, formatting, and testing</li> <li>Atomic Changes: Related changes across applications can be made in single commits</li> <li>Efficient CI/CD: Build and test processes can be optimized for the entire workspace</li> <li>Developer Experience: Single repository clone with all related code</li> </ol>"},{"location":"getting-started/first-steps/","title":"First Steps","text":""},{"location":"getting-started/first-steps/#first-steps-after-installation","title":"First Steps After Installation","text":"<p>You've started EUDIPLO\u2014now what? This guide walks you through the initial setup to issue your first credential using the Web Client.</p> <p>Prerequisites</p> <p>Complete the Quick Start guide first. You should have EUDIPLO running with both backend and client:</p> <ul> <li>Backend: http://localhost:3000</li> <li>Web Client: http://localhost:4200</li> </ul> <p>Prefer API access?</p> <p>This guide focuses on the Web Client for simplicity. For API-based setup, see the API Reference and Issuance API.</p>"},{"location":"getting-started/first-steps/#understanding-the-setup","title":"Understanding the Setup","text":"<p>EUDIPLO uses a hierarchical structure:</p> <pre><code>flowchart TD\n    A[Root Account] --&gt;|manages| B[Tenants]\n    B --&gt;|contains| C[Keys &amp; Certificates]\n    B --&gt;|contains| D[Credential Configs]\n    B --&gt;|contains| E[Issuance Config]\n    B --&gt;|contains| F[Presentation Configs]\n    D --&gt;|referenced by| E\n    C --&gt;|used by| D\n    C --&gt;|used by| F</code></pre> Concept Description Root Account The default admin account. Used to create and manage tenants. Tenant An isolated workspace with its own keys, credentials, and configurations. Keys &amp; Certificates Cryptographic keys for signing credentials and certificates for verifier authentication. Auto-generated on first use. Credential Config Defines what a credential looks like (claims, format, display). Issuance Config Groups credential configs and defines issuer metadata. Presentation Config Defines what credentials to request from wallets during verification."},{"location":"getting-started/first-steps/#step-1-login-as-root","title":"Step 1: Login as Root","text":"<ol> <li>Open the Web Client at http://localhost:4200</li> <li>Enter:<ul> <li>EUDIPLO Instance: <code>http://localhost:3000</code></li> <li>Client ID: Your configured <code>AUTH_CLIENT_ID</code></li> <li>Client Secret: Your configured <code>AUTH_CLIENT_SECRET</code></li> </ul> </li> <li>Click Login</li> </ol> <p>Credentials are REQUIRED</p> <p>You must set these environment variables before starting the service:</p> <pre><code>AUTH_CLIENT_ID=your-client-id\nAUTH_CLIENT_SECRET=your-client-secret\nMASTER_SECRET=your-32-character-minimum-secret\n</code></pre> <p>The application will fail to start without these values. See Authentication for details.</p>"},{"location":"getting-started/first-steps/#step-2-create-your-first-tenant","title":"Step 2: Create Your First Tenant","text":"<p>Tenants provide isolation\u2014each tenant has its own keys, credentials, and configurations.</p> <ol> <li>Navigate to Tenants in the sidebar</li> <li>Click + Create Tenant</li> <li>Fill in:<ul> <li>ID: <code>my-org</code> (unique identifier for the tenant)</li> <li>Name: <code>My Organization</code></li> <li>Description: Optional description</li> <li>Roles: Select all roles for a full setup</li> </ul> </li> <li>Click Save</li> <li>A dialog appears showing the client credentials for the new tenant:<ul> <li>Save the secret now! It won't be shown again.</li> <li>Use the Copy buttons to save the credentials</li> <li>Click Login as this Client to switch to the new tenant immediately</li> </ul> </li> </ol> <p>Save your credentials!</p> <p>Client secrets are securely hashed and cannot be retrieved later. If you lose the secret, use the Rotate Secret button in the client list to generate a new one.</p>"},{"location":"getting-started/first-steps/#step-3-create-a-credential-configuration","title":"Step 3: Create a Credential Configuration","text":"<p>Now define what your credential will contain and how it looks.</p> <ol> <li>Navigate to Issuance \u2192 Credential Configs in the sidebar</li> <li>Click + Create</li> <li>Click Load Template (top-right corner) and select a template like <code>PID (SD-JWT VC)</code></li> </ol> <p>Templates save time</p> <p>Templates provide pre-configured credential types with proper claims, display settings, and formats. They're the fastest way to get started!</p> <ol> <li>Review and adjust the configuration as needed</li> <li>Click Save</li> </ol>"},{"location":"getting-started/first-steps/#step-4-configure-issuance-settings","title":"Step 4: Configure Issuance Settings","text":"<p>The issuance configuration defines how your issuer presents itself to wallets.</p> <ol> <li>Navigate to Issuance \u2192 Issuance Config</li> <li>Configure:<ul> <li>Display Name: <code>My Issuer</code></li> <li>DPoP Required: Disabled \u26a0\ufe0f</li> <li>Batch Size: <code>1</code></li> </ul> </li> <li>Click Save</li> </ol> <p>DPoP Compatibility</p> <p>Keep DPoP Required disabled for maximum wallet compatibility. Many wallets don't support DPoP yet. You can enable it later for additional security once you've verified your target wallets support it.</p>"},{"location":"getting-started/first-steps/#step-5-issue-your-first-credential","title":"Step 5: Issue Your First Credential! \ud83c\udf89","text":"<p>Now create a credential offer and send it to a wallet.</p> <ol> <li>Navigate to Issuance \u2192 Sessions</li> <li>Click + New Offer</li> <li>Configure the offer:<ul> <li>Credential: Select <code>identity-credential</code></li> <li>Flow: Select <code>Pre-authorized</code> (simplest flow, no user authentication)</li> </ul> </li> <li> <p>Enter the claim values:</p> <pre><code>{\n    \"given_name\": \"John\",\n    \"family_name\": \"Doe\",\n    \"birthdate\": \"1990-01-15\"\n}\n</code></pre> </li> <li> <p>Click Create Offer</p> </li> <li>A QR code appears\u2014scan it with a compatible wallet!</li> </ol> <p>Testing with a wallet</p> <p>See Wallet Compatibility for a list of wallets that work with EUDIPLO. The EUDI Reference Wallet and Sphereon Wallet are good options for testing.</p>"},{"location":"getting-started/first-steps/#whats-next","title":"What's Next?","text":"<p>You've successfully issued your first credential! Here's what to explore next:</p> Goal Guide Verify credentials from wallets Presentation Guide Customize credential appearance Credential Configuration Integrate with your backend Webhooks Set up for production Deployment Guide Add more security (external IdP) Authentication"},{"location":"getting-started/first-steps/#troubleshooting","title":"Troubleshooting","text":""},{"location":"getting-started/first-steps/#login-failed-error","title":"\"Login failed\" error","text":"<ul> <li>Remove trailing <code>/</code> from the EUDIPLO instance URL</li> <li>Check that EUDIPLO is running: <code>curl http://localhost:3000/health</code></li> <li>Verify credentials are correct</li> </ul>"},{"location":"getting-started/first-steps/#wallet-shows-error-during-issuance","title":"Wallet shows error during issuance","text":"<ul> <li>Ensure DPoP Required is disabled in Issuance Config</li> <li>Check Wallet Compatibility for supported wallets</li> </ul>"},{"location":"getting-started/first-steps/#no-credential-configurations-found","title":"\"No credential configurations found\"","text":"<ul> <li>Create a credential configuration first (Step 3)</li> <li>Make sure you're logged in as the correct tenant</li> </ul>"},{"location":"getting-started/first-steps/#keys-not-found","title":"Keys not found","text":"<ul> <li>Keys are auto-generated on first use</li> <li>Check the Keys section in the sidebar to see available keys</li> </ul>"},{"location":"getting-started/keycloak/","title":"Keycloak Integration","text":""},{"location":"getting-started/keycloak/#keycloak-integration-guide","title":"Keycloak Integration Guide","text":"<p>This guide walks you through integrating EUDIPLO with Keycloak using the Chained AS mode. In this setup, EUDIPLO acts as an OAuth Authorization Server facade while Keycloak handles user authentication.</p>"},{"location":"getting-started/keycloak/#why-chained-as-with-keycloak","title":"Why Chained AS with Keycloak?","text":"<p>Many organizations already use Keycloak for identity management. The Chained AS mode lets you:</p> <ul> <li>Reuse existing Keycloak users and authentication flows \u2014 no need to duplicate identity infrastructure</li> <li>Keep session correlation simple \u2014 EUDIPLO automatically includes <code>issuer_state</code> in tokens</li> <li>Access full user claims in webhooks \u2014 ID token and access token claims from Keycloak are passed to your webhook</li> <li>Validate wallet attestations \u2014 EUDIPLO validates wallet attestations against configured trust lists (not possible with External AS)</li> <li>No Keycloak modifications required \u2014 unlike External AS mode, you don't need custom token mappers</li> </ul> <p>For the architecture details, see Chained AS.</p>"},{"location":"getting-started/keycloak/#prerequisites","title":"Prerequisites","text":"<ul> <li>A running Keycloak instance (tested with Keycloak 22+)</li> <li>EUDIPLO deployed and accessible at a public URL</li> <li>A tenant configured in EUDIPLO</li> </ul>"},{"location":"getting-started/keycloak/#step-1-configure-keycloak","title":"Step 1: Configure Keycloak","text":""},{"location":"getting-started/keycloak/#create-a-realm-or-use-existing","title":"Create a Realm (or use existing)","text":"<p>If you don't have a realm yet:</p> <ol> <li>Log in to Keycloak Admin Console</li> <li>Click Create realm</li> <li>Enter a name (e.g., <code>eudiplo</code>) and click Create</li> </ol>"},{"location":"getting-started/keycloak/#create-a-client-for-eudiplo","title":"Create a Client for EUDIPLO","text":"<ol> <li>Go to Clients \u2192 Create client</li> <li>Configure the client:</li> </ol> Setting Value Client type OpenID Connect Client ID <code>eudiplo-chained-as</code> Client authentication On (confidential client) Valid redirect URIs <code>https://your-eudiplo-url/*/chained-as/callback</code> <p>Redirect URI Pattern</p> <p>Use <code>*</code> as a wildcard for the tenant name, or specify exact tenant names like <code>https://eudiplo.example.com/prod/chained-as/callback</code>.</p> <ol> <li>Click Save</li> <li>Go to the Credentials tab and copy the Client secret</li> </ol>"},{"location":"getting-started/keycloak/#configure-scopes","title":"Configure Scopes","text":"<p>Ensure the following scopes are available (they're defaults in Keycloak):</p> <ul> <li><code>openid</code> \u2014 Required for OIDC</li> <li><code>profile</code> \u2014 Includes name, preferred_username</li> <li><code>email</code> \u2014 Includes email address</li> </ul> <p>To add custom claims (e.g., employee ID), create a custom scope with a mapper.</p>"},{"location":"getting-started/keycloak/#step-2-configure-eudiplo","title":"Step 2: Configure EUDIPLO","text":""},{"location":"getting-started/keycloak/#update-issuance-configuration","title":"Update Issuance Configuration","text":"<p>Add the <code>chainedAs</code> section to your issuance configuration:</p> <pre><code>{\n    \"display\": [\n        {\n            \"name\": \"My Issuer\",\n            \"locale\": \"en\"\n        }\n    ],\n    \"chainedAs\": {\n        \"enabled\": true,\n        \"upstream\": {\n            \"issuer\": \"https://keycloak.example.com/realms/eudiplo\",\n            \"clientId\": \"eudiplo-chained-as\",\n            \"clientSecret\": \"paste-your-client-secret-here\",\n            \"scopes\": [\"openid\", \"profile\", \"email\"]\n        },\n        \"token\": {\n            \"lifetimeSeconds\": 3600\n        },\n        \"requireDPoP\": false\n    }\n}\n</code></pre> Field Description <code>upstream.issuer</code> Your Keycloak realm URL (must end with <code>/realms/{realm-name}</code>) <code>upstream.clientId</code> The client ID you created in Keycloak <code>upstream.clientSecret</code> The client secret from Keycloak's Credentials tab <code>upstream.scopes</code> Scopes to request from Keycloak"},{"location":"getting-started/keycloak/#configure-claims-webhook","title":"Configure Claims Webhook","text":"<p>To use the authenticated user's claims, configure a webhook on your credential configuration:</p> <pre><code>{\n    \"credentialConfigurationId\": \"EmployeeBadge\",\n    \"claimsWebhook\": {\n        \"url\": \"https://your-backend.example.com/claims\",\n        \"auth\": {\n            \"type\": \"apiKey\",\n            \"config\": {\n                \"headerName\": \"X-API-Key\",\n                \"value\": \"your-secret-key\"\n            }\n        }\n    }\n}\n</code></pre> <p>Your webhook will receive the Keycloak user's claims in the <code>identity</code> object:</p> <pre><code>{\n    \"session\": \"abc123\",\n    \"credential_configuration_id\": \"EmployeeBadge\",\n    \"identity\": {\n        \"iss\": \"https://keycloak.example.com/realms/eudiplo\",\n        \"sub\": \"f47ac10b-58cc-4372-a567-0e02b2c3d479\",\n        \"token_claims\": {\n            \"email\": \"john.doe@example.com\",\n            \"email_verified\": true,\n            \"preferred_username\": \"jdoe\",\n            \"given_name\": \"John\",\n            \"family_name\": \"Doe\"\n        }\n    }\n}\n</code></pre>"},{"location":"getting-started/keycloak/#step-3-create-a-credential-offer","title":"Step 3: Create a Credential Offer","text":"<p>Create an offer using the authorization code grant:</p> <pre><code>curl -X POST https://eudiplo.example.com/api/offers \\\n  -H \"Content-Type: application/json\" \\\n  -H \"X-Tenant-ID: prod\" \\\n  -d '{\n    \"credentialConfigurationId\": \"EmployeeBadge\",\n    \"grant\": \"authorization_code\"\n  }'\n</code></pre> <p>The wallet will:</p> <ol> <li>Receive the credential offer</li> <li>Discover the Chained AS metadata from EUDIPLO</li> <li>Redirect the user to EUDIPLO's <code>/authorize</code> endpoint</li> <li>EUDIPLO redirects to Keycloak for login</li> <li>After login, Keycloak redirects back to EUDIPLO</li> <li>EUDIPLO issues an access token to the wallet</li> <li>The wallet requests the credential using that token</li> </ol>"},{"location":"getting-started/keycloak/#step-4-verify-the-integration","title":"Step 4: Verify the Integration","text":""},{"location":"getting-started/keycloak/#check-chained-as-metadata","title":"Check Chained AS Metadata","text":"<pre><code>curl https://eudiplo.example.com/prod/chained-as/.well-known/oauth-authorization-server\n</code></pre> <p>Should return metadata including the authorization and token endpoints.</p>"},{"location":"getting-started/keycloak/#check-jwks","title":"Check JWKS","text":"<pre><code>curl https://eudiplo.example.com/prod/chained-as/.well-known/jwks.json\n</code></pre> <p>Should return the public keys used to sign access tokens.</p>"},{"location":"getting-started/keycloak/#test-with-a-wallet","title":"Test with a Wallet","text":"<ol> <li>Create a credential offer</li> <li>Scan or click the offer in a compatible wallet</li> <li>You should be redirected to Keycloak's login page</li> <li>After login, the credential should be issued</li> </ol>"},{"location":"getting-started/keycloak/#troubleshooting","title":"Troubleshooting","text":""},{"location":"getting-started/keycloak/#invalid-redirect-uri-in-keycloak","title":"\"Invalid redirect URI\" in Keycloak","text":"<p>Cause: The redirect URI doesn't match what's configured in Keycloak.</p> <p>Fix: Ensure the Valid redirect URIs in your Keycloak client includes:</p> <pre><code>https://your-eudiplo-url/{tenant}/chained-as/callback\n</code></pre>"},{"location":"getting-started/keycloak/#error-during-verification-of-access-token-jwt","title":"\"Error during verification of access token jwt\"","text":"<p>Cause: Token verification failed, often because the JWKS doesn't include the <code>kid</code>.</p> <p>Fix: Ensure EUDIPLO is using a recent version with the kid resolution fix. Check that:</p> <pre><code>curl https://eudiplo.example.com/prod/chained-as/.well-known/jwks.json | jq '.[0].kid'\n</code></pre> <p>Returns a non-null key ID.</p>"},{"location":"getting-started/keycloak/#webhook-doesnt-receive-user-claims","title":"Webhook doesn't receive user claims","text":"<p>Cause: The Chained AS session wasn't found or claims weren't stored.</p> <p>Fix:</p> <ol> <li>Check EUDIPLO logs for \"Stored upstream identity claims\"</li> <li>Verify the <code>issuer_state</code> claim is in the access token</li> <li>Ensure the credential request uses the Chained AS token (not an external token)</li> </ol>"},{"location":"getting-started/keycloak/#user-claims-are-empty-in-webhook","title":"User claims are empty in webhook","text":"<p>Cause: Keycloak scopes don't include the claims you need.</p> <p>Fix:</p> <ol> <li>In Keycloak, go to Client scopes and verify <code>profile</code> and <code>email</code> are included</li> <li>Check that the client has these scopes assigned (Client \u2192 Client scopes tab)</li> <li>For custom claims, create a custom scope with a token mapper</li> </ol>"},{"location":"getting-started/keycloak/#advanced-adding-custom-claims","title":"Advanced: Adding Custom Claims","text":"<p>To pass custom user attributes (e.g., employee ID) to EUDIPLO:</p>"},{"location":"getting-started/keycloak/#in-keycloak","title":"In Keycloak","text":"<ol> <li>Go to Client scopes \u2192 Create client scope</li> <li>Name it (e.g., <code>employee</code>)</li> <li>Go to Mappers \u2192 Add mapper \u2192 By configuration \u2192 User Attribute</li> <li>Configure:<ul> <li>Name: <code>employee_id</code></li> <li>User Attribute: <code>employee_id</code></li> <li>Token Claim Name: <code>employee_id</code></li> <li>Add to ID token: On</li> <li>Add to access token: On</li> </ul> </li> <li>Go to your client \u2192 Client scopes \u2192 Add client scope \u2192 Select <code>employee</code></li> </ol>"},{"location":"getting-started/keycloak/#in-eudiplo","title":"In EUDIPLO","text":"<p>Add the scope to your issuance configuration:</p> <pre><code>{\n    \"chainedAs\": {\n        \"upstream\": {\n            \"scopes\": [\"openid\", \"profile\", \"email\", \"employee\"]\n        }\n    }\n}\n</code></pre> <p>The <code>employee_id</code> claim will now appear in your webhook's <code>token_claims</code>.</p>"},{"location":"getting-started/keycloak/#related-documentation","title":"Related Documentation","text":"<ul> <li>Chained AS Architecture</li> <li>Issuance Configuration</li> <li>Webhooks</li> </ul>"},{"location":"getting-started/monitor/","title":"Monitor","text":""},{"location":"getting-started/monitor/#monitoring","title":"Monitoring","text":"<p>This guide shows how to set up Prometheus and Grafana monitoring for EUDIPLO in both local development and Docker container scenarios.</p>"},{"location":"getting-started/monitor/#quick-start","title":"Quick Start","text":"<p>The monitoring stack includes:</p> <ul> <li>Prometheus on http://localhost:9090 - Metrics collection</li> <li>Grafana on http://localhost:3001 - Dashboards and visualization</li> </ul>"},{"location":"getting-started/monitor/#start-monitoring-stack","title":"Start Monitoring Stack","text":"<pre><code>cd monitor/\ndocker-compose up -d\n</code></pre>"},{"location":"getting-started/monitor/#local-development-setup","title":"Local Development Setup","text":"<p>When running EUDIPLO locally (outside Docker) and monitoring with Docker:</p>"},{"location":"getting-started/monitor/#1-start-eudiplo-locally","title":"1. Start EUDIPLO Locally","text":"<pre><code># Install dependencies and start EUDIPLO\nnpm install\nnpm run start:dev\n</code></pre> <p>EUDIPLO will be available at http://localhost:3000 with metrics at http://localhost:3000/metrics</p>"},{"location":"getting-started/monitor/#2-configure-prometheus-for-local-eudiplo","title":"2. Configure Prometheus for Local EUDIPLO","text":"<p>Update <code>monitor/prometheus/prometheus.yml</code>:</p> <pre><code>global:\n    scrape_interval: 15s\n\nscrape_configs:\n    - job_name: 'eudiplo-local'\n      static_configs:\n          - targets: ['host.docker.internal:3000'] # For local EUDIPLO\n      metrics_path: '/metrics'\n      scrape_interval: 30s\n</code></pre>"},{"location":"getting-started/monitor/#3-start-monitoring","title":"3. Start Monitoring","text":"<pre><code>cd monitor/\ndocker-compose up -d prometheus grafana\n</code></pre>"},{"location":"getting-started/monitor/#docker-container-setup","title":"Docker Container Setup","text":"<p>When running EUDIPLO as a Docker container:</p>"},{"location":"getting-started/monitor/#1-update-prometheus-configuration","title":"1. Update Prometheus Configuration","text":"<p>Edit <code>monitor/prometheus/prometheus.yml</code>:</p> <pre><code>global:\n    scrape_interval: 15s\n\nscrape_configs:\n    - job_name: 'eudiplo-docker'\n      static_configs:\n          - targets: ['eudiplo:3000'] # For Docker container\n      metrics_path: '/metrics'\n      scrape_interval: 30s\n</code></pre>"},{"location":"getting-started/monitor/#2-add-eudiplo-to-docker-compose","title":"2. Add EUDIPLO to Docker Compose","text":"<p>Add to <code>monitor/docker-compose.yml</code>:</p> <pre><code>services:\n    eudiplo:\n        image: eudiplo/eudiplo:latest\n        ports:\n            - '3000:3000'\n        environment:\n            - NODE_ENV=development\n            - PUBLIC_URL=http://localhost:3000\n        networks:\n            - monitoring\n\n    prometheus:\n        # ... existing config\n\nnetworks:\n    monitoring:\n        driver: bridge\n</code></pre>"},{"location":"getting-started/monitor/#3-start-full-stack","title":"3. Start Full Stack","text":"<pre><code>cd monitor/\ndocker-compose up -d\n</code></pre>"},{"location":"getting-started/monitor/#key-metrics","title":"Key Metrics","text":"<p>EUDIPLO exposes these important metrics:</p>"},{"location":"getting-started/monitor/#business-metrics","title":"Business Metrics","text":"<ul> <li><code>sessions</code> - Active, completed, and failed sessions</li> </ul> <p>More values will be added as the project evolves.</p>"},{"location":"getting-started/monitor/#access-dashboards","title":"Access Dashboards","text":"<ol> <li> <p>Prometheus: http://localhost:9090</p> <ul> <li>View metrics and run queries</li> <li>Check targets status at <code>/targets</code></li> </ul> </li> <li> <p>Grafana: http://localhost:3001</p> <ul> <li>Username: <code>admin</code></li> <li>Password: <code>admin</code></li> <li>Import or create dashboards</li> </ul> </li> </ol>"},{"location":"getting-started/monitor/#configuration-files","title":"Configuration Files","text":""},{"location":"getting-started/monitor/#prometheus-prometheusprometheusyml","title":"Prometheus (<code>prometheus/prometheus.yml</code>)","text":"<pre><code>global:\n    scrape_interval: 15s\n\nscrape_configs:\n    - job_name: 'eudiplo'\n      static_configs:\n          - targets: ['host.docker.internal:3000'] # Local\n          # - targets: ['eudiplo:3000']             # Docker\n      scrape_interval: 30s\n</code></pre>"},{"location":"getting-started/monitor/#grafana-data-source","title":"Grafana Data Source","text":"<p>Grafana is pre-configured with Prometheus as data source at <code>http://prometheus:9090</code>.</p>"},{"location":"getting-started/monitor/#troubleshooting","title":"Troubleshooting","text":""},{"location":"getting-started/monitor/#common-issues","title":"Common Issues","text":"<p>Prometheus can't reach EUDIPLO:</p> <pre><code># Check if metrics endpoint is accessible\ncurl http://localhost:3000/metrics\n\n# For local development, verify host.docker.internal works\ndocker run --rm appropriate/curl curl -I http://host.docker.internal:3000/metrics\n</code></pre> <p>No data in Grafana:</p> <ul> <li>Check Prometheus targets: http://localhost:9090/targets</li> <li>Verify time range in Grafana dashboards</li> <li>Ensure Prometheus data source is configured</li> </ul> <p>Container issues:</p> <pre><code># Check logs\ndocker-compose logs prometheus\ndocker-compose logs grafana\n\n# Restart services\ndocker-compose restart\n</code></pre>"},{"location":"getting-started/monitor/#production-considerations","title":"Production Considerations","text":"<p>For production deployments:</p> <ol> <li>Security: Change default Grafana password</li> <li>Retention: Configure appropriate data retention</li> <li>Backup: Set up regular backups of Grafana dashboards</li> <li>Alerting: Configure alertmanager for notifications</li> <li>Resources: Monitor resource usage and scale accordingly</li> </ol>"},{"location":"getting-started/monitor/#securing-the-metrics-endpoint","title":"Securing the Metrics Endpoint","text":"<p>The <code>/metrics</code> endpoint can expose sensitive metadata about your deployment (tenant IDs, session counts, etc.). In production, protect it with a Bearer token:</p> <p>1. Set the metrics token in EUDIPLO:</p> <pre><code># In your .env or environment\nMETRICS_TOKEN=your-secure-metrics-token\n</code></pre> <p>2. Configure Prometheus to use the token:</p> <pre><code># prometheus.yml\nscrape_configs:\n    - job_name: 'eudiplo'\n      bearer_token: 'your-secure-metrics-token'\n      static_configs:\n          - targets: ['eudiplo:3000']\n      metrics_path: '/metrics'\n</code></pre> <p>When <code>METRICS_TOKEN</code> is set, requests without a valid <code>Authorization: Bearer &lt;token&gt;</code> header will receive a 401 Unauthorized response.</p> <p>Development Mode</p> <p>If <code>METRICS_TOKEN</code> is not set, the endpoint remains unprotected for easier local development. Always set it in production environments.</p>"},{"location":"getting-started/monitor/#clean-up","title":"Clean Up","text":"<pre><code># Stop monitoring stack\ndocker-compose down\n\n# Remove volumes (deletes all data)\ndocker-compose down -v\n</code></pre>"},{"location":"getting-started/quick-start/","title":"Quick Start","text":""},{"location":"getting-started/quick-start/#quick-start","title":"Quick Start","text":"<p>Get EUDIPLO running in under 2 minutes! This guide gets you from zero to issuing your first credential.</p> <p>New to EUDIPLO?</p> <p>This is the fastest path to see EUDIPLO working. For production setup and advanced configuration, see the Architecture and API sections.</p>"},{"location":"getting-started/quick-start/#what-youll-need","title":"What You'll Need","text":"<ul> <li>Docker installed</li> <li>2 minutes of your time \u23f1\ufe0f</li> </ul>"},{"location":"getting-started/quick-start/#step-1-choose-your-setup","title":"Step 1: Choose Your Setup","text":"<p>Choose how you want to run EUDIPLO:</p> \ud83d\udda5\ufe0f Full Setup (Web Client + API)\u26a1 API-Only Setup <p>For users who want the web interface:</p> <pre><code># Start the backend (set required credentials)\ndocker run -d \\\n  --name eudiplo \\\n  -p 3000:3000 \\\n  -e MASTER_SECRET=$(openssl rand -base64 32) \\\n  -e AUTH_CLIENT_ID=demo \\\n  -e AUTH_CLIENT_SECRET=demo-secret \\\n  ghcr.io/openwallet-foundation-labs/eudiplo:latest\n\n# Start the web client\ndocker run -d \\\n  --name eudiplo-client \\\n  -p 4200:80 \\\n  ghcr.io/openwallet-foundation-labs/eudiplo-client:latest\n</code></pre> <p>For users who only need the API:</p> <pre><code># Run EUDIPLO backend only (set required credentials)\ndocker run -d \\\n  --name eudiplo \\\n  -p 3000:3000 \\\n  -e MASTER_SECRET=$(openssl rand -base64 32) \\\n  -e AUTH_CLIENT_ID=demo \\\n  -e AUTH_CLIENT_SECRET=demo-secret \\\n  ghcr.io/openwallet-foundation-labs/eudiplo:latest\n</code></pre>"},{"location":"getting-started/quick-start/#step-2-verify-its-working","title":"Step 2: Verify It's Working","text":"<p>After starting the container, check that EUDIPLO is healthy by querying its health endpoint:</p> <pre><code>curl http://localhost:3000/health\n</code></pre> <p>Expected response from EUDIPLO:</p> <pre><code>{\n    \"status\": \"ok\",\n    \"info\": {\n        \"database\": { \"status\": \"up\" }\n    },\n    \"errors\": {}\n}\n</code></pre>"},{"location":"getting-started/quick-start/#step-3-choose-your-interface","title":"Step 3: Choose Your Interface","text":"<p>EUDIPLO provides two ways to interact with the system:</p> \ud83d\udda5\ufe0f Web Client (Recommended for beginners)\ud83d\udd27 Swagger API (For developers) <p>Open the Web Interface:</p> <ul> <li>If you used Full Setup: http://localhost:4200</li> <li>If you used API-Only Setup: Not available (web client not started)</li> </ul> <p>The web client provides a user-friendly interface for:</p> <ul> <li>\ud83d\udccb Managing credential templates</li> <li>\ud83c\udfab Issuing credentials to wallets</li> <li>\u2705 Verifying credential presentations</li> <li>\ud83d\udcca Viewing system status</li> </ul> <p>Perfect for first-time users</p> <p>The web client is the easiest way to understand EUDIPLO's capabilities without needing API knowledge.</p> <p>Web Client Requires Full Setup</p> <p>To use the web client, make sure you chose the \"Full Setup\" option in Step 1.</p> <p>Open the API Documentation: http://localhost:3000/api</p> <p>The Swagger UI provides direct API access for:</p> <ul> <li>\ud83d\udd0c Integration testing</li> <li>\ud83d\udcd6 API documentation exploration</li> <li>\u26a1 Advanced automation workflows</li> <li>\ud83e\uddea Direct endpoint testing</li> </ul>"},{"location":"getting-started/quick-start/#step-4-get-started","title":"Step 4: Get Started","text":"<p>Choose your preferred approach:</p> \ud83d\udda5\ufe0f Using the Web Client\ud83d\udd27 Using the Swagger API <ol> <li>Open: http://localhost:4200 (if you used Full Setup)</li> <li>Log in with the default credentials:<ul> <li>EUDIPLO Instance: <code>http://localhost:3000</code></li> <li>Client ID: <code>root</code></li> <li>Client Secret: <code>root</code></li> </ul> </li> <li>Explore the dashboard to see:<ul> <li>Available credential templates</li> <li>Quick action buttons for common tasks</li> </ul> </li> </ol> <p>Learn More</p> <p>For detailed web client features and workflows, see the Web Client Guide.</p>"},{"location":"getting-started/quick-start/#authenticate-via-swagger-ui","title":"Authenticate via Swagger UI","text":"<ol> <li>Open the API Documentation: http://localhost:3000/api</li> <li>Click the \"Authorize\" button (\ud83d\udd13 lock icon) in the top-right</li> <li>Enter your credentials:<ul> <li>Client ID: <code>root</code></li> <li>Client Secret: <code>root</code></li> </ul> </li> <li>Click \"Authorize\" and then \"Close\"</li> </ol> <p>You're now authenticated! The \ud83d\udd13 icon should change to \ud83d\udd12 (locked).</p>"},{"location":"getting-started/quick-start/#test-your-first-api-call","title":"Test Your First API Call","text":"<ol> <li>Find the \"App\" section in Swagger UI</li> <li>Expand <code>/</code> \u2192 GET</li> <li>Click \"Try it out\" \u2192 \"Execute\"</li> </ol> <p>You should see a successful response with available credential templates!</p>"},{"location":"getting-started/quick-start/#success","title":"Success","text":"<p>EUDIPLO is now running and ready for credential issuance and verification.</p>"},{"location":"getting-started/quick-start/#whats-next","title":"What's Next?","text":"<p>New to EUDIPLO? Start here!</p> <p>Follow the First Steps Guide for a complete walkthrough:</p> <ol> <li>Create your first tenant</li> <li>Set up credential configurations</li> <li>Issue your first credential</li> <li>Troubleshoot common issues</li> </ol> \ud83d\udda5\ufe0f Web Client Users <ul> <li>\ud83d\udcda First Steps Guide - Complete setup walkthrough (recommended)</li> <li>\ud83c\udfab Issue Your First Credential - Use the web interface to create and send credentials to wallets</li> <li>\ud83d\udd0d Verify Credentials - Set up verification flows through the web UI</li> <li>\ud83d\udccb Manage Templates - Create custom credential templates for your use case</li> </ul> \ud83d\udd27 API Users <ul> <li>\ud83d\udcda First Steps Guide - Complete setup walkthrough (recommended)</li> <li>\ud83c\udfab Issue Your First Credential - Learn credential issuance flows</li> <li>\ud83d\udd0d Verify Credentials - Set up credential verification</li> <li>\ud83d\udd0c API Integration - Integrate EUDIPLO into your applications</li> </ul>"},{"location":"getting-started/quick-start/#common-next-steps","title":"Common Next Steps","text":"<ul> <li>\u2699\ufe0f Production Setup - Deploy for production use</li> <li>\ud83d\udd10 Security Configuration - Replace default credentials</li> <li>\ud83c\udfd7\ufe0f Architecture Overview - Understand system design</li> </ul>"},{"location":"getting-started/quick-start/#clean-up","title":"Clean Up","text":"<p>When you're done experimenting:</p> <p>For Full Setup users:</p> <pre><code>docker stop eudiplo eudiplo-client\ndocker rm eudiplo eudiplo-client\n</code></pre> <p>For API-Only Setup users:</p> <pre><code>docker stop eudiplo &amp;&amp; docker rm eudiplo\n</code></pre>"},{"location":"getting-started/registrar/","title":"Registrar","text":""},{"location":"getting-started/registrar/#registrar","title":"Registrar","text":"<p>To interact with an EUDI Wallet, two types of certificates are required:</p> <ul> <li>Access Certificate \u2013 Grants access to the EUDI Wallet.</li> <li>Registration Certificate \u2013 Authorizes data requests from the EUDI Wallet.</li> </ul> <p>You can still use EUDIPLO without these certificates, but it can result in warnings when making requests to the EUDI Wallet.</p>"},{"location":"getting-started/registrar/#per-tenant-configuration","title":"Per-Tenant Configuration","text":"<p>Each tenant can configure their own registrar connection with OIDC credentials. This allows different tenants to connect to different registrar instances or use different credentials for the same registrar.</p>"},{"location":"getting-started/registrar/#via-the-web-ui","title":"Via the Web UI","text":"<ol> <li>Navigate to Registrar in the sidebar</li> <li>Select a preset (e.g., \"German Sandbox\") or manually enter the registrar details:<ul> <li>Registrar URL: The base URL of the registrar API</li> <li>OIDC URL: The OpenID Connect realm URL for authentication</li> <li>Client ID: The OIDC client ID</li> <li>Client Secret: Optional OIDC client secret</li> <li>Username: Your registrar account username</li> <li>Password: Your registrar account password</li> </ul> </li> <li>Click Save Configuration</li> </ol> <p>The credentials will be validated before saving. If authentication fails, you'll receive an error message.</p>"},{"location":"getting-started/registrar/#via-configuration-file","title":"Via Configuration File","text":"<p>You can also configure the registrar by placing a <code>registrar.json</code> file in the tenant's configuration folder:</p> config/{tenant-id}/registrar.json<pre><code>{\n    \"registrarUrl\": \"https://sandbox.eudi-wallet.org/api\",\n    \"oidcUrl\": \"https://auth.sandbox.eudi-wallet.org/realms/sandbox-registrar\",\n    \"clientId\": \"swagger\",\n    \"username\": \"your-username\",\n    \"password\": \"your-password\"\n}\n</code></pre>"},{"location":"getting-started/registrar/#access-certificate","title":"Access Certificate","text":"<p>Once the registrar is configured, you can create access certificates for your keys:</p>"},{"location":"getting-started/registrar/#via-the-web-ui_1","title":"Via the Web UI","text":"<ol> <li>Navigate to Registrar in the sidebar</li> <li>In the \"Create Access Certificate\" section, select a key from the dropdown</li> <li>Click Create Certificate</li> </ol> <p>The certificate will be automatically stored in EUDIPLO and you'll be redirected to the certificate detail page.</p>"},{"location":"getting-started/registrar/#via-the-api","title":"Via the API","text":"<pre><code>curl -X POST \"https://your-eudiplo-instance/registrar/access-certificate\" \\\n  -H \"Authorization: Bearer &lt;token&gt;\" \\\n  -H \"Content-Type: application/json\" \\\n  -d '{\"keyId\": \"your-key-id\"}'\n</code></pre> <p>The response includes:</p> <ul> <li><code>id</code>: The registrar's certificate ID</li> <li><code>certId</code>: The local EUDIPLO certificate ID</li> <li><code>crt</code>: The certificate content</li> </ul>"},{"location":"getting-started/registrar/#registration-certificate","title":"Registration Certificate","text":"<p>Coming Soon</p> <p>Registration Certificate creation through EUDIPLO is not yet implemented. Currently, registration certificates must be managed directly through the registrar's interface.</p>"},{"location":"getting-started/wallet-compatibility/","title":"Wallet Compatibility","text":""},{"location":"getting-started/wallet-compatibility/#wallet-compatibility","title":"Wallet Compatibility","text":"<p>EUDIPLO is designed to work with EUDI-compliant wallets that implement the supported protocols (OID4VCI, OID4VP, and SD-JWT VC).</p> <p>This page provides information about tested wallets, compatibility status, and guidance for testing new wallets with EUDIPLO.</p>"},{"location":"getting-started/wallet-compatibility/#tested-wallets","title":"Tested Wallets","text":"<p>The following wallets have been tested and verified to work with EUDIPLO:</p> Wallet Provider Download Features Heidi Wallet Ubique Android / iOS Details Paradym Wallet Animo Android / iOS Details"},{"location":"getting-started/wallet-compatibility/#feature-support-details","title":"Feature Support Details","text":""},{"location":"getting-started/wallet-compatibility/#feature-legend","title":"Feature Legend","text":"<ul> <li>Issuance (OID4VCI)<ul> <li>Auth: Authorization Code Flow</li> <li>Pre: Pre-authorized Code Flow</li> <li>IAE: Interactive Authorization Endpoint (IAE) support</li> <li>DPoP: DPoP proof of possession</li> <li>Att: Client attestation</li> </ul> </li> <li>Presentation (OID4VP)<ul> <li>DC API: Digital Credentials API support</li> </ul> </li> <li>Credential Format<ul> <li>SD-JWT: SD-JWT VC support</li> </ul> </li> </ul> <p>KISS: Keep It Simple, Stupid</p> <p>The legend above explains the abbreviations used in the feature matrix below. If you think any other features should be tracked, please let us know!</p>"},{"location":"getting-started/wallet-compatibility/#feature-matrix","title":"Feature Matrix","text":"Wallet Auth Pre IAE DPoP Att DC API SD-JWT Heidi Wallet \u2705 \u2705 n/a \u2705 n/a \u2705 \u2705 Paradym Wallet \u2705 \u2705 n/a \u2705 n/a \u2705 \u2705"},{"location":"getting-started/wallet-compatibility/#individual-wallet-details","title":"Individual Wallet Details","text":""},{"location":"getting-started/wallet-compatibility/#heidi-wallet","title":"Heidi Wallet","text":"<ul> <li>Version tested: 1.0.4</li> <li>Last verified: October 11, 2025</li> <li>Notes: Not up to date with OID4VP response.</li> </ul>"},{"location":"getting-started/wallet-compatibility/#paradym-wallet","title":"Paradym Wallet","text":"<ul> <li>Version tested: 1.16.2</li> <li>Last verified: January 7, 2026</li> <li>Notes: Needs to use the same certificate for status list and signed credential. Cannot handle different <code>trusted_authorities</code> in the DCQL during presentation yet (which result in no match).</li> </ul> <p>Help us expand this list!</p> <p>If you have successfully tested EUDIPLO with a wallet not listed here, please reach out to us so we can add it to this list.</p>"},{"location":"getting-started/wallet-compatibility/#testing-new-wallets","title":"Testing New Wallets","text":"<p>If you want to test EUDIPLO with a new wallet, follow these steps:</p>"},{"location":"getting-started/wallet-compatibility/#1-setup-test-environment","title":"1. Setup Test Environment","text":"<pre><code># Run EUDIPLO with proper HTTPS endpoint\ndocker run -p 3000:3000 \\\n  -e PUBLIC_URL=https://your-domain.com \\\n  ghcr.io/openwallet-foundation-labs/eudiplo:latest\n</code></pre>"},{"location":"getting-started/wallet-compatibility/#2-test-credential-issuance","title":"2. Test Credential Issuance","text":"<ol> <li>Configure a test credential template</li> <li>Initiate issuance flow via API</li> <li>Complete the flow in your wallet</li> <li>Verify credential is stored correctly</li> </ol>"},{"location":"getting-started/wallet-compatibility/#3-test-credential-presentation","title":"3. Test Credential Presentation","text":"<ol> <li>Create a presentation request</li> <li>Generate QR code or deep link</li> <li>Present credential from wallet</li> <li>Verify presentation is received and validated</li> </ol>"},{"location":"getting-started/wallet-compatibility/#4-document-results","title":"4. Document Results","text":"<p>Please document:</p> <ul> <li>Wallet name and version</li> <li>Test results (success/failure)</li> <li>Any configuration adjustments needed</li> <li>Error messages or issues encountered</li> </ul>"},{"location":"getting-started/wallet-compatibility/#contributing-compatibility-information","title":"Contributing Compatibility Information","text":""},{"location":"getting-started/wallet-compatibility/#reporting-compatible-wallets","title":"Reporting Compatible Wallets","text":"<p>If you have successfully tested a wallet with EUDIPLO:</p> <ol> <li>Create an Issue: Open a    new issue    on GitHub</li> <li>Use Template: Select the \"Wallet Compatibility Report\" template</li> <li>Provide Details: Include wallet name, version, test results, and any    configuration notes</li> <li>Screenshots: Attach screenshots of successful flows if possible</li> </ol>"},{"location":"getting-started/wallet-compatibility/#reporting-issues","title":"Reporting Issues","text":"<p>If you encounter compatibility problems:</p> <ol> <li>Check Known Issues: Review the section above first</li> <li>Gather Information: Collect logs, error messages, and configuration    details</li> <li>Create Bug Report: Open an issue with detailed reproduction steps</li> <li>Community Support: Ask for help in our    Discord community</li> </ol>"},{"location":"getting-started/wallet-compatibility/#version-compatibility-matrix","title":"Version Compatibility Matrix","text":"EUDIPLO Version Protocol Versions Notes 1.x.x OID4VCI 1, OID4VP 1, SD-JWT VC draft-11 Current stable Latest (main) Latest draft versions Development version <p>Protocol Evolution</p> <p>EUDI wallet protocols are still evolving. Compatibility may change as new protocol versions are adopted. We track the latest specifications and update EUDIPLO accordingly.</p>"},{"location":"getting-started/wallet-compatibility/#need-help","title":"Need Help?","text":"<ul> <li>\ud83d\udcd6 Documentation: Check our   Getting Started guide</li> <li>\ud83d\udc1b Issues: Report problems on   GitHub Issues</li> <li>\ud83d\udcac Community: Join our Discord server</li> <li>\ud83d\udce7 Contact: Reach out to the EUDIPLO team through GitHub discussions</li> </ul>"},{"location":"getting-started/web-client/","title":"Web Client","text":""},{"location":"getting-started/web-client/#web-client","title":"Web Client","text":"<p>EUDIPLO provides a user-friendly web interface for credential management\u2014no API expertise required. Simply enter your instance URL and credentials to get started. There's no need to deploy a separate client for each instance.</p> <p>There is no need to use the client to interact with EUDIPLO, but it offers a more intuitive way to manage the configurations.</p>"},{"location":"getting-started/web-client/#getting-started","title":"Getting Started","text":""},{"location":"getting-started/web-client/#accessing-the-web-client","title":"Accessing the Web Client","text":"<p>After completing the Full Setup:</p> <ol> <li>Open your browser and go to: http://localhost:4200</li> <li>Login using the default credentials:</li> <li>Username: <code>root</code></li> <li>Password: <code>root</code></li> </ol> <p>Important: Change the default credentials before using EUDIPLO in production. See Authentication for details.</p>"},{"location":"getting-started/web-client/#dashboard-overview","title":"Dashboard Overview","text":"<p>The dashboard offers:</p> <ul> <li>Quick Actions: One-click access to common tasks</li> <li>Statistics: Usage metrics and activity summaries (coming soon)</li> </ul>"},{"location":"getting-started/web-client/#core-features","title":"Core Features","text":""},{"location":"getting-started/web-client/#credential-issuance-management","title":"\ud83c\udfab Credential Issuance Management","text":"<ul> <li>Create, edit, import, or delete credential and issuance configurations</li> <li>Import keys and certificates, and link them to configurations</li> </ul>"},{"location":"getting-started/web-client/#credential-verification","title":"\u2705 Credential Verification","text":"<ul> <li>Manage verification flows</li> <li>Create, edit, import, or delete verification configurations</li> </ul>"},{"location":"getting-started/web-client/#session-management","title":"\ud83d\udccb Session Management","text":"<ul> <li>View and manage active issuance and verification sessions</li> <li>Inspect session details, including parameters</li> </ul>"},{"location":"getting-started/web-client/#client-management","title":"\ud83e\uddd1\u200d\ud83d\udcbc Client Management","text":"<ul> <li>Create new tenants with client ID and secret (Keycloak only)</li> <li>Not supported for other identity providers or when using EUDIPLO as IAM yet</li> </ul>"},{"location":"getting-started/web-client/#configuration-editing-validation","title":"Configuration Editing &amp; Validation","text":"<p>The web client is designed for intuitive and robust configuration management:</p> <ul> <li>Data Model &amp; Validation: The EUDIPLO service uses decorators on data transfer objects (DTOs) and entities to describe variables and their values, enabling server-side validation.</li> <li>OpenAPI Specification: An OpenAPI spec is generated from these DTOs and entities, providing a standardized interface for backend interaction.</li> <li>SDK Integration: The web client uses an SDK generated from the OpenAPI spec for seamless and type-safe communication with the backend.</li> <li> <p>Editing Experience:</p> <ul> <li>Simple variables (strings, numbers, booleans) are edited via text inputs, select options, or checkboxes.</li> <li>Complex data structures are managed using an integrated JSON editor (Monaco Editor), which leverages JSON schemas for each variable.</li> </ul> </li> <li> <p>Client-Side Validation &amp; Guidance: The JSON editor uses the provided JSON schemas to offer inline descriptions, auto-completion, and validation directly in the browser.</p> </li> <li>Direct JSON Access: Each configuration can be viewed and edited as raw JSON for advanced use cases.</li> </ul>"},{"location":"getting-started/issuance/","title":"Overview","text":""},{"location":"getting-started/issuance/#configuring-credential-issuance-flows","title":"Configuring Credential Issuance Flows","text":"<p>The issuance system uses a two-layer configuration approach:</p> <ol> <li>Credential Configurations - Define the structure, format, and metadata of    individual credentials</li> <li>Issuance Configuration - Define the issuance configuration that get used to    group multiple credentials and publish the issuer metadata</li> </ol>"},{"location":"getting-started/issuance/#api-endpoints","title":"API Endpoints","text":"<p>The system uses two separate endpoints for the two-layer configuration:</p>"},{"location":"getting-started/issuance/#credential-configurations","title":"Credential Configurations","text":"<p>To manage individual credential configurations, use the <code>/issuer/credentials</code> endpoint. This endpoint handles the definition of credential types, their formats, claims, and display properties.</p>"},{"location":"getting-started/issuance/#issuance-configuration","title":"Issuance Configuration","text":"<p>The endpoints to manage issuance configuration can be found in the API documentation section.</p> <p>Based on your passed access token, endpoints will be scoped to the tenant ID of the token. You also need the <code>issuance:manage</code> role to access these endpoints. The configurations are internally stored in a database.</p>"},{"location":"getting-started/issuance/#creating-credential-offers","title":"Creating Credential Offers","text":"<p>Via the credential offer endpoint you can create a credential offer that can be presented to the user. When creating an offer, you can:</p> <ol> <li>Define the flow - Either go with the pre authorized flow or require user    authentication via the authorization code flow</li> <li>Provide credentials - Use <code>credentialConfigurationIds</code> to specify which    credentials to issue from the issuance configuration</li> <li>Optionally override claims - Use the <code>values</code> parameter to provide custom    claims for specific credentials</li> <li>Optionally pass claim webhooks - Use the <code>claimsWebhook</code> parameter to    dynamically fetch claims during the issuance flow</li> <li>Optionally pass notification webhooks - Use the <code>notifyWebhook</code> parameter to    get notified about issuance status changes</li> </ol>"},{"location":"getting-started/issuance/#credential-issuance-flow","title":"Credential Issuance Flow","text":"<p>This flow describes how a backend service starts an issuance flow of an attestation. EUDIPLO creates the OID4VCI request and handles the protocol flow with the wallet. It also shows the interactions with webhooks when they are configured.</p> <pre><code>sequenceDiagram\n    autonumber\n    actor Wallet as EUDI Wallet\n    participant EUDIPLO as Middleware\n    participant Service as End Service (with Webhooks)\n\n    Service-&gt;&gt;EUDIPLO: Request OID4VCI issuance offer\n    EUDIPLO--&gt;&gt;Service: Return credential offer link\n    Service-&gt;&gt;Wallet: Present offer link to user\n\n    Wallet-&gt;&gt;EUDIPLO: Authorization Request (auth / pre-auth)\n    note over EUDIPLO: Validate request, locate credential config\n\n    alt Claims webhook configured\n        EUDIPLO-&gt;&gt;Service: Fetch claims dynamically (claims webhook)\n        alt Immediate issuance\n            Service--&gt;&gt;EUDIPLO: Claims response (JSON)\n            EUDIPLO-&gt;&gt;EUDIPLO: Create credential with claims\n            EUDIPLO--&gt;&gt;Wallet: Return issued credential\n        else Deferred issuance\n            Service--&gt;&gt;EUDIPLO: { \"deferred\": true, \"interval\": 5 }\n            EUDIPLO--&gt;&gt;Wallet: HTTP 202 + transaction_id\n            loop Wallet polls deferred endpoint\n                Wallet-&gt;&gt;EUDIPLO: GET /deferred_credential\n                alt Not ready\n                    EUDIPLO--&gt;&gt;Wallet: { \"error\": \"issuance_pending\" }\n                else Ready\n                    EUDIPLO--&gt;&gt;Wallet: Return issued credential\n                end\n            end\n        end\n    else No webhook\n        note over EUDIPLO: Use claims from Offer or static configuration\n        EUDIPLO-&gt;&gt;EUDIPLO: Create credential with claims\n        EUDIPLO--&gt;&gt;Wallet: Return issued credential\n    end\n\n    Wallet-&gt;&gt;EUDIPLO: Sending notification\n\n    opt Notification webhook configured\n        EUDIPLO-&gt;&gt;Service: Notify status (accepted / denied)\n        Service--&gt;&gt;EUDIPLO: 2xx ACK\n    end</code></pre> <p>The response with the credential offer link will also provide the session ID. It is included in the requests from the optional webhooks to identify the specific issuance flow. You can also use the id to query the issuance status at the API.</p>"},{"location":"getting-started/issuance/#supported-issuance-flows","title":"Supported Issuance Flows","text":"<p>EUDIPLO supports three authentication patterns for OID4VCI credential issuance. Each pattern serves different use cases depending on how users are identified and authenticated.</p>"},{"location":"getting-started/issuance/#quick-reference","title":"Quick Reference","text":"Authentication Pattern User is Known User Authentication Initiator Claims Source Pre-authorized code Yes Already authenticated (before offer) Issuer only Offer or Webhook Authorization code + External AS No OIDC login at external IdP Issuer or Wallet Webhook (required) Interactive Authorization (IAE) No Credential presentation (OID4VP) or web redirect Issuer or Wallet Webhook (required)"},{"location":"getting-started/issuance/#understanding-the-three-dimensions","title":"Understanding the Three Dimensions","text":""},{"location":"getting-started/issuance/#1-authentication-pattern-how-is-the-user-identified","title":"1. Authentication Pattern (How is the user identified?)","text":"<ul> <li>Pre-authorized code: User was already authenticated before the OID4VCI flow starts. You know who they are and can include their claims in the offer.</li> <li>Authorization code + External AS: User authenticates during the flow at an external Identity Provider (Keycloak, Azure AD, Okta) via OIDC.</li> <li>Interactive Authorization (IAE): User proves their identity by presenting an existing credential (OID4VP) or completing a web-based flow.</li> </ul>"},{"location":"getting-started/issuance/#2-initiator-who-starts-the-flow","title":"2. Initiator (Who starts the flow?)","text":"<ul> <li>Issuer-initiated: The issuer creates an offer URI and presents it to the user (QR code, email link, push notification). Used when you want to proactively issue credentials.</li> <li>Wallet-initiated: The wallet discovers available credentials via issuer metadata and initiates the request. Used for self-service scenarios where users browse available credentials.</li> </ul> <p>Pre-authorized code is issuer-initiated only</p> <p>Since the user must be known before creating the offer, pre-authorized code flows are always issuer-initiated. The other patterns support both.</p>"},{"location":"getting-started/issuance/#3-claims-source-where-do-credential-claims-come-from","title":"3. Claims Source (Where do credential claims come from?)","text":"<ul> <li>In the offer: Claims are embedded in the credential offer when it's created. Only possible when the user is known upfront (pre-authorized code flow).</li> <li>Via webhook: EUDIPLO calls your backend to fetch claims based on user identity information. Required when user identity is established during the flow.</li> </ul>"},{"location":"getting-started/issuance/#flow-details","title":"Flow Details","text":""},{"location":"getting-started/issuance/#pre-authorized-code-flow","title":"Pre-authorized Code Flow","text":"<p>Use when: You already know who the user is before starting the issuance flow.</p> <pre><code>sequenceDiagram\n    participant Portal as Your Portal\n    participant EUDIPLO\n    participant Wallet\n\n    Portal-&gt;&gt;Portal: User authenticates\n    Portal-&gt;&gt;EUDIPLO: Create offer with claims\n    EUDIPLO--&gt;&gt;Portal: Offer URI + QR code\n    Portal-&gt;&gt;Wallet: Display QR / Send link\n    Wallet-&gt;&gt;EUDIPLO: Redeem offer\n    EUDIPLO-&gt;&gt;Wallet: Credential</code></pre> <p>Examples:</p> <ul> <li>Employee onboarding portal creates badge credential after HR verification</li> <li>University issues diploma after graduation is confirmed</li> <li>Government portal issues ID after identity verification process</li> </ul> <p>Configuration:</p> <pre><code>{\n    \"claims\": {\n        \"given_name\": \"Alice\",\n        \"family_name\": \"Smith\",\n        \"employee_id\": \"EMP-12345\"\n    }\n}\n</code></pre> <p>Or use a webhook if you don't want to embed claims in the offer:</p> <pre><code>{\n    \"claimsWebhook\": {\n        \"url\": \"https://your-service.example.com/claims\"\n    }\n}\n</code></pre>"},{"location":"getting-started/issuance/#authorization-code-flow-with-external-as","title":"Authorization Code Flow with External AS","text":"<p>Use when: You have an existing Identity Provider and want users to authenticate via OIDC.</p> <pre><code>sequenceDiagram\n    participant Wallet\n    participant EUDIPLO\n    participant Keycloak as External AS (Keycloak)\n    participant Backend as Your Backend\n\n    alt Issuer-initiated\n        EUDIPLO-&gt;&gt;Wallet: Credential offer\n    else Wallet-initiated\n        Wallet-&gt;&gt;EUDIPLO: Discover metadata\n    end\n    Wallet-&gt;&gt;Keycloak: Authorization request\n    Keycloak-&gt;&gt;Keycloak: User login (OIDC)\n    Keycloak--&gt;&gt;Wallet: Authorization code\n    Wallet-&gt;&gt;Keycloak: Token request\n    Keycloak--&gt;&gt;Wallet: Access token\n    Wallet-&gt;&gt;EUDIPLO: Credential request + token\n    EUDIPLO-&gt;&gt;EUDIPLO: Verify token against AS\n    EUDIPLO-&gt;&gt;Backend: Webhook (iss, sub, token_claims)\n    Backend--&gt;&gt;EUDIPLO: Claims for credential\n    EUDIPLO--&gt;&gt;Wallet: Credential</code></pre> <p>Examples:</p> <ul> <li>Enterprise deployment where employees authenticate via corporate Keycloak</li> <li>Multi-tenant SaaS where each tenant uses their own IdP</li> <li>Wallet-initiated flows where users browse available credentials</li> </ul> <p>Configuration:</p> <ul> <li>Configure external authorization servers in issuance config:</li> </ul> <pre><code>{\n    \"authServers\": [\"https://keycloak.example.com/realms/myrealm\"],\n    \"dPopRequired\": true\n}\n</code></pre> <ul> <li>Configure claims webhook on the credential configuration:</li> </ul> <pre><code>{\n    \"claimsWebhook\": {\n        \"url\": \"https://your-service.example.com/claims\",\n        \"auth\": {\n            \"type\": \"apiKey\",\n            \"config\": {\n                \"headerName\": \"X-API-Key\",\n                \"value\": \"your-secret-key\"\n            }\n        }\n    }\n}\n</code></pre> <p>Your webhook receives:</p> <pre><code>{\n    \"session\": \"a6318799-dff4-4b60-9d1d-58703611bd23\",\n    \"credential_configuration_id\": \"EmployeeBadge\",\n    \"identity\": {\n        \"iss\": \"https://keycloak.example.com/realms/myrealm\",\n        \"sub\": \"user-uuid-from-keycloak\",\n        \"token_claims\": {\n            \"email\": \"user@example.com\",\n            \"preferred_username\": \"jdoe\"\n        }\n    }\n}\n</code></pre> <p>See Webhooks for full payload details.</p>"},{"location":"getting-started/issuance/#interactive-authorization-endpoint-iae","title":"Interactive Authorization Endpoint (IAE)","text":"<p>Use when: You want users to prove their identity by presenting an existing credential or completing a web-based verification.</p> <p>The IAE supports two interaction types:</p> Interaction Type Description Use Case <code>openid4vp_presentation</code> User presents an existing credential via OID4VP Issue derived credentials based on existing ones <code>redirect_to_web</code> User is redirected to a web page for verification Custom verification flows, OIDC login, form entry"},{"location":"getting-started/issuance/#oid4vp-presentation-flow","title":"OID4VP Presentation Flow","text":"<pre><code>sequenceDiagram\n    participant Wallet\n    participant EUDIPLO\n    participant Backend as Your Backend\n\n    Wallet-&gt;&gt;EUDIPLO: Interactive authorization request\n    EUDIPLO--&gt;&gt;Wallet: Presentation request (OID4VP)\n    Wallet-&gt;&gt;Wallet: User selects credential\n    Wallet-&gt;&gt;EUDIPLO: Presentation response\n    EUDIPLO-&gt;&gt;EUDIPLO: Verify presentation\n    EUDIPLO-&gt;&gt;Backend: Webhook with presentation data\n    Backend--&gt;&gt;EUDIPLO: Claims for new credential\n    EUDIPLO--&gt;&gt;Wallet: Authorization code\n    Wallet-&gt;&gt;EUDIPLO: Token request\n    EUDIPLO--&gt;&gt;Wallet: Access token\n    Wallet-&gt;&gt;EUDIPLO: Credential request\n    EUDIPLO--&gt;&gt;Wallet: New credential</code></pre> <p>Examples:</p> <ul> <li>Issue a loyalty card credential based on a presented membership credential</li> <li>Issue a student discount credential based on a university ID credential</li> <li>Age verification: issue age attestation based on presented ID</li> </ul> <p>Configuration:</p> <p>Configure IAE action on the credential configuration:</p> <pre><code>{\n    \"iaeAction\": {\n        \"type\": \"openid4vp_presentation\",\n        \"presentationDefinition\": {\n            \"id\": \"verify-membership\",\n            \"input_descriptors\": [\n                {\n                    \"id\": \"membership-credential\",\n                    \"constraints\": {\n                        \"fields\": [\n                            {\n                                \"path\": [\"$.vct\"],\n                                \"filter\": {\n                                    \"type\": \"string\",\n                                    \"const\": \"MembershipCredential\"\n                                }\n                            }\n                        ]\n                    }\n                }\n            ]\n        }\n    },\n    \"claimsWebhook\": {\n        \"url\": \"https://your-service.example.com/iae-claims\"\n    }\n}\n</code></pre>"},{"location":"getting-started/issuance/#redirect-to-web-flow","title":"Redirect to Web Flow","text":"<pre><code>sequenceDiagram\n    participant Wallet\n    participant EUDIPLO\n    participant WebApp as Your Web App\n\n    Wallet-&gt;&gt;EUDIPLO: Interactive authorization request\n    EUDIPLO--&gt;&gt;Wallet: Redirect URL\n    Wallet-&gt;&gt;WebApp: Open browser\n    WebApp-&gt;&gt;WebApp: User completes verification\n    WebApp-&gt;&gt;EUDIPLO: Callback with result\n    EUDIPLO--&gt;&gt;Wallet: Authorization code\n    Wallet-&gt;&gt;EUDIPLO: Token + Credential requests\n    EUDIPLO--&gt;&gt;Wallet: Credential</code></pre> <p>Examples:</p> <ul> <li>Custom OIDC login flow with additional verification steps</li> <li>Payment verification before issuing premium credentials</li> <li>Terms acceptance or consent collection</li> </ul> <p>Configuration:</p> <pre><code>{\n    \"iaeAction\": {\n        \"type\": \"redirect_to_web\",\n        \"redirectUrl\": \"https://your-app.example.com/verify\",\n        \"callbackUrl\": \"https://issuer.example.com/{tenantId}/authorize/interactive/callback\"\n    }\n}\n</code></pre>"},{"location":"getting-started/issuance/#decision-flowchart","title":"Decision Flowchart","text":"<pre><code>flowchart TD\n    A[Starting credential issuance] --&gt; B{Do you know the user&lt;br/&gt;before the flow starts?}\n\n    B --&gt;|Yes| C[Pre-authorized code flow]\n    B --&gt;|No| D{How should the user&lt;br/&gt;prove their identity?}\n\n    D --&gt;|Login at existing IdP| E[Authorization code + External AS]\n    D --&gt;|Present existing credential| F[IAE: openid4vp_presentation]\n    D --&gt;|Custom web verification| G[IAE: redirect_to_web]\n\n    C --&gt; H{Where are claims?}\n    H --&gt;|Known at offer creation| I[Include claims in offer]\n    H --&gt;|Need to fetch later| J[Use webhook]\n\n    E --&gt; K[Webhook required]\n    F --&gt; L[Webhook required]\n    G --&gt; M[Webhook required]\n\n    style C fill:#90EE90\n    style E fill:#87CEEB\n    style F fill:#DDA0DD\n    style G fill:#DDA0DD</code></pre>"},{"location":"getting-started/issuance/#deferred-credential-issuance","title":"Deferred Credential Issuance","text":"<p>EUDIPLO supports deferred credential issuance for scenarios where credentials cannot be issued immediately. This is useful when:</p> <ul> <li>Background verification is required (e.g., KYC, identity proofing)</li> <li>Approval workflows must be completed before issuance</li> <li>External data sources need time to respond</li> <li>Asynchronous processing is required</li> </ul> <p>When your claims webhook returns <code>{ \"deferred\": true }</code>, EUDIPLO returns a <code>transaction_id</code> to the wallet. The wallet then polls the <code>/deferred_credential</code> endpoint until the credential is ready.</p> <p>For detailed information on implementing deferred issuance, see the Deferred Credential Issuance section in the Webhooks documentation.</p>"},{"location":"getting-started/issuance/#documentation-structure","title":"Documentation Structure","text":"<p>This issuance documentation is organized into the following sections:</p> <ul> <li>Credential Configuration - Learn how to   define individual credential types, their structure, claims, and display   properties</li> <li>Issuance Configuration - Understand how to   create issuance configurations that group multiple credentials and define   issuance parameters such as authorization and webhooks</li> </ul>"},{"location":"getting-started/issuance/#quick-start","title":"Quick Start","text":"<p>For a quick start, follow these steps:</p> <ol> <li>Create a credential configuration - Define your credential type using the    Credential Configuration guide</li> <li>Create an issuance configuration - Define the issuance configuration using    the Issuance Configuration guide</li> <li>Issue credentials - Start the issuance flow by creating credential offers</li> </ol>"},{"location":"getting-started/issuance/#passing-claims","title":"Passing Claims","text":"<p>EUDIPLO provides multiple methods to pass claims (data) for credentials during issuance, with a clear priority system that determines which claims are used.</p>"},{"location":"getting-started/issuance/#priority-order","title":"Priority Order","text":"<p>Claims are resolved in the following priority order (highest to lowest):</p> <ol> <li>Offer-level webhook - Webhook specified in the credential offer</li> <li>Offer-level static claims - Claims specified in the credential offer</li> <li>Configuration-level webhook - Webhook defined in the credential configuration</li> <li>Configuration-level static claims - Claims defined in the credential configuration</li> </ol> <p>Claims are not merged</p> <p>Higher priority sources completely override lower priority sources - claims are not merged. If an offer-level webhook is provided, all configuration-level claims will be entirely ignored.</p> <p>For a detailed explanation of the claims priority system and how to configure each method, see the Fetching Claims section in the Credential Configuration documentation.</p>"},{"location":"getting-started/issuance/#when-to-use-each-method","title":"When to Use Each Method","text":"<ul> <li>Configuration-level static claims - Default values for all credentials of this type, fixed metadata (e.g., issuing country, authority)</li> <li>Configuration-level webhook - Dynamic claims based on authentication context, personalized credentials requiring real-time data</li> <li>Offer-level static claims - Claims known at offer creation time, overriding specific values for individual issuances</li> <li>Offer-level webhook - Custom data source per offer, testing different webhook endpoints</li> </ul>"},{"location":"getting-started/issuance/credential-configuration/","title":"Credential Configuration","text":""},{"location":"getting-started/issuance/credential-configuration/#credential-configuration","title":"Credential Configuration","text":"<p>Credential configurations define the structure and properties of individual credentials. Each credential type has its own configuration file.</p>"},{"location":"getting-started/issuance/credential-configuration/#basic-structure","title":"Basic Structure","text":"<p>Each credential configuration is a JSON object that defines how a specific credential type should be issued. The configuration includes metadata, display information, claims, and various optional features like key binding and status management.</p> <p>For a complete configuration example, see the Complete Configuration Example section at the bottom of this page.</p> <p>Info</p> <p>The data object for the import can be found in the API Documentation</p>"},{"location":"getting-started/issuance/credential-configuration/#configuration-fields","title":"Configuration Fields","text":""},{"location":"getting-started/issuance/credential-configuration/#required-fields","title":"Required Fields","text":"<ul> <li><code>id</code>: REQUIRED - Unique identifier for the credential configuration that will be used to reference this credential in the issuance metadata or in the credential offer.</li> <li><code>config</code>: REQUIRED - Entry for   credential_configuration_supported.<ul> <li><code>format</code>: REQUIRED - The format of the credential. Supported formats:<ul> <li><code>dc+sd-jwt</code> - Selective Disclosure JWT Verifiable Credentials</li> <li><code>mso_mdoc</code> - Mobile Document (ISO 18013-5)</li> </ul> </li> <li><code>display</code>: REQUIRED - Display configuration for the credential,   including name, description, locale, colors, and images.</li> <li><code>docType</code>: REQUIRED for mso_mdoc - Document type identifier (e.g., <code>org.iso.18013.5.1.mDL</code>).</li> <li><code>namespace</code>: OPTIONAL for mso_mdoc - Default namespace for claims (e.g., <code>org.iso.18013.5.1</code>). If not provided, derived from docType.</li> </ul> </li> </ul>"},{"location":"getting-started/issuance/credential-configuration/#optional-fields","title":"Optional Fields","text":"<ul> <li><code>description</code>: OPTIONAL - Human-readable description of the credential. Will not be displayed to the end user.</li> <li><code>vct</code>: OPTIONAL -   VC Type Metadata   provided via the <code>/{tenantId}/credentials-metadata/vct/{id}</code> endpoint. This link will   automatically added into the credential.</li> <li><code>certId</code>: OPTIONAL - Unique identifier for the certificate used to sign the credential. If not provided, the certificate in for the signing usage will be used. See Signing Certificate for details.</li> <li><code>lifeTime</code>: OPTIONAL - Credential expiration time in seconds. If   specified, credentials will include an <code>exp</code> claim calculated as   <code>iat + lifeTime</code>. See Credential Expiration for details.</li> <li><code>statusManagement</code>: OPTIONAL - Enable OAuth Token Status Lists for   credential revocation. When <code>true</code>, credentials include a <code>status</code> claim with   revocation information. See Status Management and Revocation for details.</li> <li><code>keyBinding</code>: OPTIONAL - Enable cryptographic key binding. When <code>true</code>,   credentials include a <code>cnf</code> claim with the holder's public key and require   proof of possession. See Cryptographic Key Binding for details.</li> <li><code>claims</code>: OPTIONAL - Static claims to include in the credential. Can be   overridden by webhook responses or claims passed during credential offer.</li> <li><code>claimsWebhook</code>: OPTIONAL - Webhook to receive claims for the issuance process. See Webhooks for details.</li> <li><code>notificationWebhook</code>: OPTIONAL - Webhook to send notifications about the issuance process. See Webhooks for details.</li> <li><code>disclosureFrame</code>: OPTIONAL - Defines which claims should be selectively   disclosable in SD-JWT format.</li> <li><code>embeddedDisclosurePolicy</code>: OPTIONAL - Defines the embedded disclosure policy for the credential. See Embedded Disclosure Policy for details.</li> <li><code>iaeActions</code>: OPTIONAL - Sequence of Interactive Authorization actions required before credential issuance. See Interactive Authorization Actions for details.</li> <li><code>schema</code>: OPTIONAL - JSON schema for validating the credential claims.</li> </ul>"},{"location":"getting-started/issuance/credential-configuration/#fetching-claims","title":"Fetching Claims","text":"<p>Claims define the data that will be included in the credential. This section covers how to configure claims at the credential configuration level.</p> <p>Claims Priority System</p> <p>EUDIPLO supports multiple ways to provide claims (configuration-level and offer-level), with a priority system that determines which claims are used. For a complete explanation of the claims priority order and when to use each method, see Passing Claims in the Issuance Overview.</p>"},{"location":"getting-started/issuance/credential-configuration/#static-claims","title":"Static Claims","text":"<p>You can specify static claims directly in the credential configuration. These claims will be used as defaults for every credential issued using this configuration:</p> <pre><code>{\n    \"claims\": {\n        \"issuing_country\": \"DE\",\n        \"issuing_authority\": \"DE\",\n        \"given_name\": \"ERIKA\",\n        \"family_name\": \"MUSTERMANN\",\n        \"birth_family_name\": \"GABLER\",\n        \"birthdate\": \"1964-08-12\",\n        \"age_birth_year\": 1964,\n        \"age_in_years\": 59,\n        \"age_equal_or_over\": {\n            \"12\": true,\n            \"14\": true,\n            \"16\": true,\n            \"18\": true,\n            \"21\": true,\n            \"65\": false\n        },\n        \"place_of_birth\": {\n            \"locality\": \"BERLIN\"\n        },\n        \"address\": {\n            \"locality\": \"K\u00d6LN\",\n            \"postal_code\": \"51147\",\n            \"street_address\": \"HEIDESTRA\u1e9eE 17\"\n        },\n        \"nationalities\": [\"DE\"]\n    }\n}\n</code></pre> <p>Static claims are useful for:</p> <ul> <li>Default values for all credentials of this type</li> <li>Fixed metadata (e.g., issuing country, issuing authority)</li> <li>Development and testing scenarios</li> </ul>"},{"location":"getting-started/issuance/credential-configuration/#claims-webhook","title":"Claims Webhook","text":"<p>For dynamic claim retrieval, you can configure a webhook that will be called during the issuance process to fetch claims:</p> <pre><code>{\n    \"claimsWebhook\": {\n        \"url\": \"https://your-backend.com/api/claims\",\n        \"headers\": {\n            \"Authorization\": \"Bearer your-token\"\n        }\n    }\n}\n</code></pre> <p>The webhook will receive information about the issuance session and must return the claims to be included in the credential.</p> <p>Claims webhooks are useful when:</p> <ul> <li>Claims need to be fetched from an external system or database</li> <li>Claims should be personalized based on the authentication context</li> <li>Claims depend on real-time data</li> </ul> <p>For detailed information about webhook implementation, payload structure, and examples, see Claims Webhook.</p>"},{"location":"getting-started/issuance/credential-configuration/#notification-webhook","title":"Notification Webhook","text":"<p>You can configure a webhook to receive notifications about the issuance process. This allows you to track the status of credential issuance and take appropriate actions:</p> <pre><code>{\n    \"notificationWebhook\": {\n        \"url\": \"https://your-backend.com/api/notifications\",\n        \"headers\": {\n            \"Authorization\": \"Bearer your-token\"\n        }\n    }\n}\n</code></pre> <p>The notification webhook will be called at various stages of the issuance process, such as:</p> <ul> <li>When a credential is successfully issued</li> <li>When an issuance request fails</li> <li>When a credential is accepted by the holder</li> </ul> <p>For more details about the webhook implementation and payload structure, see Notification Webhook.</p> <p>Info</p> <p>When a webhook is configured on credential config level, it will will sent the notification to this endpoint and not also to the one provided in the issuance config. It can also be overwritten via the credential offer.</p>"},{"location":"getting-started/issuance/credential-configuration/#selective-disclosure","title":"Selective Disclosure","text":"<p>Use the <code>disclosureFrame</code> to make specific claims selectively disclosable in SD-JWT format:</p> <pre><code>{\n    \"disclosureFrame\": {\n        \"_sd\": [\n            \"issuing_country\",\n            \"issuing_authority\",\n            \"given_name\",\n            \"family_name\",\n            \"birth_family_name\",\n            \"birthdate\",\n            \"age_birth_year\",\n            \"age_in_years\",\n            \"age_equal_or_over\",\n            \"place_of_birth\",\n            \"address\",\n            \"nationalities\"\n        ],\n        \"address\": {\n            \"_sd\": [\"locality\", \"postal_code\", \"street_address\"]\n        }\n    }\n}\n</code></pre> <p>This configuration allows:</p> <ul> <li>Individual disclosure of personal information fields</li> <li>Selective disclosure of address components</li> <li>Holders can choose which claims to reveal during presentation</li> </ul>"},{"location":"getting-started/issuance/credential-configuration/#mdoc-credential-format","title":"mDOC Credential Format","text":"<p>For issuing mobile documents following the ISO 18013-5 standard (such as Mobile Driving Licenses), use the <code>mso_mdoc</code> format.</p>"},{"location":"getting-started/issuance/credential-configuration/#basic-mdoc-configuration","title":"Basic mDOC Configuration","text":"<pre><code>{\n    \"id\": \"pid-mdoc\",\n    \"description\": \"Personal ID as mDL\",\n    \"config\": {\n        \"format\": \"mso_mdoc\",\n        \"docType\": \"org.iso.18013.5.1.mDL\",\n        \"namespace\": \"org.iso.18013.5.1\",\n        \"scope\": \"mdl\",\n        \"display\": [\n            {\n                \"name\": \"Mobile Driving License\",\n                \"description\": \"mDL Credential\",\n                \"locale\": \"en-US\"\n            }\n        ]\n    },\n    \"claims\": {\n        \"given_name\": \"ERIKA\",\n        \"family_name\": \"MUSTERMANN\",\n        \"birth_date\": \"1964-08-12\",\n        \"issuing_country\": \"DE\"\n    },\n    \"keyBinding\": true\n}\n</code></pre>"},{"location":"getting-started/issuance/credential-configuration/#mdoc-specific-fields","title":"mDOC-Specific Fields","text":"Field Required Description <code>docType</code> Yes Document type identifier following ISO 18013-5 naming convention (e.g., <code>org.iso.18013.5.1.mDL</code>) <code>namespace</code> No Default namespace for claims. If not provided, derived from <code>docType</code>. For mDL, this is typically <code>org.iso.18013.5.1</code> <code>claimsByNamespace</code> No Alternative to <code>claims</code> - allows specifying claims across multiple namespaces"},{"location":"getting-started/issuance/credential-configuration/#multiple-namespaces","title":"Multiple Namespaces","text":"<p>For credentials that require claims from multiple namespaces, use <code>claimsByNamespace</code>:</p> <pre><code>{\n    \"config\": {\n        \"format\": \"mso_mdoc\",\n        \"docType\": \"org.iso.18013.5.1.mDL\",\n        \"display\": [{ \"name\": \"mDL\", \"locale\": \"en-US\" }]\n    },\n    \"claimsByNamespace\": {\n        \"org.iso.18013.5.1\": {\n            \"given_name\": \"ERIKA\",\n            \"family_name\": \"MUSTERMANN\"\n        },\n        \"org.iso.18013.5.1.aamva\": {\n            \"DHS_compliance\": \"F\"\n        }\n    }\n}\n</code></pre> <p>Key Binding Required</p> <p>For mDOC credentials, <code>keyBinding</code> should typically be set to <code>true</code> as the ISO 18013-5 standard requires device authentication.</p> <p>Selective Disclosure</p> <p>Unlike SD-JWT, mDOC credentials have built-in selective disclosure at the namespace and claim level. The <code>disclosureFrame</code> field is not used for mDOC format.</p>"},{"location":"getting-started/issuance/credential-configuration/#display-configuration","title":"Display Configuration","text":"<p>The display configuration defines how the credential appears in wallets as defined in the OID4VCI spec for the credential metadata:</p> <pre><code>{\n    \"display\": [\n        {\n            \"name\": \"Personal Identity Document\",\n            \"description\": \"Official identity credential\",\n            \"locale\": \"en-US\",\n            \"background_color\": \"#FFFFFF\",\n            \"text_color\": \"#000000\",\n            \"logo\": {\n                \"uri\": \"issuer.png\"\n            },\n            \"background_image\": {\n                \"uri\": \"credential-bg.png\"\n            }\n        }\n    ]\n}\n</code></pre>"},{"location":"getting-started/issuance/credential-configuration/#display-fields","title":"Display Fields","text":"<ul> <li><code>name</code>: Display name for the credential</li> <li><code>description</code>: Brief description of the credential</li> <li><code>locale</code>: Language/locale (e.g., \"en-US\", \"de-DE\")</li> <li><code>background_color</code>: Background color (hex format)</li> <li><code>text_color</code>: Text color (hex format)</li> <li><code>logo</code>: Issuer logo configuration</li> <li><code>background_image</code>: Background image for the credential</li> </ul> <p>Info</p> <p>When no uri is passed, EUDIPLO will resolve the image based the storage system, see the image configuration. If the image cannot be found, the URI will be ignored.</p>"},{"location":"getting-started/issuance/credential-configuration/#signing-certificate","title":"Signing Certificate","text":"<p>The signing certificate is used to create the digital signature for the credential. It is essential for ensuring the integrity and authenticity of the credential. If none is provided, the first certificate in the certificate set will be used. The matching certificate will be included in the <code>x5c</code> field of the issued credential.</p>"},{"location":"getting-started/issuance/credential-configuration/#configuration","title":"Configuration","text":"<pre><code>{\n    \"certId\": \"signing-cert-1\"\n}\n</code></pre> <p>You can either generate a self signed certificate via the api or import your own certificate.</p> <p>Note</p> <p>Certificates can be managed through the <code>/certificates</code> API endpoint.</p>"},{"location":"getting-started/issuance/credential-configuration/#cryptographic-key-binding","title":"Cryptographic Key Binding","text":"<p>Cryptographic key binding ensures that a credential can only be used by the holder who possesses the corresponding private key. This is enabled through the <code>keyBinding</code> configuration option.</p>"},{"location":"getting-started/issuance/credential-configuration/#configuration_1","title":"Configuration","text":"<pre><code>{\n    \"keyBinding\": true\n}\n</code></pre>"},{"location":"getting-started/issuance/credential-configuration/#how-it-works","title":"How It Works","text":"<p>When <code>keyBinding</code> is enabled:</p> <ul> <li>The credential includes a <code>cnf</code> (confirmation claim) containing the holder's   public key</li> <li>During credential request, the holder must provide a proof of possession of   their private key</li> <li>The resulting credential can only be presented by the holder who has the   private key</li> </ul>"},{"location":"getting-started/issuance/credential-configuration/#use-cases","title":"Use Cases","text":"<ul> <li>High-value credentials (identity documents, diplomas, licenses)</li> <li>Credentials requiring strong authentication</li> <li>Preventing credential theft or unauthorized use</li> </ul>"},{"location":"getting-started/issuance/credential-configuration/#status-management-and-revocation","title":"Status Management and Revocation","text":"<p>Status management allows credentials to be revoked or suspended using OAuth Token Status List. This is controlled by the <code>statusManagement</code> configuration option.</p>"},{"location":"getting-started/issuance/credential-configuration/#configuration_2","title":"Configuration","text":"<pre><code>{\n    \"statusManagement\": true\n}\n</code></pre>"},{"location":"getting-started/issuance/credential-configuration/#how-it-works_1","title":"How It Works","text":"<p>When <code>statusManagement</code> is enabled:</p> <ul> <li>Each issued credential includes a <code>status</code> claim with a reference to a status   list</li> <li>The status list tracks the revocation state of individual credentials</li> <li>The status list is provided by the service and can be fetched by verifiers</li> <li>Credentials can be revoked using the <code>/session/revoke</code> endpoint</li> <li>The status list is updated immediately upon revocation</li> </ul> <p>Info</p> <p>When a session is deleted, the relationship between the sessionId and the issued credentials is still stored to be able to revoke the credentials. Only the sessionId and the index is stored, no other personal data.</p>"},{"location":"getting-started/issuance/credential-configuration/#benefits","title":"Benefits","text":"<ul> <li>Real-time revocation capability</li> <li>Standards-compliant status tracking</li> <li>Verifiers can check credential validity</li> <li>Granular control over credential lifecycle</li> </ul>"},{"location":"getting-started/issuance/credential-configuration/#status-configuration","title":"Status Configuration","text":"<p>By default EUDIPLO will create a status list where each credential is managed with one bit. This means only Valid and Revoked status is possible. To support suspension or other states like defined specification, you need to update the configuration options by setting the <code>STATUS_BITS</code> options at least to <code>2</code>.</p> <p>TODO</p> <p>Move status configuration to the issuance config: https://github.com/openwallet-foundation-labs/eudiplo/issues/276</p> Key Type Notes <code>STATUS_CAPACITY</code> <code>number</code> The default capacity of the status list. Can be overridden per tenant.  (default: <code>10000</code>) <code>STATUS_BITS</code> <code>number</code> The default number of bits used per status entry. Can be overridden per tenant.  (default: <code>1</code>) <code>STATUS_TTL</code> <code>number</code> The default TTL in seconds for status list JWTs. Verifiers can cache the JWT until expiration. Can be overridden per tenant.  (default: <code>3600</code>) <code>STATUS_IMMEDIATE_UPDATE</code> <code>boolean</code> If true, regenerate status list JWT immediately on every status change. If false (default), use lazy regeneration when TTL expires. Can be overridden per tenant.  (default: <code>false</code>) <code>STATUS_ENABLE_AGGREGATION</code> <code>boolean</code> If true (default), include aggregation_uri in status list JWTs. This allows relying parties to pre-fetch all status lists for offline validation per RFC draft-ietf-oauth-status-list Section 9. Can be overridden per tenant.  (default: <code>true</code>) <p>Info</p> <p>More granular configuration is planned for the future. When a tenant is created, it will use the same status list for all credentials. Automatic creation of new lists or dedicated lists per credential configuration is planned for the future.</p>"},{"location":"getting-started/issuance/credential-configuration/#credential-expiration","title":"Credential Expiration","text":"<p>Credential expiration allows setting a specific lifetime for credentials using the <code>lifeTime</code> configuration option (specified in seconds).</p>"},{"location":"getting-started/issuance/credential-configuration/#configuration_3","title":"Configuration","text":"<pre><code>{\n    \"config\": {\n        \"format\": \"dc+sd-jwt\",\n        \"display\": [\n            {\n                \"name\": \"Temporary Credential\",\n                \"description\": \"Time-limited credential\"\n            }\n        ]\n    },\n    \"lifeTime\": 3600,\n    \"claims\": {\n        \"given_name\": \"ERIKA\",\n        \"family_name\": \"MUSTERMANN\"\n    }\n}\n</code></pre>"},{"location":"getting-started/issuance/credential-configuration/#how-it-works_2","title":"How It Works","text":"<p>When <code>lifeTime</code> is specified:</p> <ul> <li>The credential includes an <code>exp</code> (expiration) claim</li> <li>The expiration time is calculated as: <code>iat</code> (issued at) + <code>lifeTime</code></li> <li>Example: <code>\"lifeTime\": 3600</code> creates credentials valid for 1 hour</li> <li>Example: <code>\"lifeTime\": 86400</code> creates credentials valid for 24 hours</li> </ul>"},{"location":"getting-started/issuance/credential-configuration/#common-lifetime-values","title":"Common Lifetime Values","text":"Duration Seconds Use Case 1 hour 3600 Short-term access tokens 1 day 86400 Daily passes, temporary IDs 1 week 604800 Weekly permits 1 month 2592000 Monthly subscriptions 1 year 31536000 Annual licenses"},{"location":"getting-started/issuance/credential-configuration/#embedded-disclosure-policy","title":"Embedded Disclosure Policy","text":"<p>The embedded disclosure policy defines rule to which the credential can be disclosed.</p> <p>There are four supported policy mechanisms:</p>"},{"location":"getting-started/issuance/credential-configuration/#none","title":"None","text":"<p>when policy is set to <code>none</code>, then there is no restriction on disclosure and claims can be revealed without any constraints.</p> <pre><code>{\n    \"policy\": \"none\"\n}\n</code></pre>"},{"location":"getting-started/issuance/credential-configuration/#allow-list","title":"Allow List","text":"<p>When policy is set to <code>allow</code>, only relying parties explicitly listed in the credential can access the claims.</p> <pre><code>{\n    \"policy\": \"allowList\",\n    \"values\": [\"https://relying-party-1.com\", \"https://relying-party-2.com\"]\n}\n</code></pre>"},{"location":"getting-started/issuance/credential-configuration/#root-of-trust","title":"Root of Trust","text":"<p>When policy is set to <code>rootOfTrust</code>, only relying parties that have a valid trustchain to the explicitly listed root of trust can access the claims.</p> <pre><code>{\n    \"policy\": \"rootOfTrust\",\n    \"values\": [\"https://root-of-trust.com\"]\n}\n</code></pre>"},{"location":"getting-started/issuance/credential-configuration/#attestation-based","title":"Attestation Based","text":"<p>When policy is set to <code>attestationBased</code>, only relying parties that can present a valid attestation can access the claims.</p> <pre><code>{\n    \"policy\": \"attestationBased\",\n    \"values\": [\n        {\n            \"claims\": [\n                {\n                    \"id\": \"card\",\n                    \"path\": [\"given_name\"]\n                }\n            ],\n            \"credentials\": [\n                {\n                    \"id\": \"card\",\n                    \"format\": \"sd-jwt-dc\",\n                    \"meta\": {\n                        \"vct_values\": \"https://example.com/member-card\"\n                    },\n                    \"trusted_authorities\": [\n                        {\n                            \"type\": \"aki\",\n                            \"values\": [\"s9tIpPmhxdiuNkHMEWNpYim8S8Y\"]\n                        }\n                    ]\n                }\n            ],\n            \"credential_sets\": [\n                {\n                    \"options\": [[\"card\"]]\n                }\n            ]\n        }\n    ]\n}\n</code></pre>"},{"location":"getting-started/issuance/credential-configuration/#interactive-authorization-actions","title":"Interactive Authorization Actions","text":"<p>The <code>iaeActions</code> field allows you to define a sequence of authorization steps that must be completed before credential issuance. This is useful for:</p> <ul> <li>Identity verification \u2013 Request a verifiable presentation from the wallet</li> <li>Web-based verification \u2013 Redirect users to complete forms, payments, or external KYC</li> <li>Multi-step workflows \u2013 Combine multiple actions in sequence</li> </ul> <p>For a complete overview of the Interactive Authorization Endpoint, see IAE Architecture.</p>"},{"location":"getting-started/issuance/credential-configuration/#configuration_4","title":"Configuration","text":"<pre><code>{\n    \"iaeActions\": [\n        {\n            \"type\": \"openid4vp_presentation\",\n            \"label\": \"Identity Verification\",\n            \"presentationConfigId\": \"pid-presentation-config\"\n        },\n        {\n            \"type\": \"redirect_to_web\",\n            \"label\": \"Complete Registration\",\n            \"url\": \"https://example.com/register?session={auth_session}\",\n            \"description\": \"Please complete the registration form\"\n        }\n    ]\n}\n</code></pre>"},{"location":"getting-started/issuance/credential-configuration/#supported-action-types","title":"Supported Action Types","text":"Action Type Description <code>openid4vp_presentation</code> Request a verifiable presentation from the wallet using OpenID4VP <code>redirect_to_web</code> Redirect user to a web page for additional interaction"},{"location":"getting-started/issuance/credential-configuration/#openid4vp-presentation-action","title":"OpenID4VP Presentation Action","text":"Field Required Description <code>type</code> Yes Must be <code>\"openid4vp_presentation\"</code> <code>label</code> No Display label for this step <code>presentationConfigId</code> Yes ID of the presentation configuration to use"},{"location":"getting-started/issuance/credential-configuration/#redirect-to-web-action","title":"Redirect to Web Action","text":"Field Required Description <code>type</code> Yes Must be <code>\"redirect_to_web\"</code> <code>label</code> No Display label for this step <code>url</code> Yes URL to redirect to (supports <code>{auth_session}</code> placeholder) <code>callbackUrl</code> No URL for the external service to redirect back to <code>description</code> No Instructions for the user (displayed in wallet) <p>Fallback Behavior</p> <p>If no <code>iaeActions</code> are configured, EUDIPLO falls back to the wallet's <code>interaction_types_supported</code> preference when using the authorization code flow.</p>"},{"location":"getting-started/issuance/credential-configuration/#complete-configuration-example","title":"Complete Configuration Example","text":"<p>Here's a complete example of a credential configuration (PID - Personal Identity Document) that demonstrates many of the available features:</p> <pre><code>{\n    \"id\": \"pid\",\n    \"description\": \"Personal ID\",\n    \"config\": {\n        \"scope\": \"pid\",\n        \"format\": \"dc+sd-jwt\",\n        \"display\": [\n            {\n                \"name\": \"PID\",\n                \"description\": \"PID Credential\",\n                \"locale\": \"en-US\",\n                \"background_color\": \"#FFFFFF\",\n                \"text_color\": \"#000000\",\n                \"background_image\": {\n                    \"uri\": \"identity-card.jpg\"\n                },\n                \"logo\": {\n                    \"uri\": \"logo.jpg\"\n                }\n            }\n        ]\n    },\n    \"claimsWebhook\": {\n        \"url\": \"http://localhost:8787/claims\",\n        \"auth\": {\n            \"type\": \"none\"\n        }\n    },\n    \"claims\": {\n        \"issuing_country\": \"DE\",\n        \"issuing_authority\": \"DE\",\n        \"source_document_type\": \"id_card\",\n        \"given_name\": \"ERIKA\",\n        \"family_name\": \"MUSTERMANN\",\n        \"birthdate\": \"1964-08-12\",\n        \"age_birth_year\": 1964,\n        \"age_in_years\": 61,\n        \"age_equal_or_over\": {\n            \"12\": true,\n            \"14\": true,\n            \"16\": true,\n            \"18\": true,\n            \"21\": true,\n            \"65\": false\n        },\n        \"place_of_birth\": {\n            \"locality\": \"BERLIN\"\n        },\n        \"address\": {\n            \"street_address\": \"HEIDESTRA\u1e9eE 17\",\n            \"locality\": \"K\u00d6LN\",\n            \"country\": \"DE\",\n            \"postal_code\": \"51147\"\n        },\n        \"nationalities\": [\n            \"DE\"\n        ]\n    },\n    \"disclosureFrame\": {\n        \"_sd\": [\n            \"issuing_country\",\n            \"issuing_authority\",\n            \"source_document_type\",\n            \"given_name\",\n            \"family_name\",\n            \"birthdate\",\n            \"age_birth_year\",\n            \"age_in_years\",\n            \"age_equal_or_over\",\n            \"place_of_birth\",\n            \"address\",\n            \"nationalities\"\n        ],\n        \"address\": {\n            \"_sd\": [\n                \"street_address\",\n                \"locality\",\n                \"country\",\n                \"postal_code\"\n            ]\n        }\n    },\n    \"vct\": \"urn:eudi:pid:de:1\",\n    \"keyBinding\": true,\n    \"statusManagement\": true,\n    \"lifeTime\": 604800,\n    \"schema\": {\n        \"$schema\": \"https://json-schema.org/draft/2020-12/schema\",\n        \"type\": \"object\",\n        \"properties\": {\n            \"issuing_country\": {\n                \"type\": \"string\",\n                \"title\": \"Issuing Country\"\n            },\n            \"issuing_authority\": {\n                \"type\": \"string\",\n                \"title\": \"Issuing Authority\"\n            },\n            \"source_document_type\": {\n                \"type\": \"string\",\n                \"title\": \"Source Document Type\"\n            },\n            \"given_name\": {\n                \"type\": \"string\",\n                \"title\": \"Given Name\"\n            },\n            \"family_name\": {\n                \"type\": \"string\",\n                \"title\": \"Family Name\"\n            },\n            \"birthdate\": {\n                \"type\": \"string\",\n                \"pattern\": \"^\\\\d{4}-\\\\d{2}-\\\\d{2}$\",\n                \"title\": \"Birthdate\"\n            },\n            \"age_birth_year\": {\n                \"type\": \"integer\",\n                \"title\": \"Birth Year\"\n            },\n            \"age_in_years\": {\n                \"type\": \"integer\",\n                \"title\": \"Age in Years\"\n            },\n            \"age_equal_or_over\": {\n                \"type\": \"object\",\n                \"title\": \"Age Equal or Over\",\n                \"properties\": {\n                    \"12\": {\n                        \"type\": \"boolean\",\n                        \"title\": \"12 or Over\"\n                    },\n                    \"14\": {\n                        \"type\": \"boolean\",\n                        \"title\": \"14 or Over\"\n                    },\n                    \"16\": {\n                        \"type\": \"boolean\",\n                        \"title\": \"16 or Over\"\n                    },\n                    \"18\": {\n                        \"type\": \"boolean\",\n                        \"title\": \"18 or Over\"\n                    },\n                    \"21\": {\n                        \"type\": \"boolean\",\n                        \"title\": \"21 or Over\"\n                    },\n                    \"65\": {\n                        \"type\": \"boolean\",\n                        \"title\": \"65 or Over\"\n                    }\n                },\n                \"required\": [\n                    \"12\",\n                    \"14\",\n                    \"16\",\n                    \"18\",\n                    \"21\",\n                    \"65\"\n                ]\n            },\n            \"place_of_birth\": {\n                \"type\": \"object\",\n                \"title\": \"Place of Birth\",\n                \"properties\": {\n                    \"locality\": {\n                        \"type\": \"string\",\n                        \"title\": \"Locality\"\n                    }\n                },\n                \"required\": [\n                    \"locality\"\n                ]\n            },\n            \"address\": {\n                \"type\": \"object\",\n                \"title\": \"Address\",\n                \"properties\": {\n                    \"street_address\": {\n                        \"type\": \"string\",\n                        \"title\": \"Street Address\"\n                    },\n                    \"locality\": {\n                        \"type\": \"string\",\n                        \"title\": \"Locality\"\n                    },\n                    \"country\": {\n                        \"type\": \"string\",\n                        \"title\": \"Country\"\n                    },\n                    \"postal_code\": {\n                        \"type\": \"string\",\n                        \"title\": \"Postal Code\"\n                    }\n                },\n                \"required\": [\n                    \"street_address\",\n                    \"locality\",\n                    \"country\",\n                    \"postal_code\"\n                ]\n            },\n            \"nationalities\": {\n                \"type\": \"array\",\n                \"title\": \"Nationalities\",\n                \"items\": {\n                    \"type\": \"string\",\n                    \"title\": \"Nationality\"\n                }\n            }\n        },\n        \"required\": [\n            \"issuing_country\",\n            \"issuing_authority\",\n            \"source_document_type\",\n            \"given_name\",\n            \"family_name\",\n            \"birthdate\",\n            \"age_birth_year\",\n            \"age_in_years\",\n            \"age_equal_or_over\",\n            \"place_of_birth\",\n            \"address\",\n            \"nationalities\"\n        ],\n        \"title\": \"PID Claims\",\n        \"description\": \"Schema for PID credential claims, describing personal and identity information fields.\"\n    }\n}\n</code></pre> <p>This example includes:</p> <ul> <li>Required fields: <code>id</code>, <code>config</code> with format and display information</li> <li>Optional fields: <code>description</code>, <code>vct</code>, <code>keyId</code>, <code>lifeTime</code>, <code>statusManagement</code>, <code>keyBinding</code></li> <li>Claims: Static claims that will be included in every issued credential</li> <li>Selective disclosure: <code>disclosureFrame</code> defining which claims can be selectively disclosed</li> <li>Display configuration: How the credential appears in wallets, including colors, logos, and images</li> </ul> <p>You can use it as a template or use the generated JSON Schema to create your own credential configurations by modifying the fields according to your requirements.</p>"},{"location":"getting-started/issuance/issuance-configuration/","title":"Issuance Configuration","text":""},{"location":"getting-started/issuance/issuance-configuration/#issuance-configuration","title":"Issuance Configuration","text":"<p>Issuance configurations define the parameters and settings for the issuance of credentials. This includes details such as the supported credential types, issuance policies, and any specific requirements for the issuance process.</p>"},{"location":"getting-started/issuance/issuance-configuration/#basic-structure","title":"Basic Structure","text":"<p>Example Issuance Configuration:</p> <pre><code>{\n    \"authServers\": [],\n    \"batchSize\": 10,\n    \"dPopRequired\": false,\n    \"display\": [\n        {\n            \"locale\": \"en-US\",\n            \"name\": \"EUDI Wallet dev\",\n            \"logo\": {\n                \"uri\": \"company.png\"\n            }\n        }\n    ]\n}\n</code></pre> <p>Info</p> <p>The auto generated schema reference can be found in the API Documentation</p>"},{"location":"getting-started/issuance/issuance-configuration/#configuration-fields","title":"Configuration Fields","text":"<ul> <li><code>authServers</code> (array of strings, optional): Authentication server URL for the issuance process.</li> <li><code>notifyWebhook</code> (object, optional): Webhook to send the result of the notification response. See Webhooks.</li> <li><code>batchSize</code> (number, optional): Value to determine the amount of credentials that are issued in a batch. Default is 1.</li> <li><code>dPopRequired</code> (boolean, optional): Indicates whether DPoP is required for the issuance process. Default value is true.</li> <li><code>walletAttestationRequired</code> (boolean, optional): Indicates whether wallet attestation is required for the token endpoint. Default value is false. See Wallet Attestation below.</li> <li><code>walletProviderTrustLists</code> (array of strings, optional): URLs of trust lists containing trusted wallet providers. Required when <code>walletAttestationRequired</code> is true.</li> <li><code>display</code> (array of objects, required): The display information from the OID4VCI spec. To host images or logos, you can use the storage system provided by EUDIPLO.</li> </ul>"},{"location":"getting-started/issuance/issuance-configuration/#wallet-attestation","title":"Wallet Attestation","text":"<p>Wallet attestation allows issuers to verify that credential requests come from trusted wallet applications. When enabled, wallets must provide OAuth Client Attestation headers at the token endpoint, as specified in RFC 9449 and the OID4VCI specification.</p>"},{"location":"getting-started/issuance/issuance-configuration/#how-it-works","title":"How It Works","text":"<ol> <li> <p>Wallet Provider Signs Attestation: The wallet provider (e.g., the wallet app vendor) signs a JWT attesting to the wallet instance's identity. This JWT includes an X.509 certificate chain in the <code>x5c</code> header.</p> </li> <li> <p>Wallet Sends Attestation: When requesting an access token, the wallet includes two headers:</p> <ul> <li><code>OAuth-Client-Attestation</code>: The wallet attestation JWT signed by the wallet provider</li> <li><code>OAuth-Client-Attestation-PoP</code>: A proof-of-possession JWT signed by the wallet instance</li> </ul> </li> <li> <p>Issuer Validates: EUDIPLO validates the attestation by:</p> <ul> <li>Verifying the JWT signature using the X.509 certificate from the <code>x5c</code> header</li> <li>Verifying the proof-of-possession (PoP) JWT</li> <li>Checking that the wallet provider's certificate is trusted according to the configured trust lists</li> </ul> </li> </ol>"},{"location":"getting-started/issuance/issuance-configuration/#configuration","title":"Configuration","text":"<p>To enable wallet attestation, set <code>walletAttestationRequired</code> to <code>true</code> and provide at least one trust list URL:</p> <pre><code>{\n    \"walletAttestationRequired\": true,\n    \"walletProviderTrustLists\": [\"https://trust-list.example.eu/wallet-providers\"]\n}\n</code></pre>"},{"location":"getting-started/issuance/issuance-configuration/#trust-lists","title":"Trust Lists","text":"<p>Trust lists must be in the LoTE (List of Trusted Entities) format as defined by ETSI TS 119 612. The trust list should contain entries with the service type <code>http://uri.etsi.org/19602/SvcType/WalletProvider</code>.</p> <p>Each trusted entity in the list includes X.509 certificates that identify authorized wallet providers. When a wallet presents an attestation, EUDIPLO verifies that the signing certificate chains to one of these trusted certificates.</p>"},{"location":"getting-started/issuance/issuance-configuration/#status-claim","title":"Status Claim","text":"<p>The wallet attestation JWT may optionally contain a <code>status</code> claim that provides a URI for checking the current validity or revocation status of the attestation. According to the OAuth Attestation-Based Client Authentication specification, this claim is optional.</p> <p>Current Behavior</p> <p>EUDIPLO currently does not check the <code>status</code> claim in wallet attestations. Attestations are validated based on:</p> <ul> <li>JWT signature verification</li> <li>Proof-of-possession verification</li> <li>X.509 certificate chain validation against configured trust lists</li> </ul> <p>If your use case requires status checking (e.g., for revoked wallet instances), this would need to be implemented as an additional validation step.</p> <p>Important</p> <p>If <code>walletAttestationRequired</code> is set to <code>true</code> but no trust lists are configured, all wallet requests will be rejected. Always configure at least one trust list when enabling wallet attestation.</p> <p>EUDI Wallet Ecosystem</p> <p>In the EUDI Wallet ecosystem, trust lists are typically published by EU member states or the European Commission, containing the certificates of approved wallet providers.</p>"},{"location":"getting-started/issuance/issuance-configuration/#chained-authorization-server","title":"Chained Authorization Server","text":"<p>Chained AS mode allows EUDIPLO to act as an OAuth Authorization Server facade, delegating user authentication to an upstream OIDC provider (e.g., Keycloak) while issuing its own access tokens containing <code>issuer_state</code> for session correlation.</p> <p>This approach enables credential issuance flows that require user authentication without modifying your existing OIDC provider.</p>"},{"location":"getting-started/issuance/issuance-configuration/#when-to-use-chained-as","title":"When to Use Chained AS","text":"Use Case Recommendation Need session correlation with <code>issuer_state</code> \u2705 Use Chained AS Cannot modify upstream OIDC provider \u2705 Use Chained AS Want EUDIPLO to control token claims \u2705 Use Chained AS Upstream already includes <code>issuer_state</code> \u274c Use External AS directly Pre-authorized code flow only \u274c Not needed"},{"location":"getting-started/issuance/issuance-configuration/#how-it-works_1","title":"How It Works","text":"<pre><code>sequenceDiagram\n    autonumber\n    participant Wallet as EUDI Wallet\n    participant EUDIPLO as EUDIPLO (Chained AS)\n    participant Upstream as Upstream OIDC (e.g., Keycloak)\n\n    Wallet-&gt;&gt;EUDIPLO: PAR Request\n    EUDIPLO--&gt;&gt;Wallet: request_uri\n\n    Wallet-&gt;&gt;EUDIPLO: Authorize (request_uri)\n    EUDIPLO-&gt;&gt;Upstream: Redirect to upstream /authorize\n\n    Note over Upstream: User authenticates\n\n    Upstream-&gt;&gt;EUDIPLO: Callback with authorization code\n    EUDIPLO-&gt;&gt;Upstream: Exchange code for tokens\n    Upstream--&gt;&gt;EUDIPLO: ID token + access token\n\n    EUDIPLO-&gt;&gt;EUDIPLO: Store upstream identity\n    EUDIPLO--&gt;&gt;Wallet: Redirect with EUDIPLO auth code\n\n    Wallet-&gt;&gt;EUDIPLO: Token Request (code + PKCE)\n    EUDIPLO--&gt;&gt;Wallet: EUDIPLO access token (with issuer_state)\n\n    Wallet-&gt;&gt;EUDIPLO: Credential Request\n    Note over EUDIPLO: Correlate session via issuer_state\n    EUDIPLO--&gt;&gt;Wallet: Credential</code></pre>"},{"location":"getting-started/issuance/issuance-configuration/#configuration_1","title":"Configuration","text":"<p>Add the <code>chainedAs</code> object to your issuance configuration:</p> <pre><code>{\n  \"display\": [...],\n  \"chainedAs\": {\n    \"enabled\": true,\n    \"upstream\": {\n      \"issuer\": \"https://keycloak.example.com/realms/eudiplo\",\n      \"clientId\": \"eudiplo-chained-as\",\n      \"clientSecret\": \"your-client-secret\",\n      \"scopes\": [\"openid\", \"profile\", \"email\"]\n    },\n    \"token\": {\n      \"lifetimeSeconds\": 3600,\n      \"signingKeyId\": \"default\"\n    },\n    \"requireDPoP\": false\n  }\n}\n</code></pre>"},{"location":"getting-started/issuance/issuance-configuration/#configuration-fields_1","title":"Configuration Fields","text":"Field Type Required Description <code>chainedAs.enabled</code> boolean Yes Enable Chained AS mode <code>chainedAs.upstream.issuer</code> string Yes Upstream OIDC provider URL (must support discovery) <code>chainedAs.upstream.clientId</code> string Yes Client ID registered at upstream provider <code>chainedAs.upstream.clientSecret</code> string Yes Client secret for upstream provider <code>chainedAs.upstream.scopes</code> string[] No Scopes to request (default: <code>[\"openid\", \"profile\", \"email\"]</code>) <code>chainedAs.token.lifetimeSeconds</code> number No Access token lifetime in seconds (default: 3600) <code>chainedAs.token.signingKeyId</code> string No Key ID for signing tokens (uses default signing key if omitted) <code>chainedAs.requireDPoP</code> boolean No Require DPoP proof from wallets (default: false)"},{"location":"getting-started/issuance/issuance-configuration/#upstream-oidc-provider-setup","title":"Upstream OIDC Provider Setup","text":"<p>Configure your upstream OIDC provider (e.g., Keycloak) with:</p> <ol> <li>Client Type: Confidential client with client credentials</li> <li>Redirect URI: <code>https://your-eudiplo-url/{tenant}/chained-as/callback</code></li> <li>Scopes: Enable <code>openid</code>, <code>profile</code>, <code>email</code> (or as needed)</li> </ol>"},{"location":"getting-started/issuance/issuance-configuration/#endpoints","title":"Endpoints","text":"<p>When Chained AS is enabled, the following endpoints become available:</p> Endpoint Method Description <code>/{tenant}/chained-as/par</code> POST Pushed Authorization Request <code>/{tenant}/chained-as/authorize</code> GET Authorization endpoint <code>/{tenant}/chained-as/callback</code> GET Upstream callback handler <code>/{tenant}/chained-as/token</code> POST Token endpoint <code>/{tenant}/chained-as/.well-known/oauth-authorization-server</code> GET AS metadata <code>/{tenant}/chained-as/.well-known/jwks.json</code> GET JSON Web Key Set"},{"location":"getting-started/issuance/issuance-configuration/#token-claims","title":"Token Claims","text":"<p>Access tokens issued by the Chained AS include:</p> <pre><code>{\n    \"iss\": \"https://eudiplo.example.com/{tenant}/chained-as\",\n    \"sub\": \"{client_id}\",\n    \"aud\": \"https://eudiplo.example.com/{tenant}\",\n    \"issuer_state\": \"{session_id}\",\n    \"client_id\": \"{wallet_client_id}\",\n    \"upstream_sub\": \"{upstream_user_subject}\",\n    \"upstream_iss\": \"{upstream_issuer}\",\n    \"cnf\": { \"jkt\": \"{dpop_thumbprint}\" }\n}\n</code></pre> <p>Session Correlation</p> <p>The <code>issuer_state</code> claim links the access token to the credential offer session, enabling EUDIPLO to correlate the credential request with the original offer without requiring the upstream OIDC provider to include custom claims.</p> <p>Client Secret Security</p> <p>Store the upstream client secret securely. Consider using environment variables or a secrets manager rather than storing it directly in configuration files.</p>"},{"location":"getting-started/presentation/","title":"Overview","text":""},{"location":"getting-started/presentation/#credential-presentation","title":"Credential Presentation","text":"<p>EUDIPLO provides comprehensive credential presentation capabilities using OpenID4VP (OpenID for Verifiable Presentations). This system allows verifiers to request specific credentials and claims from users, enabling secure identity verification and attribute validation.</p>"},{"location":"getting-started/presentation/#overview","title":"Overview","text":"<p>Credential presentation enables verifiers to:</p> <ul> <li>Request specific credentials from users' wallets</li> <li>Verify authenticity of presented credentials</li> <li>Extract required claims for authorization or validation</li> <li>Maintain privacy by requesting only necessary information</li> <li>Support multiple presentation flows for different use cases</li> </ul> <p>EUDIPLO supports both standalone presentation flows and presentation as part of credential issuance via the Interactive Authorization Endpoint (IAE), providing flexibility for various business requirements.</p>"},{"location":"getting-started/presentation/#key-concepts","title":"Key Concepts","text":""},{"location":"getting-started/presentation/#presentation-flows","title":"Presentation Flows","text":"<p>EUDIPLO supports multiple presentation scenarios:</p> <ul> <li> <p>Standard Presentation Flow</p> <ul> <li>Direct credential verification requests</li> <li>Used for access control and identity verification</li> <li>Returns verified claims to the requesting service</li> </ul> </li> <li> <p>Presentation via Interactive Authorization (IAE)</p> <ul> <li>Credentials presented as part of the issuance authorization flow</li> <li>Enables qualification-based credential issuance</li> <li>Supports multi-step workflows combining presentations with web-based verification</li> <li>See Interactive Authorization Endpoint for details</li> </ul> </li> </ul>"},{"location":"getting-started/presentation/#dcql-digital-credentials-query-language","title":"DCQL (Digital Credentials Query Language)","text":"<p>EUDIPLO uses DCQL to define presentation requests:</p> <ul> <li>Structured queries for specific credentials and claims</li> <li>Format specification (e.g., <code>dc+sd-jwt</code>)</li> <li>Selective disclosure of only required attributes</li> <li>VCT (Verifiable Credential Type) targeting for precise credential matching</li> </ul>"},{"location":"getting-started/presentation/#registration-certificates","title":"Registration Certificates","text":"<p>All presentation requests include registration certificates that provide:</p> <ul> <li>Legal basis for data processing</li> <li>Privacy policy information</li> <li>Contact details for data protection inquiries</li> <li>Purpose statements explaining why data is requested</li> </ul>"},{"location":"getting-started/presentation/#architecture","title":"Architecture","text":""},{"location":"getting-started/presentation/#tenant-based-configuration","title":"Tenant-Based Configuration","text":"<p>EUDIPLO uses a tenant-based architecture where:</p> <ul> <li>Each tenant has isolated presentation configurations</li> <li>Configurations are stored securely in the database</li> <li>API access is scoped to the authenticated tenant</li> <li>Multi-tenant deployments maintain strict data isolation</li> </ul>"},{"location":"getting-started/presentation/#session-management","title":"Session Management","text":"<p>Presentation flows create sessions that:</p> <ul> <li>Track the presentation request lifecycle</li> <li>Store temporary data during the exchange</li> <li>Enable asynchronous processing via webhooks</li> <li>Maintain audit trails for compliance</li> </ul>"},{"location":"getting-started/presentation/#quick-start","title":"Quick Start","text":"<p>To manage presentation configurations, have a look at the API Documentation about the verifier. There you will find the endpoints to manage presentation configs and also to create presentation requests.</p>"},{"location":"getting-started/presentation/#flow-diagrams","title":"Flow Diagrams","text":""},{"location":"getting-started/presentation/#standard-presentation-flow","title":"Standard Presentation Flow","text":"<pre><code>sequenceDiagram\n    actor User\n    participant Wallet\n    participant Verifier\n    participant EUDIPLO\n\n    Verifier-&gt;&gt;EUDIPLO: Create presentation request\n    EUDIPLO--&gt;&gt;Verifier: Return presentation URI\n    Verifier-&gt;&gt;User: Display QR code or link\n    User-&gt;&gt;Wallet: Scan QR or click link\n    Wallet-&gt;&gt;EUDIPLO: Initiate OID4VP flow\n    EUDIPLO-&gt;&gt;Wallet: Send presentation request\n    Wallet-&gt;&gt;User: Request consent for data sharing\n    User-&gt;&gt;Wallet: Approve presentation\n    Wallet-&gt;&gt;EUDIPLO: Submit verifiable presentation\n    EUDIPLO-&gt;&gt;Verifier: Send verified claims (webhook)</code></pre>"},{"location":"getting-started/presentation/#presentation-via-interactive-authorization-iae","title":"Presentation via Interactive Authorization (IAE)","text":"<p>The Interactive Authorization Endpoint enables presentation requests as part of credential issuance. This flow uses OID4VCI 1.1's authorization code flow with interactive authorization.</p> <pre><code>sequenceDiagram\n    actor User\n    participant Wallet\n    participant EUDIPLO\n    participant Backend as Your Backend\n\n    Wallet-&gt;&gt;EUDIPLO: Authorization Request (interaction_types_supported)\n    EUDIPLO--&gt;&gt;Wallet: IAE Response (openid4vp)\n    Wallet-&gt;&gt;User: Request presentation consent\n    User-&gt;&gt;Wallet: Approve presentation\n    Wallet-&gt;&gt;EUDIPLO: Submit OpenID4VP presentation\n    EUDIPLO-&gt;&gt;Backend: Claims webhook (verified claims)\n    Backend--&gt;&gt;EUDIPLO: Return issuance claims\n    EUDIPLO--&gt;&gt;Wallet: Authorization Code\n    Wallet-&gt;&gt;EUDIPLO: Token Request\n    EUDIPLO--&gt;&gt;Wallet: Access Token\n    Wallet-&gt;&gt;EUDIPLO: Credential Request\n    EUDIPLO--&gt;&gt;Wallet: Issued Credential</code></pre> <p>For multi-step flows and configuration details, see Interactive Authorization Endpoint.</p>"},{"location":"getting-started/presentation/#security-considerations","title":"Security Considerations","text":""},{"location":"getting-started/presentation/#data-minimization","title":"Data Minimization","text":"<ul> <li>Request only necessary claims to protect user privacy</li> <li>Use selective disclosure to limit exposed information</li> <li>Implement purpose limitation through clear registration certificates</li> </ul>"},{"location":"getting-started/presentation/#authentication","title":"Authentication","text":"<ul> <li>OAuth 2.0 bearer tokens for API authentication</li> <li>Tenant isolation prevents cross-tenant data access</li> <li>Session-based security with automatic cleanup</li> </ul>"},{"location":"getting-started/presentation/#trust-verification","title":"Trust Verification","text":"<ul> <li>Cryptographic validation of presented credentials</li> <li>Issuer verification against trusted entities in trust lists</li> <li>Revocation status checking using the correct revocation certificate from   the same trusted entity</li> </ul> <p>For detailed information on how trust verification works, see Trust Framework.</p>"},{"location":"getting-started/presentation/presentation-configuration/","title":"Presentation Configuration","text":""},{"location":"getting-started/presentation/presentation-configuration/#presentation-configuration","title":"Presentation Configuration","text":"<p>This guide covers how to create, manage, and configure presentation requests in EUDIPLO. Presentation configurations define what credentials and claims should be requested from users.</p>"},{"location":"getting-started/presentation/presentation-configuration/#configuration-structure","title":"Configuration Structure","text":"<p>Example Presentation Configuration (PID):</p> <pre><code>{\n  \"id\": \"pid\",\n  \"description\": \"Presentation ID\",\n  \"dcql_query\": {\n    \"credentials\": [\n      {\n        \"id\": \"pid\",\n        \"format\": \"dc+sd-jwt\",\n        \"meta\": {\n          \"vct_values\": [\n            \"&lt;TENANT_URL&gt;/credentials-metadata/vct/pid\"\n          ]\n        },\n        \"claims\": [\n          {\n            \"path\": [\n              \"address\",\n              \"locality\"\n            ]\n          }\n        ],\n        \"trusted_authorities\": [\n          {\n            \"type\": \"etsi_tl\",\n            \"values\": [\n              \"&lt;TENANT_URL&gt;/trust-list/580831bc-ef11-43f4-a3be-a2b6bf1b29a3\"\n            ]\n          }\n        ]\n      }\n    ]\n  },\n  \"webhook\": {\n    \"url\": \"http://localhost:8787/consume\",\n    \"auth\": {\n      \"type\": \"apiKey\",\n      \"config\": {\n        \"headerName\": \"x-api-key\",\n        \"value\": \"foo-bar\"\n      }\n    }\n  }\n}\n</code></pre>"},{"location":"getting-started/presentation/presentation-configuration/#configuration-fields","title":"Configuration Fields","text":"<ul> <li><code>id</code>: REQUIRED - Unique identifier for the presentation configuration.</li> <li><code>description</code>: REQUIRED - Human-readable description of the presentation. Will not be displayed to the end user.</li> <li><code>dcql_query</code>: REQUIRED - DCQL query defining the requested credentials and claims following the DCQL specification</li> <li><code>registrationCert</code>: OPTIONAL - Registration certificate containing legal and privacy information about the verifier. See Registration Certificate for details.</li> <li><code>webhook</code>: OPTIONAL - Webhook configuration for receiving verified presentations asynchronously. See Webhook Integration for details.</li> <li><code>redirectUri</code>: OPTIONAL - URI to redirect the user to after completing the presentation. This is useful for web applications that need to return the user to a specific page after verification. You can use the <code>{sessionId}</code> placeholder in the URI, which will be replaced with the actual session ID (e.g., <code>https://example.com/callback?session={sessionId}</code>).</li> <li><code>transaction_data</code>: OPTIONAL - Array of transaction data objects to include in the OID4VP authorization request. See Transaction Data for details.</li> </ul> <p>Info</p> <p>If no webhook is configured, the presentation result can be fetched by querying the <code>/session</code> endpoint with the <code>sessionId</code>.</p>"},{"location":"getting-started/presentation/transaction-data/","title":"Transaction Data","text":""},{"location":"getting-started/presentation/transaction-data/#transaction-data","title":"Transaction Data","text":"<p>Transaction data allows you to include additional context in the OID4VP authorization request. This is useful for scenarios where the verifier needs to convey transaction-specific information that the wallet can display to the user for informed consent.</p>"},{"location":"getting-started/presentation/transaction-data/#overview","title":"Overview","text":"<p>When requesting credentials from a user's wallet, you may need to provide context about why the credentials are being requested. Transaction data enables this by:</p> <ul> <li>Providing transaction context to the wallet and user</li> <li>Enabling informed consent by showing what the credentials will be used for</li> <li>Supporting various use cases like payments, contract signing, or access control</li> </ul>"},{"location":"getting-started/presentation/transaction-data/#configuration","title":"Configuration","text":"<p>Transaction data is defined as an array of objects. It can be configured at two levels:</p> <ol> <li>Presentation Configuration - Default transaction data for all requests using this configuration</li> <li>Request Time - Override or provide transaction data when creating a specific presentation request</li> </ol>"},{"location":"getting-started/presentation/transaction-data/#in-presentation-configuration","title":"In Presentation Configuration","text":"<p>Add transaction data to your presentation configuration:</p> <pre><code>{\n    \"id\": \"payment-verification\",\n    \"description\": \"Payment verification with transaction details\",\n    \"dcql_query\": {\n        \"credentials\": [\n            {\n                \"id\": \"pid\",\n                \"format\": \"dc+sd-jwt\",\n                \"meta\": {\n                    \"vct_values\": [\"urn:eudi:pid:1\"]\n                }\n            }\n        ]\n    },\n    \"transaction_data\": [\n        {\n            \"type\": \"payment\",\n            \"credential_ids\": [\"pid\"],\n            \"amount\": 100,\n            \"currency\": \"EUR\",\n            \"merchant\": \"Example Store\"\n        }\n    ]\n}\n</code></pre>"},{"location":"getting-started/presentation/transaction-data/#at-request-time","title":"At Request Time","text":"<p>When creating a presentation request via the <code>/verifier/offer</code> endpoint, you can provide or override transaction data:</p> <pre><code>{\n    \"requestId\": \"payment-verification\",\n    \"response_type\": \"uri\",\n    \"transaction_data\": [\n        {\n            \"type\": \"payment\",\n            \"credential_ids\": [\"pid\"],\n            \"amount\": 250,\n            \"currency\": \"EUR\",\n            \"merchant\": \"Different Store\"\n        }\n    ]\n}\n</code></pre> <p>Override Behavior</p> <p>When <code>transaction_data</code> is provided in the request, it completely replaces any transaction data defined in the presentation configuration. The two are not merged.</p>"},{"location":"getting-started/presentation/transaction-data/#fields","title":"Fields","text":"<p>Each transaction data object must include the following required fields:</p> Field Type Required Description <code>type</code> string Yes Identifies the type of transaction (e.g., <code>\"payment\"</code>, <code>\"age_verification\"</code>, <code>\"contract_signing\"</code>) <code>credential_ids</code> string[] Yes Array of credential IDs from the DCQL query that this transaction data relates to <p>Additional properties can be added based on the transaction type to provide context-specific information.</p>"},{"location":"getting-started/presentation/transaction-data/#use-cases","title":"Use Cases","text":""},{"location":"getting-started/presentation/transaction-data/#payment-authorization","title":"Payment Authorization","text":"<p>Include payment details so users can verify the transaction before sharing credentials:</p> <pre><code>{\n    \"type\": \"payment\",\n    \"credential_ids\": [\"pid\"],\n    \"amount\": 49.99,\n    \"currency\": \"EUR\",\n    \"merchant\": \"Online Shop GmbH\",\n    \"reference\": \"ORDER-12345\"\n}\n</code></pre>"},{"location":"getting-started/presentation/transaction-data/#age-verification","title":"Age Verification","text":"<p>Specify the minimum age requirement for age-restricted services:</p> <pre><code>{\n    \"type\": \"age_verification\",\n    \"credential_ids\": [\"pid\"],\n    \"minimum_age\": 18,\n    \"service\": \"Alcohol Purchase\"\n}\n</code></pre>"},{"location":"getting-started/presentation/transaction-data/#contract-signing","title":"Contract Signing","text":"<p>Reference document details for contract or agreement signing:</p> <pre><code>{\n    \"type\": \"contract_signing\",\n    \"credential_ids\": [\"pid\"],\n    \"document_hash\": \"sha256:abc123...\",\n    \"document_title\": \"Service Agreement\",\n    \"signing_date\": \"2026-01-25\"\n}\n</code></pre>"},{"location":"getting-started/presentation/transaction-data/#access-control","title":"Access Control","text":"<p>Include resource or permission information for access control scenarios:</p> <pre><code>{\n    \"type\": \"access_control\",\n    \"credential_ids\": [\"employee_badge\"],\n    \"resource\": \"Building A - Floor 3\",\n    \"access_level\": \"visitor\",\n    \"valid_until\": \"2026-01-25T18:00:00Z\"\n}\n</code></pre>"},{"location":"getting-started/presentation/transaction-data/#best-practices","title":"Best Practices","text":"<ol> <li>Be specific with types - Use clear, descriptive type values that indicate the purpose</li> <li>Include relevant context - Add properties that help users understand what they're consenting to</li> <li>Match credential_ids - Ensure the <code>credential_ids</code> reference valid credentials from your DCQL query</li> <li>Keep it minimal - Only include information necessary for informed consent</li> </ol>"}]}