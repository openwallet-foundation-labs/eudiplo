<!doctype html>
<html class="no-js" lang="">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="x-ua-compatible" content="ie=edge">
        <title>@eudiplo/backend documentation</title>
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">

        <link rel="icon" type="image/x-icon" href="../images/favicon.ico">
	   <link rel="stylesheet" href="../styles/style.css">
        <link rel="stylesheet" href="../styles/dark.css">
        <link rel="stylesheet" href="../styles/material.css">
    </head>
    <body>
          <script>
               // Blocking script to avoid flickering dark mode
               // Dark mode toggle button
               var useDark = window.matchMedia('(prefers-color-scheme: dark)');
               var darkModeState = useDark.matches;
               var $darkModeToggleSwitchers = document.querySelectorAll('.dark-mode-switch input');
               var $darkModeToggles = document.querySelectorAll('.dark-mode-switch');
               var darkModeStateLocal = localStorage.getItem('compodoc_darkmode-state');

               function checkToggle(check) {
                    for (var i = 0; i < $darkModeToggleSwitchers.length; i++) {
                         $darkModeToggleSwitchers[i].checked = check;
                    }
               }

               function toggleDarkMode(state) {
                    if (window.localStorage) {
                         localStorage.setItem('compodoc_darkmode-state', state);
                    }

                    checkToggle(state);

                    const hasClass = document.body.classList.contains('dark');

                    if (state) {
                         for (var i = 0; i < $darkModeToggles.length; i++) {
                              $darkModeToggles[i].classList.add('dark');
                         }
                         if (!hasClass) {
                              document.body.classList.add('dark');
                         }
                    } else {
                         for (var i = 0; i < $darkModeToggles.length; i++) {
                              $darkModeToggles[i].classList.remove('dark');
                         }
                         if (hasClass) {
                              document.body.classList.remove('dark');
                         }
                    }
               }

               useDark.addEventListener('change', function (evt) {
                    toggleDarkMode(evt.matches);
               });
               if (darkModeStateLocal) {
                    darkModeState = darkModeStateLocal === 'true';
               }
               toggleDarkMode(darkModeState);
          </script>
          <script>
              // --- Iframe navigation tracking for Template Playground ---
              function sendCurrentUrlToParent() {
                  if (window.parent && window.parent !== window) {
                      window.parent.postMessage({
                          type: 'compodoc-iframe-navigate',
                          url: window.location.pathname + window.location.hash
                      }, '*');
                  }
              }
              window.addEventListener('hashchange', sendCurrentUrlToParent, false);
              window.addEventListener('popstate', sendCurrentUrlToParent, false);
              window.addEventListener('DOMContentLoaded', sendCurrentUrlToParent, false);
          </script>

        <div class="navbar navbar-default navbar-fixed-top d-md-none p-0">
               <div class="d-flex">
                    <a href="../" class="navbar-brand">@eudiplo/backend documentation</a>
                    <button type="button" class="btn btn-default btn-menu ion-ios-menu" id="btn-menu"></button>
               </div>
        </div>

        <div class="xs-menu menu" id="mobile-menu">
                <div id="book-search-input" role="search"><input type="text" placeholder="Type to search"></div>            <compodoc-menu></compodoc-menu>
        </div>

        <div class="container-fluid main">
           <div class="row main">
               <div class="d-none d-md-block menu">
                   <compodoc-menu mode="normal"></compodoc-menu>
               </div>
               <!-- START CONTENT -->
               <div class="content class">
                   <div class="content-data">
















<ol class="breadcrumb">
  <li class="breadcrumb-item">Classes</li>
  <li class="breadcrumb-item" >TokenErrorException</li>
</ol>

<ul class="nav nav-tabs" role="tablist">
        <li class="nav-item">
            <a href="#info" 
                class="nav-link"
                class="nav-link active"
                role="tab" id="info-tab" data-bs-toggle="tab" data-link="info">Info</a>
        </li>
        <li class="nav-item">
            <a href="#source" 
                class="nav-link"
                
                role="tab" id="source-tab" data-bs-toggle="tab" data-link="source">Source</a>
        </li>
</ul>

<div class="tab-content">
    <div class="tab-pane fade active in" id="info">
        <p class="comment">
            <h3>File</h3>
        </p>
        <p class="comment">
            <code>src/issuer/issuance/oid4vci/exceptions/token-error.exception.ts</code>
        </p>


            <p class="comment">
                <h3>Description</h3>
            </p>
            <p class="comment">
                <p>Exception for OAuth 2.0 Token Error responses.</p>
<p>According to RFC 6749 Section 5.2 and OID4VCI Section 6.3, the response
MUST use HTTP status code 400 and contain <code>error</code> and optionally <code>error_description</code>.</p>
<p>Error codes from RFC 6749:</p>
<ul>
<li><code>invalid_request</code>: The request is missing a required parameter, includes an
unsupported parameter value (other than grant type), repeats a parameter,
includes multiple credentials, utilizes more than one mechanism for
authenticating the client, or is otherwise malformed.</li>
<li><code>invalid_client</code>: Client authentication failed (e.g., unknown client, no
client authentication included, or unsupported authentication method).</li>
<li><code>invalid_grant</code>: The provided authorization grant (e.g., authorization
code, resource owner credentials) or refresh token is invalid, expired,
revoked, does not match the redirection URI used in the authorization
request, or was issued to another client.</li>
<li><code>unauthorized_client</code>: The authenticated client is not authorized to use
this authorization grant type.</li>
<li><code>unsupported_grant_type</code>: The authorization grant type is not supported
by the authorization server.</li>
<li><code>invalid_scope</code>: The requested scope is invalid, unknown, malformed, or
exceeds the scope granted by the resource owner.</li>
</ul>

            </p>

            <p class="comment">
                <h3>Extends</h3>
            </p>
            <p class="comment">
                        <code>HttpException</code>
            </p>




            <section data-compodoc="block-constructor">
    <h3 id="constructor">Constructor</h3>
        <table class="table table-sm table-bordered">
            <tbody>
                <tr>
                    <td class="col-md-4">
<code>constructor(error: <a href="../miscellaneous/typealiases.html#TokenErrorCode" target="_self">TokenErrorCode</a>, errorDescription?: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank">string</a>)</code>
                    </td>
                </tr>
                        <tr>
                            <td class="col-md-4">
                                <div class="io-line">Defined in <a href="" data-line="50" class="link-to-prism">src/issuer/issuance/oid4vci/exceptions/token-error.exception.ts:50</a></div>
                            </td>
                        </tr>

                <tr>
                    <td class="col-md-4">
                            <div>
                                    <b>Parameters :</b>
                                    <table class="params">
                                        <thead>
                                            <tr>
                                                <td>Name</td>
                                                    <td>Type</td>
                                                <td>Optional</td>
                                            </tr>
                                        </thead>
                                        <tbody>
                                                <tr>
                                                        <td>error</td>
                                                  
                                                        <td>
                                                                        <code><a href="../miscellaneous/typealiases.html#TokenErrorCode" target="_self" >TokenErrorCode</a></code>
                                                        </td>
                                                  
                                                    <td>
                                                            No
                                                    </td>
                                                    
                                                </tr>
                                                <tr>
                                                        <td>errorDescription</td>
                                                  
                                                        <td>
                                                                        <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank" >string</a></code>
                                                        </td>
                                                  
                                                    <td>
                                                            Yes
                                                    </td>
                                                    
                                                </tr>
                                        </tbody>
                                    </table>
                            </div>
                    </td>
                </tr>
            </tbody>
        </table>
</section>








    </div>


    <div class="tab-pane fade  tab-source-code" id="source">
        <pre class="line-numbers compodoc-sourcecode"><code class="language-typescript">import { HttpException, HttpStatus } from &quot;@nestjs/common&quot;;

/**
 * OAuth 2.0 Token Error Codes as defined in:
 * - RFC 6749 Section 5.2 (https://www.rfc-editor.org/rfc/rfc6749#section-5.2)
 * - OID4VCI Section 6.3 (https://openid.net/specs/openid-4-verifiable-credential-issuance-1_0.html#name-token-error-response)
 *
 * OID4VCI specific clarifications:
 * - &#x60;invalid_request&#x60;:
 *   - The Authorization Server does not expect a Transaction Code in the Pre-Authorized Code Flow but the Client provides one.
 *   - The Authorization Server expects a Transaction Code in the Pre-Authorized Code Flow but the Client does not provide one.
 * - &#x60;invalid_grant&#x60;:
 *   - The Authorization Server expects a Transaction Code in the Pre-Authorized Code Flow but the Client provides the wrong Transaction Code.
 *   - The End-User provides the wrong Pre-Authorized Code or the Pre-Authorized Code has expired.
 * - &#x60;invalid_client&#x60;:
 *   - The Client tried to send a Token Request with a Pre-Authorized Code without a Client ID but the Authorization Server does not support anonymous access.
 */
export type TokenErrorCode &#x3D;
    | &quot;invalid_request&quot;
    | &quot;invalid_client&quot;
    | &quot;invalid_grant&quot;
    | &quot;unauthorized_client&quot;
    | &quot;unsupported_grant_type&quot;
    | &quot;invalid_scope&quot;;

/**
 * Exception for OAuth 2.0 Token Error responses.
 *
 * According to RFC 6749 Section 5.2 and OID4VCI Section 6.3, the response
 * MUST use HTTP status code 400 and contain &#x60;error&#x60; and optionally &#x60;error_description&#x60;.
 *
 * Error codes from RFC 6749:
 * - &#x60;invalid_request&#x60;: The request is missing a required parameter, includes an
 *   unsupported parameter value (other than grant type), repeats a parameter,
 *   includes multiple credentials, utilizes more than one mechanism for
 *   authenticating the client, or is otherwise malformed.
 * - &#x60;invalid_client&#x60;: Client authentication failed (e.g., unknown client, no
 *   client authentication included, or unsupported authentication method).
 * - &#x60;invalid_grant&#x60;: The provided authorization grant (e.g., authorization
 *   code, resource owner credentials) or refresh token is invalid, expired,
 *   revoked, does not match the redirection URI used in the authorization
 *   request, or was issued to another client.
 * - &#x60;unauthorized_client&#x60;: The authenticated client is not authorized to use
 *   this authorization grant type.
 * - &#x60;unsupported_grant_type&#x60;: The authorization grant type is not supported
 *   by the authorization server.
 * - &#x60;invalid_scope&#x60;: The requested scope is invalid, unknown, malformed, or
 *   exceeds the scope granted by the resource owner.
 */
export class TokenErrorException extends HttpException {
    constructor(error: TokenErrorCode, errorDescription?: string) {
        const response: {
            error: TokenErrorCode;
            error_description?: string;
        } &#x3D; {
            error,
        };
        if (errorDescription) {
            response.error_description &#x3D; errorDescription;
        }
        super(response, HttpStatus.BAD_REQUEST);
    }
}
</code></pre>
    </div>
</div>









                   </div><div class="search-results">
    <div class="has-results">
        <h1 class="search-results-title"><span class='search-results-count'></span> results matching "<span class='search-query'></span>"</h1>
        <ul class="search-results-list"></ul>
    </div>
    <div class="no-results">
        <h1 class="search-results-title">No results matching "<span class='search-query'></span>"</h1>
    </div>
</div>
</div>
               <!-- END CONTENT -->
           </div>
       </div>

          <label class="dark-mode-switch">
               <input type="checkbox">
               <span class="slider">
                    <svg class="slider-icon" viewBox="0 0 24 24" fill="none" height="20" stroke="#000" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" width="20" xmlns="http://www.w3.org/2000/svg">
                    <path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"></path>
                    </svg>
               </span>
          </label>

       <script>
            var COMPODOC_CURRENT_PAGE_DEPTH = 1;
            var COMPODOC_CURRENT_PAGE_CONTEXT = 'class';
            var COMPODOC_CURRENT_PAGE_URL = 'TokenErrorException.html';
            var MAX_SEARCH_RESULTS = 15;
       </script>

       <script>
               $darkModeToggleSwitchers = document.querySelectorAll('.dark-mode-switch input');
               checkToggle(darkModeState);
               if ($darkModeToggleSwitchers.length > 0) {
                    for (var i = 0; i < $darkModeToggleSwitchers.length; i++) {
                         $darkModeToggleSwitchers[i].addEventListener('change', function (event) {
                              darkModeState = !darkModeState;
                              toggleDarkMode(darkModeState);
                         });
                    }
               }
          </script>

       <script src="../js/libs/custom-elements.min.js"></script>
       <script src="../js/libs/lit-html.js"></script>

       <script src="../js/menu-wc.js" defer></script>
       <script nomodule src="../js/menu-wc_es5.js" defer></script>

       <script src="../js/libs/bootstrap-native.js"></script>

       <script src="../js/libs/es6-shim.min.js"></script>
       <script src="../js/libs/EventDispatcher.js"></script>
       <script src="../js/libs/promise.min.js"></script>

       <script src="../js/compodoc.js"></script>

       <script src="../js/tabs.js"></script>
       <script src="../js/menu.js"></script>
       <script src="../js/libs/clipboard.min.js"></script>
       <script src="../js/libs/prism.js"></script>
       <script src="../js/sourceCode.js"></script>
          <script src="../js/search/search.js"></script>
          <script src="../js/search/lunr.min.js"></script>
          <script src="../js/search/search-lunr.js"></script>
          <script src="../js/search/search_index.js"></script>
       <script src="../js/lazy-load-graphs.js"></script>


    </body>
</html>
