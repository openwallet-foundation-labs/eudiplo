{"config":{"lang":["en"],"separator":"[\\s\\-]+","pipeline":["stopWordFilter"],"fields":{"title":{"boost":1000.0},"text":{"boost":1.0},"tags":{"boost":1000000.0}}},"docs":[{"location":"","title":"What is EUDIPLO","text":""},{"location":"#what-is-eudiplo","title":"What is EUDIPLO?","text":"<p>EUDIPLO is a lightweight, open-source middleware layer that bridges your IT systems with the European Digital Identity Wallet (EUDI Wallet) ecosystem.</p> <p>Whether you're building services for government, education, healthcare, or the private sector\u2014EUDIPLO lets you interact with EUDI Wallets using simple JSON-based APIs, without having to implement complex identity protocols yourself.</p> <p>EUDIPLO stands for EUDI Protocol Liaison Operator</p> <p>The name EUDIPLO is inspired by diplomat \u2014 because this middleware acts as a translator and trusted go-between. It speaks fluent EUDI specs on one side and down-to-earth JSON on the other, making sure your backend doesn't have to become a protocol expert overnight.</p>"},{"location":"#why-eudiplo","title":"Why EUDIPLO?","text":"<p>Connecting to the EUDI Wallet ecosystem is technically demanding:</p> <ul> <li>You must understand OID4VCI, OID4VP, SD-JWT VC, and OAuth-based   status protocols.</li> <li>Libraries are scattered, often incomplete or language-specific.</li> <li>Hosted services can lead to vendor lock-in or obscure how your data is   processed.</li> </ul> <p>EUDIPLO solves these problems by acting as a protocol abstraction layer you can run yourself, integrate over HTTP, and configure via JSON.</p>"},{"location":"#key-capabilities","title":"Key Capabilities","text":"Capability Description \ud83d\udec2 Issuance Issue credentials to users through the EUDI Wallet \ud83e\uddfe Presentation Request credentials from users and verify them \ud83d\udd04 Cross-Flow Support Request credentials as part of an issuance flow \ud83d\udd10 Secure by Default Built-in support for secure key handling and OAuth-based status checking \ud83e\uddf1 Plug and Play Integrates with your backend over HTTP; no requirement to use a specific programming language \ud83d\udda5\ufe0f Web Client Included Comes with a ready-to-use web interface for easy testing and interaction \u2699\ufe0f JSON Configurable Set up templates, trust roots, and issuers through JSON files \ud83c\uddea\ud83c\uddfa Wallet Compatible Works with multiple wallets \ud83d\udc65 Multi-Tenant Support Isolate configurations for different tenants or clients"},{"location":"#where-does-it-fit","title":"Where Does It Fit?","text":"<p>Here\u2019s how EUDIPLO fits into your infrastructure:</p> <p></p>"},{"location":"#watch-the-webinar","title":"\ud83d\udcfa Watch the Webinar","text":"<p>Learn more about EUDIPLO in our recorded webinar (September 17, 2025), featuring a deep dive into features, architecture, and live Q&amp;A:</p> <p></p> <p>Watch on YouTube</p>"},{"location":"#how-do-i-use-it","title":"How Do I Use It?","text":"<p>EUDIPLO is distributed as a Docker container and can be configured in minutes.</p> <pre><code>docker run -p 3000:3000 \\\n  -e PUBLIC_URL=https://example.com \\\n  -e JWT_SECRET=your-secret-key-here-minimum-32-characters \\\n  ghcr.io/openwallet-foundation-labs/eudiplo:latest\n</code></pre> <ul> <li><code>-p 3000:3000</code> exposes EUDIPLO locally on port 3000.</li> <li><code>PUBLIC_URL</code> should be the public-facing URL where your instance is reachable (used for callbacks and wallet redirects).</li> </ul> <p>\u27a1\ufe0f For step-by-step instructions, see the Quickstart Guide. \u2699\ufe0f For production deployment and advanced configuration, see Production Setup.</p> <p>For more details on credential issuance and verification, check out: \ud83d\udcd8 Configure credentials \ud83d\udcd8 Verify credentials</p>"},{"location":"#who-is-it-for","title":"Who is it For?","text":"<p>EUDIPLO is built for:</p> <ul> <li>\ud83c\udfdb\ufe0f Government services that need to verify official documents.</li> <li>\ud83c\udf93 Universities and schools that issue or validate diplomas.</li> <li>\ud83c\udfe5 Health systems managing patient identity or insurance.</li> <li>\ud83c\udfe2 Private sector apps that want to integrate trustable identity with   minimal complexity.</li> </ul> <p>If your organization needs to connect to the EUDI Wallet ecosystem\u2014without reinventing the wheel\u2014EUDIPLO is your gateway.</p>"},{"location":"api/","title":"Overview","text":""},{"location":"api/#api-reference","title":"API Reference","text":"<p>EUDIPLO exposes a REST API based on the OpenAPI 3.0 standard. This interface allows systems to issue credentials, verify presentations, manage keys, and configure credential behavior through standard HTTP endpoints.</p> <p>The documentation also includes a rendered OpenAPI specification.</p>"},{"location":"api/#openapi-endpoints","title":"OpenAPI Endpoints","text":"<p>When running EUDIPLO, the following endpoints are available:</p> <ul> <li>Swagger UI: http://localhost:3000/api</li> <li>OpenAPI Spec (JSON):   http://localhost:3000/api-json</li> </ul> <p>Info</p> <p>By default it will only include the endpoints that are relevant to interact with it from the server side (it is excluding the routes that are relevant for e.g. OID4VCI and OID4VP). To generate the full OpenAPI specification, you can set the environment variable <code>SWAGGER_ALL</code> to <code>true</code> when starting the service like <code>SWAGGER_ALL=true pnpm run start:dev</code>.</p> <p>You can use this OpenAPI specification to generate client libraries with e.g the OpenAPI Generator.</p>"},{"location":"api/authentication/","title":"Authentication","text":""},{"location":"api/authentication/#api-authentication","title":"API Authentication","text":"<p>EUDIPLO uses OAuth 2.0 Client Credentials flow for API authentication, designed for service-to-service communication without user interaction.</p>"},{"location":"api/authentication/#configuration","title":"Configuration","text":"Key Type Notes <code>OIDC</code> <code>string</code> Enable OIDC mode <code>OIDC_INTERNAL_ISSUER_URL</code> <code>string</code> Internal issuer URL in OIDC mode [when OIDC is set \u2192 then default=undefined] <code>OIDC_CLIENT_ID</code> <code>any</code> Client ID for OIDC [when OIDC is set \u2192 then required] <code>OIDC_CLIENT_SECRET</code> <code>any</code> Client secret for OIDC [when OIDC is set \u2192 then required] <code>OIDC_SUB</code> <code>any</code> Claim to use as subject [when OIDC is set \u2192 then default=\"tenant_id\"] <code>OIDC_ALGORITHM</code> <code>any</code> Expected JWT alg [when OIDC is set \u2192 then default=\"RS256\"] <code>JWT_SECRET</code> <code>any</code> Local JWT secret (when OIDC is off) [when OIDC is set \u2192 otherwise default=\"supersecret\"] <code>JWT_ISSUER</code> <code>any</code> Local JWT issuer [when OIDC is set \u2192 otherwise default=\"eudiplo-service\"] <code>JWT_EXPIRES_IN</code> <code>any</code> Local JWT expiration [when OIDC is set \u2192 otherwise default=\"24h\"] <code>AUTH_CLIENT_SECRET</code> <code>any</code> Client secret (local auth) [when OIDC is set \u2192 otherwise default=\"root\"] <code>AUTH_CLIENT_ID</code> <code>any</code> Client ID (local auth) [when OIDC is set \u2192 otherwise default=\"root\"]"},{"location":"api/authentication/#authentication-architecture","title":"Authentication Architecture","text":""},{"location":"api/authentication/#design-principles","title":"Design Principles","text":"<ul> <li>Service-to-Service: No user interaction required</li> <li>Tenant Isolation: JWTs are used to isolate tenant data</li> <li>Pluggable Identity: Support for both built-in and external OIDC providers</li> <li>Stateless: JWT tokens enable horizontal scaling</li> </ul>"},{"location":"api/authentication/#security-model","title":"Security Model","text":"<ul> <li>All management endpoints require authentication</li> <li>Tenant data is isolated using JWT subject claims</li> <li>Tokens are signed and validated for integrity</li> <li>Support for token expiration and rotation</li> <li>Endpoints are role based protected</li> </ul> <p>Related Architecture: For multi-tenant configuration and session management, see Tenant-Based Architecture and Sessions.</p>"},{"location":"api/authentication/#import","title":"Import","text":"<p>Clients can be imported via configuration files. See Configuration Import for details.</p>"},{"location":"api/authentication/#oauth2-client-credentials-authentication","title":"OAuth2 Client Credentials Authentication","text":"<p>This API exclusively uses the OAuth2 client credentials flow, which is designed for service-to-service authentication where no user interaction is required.</p>"},{"location":"api/authentication/#built-in-oauth2-server-recommended-for-getting-started","title":"Built-in OAuth2 Server (Recommended for Getting Started)","text":"<p>EUDIPLO includes a built-in OAuth2 server for simple deployments:</p> <ol> <li> <p>Swagger UI Authentication:</p> <ul> <li>Navigate to the Swagger UI at <code>/api</code></li> <li>Click the \"Authorize\" button</li> <li>Select \"oauth2\"</li> <li>Enter client ID and secret (configured via environment variables)</li> <li>Click \"Authorize\"</li> </ul> </li> <li> <p>Programmatic Access:</p> <p>Option 1: Credentials in Authorization Header (OAuth2 Standard):</p> <pre><code>curl -X POST http://localhost:3000/oauth2/token \\\n  -H \"Content-Type: application/json\" \\\n  -H \"Authorization: Basic $(echo -n 'client_id:client_secret' | base64)\" \\\n  -d '{\n    \"grant_type\": \"client_credentials\"\n  }'\n</code></pre> <p>Option 2: Credentials in Request Body:</p> <pre><code>curl -X POST http://localhost:3000/oauth2/token \\\n  -H \"Content-Type: application/json\" \\\n  -d '{\n    \"grant_type\": \"client_credentials\",\n    \"client_id\": \"your-client-id\",\n    \"client_secret\": \"your-client-secret\"\n  }'\n</code></pre> </li> </ol>"},{"location":"api/authentication/#external-oidc-provider","title":"External OIDC Provider","text":"<p>For enterprise deployments with existing identity infrastructure, EUDIPLO can integrate with external OIDC providers like Keycloak, Auth0, or Azure AD.</p> <p>Configuration:</p> <pre><code>OIDC=https://your-keycloak.example.com/realms/your-realm\nPUBLIC_URL=https://your-api.example.com\n</code></pre> <p>Authentication Flow:</p> <ol> <li>Use your OIDC provider's token endpoint with client credentials flow</li> <li>Include the access token in API requests: <code>Authorization: Bearer &lt;token&gt;</code></li> </ol>"},{"location":"api/authentication/#configuration_1","title":"Configuration","text":""},{"location":"api/authentication/#external-oidc-provider_1","title":"External OIDC Provider","text":"<pre><code># Enable external OIDC\nOIDC=true\nOIDC_INTERNAL_ISSUER_URL=https://your-keycloak.example.com/realms/your-realm\nPUBLIC_URL=https://your-api.example.com\n</code></pre>"},{"location":"api/authentication/#integrated-oauth2-server","title":"Integrated OAuth2 Server","text":"<pre><code># Leave OIDC undefined for integrated OAuth2 server\nPUBLIC_URL=https://your-api.example.com\nJWT_SECRET=your-secret-key-here-minimum-32-characters\nAUTH_CLIENT_ID=root\nAUTH_CLIENT_SECRET=root\n</code></pre> <p>Configuration Reference: For complete configuration options and environment variables, see Key Management and Database Configuration.</p>"},{"location":"api/authentication/#protected-endpoints","title":"Protected Endpoints","text":"<p>All administrative endpoints require OAuth2 authentication and are protected by a role based access control approach.</p> <p>The following roles are available:</p> <pre><code>export enum Role {\n    //to manage presentation resources\n    Presentations = \"presentation:manage\",\n    // to create offers\n    PresentationOffer = \"presentation:offer\",\n    // to manage issuance resources\n    Issuances = \"issuance:manage\",\n    // to create offers\n    IssuanceOffer = \"issuance:offer\",\n    // to manage client resources\n    Clients = \"clients:manage\",\n    // to manage tenant resources\n    Tenants = \"tenants:manage\",\n}\n</code></pre> <p>Each client can have multiple roles assigned, but each client can only be assigned to one tenant at maximum. The client with the tenant manage must not be assigned to any tenant since it is managing the service in general. There could be other roles in the future like limited access to the metrics endpoint.</p>"},{"location":"api/authentication/#troubleshooting","title":"Troubleshooting","text":""},{"location":"api/authentication/#token-validation-errors","title":"Token Validation Errors","text":"<ol> <li>Verify that tokens include the correct audience (<code>eudiplo-service</code>)</li> <li>Ensure clock synchronization between client and server</li> <li>Check token expiration times</li> </ol>"},{"location":"api/authentication/#integrated-oauth2-server-issues","title":"Integrated OAuth2 Server Issues","text":"<ol> <li>Verify <code>JWT_SECRET</code> is at least 32 characters</li> <li>Ensure client credentials (<code>AUTH_CLIENT_ID</code>/<code>AUTH_CLIENT_SECRET</code>) are    configured correctly</li> <li>Check that <code>PUBLIC_URL</code> is accessible for OAuth2 flows</li> </ol>"},{"location":"api/authentication/#security-considerations","title":"Security Considerations","text":"<ul> <li>Token Lifetime: Tokens expire after 24 hours for client credentials flow. It can be updated by setting the <code>JWT_EXPIRES_IN</code> to another value, default value is <code>24h</code>.</li> <li>Secure Storage: Store client credentials and tokens securely and never   expose them in logs or URLs</li> <li>Service-to-Service: This API is designed for service-to-service   authentication without user interaction</li> </ul>"},{"location":"api/authentication/#related-documentation","title":"Related Documentation","text":""},{"location":"api/authentication/#architecture-design","title":"Architecture &amp; Design","text":"<ul> <li>Tenant-Based Architecture - Multi-tenant   isolation and configuration</li> <li>Sessions - Session lifecycle and management</li> <li>Key Management - Cryptographic key   handling and security</li> </ul>"},{"location":"api/authentication/#implementation-guides","title":"Implementation Guides","text":"<ul> <li>Quick Start - Get authentication   working in 5 minutes</li> <li>API Overview - Complete API reference and endpoints</li> </ul>"},{"location":"api/authentication/#operations","title":"Operations","text":"<ul> <li>Development Setup - Local development   authentication setup</li> </ul>"},{"location":"api/openapi/","title":"OpenApi","text":""},{"location":"api/openapi/#eudiplo-service-api-main","title":"EUDIPLO Service API main","text":"<p>This is the API documentation for the EUDIPLO Service, which provides credential issuance and verification services</p>"},{"location":"api/openapi/#tenant","title":"Tenant","text":""},{"location":"api/openapi/#get-tenant","title":"GET /tenant","text":"<p>Get all tenants</p> <p>Input parameters</p> Parameter In Type Default Nullable Description <code>oauth2</code> header string N/A No <p> Response 200 OK </p> application/json <p></p><pre><code>[\n    {\n        \"id\": \"string\",\n        \"name\": \"string\",\n        \"description\": \"string\",\n        \"status\": \"string\",\n        \"clients\": [\n            {\n                \"clientId\": \"string\",\n                \"secret\": \"string\",\n                \"tenantId\": \"string\",\n                \"description\": \"string\",\n                \"roles\": [\n                    \"presentation:manage\"\n                ],\n                \"tenant\": null\n            }\n        ]\n    }\n]\n</code></pre> \u26a0\ufe0f This example has been generated automatically from the schema and it is not accurate. Refer to the schema for more information.<p></p> Schema of the response body <pre><code>{\n    \"type\": \"array\",\n    \"items\": {\n        \"$ref\": \"#/components/schemas/TenantEntity\"\n    }\n}\n</code></pre>"},{"location":"api/openapi/#post-tenant","title":"POST /tenant","text":"<p>Initialize a tenant</p> <p>Input parameters</p> Parameter In Type Default Nullable Description <code>oauth2</code> header string N/A No <p>Request body</p> application/json <p></p><pre><code>{\n    \"roles\": [\n        \"presentation:manage\"\n    ],\n    \"id\": \"string\",\n    \"name\": \"string\",\n    \"description\": \"string\"\n}\n</code></pre> \u26a0\ufe0f This example has been generated automatically from the schema and it is not accurate. Refer to the schema for more information.<p></p> Schema of the request body <pre><code>{\n    \"type\": \"object\",\n    \"properties\": {\n        \"roles\": {\n            \"type\": \"array\",\n            \"items\": {\n                \"type\": \"string\",\n                \"enum\": [\n                    \"presentation:manage\",\n                    \"presentation:offer\",\n                    \"issuance:manage\",\n                    \"issuance:offer\",\n                    \"clients:manage\",\n                    \"tenants:manage\"\n                ]\n            }\n        },\n        \"id\": {\n            \"type\": \"string\",\n            \"description\": \"The unique identifier for the tenant.\"\n        },\n        \"name\": {\n            \"type\": \"string\",\n            \"description\": \"The name of the tenant.\"\n        },\n        \"description\": {\n            \"type\": \"string\",\n            \"description\": \"The description of the tenant.\"\n        }\n    },\n    \"required\": [\n        \"id\",\n        \"name\"\n    ]\n}\n</code></pre> <p> Response 201 Created </p>"},{"location":"api/openapi/#get-tenantid","title":"GET /tenant/{id}","text":"<p>Get a tenant by ID</p> <p>Input parameters</p> Parameter In Type Default Nullable Description <code>oauth2</code> header string N/A No <code>id</code> path string No <p> Response 200 OK </p> application/json <p></p><pre><code>{\n    \"id\": \"string\",\n    \"name\": \"string\",\n    \"description\": \"string\",\n    \"status\": \"string\",\n    \"clients\": [\n        {\n            \"clientId\": \"string\",\n            \"secret\": \"string\",\n            \"tenantId\": \"string\",\n            \"description\": \"string\",\n            \"roles\": [\n                \"presentation:manage\"\n            ],\n            \"tenant\": null\n        }\n    ]\n}\n</code></pre> \u26a0\ufe0f This example has been generated automatically from the schema and it is not accurate. Refer to the schema for more information.<p></p> Schema of the response body <pre><code>{\n    \"type\": \"object\",\n    \"properties\": {\n        \"id\": {\n            \"type\": \"string\",\n            \"description\": \"The unique identifier for the tenant.\"\n        },\n        \"name\": {\n            \"type\": \"string\",\n            \"description\": \"The name of the tenant.\"\n        },\n        \"description\": {\n            \"type\": \"string\",\n            \"description\": \"The description of the tenant.\"\n        },\n        \"status\": {\n            \"type\": \"string\",\n            \"description\": \"The current status of the tenant.\"\n        },\n        \"clients\": {\n            \"description\": \"The clients associated with the tenant.\",\n            \"type\": \"array\",\n            \"items\": {\n                \"$ref\": \"#/components/schemas/ClientEntity\"\n            }\n        }\n    },\n    \"required\": [\n        \"id\",\n        \"name\",\n        \"status\",\n        \"clients\"\n    ]\n}\n</code></pre>"},{"location":"api/openapi/#delete-tenantid","title":"DELETE /tenant/{id}","text":"<p>Deletes a tenant by ID</p> <p>Input parameters</p> Parameter In Type Default Nullable Description <code>oauth2</code> header string N/A No <code>id</code> path string No <p> Response 200 OK </p>"},{"location":"api/openapi/#client","title":"client","text":""},{"location":"api/openapi/#get-client","title":"GET /client","text":"<p>Get all clients for a user</p> <p>Input parameters</p> Parameter In Type Default Nullable Description <code>oauth2</code> header string N/A No <p> Response 200 OK </p> application/json <p></p><pre><code>[\n    {\n        \"clientId\": \"string\",\n        \"secret\": \"string\",\n        \"tenantId\": \"string\",\n        \"description\": \"string\",\n        \"roles\": [\n            \"presentation:manage\"\n        ],\n        \"tenant\": null\n    }\n]\n</code></pre> \u26a0\ufe0f This example has been generated automatically from the schema and it is not accurate. Refer to the schema for more information.<p></p> Schema of the response body <pre><code>{\n    \"type\": \"array\",\n    \"items\": {\n        \"$ref\": \"#/components/schemas/ClientEntity\"\n    }\n}\n</code></pre>"},{"location":"api/openapi/#post-client","title":"POST /client","text":"<p>Create a new client</p> <p>Input parameters</p> Parameter In Type Default Nullable Description <code>oauth2</code> header string N/A No <p>Request body</p> application/json <p></p><pre><code>{\n    \"clientId\": \"string\",\n    \"description\": \"string\",\n    \"roles\": [\n        \"presentation:manage\"\n    ]\n}\n</code></pre> \u26a0\ufe0f This example has been generated automatically from the schema and it is not accurate. Refer to the schema for more information.<p></p> Schema of the request body <pre><code>{\n    \"type\": \"object\",\n    \"properties\": {\n        \"clientId\": {\n            \"type\": \"string\",\n            \"description\": \"The unique identifier for the client.\"\n        },\n        \"description\": {\n            \"type\": \"string\",\n            \"description\": \"The description of the client.\"\n        },\n        \"roles\": {\n            \"type\": \"array\",\n            \"description\": \"The roles assigned to the client.\",\n            \"items\": {\n                \"type\": \"string\",\n                \"enum\": [\n                    \"presentation:manage\",\n                    \"presentation:offer\",\n                    \"issuance:manage\",\n                    \"issuance:offer\",\n                    \"clients:manage\",\n                    \"tenants:manage\"\n                ]\n            }\n        }\n    },\n    \"required\": [\n        \"clientId\",\n        \"roles\"\n    ]\n}\n</code></pre> <p> Response 201 Created </p> application/json <p></p><pre><code>{\n    \"clientId\": \"string\",\n    \"secret\": \"string\",\n    \"tenantId\": \"string\",\n    \"description\": \"string\",\n    \"roles\": [\n        \"presentation:manage\"\n    ],\n    \"tenant\": null\n}\n</code></pre> \u26a0\ufe0f This example has been generated automatically from the schema and it is not accurate. Refer to the schema for more information.<p></p> Schema of the response body <pre><code>{\n    \"type\": \"object\",\n    \"properties\": {\n        \"clientId\": {\n            \"type\": \"string\",\n            \"description\": \"The unique identifier for the client.\"\n        },\n        \"secret\": {\n            \"type\": \"string\",\n            \"description\": \"The secret key for the client.\"\n        },\n        \"tenantId\": {\n            \"type\": \"string\",\n            \"description\": \"The unique identifier for the tenant that the client belongs to. Only null for accounts that manage tenants, that do not belong to a client\"\n        },\n        \"description\": {\n            \"type\": \"string\",\n            \"description\": \"The description of the client.\"\n        },\n        \"roles\": {\n            \"description\": \"The roles assigned to the client.\",\n            \"type\": \"array\",\n            \"items\": {\n                \"type\": \"string\",\n                \"enum\": [\n                    \"presentation:manage\",\n                    \"presentation:offer\",\n                    \"issuance:manage\",\n                    \"issuance:offer\",\n                    \"clients:manage\",\n                    \"tenants:manage\"\n                ]\n            }\n        },\n        \"tenant\": {\n            \"description\": \"The tenant that the client belongs to.\",\n            \"allOf\": [\n                {\n                    \"$ref\": \"#/components/schemas/TenantEntity\"\n                }\n            ]\n        }\n    },\n    \"required\": [\n        \"clientId\",\n        \"roles\"\n    ]\n}\n</code></pre>"},{"location":"api/openapi/#get-clientid","title":"GET /client/{id}","text":"<p>Get a client by its id</p> <p>Input parameters</p> Parameter In Type Default Nullable Description <code>oauth2</code> header string N/A No <code>id</code> path string No <p> Response 200 OK </p> application/json <p></p><pre><code>{\n    \"clientId\": \"string\",\n    \"secret\": \"string\",\n    \"tenantId\": \"string\",\n    \"description\": \"string\",\n    \"roles\": [\n        \"presentation:manage\"\n    ],\n    \"tenant\": null\n}\n</code></pre> \u26a0\ufe0f This example has been generated automatically from the schema and it is not accurate. Refer to the schema for more information.<p></p> Schema of the response body <pre><code>{\n    \"type\": \"object\",\n    \"properties\": {\n        \"clientId\": {\n            \"type\": \"string\",\n            \"description\": \"The unique identifier for the client.\"\n        },\n        \"secret\": {\n            \"type\": \"string\",\n            \"description\": \"The secret key for the client.\"\n        },\n        \"tenantId\": {\n            \"type\": \"string\",\n            \"description\": \"The unique identifier for the tenant that the client belongs to. Only null for accounts that manage tenants, that do not belong to a client\"\n        },\n        \"description\": {\n            \"type\": \"string\",\n            \"description\": \"The description of the client.\"\n        },\n        \"roles\": {\n            \"description\": \"The roles assigned to the client.\",\n            \"type\": \"array\",\n            \"items\": {\n                \"type\": \"string\",\n                \"enum\": [\n                    \"presentation:manage\",\n                    \"presentation:offer\",\n                    \"issuance:manage\",\n                    \"issuance:offer\",\n                    \"clients:manage\",\n                    \"tenants:manage\"\n                ]\n            }\n        },\n        \"tenant\": {\n            \"description\": \"The tenant that the client belongs to.\",\n            \"allOf\": [\n                {\n                    \"$ref\": \"#/components/schemas/TenantEntity\"\n                }\n            ]\n        }\n    },\n    \"required\": [\n        \"clientId\",\n        \"roles\"\n    ]\n}\n</code></pre>"},{"location":"api/openapi/#patch-clientid","title":"PATCH /client/{id}","text":"<p>Update a client by its id</p> <p>Input parameters</p> Parameter In Type Default Nullable Description <code>oauth2</code> header string N/A No <code>id</code> path string No <p>Request body</p> application/json <p></p><pre><code>{\n    \"description\": \"string\",\n    \"roles\": [\n        \"presentation:manage\"\n    ]\n}\n</code></pre> \u26a0\ufe0f This example has been generated automatically from the schema and it is not accurate. Refer to the schema for more information.<p></p> Schema of the request body <pre><code>{\n    \"type\": \"object\",\n    \"properties\": {\n        \"description\": {\n            \"type\": \"string\",\n            \"description\": \"The description of the client.\"\n        },\n        \"roles\": {\n            \"type\": \"array\",\n            \"description\": \"The roles assigned to the client.\",\n            \"items\": {\n                \"type\": \"string\",\n                \"enum\": [\n                    \"presentation:manage\",\n                    \"presentation:offer\",\n                    \"issuance:manage\",\n                    \"issuance:offer\",\n                    \"clients:manage\",\n                    \"tenants:manage\"\n                ]\n            }\n        }\n    },\n    \"required\": [\n        \"roles\"\n    ]\n}\n</code></pre> <p> Response 200 OK </p> application/json Schema of the response body <pre><code>{\n    \"type\": \"object\"\n}\n</code></pre>"},{"location":"api/openapi/#delete-clientid","title":"DELETE /client/{id}","text":"<p>Get a client by its id</p> <p>Input parameters</p> Parameter In Type Default Nullable Description <code>oauth2</code> header string N/A No <code>id</code> path string No <p> Response 200 OK </p>"},{"location":"api/openapi/#get-clientidsecret","title":"GET /client/{id}/secret","text":"<p>Input parameters</p> Parameter In Type Default Nullable Description <code>oauth2</code> header string N/A No <code>id</code> path string No <p> Response 200 OK </p> application/json <p></p><pre><code>{\n    \"secret\": \"string\"\n}\n</code></pre> \u26a0\ufe0f This example has been generated automatically from the schema and it is not accurate. Refer to the schema for more information.<p></p> Schema of the response body <pre><code>{\n    \"type\": \"object\",\n    \"properties\": {\n        \"secret\": {\n            \"type\": \"string\"\n        }\n    },\n    \"required\": [\n        \"secret\"\n    ]\n}\n</code></pre>"},{"location":"api/openapi/#key","title":"Key","text":""},{"location":"api/openapi/#get-key","title":"GET /key","text":"<p>Get all keys for the tenant.</p> <p>Input parameters</p> Parameter In Type Default Nullable Description <code>oauth2</code> header string N/A No <p> Response 200 OK </p> application/json <p></p><pre><code>[\n    {\n        \"id\": \"string\",\n        \"tenantId\": \"string\",\n        \"tenant\": null,\n        \"crt\": \"string\",\n        \"type\": {},\n        \"description\": \"string\",\n        \"createdAt\": \"2022-04-13T15:42:05.901Z\",\n        \"updatedAt\": \"2022-04-13T15:42:05.901Z\"\n    }\n]\n</code></pre> \u26a0\ufe0f This example has been generated automatically from the schema and it is not accurate. Refer to the schema for more information.<p></p> Schema of the response body <pre><code>{\n    \"type\": \"array\",\n    \"items\": {\n        \"$ref\": \"#/components/schemas/CertEntity\"\n    }\n}\n</code></pre>"},{"location":"api/openapi/#post-key","title":"POST /key","text":"<p>Add a new key to the key service.</p> <p>Input parameters</p> Parameter In Type Default Nullable Description <code>oauth2</code> header string N/A No <p>Request body</p> application/json <p></p><pre><code>{\n    \"privateKey\": null,\n    \"crt\": \"string\",\n    \"description\": \"string\"\n}\n</code></pre> \u26a0\ufe0f This example has been generated automatically from the schema and it is not accurate. Refer to the schema for more information.<p></p> Schema of the request body <pre><code>{\n    \"type\": \"object\",\n    \"properties\": {\n        \"privateKey\": {\n            \"description\": \"The private key in JWK format.\",\n            \"allOf\": [\n                {\n                    \"$ref\": \"#/components/schemas/Key\"\n                }\n            ]\n        },\n        \"crt\": {\n            \"type\": \"string\",\n            \"description\": \"Optional certificate in PEM format.\"\n        },\n        \"description\": {\n            \"type\": \"string\",\n            \"description\": \"Description of the key.\"\n        }\n    },\n    \"required\": [\n        \"privateKey\"\n    ]\n}\n</code></pre> <p> Response 201 Created </p>"},{"location":"api/openapi/#get-keyid","title":"GET /key/{id}","text":"<p>Get a specific key by ID</p> <p>Input parameters</p> Parameter In Type Default Nullable Description <code>oauth2</code> header string N/A No <code>id</code> path string No <p> Response 200 OK </p> application/json <p></p><pre><code>{\n    \"id\": \"string\",\n    \"tenantId\": \"string\",\n    \"tenant\": null,\n    \"crt\": \"string\",\n    \"type\": {},\n    \"description\": \"string\",\n    \"createdAt\": \"2022-04-13T15:42:05.901Z\",\n    \"updatedAt\": \"2022-04-13T15:42:05.901Z\"\n}\n</code></pre> \u26a0\ufe0f This example has been generated automatically from the schema and it is not accurate. Refer to the schema for more information.<p></p> Schema of the response body <pre><code>{\n    \"type\": \"object\",\n    \"properties\": {\n        \"id\": {\n            \"type\": \"string\",\n            \"description\": \"Unique identifier for the key.\"\n        },\n        \"tenantId\": {\n            \"type\": \"string\",\n            \"description\": \"Tenant ID for the key.\"\n        },\n        \"tenant\": {\n            \"description\": \"The tenant that owns this object.\",\n            \"allOf\": [\n                {\n                    \"$ref\": \"#/components/schemas/TenantEntity\"\n                }\n            ]\n        },\n        \"crt\": {\n            \"type\": \"string\",\n            \"description\": \"Certificate in PEM format.\"\n        },\n        \"type\": {\n            \"type\": \"object\",\n            \"description\": \"Type of the certificate (access or signing).\"\n        },\n        \"description\": {\n            \"type\": \"string\",\n            \"description\": \"Description of the key.\"\n        },\n        \"createdAt\": {\n            \"format\": \"date-time\",\n            \"type\": \"string\",\n            \"description\": \"The timestamp when the VP request was created.\"\n        },\n        \"updatedAt\": {\n            \"format\": \"date-time\",\n            \"type\": \"string\",\n            \"description\": \"The timestamp when the VP request was last updated.\"\n        }\n    },\n    \"required\": [\n        \"id\",\n        \"tenantId\",\n        \"tenant\",\n        \"crt\",\n        \"type\",\n        \"createdAt\",\n        \"updatedAt\"\n    ]\n}\n</code></pre>"},{"location":"api/openapi/#put-keyid","title":"PUT /key/{id}","text":"<p>Updates an existing key in the key service.</p> <p>Input parameters</p> Parameter In Type Default Nullable Description <code>oauth2</code> header string N/A No <code>id</code> path string No <p>Request body</p> application/json <p></p><pre><code>{\n    \"crt\": \"string\",\n    \"description\": \"string\"\n}\n</code></pre> \u26a0\ufe0f This example has been generated automatically from the schema and it is not accurate. Refer to the schema for more information.<p></p> Schema of the request body <pre><code>{\n    \"type\": \"object\",\n    \"properties\": {\n        \"crt\": {\n            \"type\": \"string\",\n            \"description\": \"Optional certificate in PEM format.\"\n        },\n        \"description\": {\n            \"type\": \"string\",\n            \"description\": \"Description of the key.\"\n        }\n    }\n}\n</code></pre> <p> Response 200 OK </p>"},{"location":"api/openapi/#delete-keyid","title":"DELETE /key/{id}","text":"<p>Delete a key from the key service.</p> <p>Input parameters</p> Parameter In Type Default Nullable Description <code>oauth2</code> header string N/A No <code>id</code> path string No <p> Response 200 OK </p>"},{"location":"api/openapi/#presentation-management","title":"Presentation management","text":""},{"location":"api/openapi/#post-presentation-managementrequest","title":"POST /presentation-management/request","text":"<p>Create an presentation request that can be sent to the user</p> <p>Input parameters</p> Parameter In Type Default Nullable Description <code>oauth2</code> header string N/A No <p>Request body</p> application/json <pre><code>{\n    \"response_type\": \"qrcode\",\n    \"requestId\": \"pid\"\n}\n</code></pre> <pre><code>{\n    \"response_type\": \"uri\",\n    \"requestId\": \"pid\"\n}\n</code></pre> <pre><code>{\n    \"response_type\": \"dc-api\",\n    \"requestId\": \"pid\"\n}\n</code></pre> Schema of the request body <pre><code>{\n    \"type\": \"object\",\n    \"properties\": {\n        \"response_type\": {\n            \"type\": \"string\",\n            \"description\": \"The type of response expected from the presentation request.\",\n            \"enum\": [\n                \"qrcode\",\n                \"uri\",\n                \"dc-api\"\n            ]\n        },\n        \"requestId\": {\n            \"type\": \"string\",\n            \"description\": \"Identifier of the presentation configuration\"\n        },\n        \"webhook\": {\n            \"description\": \"Webhook configuration to receive the response.\\nIf not provided, the configured webhook from the configuration will be used.\",\n            \"allOf\": [\n                {\n                    \"$ref\": \"#/components/schemas/WebhookConfig\"\n                }\n            ]\n        },\n        \"redirectUri\": {\n            \"type\": \"string\",\n            \"description\": \"Optional redirect URI to which the user-agent should be redirected after the presentation is completed.\"\n        }\n    },\n    \"required\": [\n        \"response_type\",\n        \"requestId\"\n    ]\n}\n</code></pre> <p> Response 201 Created </p> application/jsonimage/png <p></p><pre><code>{\n    \"uri\": \"string\",\n    \"session\": \"string\"\n}\n</code></pre> \u26a0\ufe0f This example has been generated automatically from the schema and it is not accurate. Refer to the schema for more information.<p></p> Schema of the response body <pre><code>{\n    \"type\": \"object\",\n    \"properties\": {\n        \"uri\": {\n            \"type\": \"string\"\n        },\n        \"session\": {\n            \"type\": \"string\"\n        }\n    },\n    \"required\": [\n        \"uri\",\n        \"session\"\n    ]\n}\n</code></pre> <p></p><pre><code>{\n    \"uri\": \"string\",\n    \"session\": \"string\"\n}\n</code></pre> \u26a0\ufe0f This example has been generated automatically from the schema and it is not accurate. Refer to the schema for more information.<p></p> Schema of the response body <pre><code>{\n    \"type\": \"object\",\n    \"properties\": {\n        \"uri\": {\n            \"type\": \"string\"\n        },\n        \"session\": {\n            \"type\": \"string\"\n        }\n    },\n    \"required\": [\n        \"uri\",\n        \"session\"\n    ]\n}\n</code></pre>"},{"location":"api/openapi/#get-presentation-management","title":"GET /presentation-management","text":"<p>Returns the presentation request configurations.</p> <p>Input parameters</p> Parameter In Type Default Nullable Description <code>oauth2</code> header string N/A No <p> Response 200 OK </p> application/json <p></p><pre><code>[\n    {\n        \"id\": \"string\",\n        \"tenant\": null,\n        \"description\": \"string\",\n        \"lifeTime\": 10.12,\n        \"dcql_query\": null,\n        \"registrationCert\": null,\n        \"webhook\": null,\n        \"createdAt\": \"2022-04-13T15:42:05.901Z\",\n        \"updatedAt\": \"2022-04-13T15:42:05.901Z\",\n        \"attached\": [\n            {\n                \"format\": \"string\",\n                \"data\": {},\n                \"credential_ids\": [\n                    \"string\"\n                ]\n            }\n        ],\n        \"redirectUri\": \"string\"\n    }\n]\n</code></pre> \u26a0\ufe0f This example has been generated automatically from the schema and it is not accurate. Refer to the schema for more information.<p></p> Schema of the response body <pre><code>{\n    \"type\": \"array\",\n    \"items\": {\n        \"$ref\": \"#/components/schemas/PresentationConfig\"\n    }\n}\n</code></pre>"},{"location":"api/openapi/#post-presentation-management","title":"POST /presentation-management","text":"<p>Store a presentation request configuration. If it already exists, it will be updated.</p> <p>Input parameters</p> Parameter In Type Default Nullable Description <code>oauth2</code> header string N/A No <p>Request body</p> application/json <p></p><pre><code>{\n    \"id\": \"string\",\n    \"description\": \"string\",\n    \"lifeTime\": 10.12,\n    \"dcql_query\": null,\n    \"registrationCert\": null,\n    \"webhook\": null,\n    \"attached\": [\n        {\n            \"format\": \"string\",\n            \"data\": {},\n            \"credential_ids\": [\n                \"string\"\n            ]\n        }\n    ],\n    \"redirectUri\": \"string\"\n}\n</code></pre> \u26a0\ufe0f This example has been generated automatically from the schema and it is not accurate. Refer to the schema for more information.<p></p> Schema of the request body <pre><code>{\n    \"type\": \"object\",\n    \"properties\": {\n        \"id\": {\n            \"type\": \"string\",\n            \"description\": \"Unique identifier for the VP request.\"\n        },\n        \"description\": {\n            \"type\": \"string\",\n            \"description\": \"Description of the presentation configuration.\"\n        },\n        \"lifeTime\": {\n            \"type\": \"number\",\n            \"description\": \"Lifetime how long the presentation request is valid after creation, in seconds.\"\n        },\n        \"dcql_query\": {\n            \"description\": \"The DCQL query to be used for the VP request.\",\n            \"allOf\": [\n                {\n                    \"$ref\": \"#/components/schemas/DCQL\"\n                }\n            ]\n        },\n        \"registrationCert\": {\n            \"description\": \"The registration certificate request containing the necessary details.\",\n            \"allOf\": [\n                {\n                    \"$ref\": \"#/components/schemas/RegistrationCertificateRequest\"\n                }\n            ]\n        },\n        \"webhook\": {\n            \"description\": \"Optional webhook URL to receive the response.\",\n            \"allOf\": [\n                {\n                    \"$ref\": \"#/components/schemas/WebhookConfig\"\n                }\n            ]\n        },\n        \"attached\": {\n            \"description\": \"Attestation that should be attached\",\n            \"type\": \"array\",\n            \"items\": {\n                \"$ref\": \"#/components/schemas/PresentationAttachment\"\n            }\n        },\n        \"redirectUri\": {\n            \"type\": \"string\",\n            \"description\": \"Redirect URI to which the user-agent should be redirected after the presentation is completed.\"\n        }\n    },\n    \"required\": [\n        \"id\",\n        \"dcql_query\"\n    ]\n}\n</code></pre> <p> Response 201 Created </p> application/json Schema of the response body <pre><code>{\n    \"type\": \"object\"\n}\n</code></pre>"},{"location":"api/openapi/#delete-presentation-managementid","title":"DELETE /presentation-management/{id}","text":"<p>Deletes a presentation request configuration by its ID.</p> <p>Input parameters</p> Parameter In Type Default Nullable Description <code>oauth2</code> header string N/A No <code>id</code> path string No <p> Response 200 OK </p>"},{"location":"api/openapi/#session-management","title":"Session management","text":""},{"location":"api/openapi/#get-session","title":"GET /session","text":"<p>Retrieves all sessions.</p> <p>Input parameters</p> Parameter In Type Default Nullable Description <code>oauth2</code> header string N/A No <p> Response 200 OK </p> application/json <p></p><pre><code>[\n    {\n        \"status\": \"active\",\n        \"id\": \"string\",\n        \"createdAt\": \"2022-04-13T15:42:05.901Z\",\n        \"updatedAt\": \"2022-04-13T15:42:05.901Z\",\n        \"expiresAt\": \"2022-04-13T15:42:05.901Z\",\n        \"useDcApi\": true,\n        \"tenantId\": \"string\",\n        \"tenant\": null,\n        \"authorization_code\": \"string\",\n        \"request_uri\": \"string\",\n        \"auth_queries\": null,\n        \"offer\": {},\n        \"offerUrl\": \"string\",\n        \"credentialPayload\": null,\n        \"claimsWebhook\": null,\n        \"notifyWebhook\": null,\n        \"notifications\": [\n            {}\n        ],\n        \"requestId\": \"string\",\n        \"requestUrl\": \"string\",\n        \"requestObject\": \"string\",\n        \"credentials\": [\n            {}\n        ],\n        \"vp_nonce\": \"string\",\n        \"redirectUri\": \"string\"\n    }\n]\n</code></pre> \u26a0\ufe0f This example has been generated automatically from the schema and it is not accurate. Refer to the schema for more information.<p></p> Schema of the response body <pre><code>{\n    \"type\": \"array\",\n    \"items\": {\n        \"$ref\": \"#/components/schemas/Session\"\n    }\n}\n</code></pre>"},{"location":"api/openapi/#get-sessionid","title":"GET /session/{id}","text":"<p>Retrieves the session information for a given session ID.</p> <p>Input parameters</p> Parameter In Type Default Nullable Description <code>oauth2</code> header string N/A No <code>id</code> path string No The session ID <p> Response 200 OK </p> application/json <p></p><pre><code>{\n    \"status\": \"active\",\n    \"id\": \"string\",\n    \"createdAt\": \"2022-04-13T15:42:05.901Z\",\n    \"updatedAt\": \"2022-04-13T15:42:05.901Z\",\n    \"expiresAt\": \"2022-04-13T15:42:05.901Z\",\n    \"useDcApi\": true,\n    \"tenantId\": \"string\",\n    \"tenant\": null,\n    \"authorization_code\": \"string\",\n    \"request_uri\": \"string\",\n    \"auth_queries\": null,\n    \"offer\": {},\n    \"offerUrl\": \"string\",\n    \"credentialPayload\": null,\n    \"claimsWebhook\": null,\n    \"notifyWebhook\": null,\n    \"notifications\": [\n        {}\n    ],\n    \"requestId\": \"string\",\n    \"requestUrl\": \"string\",\n    \"requestObject\": \"string\",\n    \"credentials\": [\n        {}\n    ],\n    \"vp_nonce\": \"string\",\n    \"redirectUri\": \"string\"\n}\n</code></pre> \u26a0\ufe0f This example has been generated automatically from the schema and it is not accurate. Refer to the schema for more information.<p></p> Schema of the response body <pre><code>{\n    \"type\": \"object\",\n    \"properties\": {\n        \"status\": {\n            \"description\": \"Status of the session.\",\n            \"enum\": [\n                \"active\",\n                \"fetched\",\n                \"completed\",\n                \"expired\",\n                \"failed\"\n            ],\n            \"type\": \"string\"\n        },\n        \"id\": {\n            \"type\": \"string\",\n            \"description\": \"Unique identifier for the session.\"\n        },\n        \"createdAt\": {\n            \"format\": \"date-time\",\n            \"type\": \"string\",\n            \"description\": \"The timestamp when the request was created.\"\n        },\n        \"updatedAt\": {\n            \"format\": \"date-time\",\n            \"type\": \"string\",\n            \"description\": \"The timestamp when the request was last updated.\"\n        },\n        \"expiresAt\": {\n            \"format\": \"date-time\",\n            \"type\": \"string\",\n            \"description\": \"The timestamp when the request is set to expire.\"\n        },\n        \"useDcApi\": {\n            \"type\": \"boolean\",\n            \"description\": \"Flag indicating whether to use the DC API for the presentation request.\"\n        },\n        \"tenantId\": {\n            \"type\": \"string\",\n            \"description\": \"Tenant ID for multi-tenancy support.\"\n        },\n        \"tenant\": {\n            \"description\": \"The tenant that owns this object.\",\n            \"allOf\": [\n                {\n                    \"$ref\": \"#/components/schemas/TenantEntity\"\n                }\n            ]\n        },\n        \"authorization_code\": {\n            \"type\": \"string\"\n        },\n        \"request_uri\": {\n            \"type\": \"string\",\n            \"description\": \"Request URI from the authorization request.\"\n        },\n        \"auth_queries\": {\n            \"description\": \"Authorization queries associated with the session.\",\n            \"allOf\": [\n                {\n                    \"$ref\": \"#/components/schemas/AuthorizeQueries\"\n                }\n            ]\n        },\n        \"offer\": {\n            \"description\": \"Credential offer object containing details about the credential offer or presentation request.\",\n            \"type\": \"object\"\n        },\n        \"offerUrl\": {\n            \"type\": \"string\",\n            \"description\": \"Offer URL for the credential offer.\"\n        },\n        \"credentialPayload\": {\n            \"description\": \"Credential payload containing the offer request details.\",\n            \"allOf\": [\n                {\n                    \"$ref\": \"#/components/schemas/OfferRequestDto\"\n                }\n            ]\n        },\n        \"claimsWebhook\": {\n            \"description\": \"Webhook configuration to send result and may receive further information.\",\n            \"allOf\": [\n                {\n                    \"$ref\": \"#/components/schemas/WebhookConfig\"\n                }\n            ]\n        },\n        \"notifyWebhook\": {\n            \"description\": \"Webhook configuration to send the result of the notification response.\",\n            \"allOf\": [\n                {\n                    \"$ref\": \"#/components/schemas/WebhookConfig\"\n                }\n            ]\n        },\n        \"notifications\": {\n            \"description\": \"Notifications associated with the session.\",\n            \"type\": \"array\",\n            \"items\": {\n                \"type\": \"object\"\n            }\n        },\n        \"requestId\": {\n            \"type\": \"string\"\n        },\n        \"requestUrl\": {\n            \"type\": \"string\",\n            \"description\": \"The URL of the presentation auth request.\"\n        },\n        \"requestObject\": {\n            \"type\": \"string\",\n            \"description\": \"Signed presentation auth request.\"\n        },\n        \"credentials\": {\n            \"description\": \"Verified credentials from the presentation process.\",\n            \"type\": \"array\",\n            \"items\": {\n                \"type\": \"object\"\n            }\n        },\n        \"vp_nonce\": {\n            \"type\": \"string\",\n            \"description\": \"Noncce from the Verifiable Presentation request.\"\n        },\n        \"redirectUri\": {\n            \"type\": \"string\",\n            \"description\": \"Redirect URI to which the user-agent should be redirected after the presentation is completed.\"\n        }\n    },\n    \"required\": [\n        \"status\",\n        \"id\",\n        \"createdAt\",\n        \"updatedAt\",\n        \"useDcApi\",\n        \"tenantId\",\n        \"tenant\",\n        \"notifications\"\n    ]\n}\n</code></pre>"},{"location":"api/openapi/#delete-sessionid","title":"DELETE /session/{id}","text":"<p>Deletes a session by its ID</p> <p>Input parameters</p> Parameter In Type Default Nullable Description <code>oauth2</code> header string N/A No <code>id</code> path string No <p> Response 200 OK </p>"},{"location":"api/openapi/#post-sessionrevoke","title":"POST /session/revoke","text":"<p>Update the status of the credentials of a specific session.</p> <p>Input parameters</p> Parameter In Type Default Nullable Description <code>oauth2</code> header string N/A No <p>Request body</p> application/json <p></p><pre><code>{\n    \"sessionId\": \"string\",\n    \"credentialConfigurationId\": \"string\",\n    \"status\": 10.12\n}\n</code></pre> \u26a0\ufe0f This example has been generated automatically from the schema and it is not accurate. Refer to the schema for more information.<p></p> Schema of the request body <pre><code>{\n    \"type\": \"object\",\n    \"properties\": {\n        \"sessionId\": {\n            \"type\": \"string\",\n            \"description\": \"The session ID of the user\"\n        },\n        \"credentialConfigurationId\": {\n            \"type\": \"string\",\n            \"description\": \"The ID of the credential configuration\\nThis is optional, if not provided, all credentials will be revoked of the session.\"\n        },\n        \"status\": {\n            \"type\": \"number\",\n            \"description\": \"The status of the credential\\n0 = valid, 1 = revoked, 2 = suspended\"\n        }\n    },\n    \"required\": [\n        \"sessionId\",\n        \"status\"\n    ]\n}\n</code></pre> <p> Response 201 Created </p>"},{"location":"api/openapi/#credentials","title":"Credentials","text":""},{"location":"api/openapi/#get-issuer-managementcredentials","title":"GET /issuer-management/credentials","text":"<p>Returns the credential configurations for this tenant.</p> <p>Input parameters</p> Parameter In Type Default Nullable Description <code>oauth2</code> header string N/A No <p> Response 200 OK </p> application/json <p></p><pre><code>[\n    {\n        \"embeddedDisclosurePolicy\": null,\n        \"id\": \"string\",\n        \"description\": \"string\",\n        \"tenant\": null,\n        \"config\": {\n            \"format\": \"string\",\n            \"display\": [\n                {\n                    \"name\": \"string\",\n                    \"description\": \"string\",\n                    \"locale\": \"string\",\n                    \"background_color\": \"string\",\n                    \"text_color\": \"string\",\n                    \"background_image\": {\n                        \"uri\": \"string\"\n                    },\n                    \"logo\": null\n                }\n            ],\n            \"scope\": \"string\"\n        },\n        \"claims\": {},\n        \"claimsWebhook\": null,\n        \"notificationWebhook\": null,\n        \"disclosureFrame\": {},\n        \"vct\": {\n            \"vct\": \"string\",\n            \"name\": \"string\",\n            \"description\": \"string\",\n            \"extends\": \"string\",\n            \"extends#integrity\": \"string\",\n            \"schema_uri\": \"string\",\n            \"schema_uri#integrity\": \"string\"\n        },\n        \"keyBinding\": true,\n        \"keyId\": \"string\",\n        \"key\": {\n            \"id\": \"string\",\n            \"tenantId\": \"string\",\n            \"tenant\": null,\n            \"crt\": \"string\",\n            \"type\": {},\n            \"description\": \"string\",\n            \"createdAt\": \"2022-04-13T15:42:05.901Z\",\n            \"updatedAt\": \"2022-04-13T15:42:05.901Z\"\n        },\n        \"statusManagement\": true,\n        \"lifeTime\": 10.12,\n        \"schema\": {\n            \"$schema\": \"string\",\n            \"type\": \"string\",\n            \"properties\": {},\n            \"required\": [\n                \"string\"\n            ],\n            \"title\": \"string\",\n            \"description\": \"string\"\n        }\n    }\n]\n</code></pre> \u26a0\ufe0f This example has been generated automatically from the schema and it is not accurate. Refer to the schema for more information.<p></p> Schema of the response body <pre><code>{\n    \"type\": \"array\",\n    \"items\": {\n        \"$ref\": \"#/components/schemas/CredentialConfig\"\n    }\n}\n</code></pre>"},{"location":"api/openapi/#post-issuer-managementcredentials","title":"POST /issuer-management/credentials","text":"<p>Stores the credential configuration for this tenant.</p> <p>Input parameters</p> Parameter In Type Default Nullable Description <code>oauth2</code> header string N/A No <p>Request body</p> application/json <p></p><pre><code>{\n    \"embeddedDisclosurePolicy\": null,\n    \"id\": \"string\",\n    \"description\": \"string\",\n    \"config\": {\n        \"format\": \"string\",\n        \"display\": [\n            {\n                \"name\": \"string\",\n                \"description\": \"string\",\n                \"locale\": \"string\",\n                \"background_color\": \"string\",\n                \"text_color\": \"string\",\n                \"background_image\": {\n                    \"uri\": \"string\"\n                },\n                \"logo\": null\n            }\n        ],\n        \"scope\": \"string\"\n    },\n    \"claims\": {},\n    \"claimsWebhook\": null,\n    \"notificationWebhook\": null,\n    \"disclosureFrame\": {},\n    \"vct\": {\n        \"vct\": \"string\",\n        \"name\": \"string\",\n        \"description\": \"string\",\n        \"extends\": \"string\",\n        \"extends#integrity\": \"string\",\n        \"schema_uri\": \"string\",\n        \"schema_uri#integrity\": \"string\"\n    },\n    \"keyBinding\": true,\n    \"keyId\": \"string\",\n    \"statusManagement\": true,\n    \"lifeTime\": 10.12,\n    \"schema\": {\n        \"$schema\": \"string\",\n        \"type\": \"string\",\n        \"properties\": {},\n        \"required\": [\n            \"string\"\n        ],\n        \"title\": \"string\",\n        \"description\": \"string\"\n    }\n}\n</code></pre> \u26a0\ufe0f This example has been generated automatically from the schema and it is not accurate. Refer to the schema for more information.<p></p> Schema of the request body <pre><code>{\n    \"type\": \"object\",\n    \"properties\": {\n        \"embeddedDisclosurePolicy\": {\n            \"description\": \"Embedded disclosure policy (discriminated union by `policy`).\\nThe discriminator makes class-transformer instantiate the right subclass,\\nand then class-validator runs that subclass\u2019s rules.\",\n            \"oneOf\": [\n                {\n                    \"$ref\": \"#/components/schemas/AttestationBasedPolicy\"\n                },\n                {\n                    \"$ref\": \"#/components/schemas/NoneTrustPolicy\"\n                },\n                {\n                    \"$ref\": \"#/components/schemas/AllowListPolicy\"\n                },\n                {\n                    \"$ref\": \"#/components/schemas/RootOfTrustPolicy\"\n                }\n            ],\n            \"allOf\": [\n                {\n                    \"$ref\": \"#/components/schemas/EmbeddedDisclosurePolicy\"\n                }\n            ]\n        },\n        \"id\": {\n            \"type\": \"string\"\n        },\n        \"description\": {\n            \"type\": \"string\"\n        },\n        \"config\": {\n            \"$ref\": \"#/components/schemas/IssuerMetadataCredentialConfig\"\n        },\n        \"claims\": {\n            \"type\": \"object\"\n        },\n        \"claimsWebhook\": {\n            \"description\": \"Webhook to receive claims for the issuance process.\",\n            \"allOf\": [\n                {\n                    \"$ref\": \"#/components/schemas/WebhookConfig\"\n                }\n            ]\n        },\n        \"notificationWebhook\": {\n            \"description\": \"Webhook to receive claims for the issuance process.\",\n            \"allOf\": [\n                {\n                    \"$ref\": \"#/components/schemas/WebhookConfig\"\n                }\n            ]\n        },\n        \"disclosureFrame\": {\n            \"type\": \"object\"\n        },\n        \"vct\": {\n            \"$ref\": \"#/components/schemas/VCT\"\n        },\n        \"keyBinding\": {\n            \"type\": \"boolean\"\n        },\n        \"keyId\": {\n            \"type\": \"string\"\n        },\n        \"statusManagement\": {\n            \"type\": \"boolean\"\n        },\n        \"lifeTime\": {\n            \"type\": \"number\"\n        },\n        \"schema\": {\n            \"$ref\": \"#/components/schemas/SchemaResponse\"\n        }\n    },\n    \"required\": [\n        \"id\",\n        \"config\"\n    ]\n}\n</code></pre> <p> Response 201 Created </p> application/json Schema of the response body <pre><code>{\n    \"type\": \"object\"\n}\n</code></pre>"},{"location":"api/openapi/#delete-issuer-managementcredentialsid","title":"DELETE /issuer-management/credentials/{id}","text":"<p>Deletes an credential configuration.</p> <p>Input parameters</p> Parameter In Type Default Nullable Description <code>oauth2</code> header string N/A No <code>id</code> path string No <p> Response 200 OK </p>"},{"location":"api/openapi/#issuer-management","title":"Issuer management","text":""},{"location":"api/openapi/#post-issuer-managementoffer","title":"POST /issuer-management/offer","text":"<p>Create an offer for a credential.</p> <p>Input parameters</p> Parameter In Type Default Nullable Description <code>oauth2</code> header string N/A No <p>Request body</p> application/json <pre><code>{\n    \"response_type\": \"qrcode\",\n    \"credentialConfigurationIds\": [\n        \"pid\"\n    ],\n    \"flow\": \"pre_authorized_code\"\n}\n</code></pre> <pre><code>{\n    \"response_type\": \"uri\",\n    \"credentialConfigurationIds\": [\n        \"pid\"\n    ],\n    \"flow\": \"pre_authorized_code\"\n}\n</code></pre> Schema of the request body <pre><code>{\n    \"type\": \"object\",\n    \"properties\": {\n        \"response_type\": {\n            \"enum\": [\n                \"qrcode\",\n                \"uri\",\n                \"dc-api\"\n            ],\n            \"type\": \"string\",\n            \"examples\": [\n                {\n                    \"value\": \"qrcode\"\n                }\n            ],\n            \"description\": \"The type of response expected for the offer request.\"\n        },\n        \"claims\": {\n            \"type\": \"object\",\n            \"description\": \"Override the default values for the credential claims.\",\n            \"properties\": {},\n            \"examples\": [\n                {\n                    \"pid\": {\n                        \"given_name\": \"ERIKA\",\n                        \"family_name\": \"MUSTERMANN\"\n                    }\n                }\n            ]\n        },\n        \"flow\": {\n            \"description\": \"The flow type for the offer request.\",\n            \"enum\": [\n                \"authorization_code\",\n                \"pre_authorized_code\"\n            ],\n            \"type\": \"string\"\n        },\n        \"tx_code\": {\n            \"type\": \"string\",\n            \"description\": \"Transaction code for pre-authorized code flow.\"\n        },\n        \"credentialConfigurationIds\": {\n            \"description\": \"List of credential configuration ids to be included in the offer.\",\n            \"type\": \"array\",\n            \"items\": {\n                \"type\": \"string\"\n            }\n        },\n        \"claimWebhook\": {\n            \"description\": \"Webhooks to fetch the claims dynamically.\",\n            \"allOf\": [\n                {\n                    \"$ref\": \"#/components/schemas/WebhookConfig\"\n                }\n            ]\n        },\n        \"notifyWebhook\": {\n            \"description\": \"Webhook to notify about the status of the issuance process.\",\n            \"allOf\": [\n                {\n                    \"$ref\": \"#/components/schemas/WebhookConfig\"\n                }\n            ]\n        }\n    },\n    \"required\": [\n        \"response_type\",\n        \"flow\",\n        \"credentialConfigurationIds\"\n    ]\n}\n</code></pre> <p> Response 201 Created </p> application/jsonimage/png <p></p><pre><code>{\n    \"uri\": \"string\",\n    \"session\": \"string\"\n}\n</code></pre> \u26a0\ufe0f This example has been generated automatically from the schema and it is not accurate. Refer to the schema for more information.<p></p> Schema of the response body <pre><code>{\n    \"type\": \"object\",\n    \"properties\": {\n        \"uri\": {\n            \"type\": \"string\"\n        },\n        \"session\": {\n            \"type\": \"string\"\n        }\n    },\n    \"required\": [\n        \"uri\",\n        \"session\"\n    ]\n}\n</code></pre> <p></p><pre><code>{\n    \"uri\": \"string\",\n    \"session\": \"string\"\n}\n</code></pre> \u26a0\ufe0f This example has been generated automatically from the schema and it is not accurate. Refer to the schema for more information.<p></p> Schema of the response body <pre><code>{\n    \"type\": \"object\",\n    \"properties\": {\n        \"uri\": {\n            \"type\": \"string\"\n        },\n        \"session\": {\n            \"type\": \"string\"\n        }\n    },\n    \"required\": [\n        \"uri\",\n        \"session\"\n    ]\n}\n</code></pre>"},{"location":"api/openapi/#get-issuer-managementissuance","title":"GET /issuer-management/issuance","text":"<p>Returns the issuance configurations for this tenant.</p> <p>Input parameters</p> Parameter In Type Default Nullable Description <code>oauth2</code> header string N/A No <p> Response 200 OK </p> application/json <p></p><pre><code>{\n    \"tenant\": null,\n    \"authServers\": [\n        \"string\"\n    ],\n    \"notifyWebhook\": null,\n    \"batchSize\": 10.12,\n    \"dPopRequired\": true,\n    \"display\": [\n        {\n            \"name\": \"string\",\n            \"locale\": \"string\",\n            \"logo\": {\n                \"uri\": \"string\",\n                \"alt_text\": \"string\"\n            }\n        }\n    ],\n    \"createdAt\": \"2022-04-13T15:42:05.901Z\",\n    \"updatedAt\": \"2022-04-13T15:42:05.901Z\"\n}\n</code></pre> \u26a0\ufe0f This example has been generated automatically from the schema and it is not accurate. Refer to the schema for more information.<p></p> Schema of the response body <pre><code>{\n    \"type\": \"object\",\n    \"properties\": {\n        \"tenant\": {\n            \"description\": \"The tenant that owns this object.\",\n            \"allOf\": [\n                {\n                    \"$ref\": \"#/components/schemas/TenantEntity\"\n                }\n            ]\n        },\n        \"authServers\": {\n            \"description\": \"Authentication server URL for the issuance process.\",\n            \"type\": \"array\",\n            \"items\": {\n                \"type\": \"string\"\n            }\n        },\n        \"notifyWebhook\": {\n            \"description\": \"Webhook to send the result of the notification response\",\n            \"allOf\": [\n                {\n                    \"$ref\": \"#/components/schemas/WebhookConfig\"\n                }\n            ]\n        },\n        \"batchSize\": {\n            \"type\": \"number\",\n            \"description\": \"Value to determine the amount of credentials that are issued in a batch.\\nDefault is 1.\"\n        },\n        \"dPopRequired\": {\n            \"type\": \"boolean\",\n            \"description\": \"Indicates whether DPoP is required for the issuance process. Default value is true.\"\n        },\n        \"display\": {\n            \"type\": \"array\",\n            \"items\": {\n                \"$ref\": \"#/components/schemas/DisplayInfo\"\n            }\n        },\n        \"createdAt\": {\n            \"format\": \"date-time\",\n            \"type\": \"string\",\n            \"description\": \"The timestamp when the VP request was created.\"\n        },\n        \"updatedAt\": {\n            \"format\": \"date-time\",\n            \"type\": \"string\",\n            \"description\": \"The timestamp when the VP request was last updated.\"\n        }\n    },\n    \"required\": [\n        \"tenant\",\n        \"display\",\n        \"createdAt\",\n        \"updatedAt\"\n    ]\n}\n</code></pre>"},{"location":"api/openapi/#post-issuer-managementissuance","title":"POST /issuer-management/issuance","text":"<p>Stores the issuance configuration for this tenant.</p> <p>Input parameters</p> Parameter In Type Default Nullable Description <code>oauth2</code> header string N/A No <p>Request body</p> application/json <p></p><pre><code>{\n    \"authServers\": [\n        \"string\"\n    ],\n    \"notifyWebhook\": null,\n    \"batchSize\": 10.12,\n    \"dPopRequired\": true,\n    \"display\": [\n        {\n            \"name\": \"string\",\n            \"locale\": \"string\",\n            \"logo\": {\n                \"uri\": \"string\",\n                \"alt_text\": \"string\"\n            }\n        }\n    ]\n}\n</code></pre> \u26a0\ufe0f This example has been generated automatically from the schema and it is not accurate. Refer to the schema for more information.<p></p> Schema of the request body <pre><code>{\n    \"type\": \"object\",\n    \"properties\": {\n        \"authServers\": {\n            \"description\": \"Authentication server URL for the issuance process.\",\n            \"type\": \"array\",\n            \"items\": {\n                \"type\": \"string\"\n            }\n        },\n        \"notifyWebhook\": {\n            \"description\": \"Webhook to send the result of the notification response\",\n            \"allOf\": [\n                {\n                    \"$ref\": \"#/components/schemas/WebhookConfig\"\n                }\n            ]\n        },\n        \"batchSize\": {\n            \"type\": \"number\",\n            \"description\": \"Value to determine the amount of credentials that are issued in a batch.\\nDefault is 1.\"\n        },\n        \"dPopRequired\": {\n            \"type\": \"boolean\",\n            \"description\": \"Indicates whether DPoP is required for the issuance process. Default value is true.\"\n        },\n        \"display\": {\n            \"type\": \"array\",\n            \"items\": {\n                \"$ref\": \"#/components/schemas/DisplayInfo\"\n            }\n        }\n    },\n    \"required\": [\n        \"display\"\n    ]\n}\n</code></pre> <p> Response 201 Created </p> application/json Schema of the response body <pre><code>{\n    \"type\": \"object\"\n}\n</code></pre>"},{"location":"api/openapi/#health","title":"Health","text":""},{"location":"api/openapi/#get-health","title":"GET /health","text":"<p>Endpoint to check the health of the service.</p> <p> Response 200 OK </p> application/json <p></p><pre><code>{\n    \"status\": \"ok\",\n    \"info\": {\n        \"database\": {\n            \"status\": \"up\"\n        }\n    },\n    \"error\": {},\n    \"details\": {\n        \"database\": {\n            \"status\": \"up\"\n        }\n    }\n}\n</code></pre> \u26a0\ufe0f This example has been generated automatically from the schema and it is not accurate. Refer to the schema for more information.<p></p> Schema of the response body <pre><code>{\n    \"type\": \"object\",\n    \"properties\": {\n        \"status\": {\n            \"type\": \"string\",\n            \"example\": \"ok\"\n        },\n        \"info\": {\n            \"type\": \"object\",\n            \"example\": {\n                \"database\": {\n                    \"status\": \"up\"\n                }\n            },\n            \"additionalProperties\": {\n                \"type\": \"object\",\n                \"required\": [\n                    \"status\"\n                ],\n                \"properties\": {\n                    \"status\": {\n                        \"type\": \"string\"\n                    }\n                },\n                \"additionalProperties\": true\n            },\n            \"nullable\": true\n        },\n        \"error\": {\n            \"type\": \"object\",\n            \"example\": {},\n            \"additionalProperties\": {\n                \"type\": \"object\",\n                \"required\": [\n                    \"status\"\n                ],\n                \"properties\": {\n                    \"status\": {\n                        \"type\": \"string\"\n                    }\n                },\n                \"additionalProperties\": true\n            },\n            \"nullable\": true\n        },\n        \"details\": {\n            \"type\": \"object\",\n            \"example\": {\n                \"database\": {\n                    \"status\": \"up\"\n                }\n            },\n            \"additionalProperties\": {\n                \"type\": \"object\",\n                \"required\": [\n                    \"status\"\n                ],\n                \"properties\": {\n                    \"status\": {\n                        \"type\": \"string\"\n                    }\n                },\n                \"additionalProperties\": true\n            }\n        }\n    }\n}\n</code></pre> <p> Response 503 Service Unavailable </p> application/json <p></p><pre><code>{\n    \"status\": \"error\",\n    \"info\": {\n        \"database\": {\n            \"status\": \"up\"\n        }\n    },\n    \"error\": {\n        \"redis\": {\n            \"status\": \"down\",\n            \"message\": \"Could not connect\"\n        }\n    },\n    \"details\": {\n        \"database\": {\n            \"status\": \"up\"\n        },\n        \"redis\": {\n            \"status\": \"down\",\n            \"message\": \"Could not connect\"\n        }\n    }\n}\n</code></pre> \u26a0\ufe0f This example has been generated automatically from the schema and it is not accurate. Refer to the schema for more information.<p></p> Schema of the response body <pre><code>{\n    \"type\": \"object\",\n    \"properties\": {\n        \"status\": {\n            \"type\": \"string\",\n            \"example\": \"error\"\n        },\n        \"info\": {\n            \"type\": \"object\",\n            \"example\": {\n                \"database\": {\n                    \"status\": \"up\"\n                }\n            },\n            \"additionalProperties\": {\n                \"type\": \"object\",\n                \"required\": [\n                    \"status\"\n                ],\n                \"properties\": {\n                    \"status\": {\n                        \"type\": \"string\"\n                    }\n                },\n                \"additionalProperties\": true\n            },\n            \"nullable\": true\n        },\n        \"error\": {\n            \"type\": \"object\",\n            \"example\": {\n                \"redis\": {\n                    \"status\": \"down\",\n                    \"message\": \"Could not connect\"\n                }\n            },\n            \"additionalProperties\": {\n                \"type\": \"object\",\n                \"required\": [\n                    \"status\"\n                ],\n                \"properties\": {\n                    \"status\": {\n                        \"type\": \"string\"\n                    }\n                },\n                \"additionalProperties\": true\n            },\n            \"nullable\": true\n        },\n        \"details\": {\n            \"type\": \"object\",\n            \"example\": {\n                \"database\": {\n                    \"status\": \"up\"\n                },\n                \"redis\": {\n                    \"status\": \"down\",\n                    \"message\": \"Could not connect\"\n                }\n            },\n            \"additionalProperties\": {\n                \"type\": \"object\",\n                \"required\": [\n                    \"status\"\n                ],\n                \"properties\": {\n                    \"status\": {\n                        \"type\": \"string\"\n                    }\n                },\n                \"additionalProperties\": true\n            }\n        }\n    }\n}\n</code></pre>"},{"location":"api/openapi/#prometheus","title":"Prometheus","text":""},{"location":"api/openapi/#get-metrics","title":"GET /metrics","text":"<p> Response 200 OK </p>"},{"location":"api/openapi/#storage","title":"Storage","text":""},{"location":"api/openapi/#post-storage","title":"POST /storage","text":"<p>Upload files that belong to a tenant like images</p> <p>Input parameters</p> Parameter In Type Default Nullable Description <code>oauth2</code> header string N/A No <p>Request body</p> multipart/form-data <p></p><pre><code>{\n    \"file\": \"TG9yZW0gaXBzdW0gZG9sb3Igc2l0IGFtZXQ=\"\n}\n</code></pre> \u26a0\ufe0f This example has been generated automatically from the schema and it is not accurate. Refer to the schema for more information.<p></p> Schema of the request body <pre><code>{\n    \"type\": \"object\",\n    \"properties\": {\n        \"file\": {\n            \"type\": \"string\",\n            \"format\": \"binary\"\n        }\n    },\n    \"required\": [\n        \"file\"\n    ]\n}\n</code></pre> <p> Response 201 Created </p> application/json Schema of the response body <pre><code>{\n    \"type\": \"object\"\n}\n</code></pre>"},{"location":"api/openapi/#get-storagekey","title":"GET /storage/{key}","text":"<p>Input parameters</p> Parameter In Type Default Nullable Description <code>key</code> path string No <p> Response 200 OK </p>"},{"location":"api/openapi/#schemas","title":"Schemas","text":""},{"location":"api/openapi/#allowlistpolicy","title":"AllowListPolicy","text":"Name Type <code>policy</code> string <code>values</code> Array&lt;string&gt;"},{"location":"api/openapi/#apikeyconfig","title":"ApiKeyConfig","text":"Name Type <code>headerName</code> string <code>value</code> string"},{"location":"api/openapi/#attestationbasedpolicy","title":"AttestationBasedPolicy","text":"Name Type <code>policy</code> string <code>values</code> Array&lt;PolicyCredential&gt;"},{"location":"api/openapi/#authenticationmethodauth","title":"AuthenticationMethodAuth","text":"Name Type <code>config</code> AuthenticationUrlConfig <code>method</code> string"},{"location":"api/openapi/#authenticationmethodnone","title":"AuthenticationMethodNone","text":"Name Type <code>method</code> string"},{"location":"api/openapi/#authenticationmethodpresentation","title":"AuthenticationMethodPresentation","text":"Name Type <code>config</code> PresentationDuringIssuanceConfig <code>method</code> string"},{"location":"api/openapi/#authenticationurlconfig","title":"AuthenticationUrlConfig","text":"Name Type <code>url</code> string <code>webhook</code>"},{"location":"api/openapi/#authorizequeries","title":"AuthorizeQueries","text":"Name Type <code>auth_session</code> string <code>client_id</code> string <code>code_challenge</code> string <code>code_challenge_method</code> string <code>dpop_jkt</code> string <code>issuer_state</code> string <code>redirect_uri</code> string <code>request_uri</code> string <code>resource</code> string <code>response_type</code> string <code>scope</code> string <code>state</code> string"},{"location":"api/openapi/#certentity","title":"CertEntity","text":"Name Type <code>createdAt</code> string(date-time) <code>crt</code> string <code>description</code> string <code>id</code> string <code>tenant</code> <code>tenantId</code> string <code>type</code> <code>updatedAt</code> string(date-time)"},{"location":"api/openapi/#claim","title":"Claim","text":"Name Type <code>path</code> Array&lt;string&gt;"},{"location":"api/openapi/#claimsquery","title":"ClaimsQuery","text":"Name Type <code>id</code> string <code>path</code> Array&lt;string&gt; <code>values</code> Array&lt;&gt;"},{"location":"api/openapi/#cliententity","title":"ClientEntity","text":"Name Type <code>clientId</code> string <code>description</code> string <code>roles</code> Array&lt;string&gt; <code>secret</code> string <code>tenant</code> <code>tenantId</code> string"},{"location":"api/openapi/#clientsecretresponsedto","title":"ClientSecretResponseDto","text":"Name Type <code>secret</code> string"},{"location":"api/openapi/#createclientdto","title":"CreateClientDto","text":"Name Type <code>clientId</code> string <code>description</code> string <code>roles</code> Array&lt;string&gt;"},{"location":"api/openapi/#createtenantdto","title":"CreateTenantDto","text":"Name Type <code>description</code> string <code>id</code> string <code>name</code> string <code>roles</code> Array&lt;string&gt;"},{"location":"api/openapi/#credentialconfig","title":"CredentialConfig","text":"Name Type <code>claims</code> <code>claimsWebhook</code> <code>config</code> IssuerMetadataCredentialConfig <code>description</code> string <code>disclosureFrame</code> <code>embeddedDisclosurePolicy</code> <code>id</code> string <code>key</code> CertEntity <code>keyBinding</code> boolean <code>keyId</code> string <code>lifeTime</code> number <code>notificationWebhook</code> <code>schema</code> SchemaResponse <code>statusManagement</code> boolean <code>tenant</code> <code>vct</code> VCT"},{"location":"api/openapi/#credentialconfigcreate","title":"CredentialConfigCreate","text":"Name Type <code>claims</code> <code>claimsWebhook</code> <code>config</code> IssuerMetadataCredentialConfig <code>description</code> string <code>disclosureFrame</code> <code>embeddedDisclosurePolicy</code> <code>id</code> string <code>keyBinding</code> boolean <code>keyId</code> string <code>lifeTime</code> number <code>notificationWebhook</code> <code>schema</code> SchemaResponse <code>statusManagement</code> boolean <code>vct</code> VCT"},{"location":"api/openapi/#credentialquery","title":"CredentialQuery","text":"Name Type <code>claims</code> Array&lt;Claim&gt; <code>format</code> string <code>id</code> string <code>meta</code> <code>multiple</code> boolean <code>trusted_authorities</code> Array&lt;TrustedAuthorityQuery&gt;"},{"location":"api/openapi/#credentialsetquery","title":"CredentialSetQuery","text":"Name Type <code>options</code> Array&lt;Array&lt;string&gt;&gt; <code>required</code> boolean"},{"location":"api/openapi/#dcql","title":"DCQL","text":"Name Type <code>credential_set</code> Array&lt;CredentialSetQuery&gt; <code>credentials</code> Array&lt;CredentialQuery&gt;"},{"location":"api/openapi/#display","title":"Display","text":"Name Type <code>background_color</code> string <code>background_image</code> DisplayImage <code>description</code> string <code>locale</code> string <code>logo</code> DisplayImage <code>name</code> string <code>text_color</code> string"},{"location":"api/openapi/#displayimage","title":"DisplayImage","text":"Name Type <code>uri</code> string"},{"location":"api/openapi/#displayinfo","title":"DisplayInfo","text":"Name Type <code>locale</code> string <code>logo</code> DisplayLogo <code>name</code> string"},{"location":"api/openapi/#displaylogo","title":"DisplayLogo","text":"Name Type <code>alt_text</code> string <code>uri</code> string"},{"location":"api/openapi/#embeddeddisclosurepolicy","title":"EmbeddedDisclosurePolicy","text":"Name Type <code>policy</code> string"},{"location":"api/openapi/#fileuploaddto","title":"FileUploadDto","text":"Name Type <code>file</code> string(binary)"},{"location":"api/openapi/#issuanceconfig","title":"IssuanceConfig","text":"Name Type <code>authServers</code> Array&lt;string&gt; <code>batchSize</code> number <code>createdAt</code> string(date-time) <code>display</code> Array&lt;DisplayInfo&gt; <code>dPopRequired</code> boolean <code>notifyWebhook</code> <code>tenant</code> <code>updatedAt</code> string(date-time)"},{"location":"api/openapi/#issuancedto","title":"IssuanceDto","text":"Name Type <code>authServers</code> Array&lt;string&gt; <code>batchSize</code> number <code>display</code> Array&lt;DisplayInfo&gt; <code>dPopRequired</code> boolean <code>notifyWebhook</code>"},{"location":"api/openapi/#issuermetadatacredentialconfig","title":"IssuerMetadataCredentialConfig","text":"Name Type <code>display</code> Array&lt;Display&gt; <code>format</code> string <code>scope</code> string"},{"location":"api/openapi/#key_1","title":"Key","text":"Name Type <code>alg</code> string <code>crv</code> string <code>d</code> string <code>kid</code> string <code>kty</code> string <code>x</code> string <code>y</code> string"},{"location":"api/openapi/#keyimportdto","title":"KeyImportDto","text":"Name Type <code>crt</code> string <code>description</code> string <code>privateKey</code>"},{"location":"api/openapi/#nonetrustpolicy","title":"NoneTrustPolicy","text":"Name Type <code>policy</code> string"},{"location":"api/openapi/#offerrequestdto","title":"OfferRequestDto","text":"Name Type <code>claims</code> <code>claimWebhook</code> <code>credentialConfigurationIds</code> Array&lt;string&gt; <code>flow</code> string <code>notifyWebhook</code> <code>response_type</code> string <code>tx_code</code> string"},{"location":"api/openapi/#offerresponse","title":"OfferResponse","text":"Name Type <code>session</code> string <code>uri</code> string"},{"location":"api/openapi/#policycredential","title":"PolicyCredential","text":"Name Type <code>claims</code> Array&lt;ClaimsQuery&gt; <code>credential_sets</code> Array&lt;CredentialSetQuery&gt; <code>credentials</code> Array&lt;CredentialQuery&gt;"},{"location":"api/openapi/#presentationattachment","title":"PresentationAttachment","text":"Name Type <code>credential_ids</code> Array&lt;string&gt; <code>data</code> <code>format</code> string"},{"location":"api/openapi/#presentationconfig","title":"PresentationConfig","text":"Name Type <code>attached</code> Array&lt;PresentationAttachment&gt; <code>createdAt</code> string(date-time) <code>dcql_query</code> <code>description</code> string <code>id</code> string <code>lifeTime</code> number <code>redirectUri</code> string <code>registrationCert</code> <code>tenant</code> <code>updatedAt</code> string(date-time) <code>webhook</code>"},{"location":"api/openapi/#presentationconfigcreatedto","title":"PresentationConfigCreateDto","text":"Name Type <code>attached</code> Array&lt;PresentationAttachment&gt; <code>dcql_query</code> <code>description</code> string <code>id</code> string <code>lifeTime</code> number <code>redirectUri</code> string <code>registrationCert</code> <code>webhook</code>"},{"location":"api/openapi/#presentationduringissuanceconfig","title":"PresentationDuringIssuanceConfig","text":"Name Type <code>type</code> string"},{"location":"api/openapi/#presentationrequest","title":"PresentationRequest","text":"Name Type <code>redirectUri</code> string <code>requestId</code> string <code>response_type</code> string <code>webhook</code>"},{"location":"api/openapi/#registrationcertificaterequest","title":"RegistrationCertificateRequest","text":"Name Type <code>body</code> <code>id</code> string"},{"location":"api/openapi/#rootoftrustpolicy","title":"RootOfTrustPolicy","text":"Name Type <code>policy</code> string <code>values</code> string"},{"location":"api/openapi/#schemaresponse","title":"SchemaResponse","text":"Name Type <code>$schema</code> string <code>description</code> string <code>properties</code> <code>required</code> Array&lt;string&gt; <code>title</code> string <code>type</code> string"},{"location":"api/openapi/#session","title":"Session","text":"Name Type <code>auth_queries</code> <code>authorization_code</code> string <code>claimsWebhook</code> <code>createdAt</code> string(date-time) <code>credentialPayload</code> <code>credentials</code> Array&lt;&gt; <code>expiresAt</code> string(date-time) <code>id</code> string <code>notifications</code> Array&lt;&gt; <code>notifyWebhook</code> <code>offer</code> <code>offerUrl</code> string <code>redirectUri</code> string <code>request_uri</code> string <code>requestId</code> string <code>requestObject</code> string <code>requestUrl</code> string <code>status</code> string <code>tenant</code> <code>tenantId</code> string <code>updatedAt</code> string(date-time) <code>useDcApi</code> boolean <code>vp_nonce</code> string"},{"location":"api/openapi/#statusupdatedto","title":"StatusUpdateDto","text":"Name Type <code>credentialConfigurationId</code> string <code>sessionId</code> string <code>status</code> number"},{"location":"api/openapi/#tenantentity","title":"TenantEntity","text":"Name Type <code>clients</code> Array&lt;ClientEntity&gt; <code>description</code> string <code>id</code> string <code>name</code> string <code>status</code> string"},{"location":"api/openapi/#trustedauthorityquery","title":"TrustedAuthorityQuery","text":"Name Type <code>type</code> string <code>values</code> Array&lt;string&gt;"},{"location":"api/openapi/#updateclientdto","title":"UpdateClientDto","text":"Name Type <code>description</code> string <code>roles</code> Array&lt;string&gt;"},{"location":"api/openapi/#updatekeydto","title":"UpdateKeyDto","text":"Name Type <code>crt</code> string <code>description</code> string"},{"location":"api/openapi/#vct","title":"VCT","text":"Name Type <code>description</code> string <code>extends</code> string <code>extends#integrity</code> string <code>name</code> string <code>schema_uri</code> string <code>schema_uri#integrity</code> string <code>vct</code> string"},{"location":"api/openapi/#webhookauthconfigheader","title":"WebHookAuthConfigHeader","text":"Name Type <code>config</code> <code>type</code> string"},{"location":"api/openapi/#webhookauthconfignone","title":"WebHookAuthConfigNone","text":"Name Type <code>type</code> string"},{"location":"api/openapi/#webhookconfig","title":"WebhookConfig","text":"Name Type <code>auth</code> <code>url</code> string"},{"location":"api/openapi/#security-schemes","title":"Security schemes","text":"Name Type Scheme Description oauth2 oauth2"},{"location":"api/openapi/#more-documentation","title":"More documentation","text":"<p>Documentation</p> For more information: https://openwallet-foundation-labs.github.io/eudiplo/latest/"},{"location":"architecture/","title":"Overview","text":""},{"location":"architecture/#architecture-overview","title":"Architecture Overview","text":"<p>EUDIPLO is a lightweight middleware designed to bridge the gap between existing systems and the emerging ecosystem of EUDI Wallets. Instead of implementing complex protocols such as OpenID4VP, SD-JWT, or DIDComm themselves, developers can run EUDIPLO as a standalone Docker container and interact with it via simple APIs or configuration files.</p> <p>It acts as an adapter between trusted infrastructure and local applications or web services. EUDIPLO handles the complexities of the EUDI Wallet ecosystem, allowing you to focus on your core business logic without worrying about the underlying protocols.</p>"},{"location":"architecture/#structure","title":"Structure","text":"<p>EUDIPLO is built on a modular architecture, where each module is a plug-and-play component responsible for a specific system function. This design promotes separation of concerns, maintainability, and easy integration of new features.</p> <p>The core modules include:</p> <ul> <li>Database: Stores application and credential data.</li> <li>Key Management: Handles secure storage and management of cryptographic keys.</li> <li>Identity and Access Management: Manages access to the tenant's resources.</li> <li>Storage: Provides persistent storage for files and artifacts.</li> </ul> <p>Modules are activated via environment variable configuration. You select which backend to use globally for each module by setting the appropriate environment variables before starting EUDIPLO.</p> <p>Note: EUDIPLO is not designed to set individual database or storage options per tenant. All tenants share the same backend configuration for each module. If you need to switch backends, you are responsible for writing your own migration strategy to move existing data.</p> <p>This modular approach allows you to run EUDIPLO with simple local backends during development, and swap to scalable, secure services in production\u2014without changing your application code.</p> <p>For example, switching from local key management to HashiCorp Vault only requires updating your configuration.</p> <pre><code>flowchart TD\n    A(EUDIPLO)\n    B{{Databases}}\n    C{{Key Management}}\n    D{{Identity and Access Management}}\n    E{{Storage}}\n\n    A --&gt; B\n    B --&gt; B1[SQLite]\n    B --&gt; B2[PostgreSQL]\n\n    A --&gt; C\n    C --&gt; C1[Unencrypted DB]\n    C --&gt; C2[HashiCorp Vault]\n\n    A --&gt; D\n    D --&gt; D1[Local]\n    D --&gt; D2[Keycloak]\n\n    A --&gt; E\n    E --&gt; E1[Local]\n    E --&gt; E2[S3]</code></pre>"},{"location":"architecture/#deployment","title":"Deployment","text":"<p>EUDIPLO is shipped as a Docker image. It can be run with minimal setup via a <code>.env</code> file. You can mount:</p> <ul> <li>a <code>config/</code> directory for SQLite data or credential configuration</li> <li>optional integration with Vault for key storage</li> </ul> <p>EUDIPLO can be deployed as:</p> <ul> <li>a standalone local service (e.g., during development)</li> <li>a backend service in production (e.g., behind a gateway)</li> </ul> <p>You can find examples of deployments in the deployment directory.</p> <p>For configuration management, see Configuration Import to learn how to bootstrap your deployment with pre-configured credentials and workflows.</p>"},{"location":"architecture/#integration-patterns","title":"Integration Patterns","text":"<p>You can use EUDIPLO as:</p> <ul> <li>An internal credential issuance service for your citizen portal, education   platform, or company registry</li> <li>A verifier bridge to validate wallets without deeply integrating OpenID4VP   etc.</li> <li>A testing sandbox for experimenting with EUDI protocols</li> </ul>"},{"location":"architecture/#extensibility","title":"Extensibility","text":"<p>EUDIPLO is modular and extensible:</p> <ul> <li>Add new key management backends (e.g., AWS KMS)</li> <li>Customize issuance templates</li> <li>Extend the API layer with business-specific endpoints</li> </ul>"},{"location":"architecture/configuration-import/","title":"Config Import","text":""},{"location":"architecture/configuration-import/#configuration-import","title":"Configuration Import","text":"<p>EUDIPLO supports importing configurations from JSON files on application startup. This feature allows you to pre-configure credentials, issuance workflows, and presentation verification rules without using the API.</p>"},{"location":"architecture/configuration-import/#overview","title":"Overview","text":"<p>The configuration import system automatically loads and validates JSON configuration files from the <code>config/</code> directory when the application starts. This is particularly useful for:</p> <ul> <li>Development environments - Pre-load test configurations</li> <li>Production deployments - Bootstrap with standard configurations</li> <li>CI/CD pipelines - Automated environment setup</li> <li>Multi-tenant scenarios - Bulk import tenant-specific configurations</li> </ul> <p>When running locally with nodejs, the default directory is <code>assets/config/</code>.</p>"},{"location":"architecture/configuration-import/#configuration","title":"Configuration","text":"Key Type Notes <code>CONFIG_IMPORT</code> <code>boolean</code> Run one-off config import on startup  (default: <code>false</code>) <code>CONFIG_IMPORT_FORCE</code> <code>boolean</code> Force overwrite on config import  (default: <code>false</code>) <code>CONFIG_FOLDER</code> <code>string</code> Path to config import folder  (default: <code>/path/to/config/folder</code>)"},{"location":"architecture/configuration-import/#directory-structure","title":"Directory Structure","text":"<p>The configuration import follows a specific directory structure:</p> <pre><code>assets/\n\u2514\u2500\u2500 config/\n    \u251c\u2500\u2500 tenant1/\n    \u2502   \u251c\u2500\u2500 keys/\n    \u2502   \u2502   \u251c\u2500\u2500 039af178-3ca0-48f4-a2e4-7b1209f30376.json  # Key ID: \"039af178-3ca0-48f4-a2e4-7b1209f30376\"\n    \u2502   \u2502   \u251c\u2500\u2500 7d8e9f10-1234-5678-9abc-def012345678.json  # Key ID: \"7d8e9f10-1234-5678-9abc-def012345678\"\n    \u2502   \u2502   \u2514\u2500\u2500 a1b2c3d4-e5f6-7890-abcd-ef1234567890.json  # Key ID: \"a1b2c3d4-e5f6-7890-abcd-ef1234567890\"\n    \u2502   \u251c\u2500\u2500 issuance/\n    \u2502   \u2502   \u251c\u2500\u2500 credentials/\n    \u2502   \u2502   \u2502   \u251c\u2500\u2500 employee-badge.json\n    \u2502   \u2502   \u2502   \u2514\u2500\u2500 student-id.json\n    \u2502   \u2502   \u2514\u2500\u2500 issuance/\n    \u2502   \u2502       \u251c\u2500\u2500 employee-onboarding.json\n    \u2502   \u2502       \u2514\u2500\u2500 student-enrollment.json\n    \u2502   \u2514\u2500\u2500 presentation/\n    \u2502       \u251c\u2500\u2500 age-verification.json\n    \u2502       \u2514\u2500\u2500 identity-check.json\n    \u251c\u2500\u2500 tenant2/\n    \u2502   \u251c\u2500\u2500 keys/\n    \u2502   \u2502   \u2514\u2500\u2500 f8e7d6c5-b4a3-9281-7065-432109876543.json  # Key ID: \"f8e7d6c5-b4a3-9281-7065-432109876543\"\n    \u2502   \u251c\u2500\u2500 issuance/\n    \u2502   \u2502   \u251c\u2500\u2500 credentials/\n    \u2502   \u2502   \u2514\u2500\u2500 issuance/\n    \u2502   \u2514\u2500\u2500 presentation/\n    \u2514\u2500\u2500 company-xyz/\n        \u251c\u2500\u2500 keys/\n        \u2502   \u251c\u2500\u2500 12345678-abcd-ef12-3456-789012345678.json  # Key ID: \"12345678-abcd-ef12-3456-789012345678\"\n        \u2502   \u2514\u2500\u2500 98765432-fedc-ba98-7654-321098765432.json  # Key ID: \"98765432-fedc-ba98-7654-321098765432\"\n        \u251c\u2500\u2500 issuance/\n        \u2502   \u251c\u2500\u2500 credentials/\n        \u2502   \u2514\u2500\u2500 issuance/\n        \u2514\u2500\u2500 presentation/\n</code></pre>"},{"location":"architecture/configuration-import/#key-points","title":"Key Points","text":"<ul> <li>Tenant isolation: Each tenant has its own folder (e.g., <code>tenant1</code>,   <code>company-xyz</code>)</li> <li>Configuration types: types of configurations are supported</li> <li>File naming: Not relevant since the <code>id</code> is taken from the content of the file. For keys, the id is based on the <code>kid</code> field in the JSON   file and not based on the filename.</li> <li>Nested structure: Credentials and issuance configs are grouped under   <code>issuance/</code></li> <li>Key management: Cryptographic keys are stored in the <code>keys/</code> directory and   will be imported automatically. After the import, the keys can be removed from   the import folder. Some implementations like HashiCorp Vault do not support the import feature.</li> </ul>"},{"location":"architecture/configuration-import/#configuration-types","title":"Configuration Types","text":""},{"location":"architecture/configuration-import/#cryptographic-keys","title":"Cryptographic Keys","text":"<p>Location: <code>config/{tenant}/keys/*.json</code></p> <p>Import cryptographic keys for signing and certificate operations.</p> <p>Example Structure:</p> <pre><code>{\n    \"privateKey\": {\n        \"kty\": \"EC\",\n        \"x\": \"pmn8SKQKZ0t2zFlrUXzJaJwwQ0WnQxcSYoS_D6ZSGho\",\n        \"y\": \"rMd9JTAovcOI_OvOXWCWZ1yVZieVYK2UgvB2IPuSk2o\",\n        \"crv\": \"P-256\",\n        \"d\": \"rqv47L1jWkbFAGMCK8TORQ1FknBUYGY6OLU1dYHNDqU\",\n        \"kid\": \"039af178-3ca0-48f4-a2e4-7b1209f30376\",\n        \"alg\": \"ES256\"\n    },\n    \"crt\": \"-----BEGIN CERTIFICATE-----\\n...\\n-----END CERTIFICATE-----\"\n}\n</code></pre> <p>Key Features:</p> <ul> <li>Multiple keys per tenant: Import several keys for different issuance   configurations</li> <li>Key ID from filename: The filename (without <code>.json</code>) becomes the key ID   (typically a UUID)</li> <li>Optional certificates: Include X.509 certificates in PEM format</li> <li>Algorithm support: ES256 (ECDSA P-256)</li> <li>Validation: Full schema validation during import</li> </ul>"},{"location":"architecture/configuration-import/#credential-configurations","title":"Credential Configurations","text":"<p>Location: <code>config/{tenant}/issuance/credentials/*.json</code></p> <p>Define credential templates and schemas.</p> <p>Schema Reference: Credential Config API</p>"},{"location":"architecture/configuration-import/#issuance-configurations","title":"Issuance Configurations","text":"<p>Location: <code>config/{tenant}/issuance/issuance/*.json</code></p> <p>Define issuance workflows and authentication requirements.</p> <p>Schema Reference: Issuance Config API</p>"},{"location":"architecture/configuration-import/#presentation-configurations","title":"Presentation Configurations","text":"<p>Location: <code>config/{tenant}/presentation/*.json</code></p> <p>Define verification requirements for credential presentations.</p> <p>Schema Reference: Presentation Config API</p>"},{"location":"architecture/configuration-import/#client-configurations","title":"Client Configurations","text":"<p>Location: <code>config/{tenant}/clients/*.json</code></p> <p>Define client-specific configurations, including client IDs, secrets, and permissions.</p> <p>Schema Reference: Client Config API</p>"},{"location":"architecture/configuration-import/#image-configuration","title":"Image Configuration","text":"<p>Location: <code>config/{tenant}/images/*</code></p> <p>Uploads the images to be used in in the issuer display information or for credential configs. The reference to the image is done via the filename, e.g. <code>logo.png</code> instead of a full URL like:</p> <pre><code>{\n    \"display\": [\n        {\n            \"name\": \"PID\",\n            \"description\": \"PID Credential\",\n            \"locale\": \"en-US\",\n            \"background_color\": \"#FFFFFF\",\n            \"text_color\": \"#000000\",\n            \"background_image\": {\n                \"uri\": \"identity-card.jpg\"\n            },\n            \"logo\": {\n                \"uri\": \"logo.jpg\"\n            }\n        }\n    ]\n}\n</code></pre> <p>When the image can not be found, the image reference is ignored.</p>"},{"location":"architecture/configuration-import/#import-process","title":"Import Process","text":""},{"location":"architecture/configuration-import/#startup-validation","title":"Startup Validation","text":"<p>During application startup, EUDIPLO:</p> <ul> <li>Checks environment variables - Only imports if <code>CONFIG_IMPORT=true</code></li> <li>Scans tenant directories - Processes each tenant folder independently</li> <li>Validates file structure - Ensures required subdirectories exist</li> <li>Reads JSON files - Parses each configuration file</li> </ul>"},{"location":"architecture/configuration-import/#validation-and-processing","title":"Validation and Processing","text":"<p>For each configuration file:</p> <ul> <li>JSON parsing - Validates file syntax</li> <li>Schema validation - Uses the same validators as the API endpoints</li> <li>Dependency checking - Verifies referenced configurations exist</li> <li>Duplicate handling - Respects <code>CONFIG_IMPORT_FORCE</code> setting</li> </ul>"},{"location":"architecture/configuration-import/#error-handling","title":"Error Handling","text":"<p>Invalid configurations are handled gracefully:</p> <ul> <li>Validation errors are logged with detailed information</li> <li>Invalid files are skipped - Import continues with remaining files</li> <li>Missing dependencies are reported</li> <li>Existing configurations are preserved unless force mode is enabled</li> </ul>"},{"location":"architecture/configuration-import/#logging","title":"Logging","text":"<p>Import activities are logged with structured information:</p> <pre><code>{\n    \"event\": \"Import\",\n    \"tenant\": \"company-xyz\",\n    \"files\": 5,\n    \"message\": \"5 credential configs imported for company-xyz\"\n}\n</code></pre> <p>Key import logging:</p> <pre><code>{\n    \"event\": \"Import\",\n    \"tenant\": \"company-xyz\",\n    \"message\": \"3 keys imported for company-xyz\"\n}\n</code></pre> <p>Error logging includes detailed validation information:</p> <pre><code>{\n    \"event\": \"ValidationError\",\n    \"file\": \"invalid-config.json\",\n    \"tenant\": \"company-xyz\",\n    \"errors\": [\n        {\n            \"property\": \"credentialConfigs\",\n            \"constraints\": { \"isArray\": \"credentialConfigs must be an array\" },\n            \"value\": \"not-an-array\"\n        }\n    ]\n}\n</code></pre>"},{"location":"architecture/configuration-import/#best-practices","title":"Best Practices","text":""},{"location":"architecture/configuration-import/#configuration-management","title":"Configuration Management","text":"<ul> <li>Use descriptive filenames that reflect the configuration purpose</li> <li>Test configurations in development before deploying</li> <li>Document tenant-specific configurations</li> </ul>"},{"location":"architecture/configuration-import/#production-deployment","title":"Production Deployment","text":"<ul> <li>Set <code>CONFIG_IMPORT=true</code> only for initial deployment</li> <li>Use <code>CONFIG_IMPORT_FORCE=false</code> to prevent accidental overwrites</li> <li>Monitor logs for validation errors during startup</li> <li>Manage configurations via API after initial import</li> </ul>"},{"location":"architecture/configuration-import/#multi-tenant-setup","title":"Multi-Tenant Setup","text":"<pre><code># Organize by tenant/organization\nassets/config/\n\u251c\u2500\u2500 acme-corp/\n\u2502   \u251c\u2500\u2500 keys/\n\u2502   \u251c\u2500\u2500 issuance/\n\u2502   \u2514\u2500\u2500 presentation/\n\u251c\u2500\u2500 university-x/\n\u2502   \u251c\u2500\u2500 keys/\n\u2502   \u251c\u2500\u2500 issuance/\n\u2502   \u2514\u2500\u2500 presentation/\n\u2514\u2500\u2500 government-agency/\n    \u251c\u2500\u2500 keys/\n    \u251c\u2500\u2500 issuance/\n    \u2514\u2500\u2500 presentation/\n</code></pre> <p>Even when you just have one tenant, use a folder structure to prepare for future multi-tenancy.</p>"},{"location":"architecture/configuration-import/#troubleshooting","title":"Troubleshooting","text":""},{"location":"architecture/configuration-import/#common-issues","title":"Common Issues","text":"<p>Import not running: Check <code>CONFIG_IMPORT=true</code> is set</p> <p>Configurations not updating: Set <code>CONFIG_IMPORT_FORCE=true</code> to overwrite existing</p> <p>Validation errors: Check logs for specific validation failures and schema requirements</p> <p>Missing dependencies: Ensure credential configs are imported before issuance configs that reference them</p> <p>Key validation errors: Check that imported keys use supported algorithms (ES256) and have valid JWK format</p> <p>Certificate import issues: Verify certificates are in PEM format and match the imported private key</p>"},{"location":"architecture/configuration-import/#security-considerations","title":"Security Considerations","text":"<ul> <li>File permissions - Ensure config files have appropriate read permissions</li> <li>Tenant isolation - Verify tenant boundaries are properly maintained</li> </ul> <p>TODO: check if webhook credentials should be stored here or in environment variables for security.</p>"},{"location":"architecture/configuration-import/#related-documentation","title":"Related Documentation","text":"<ul> <li>Key Management - Detailed key management architecture</li> <li>API Authentication</li> <li>Multi-tenant Architecture</li> <li>Database Architecture</li> <li>Production Deployment</li> </ul>"},{"location":"architecture/database/","title":"Database","text":""},{"location":"architecture/database/#databases","title":"Databases","text":"<p>This service uses TypeORM for data persistence. By default, a local SQLite database is used, but the system also supports PostgreSQL and can be extended to work with other engines such as MySQL thanks to TypeORM\u2019s flexible architecture.</p>"},{"location":"architecture/database/#configuration","title":"Configuration","text":"Key Type Notes <code>DB_TYPE</code> <code>string</code> Database type  (default: <code>sqlite</code>) <code>DB_HOST</code> <code>string</code> Database host [when DB_TYPE is {\"override\":true} | \"sqlite\" \u2192 otherwise required] <code>DB_PORT</code> <code>number</code> Database port [when DB_TYPE is {\"override\":true} | \"sqlite\" \u2192 otherwise required] <code>DB_USERNAME</code> <code>string</code> Database username [when DB_TYPE is {\"override\":true} | \"sqlite\" \u2192 otherwise required] <code>DB_PASSWORD</code> <code>string</code> Database password [when DB_TYPE is {\"override\":true} | \"sqlite\" \u2192 otherwise required] <code>DB_DATABASE</code> <code>string</code> Database name [when DB_TYPE is {\"override\":true} | \"sqlite\" \u2192 otherwise required]"},{"location":"architecture/database/#sqlite-default","title":"SQLite (Default)","text":"<p>When using <code>DB_TYPE=sqlite</code>, the service will store its data in a local file-based SQLite database located at the path defined by the <code>FOLDER</code> variable (<code>./config</code> by default). This setup is lightweight and ideal for:</p> <ul> <li>Development</li> <li>Testing</li> <li>Prototyping</li> </ul> <p>No additional database server is required.</p>"},{"location":"architecture/database/#postgresql","title":"PostgreSQL","text":"<p>To connect to a PostgreSQL instance, set the following environment variables:</p> <pre><code>DB_TYPE=postgres\nDB_HOST=your-hostname\nDB_PORT=5432\nDB_USERNAME=your-username\nDB_PASSWORD=your-password\nDB_DATABASE=your-database\n</code></pre> <p>This mode is suitable for:</p> <ul> <li>Production deployments</li> <li>Multi-instance setups</li> <li>Scenarios requiring scalability and better concurrency handling</li> </ul> <p>Make sure your database is reachable and properly initialized before starting the service.</p>"},{"location":"architecture/database/#extensibility","title":"Extensibility","text":"<p>Because this service uses TypeORM, it is easy to integrate additional database engines such as:</p> <ul> <li>MySQL / MariaDB</li> <li>Microsoft SQL Server</li> <li>Oracle</li> </ul> <p>To add support for a new engine:</p> <ul> <li>Install the appropriate TypeORM driver (e.g., <code>mysql2</code>)</li> <li>Set <code>DB_TYPE</code> to the corresponding engine name</li> <li>Configure the necessary connection options via environment variables</li> </ul> <p>Let us know if you need help extending support for additional databases.</p>"},{"location":"architecture/database/#multi-tenant-database-schema","title":"Multi-Tenant Database Schema","text":"<p>EUDIPLO supports multi-tenancy, allowing multiple tenants to share the same database while keeping their data isolated. This is achieved by adding a <code>tenantId</code> column to relevant entities and filtering all queries by this identifier.</p>"},{"location":"architecture/database/#tenant-isolation-in-database","title":"Tenant Isolation in Database","text":"<p>In multi-tenant mode, data isolation is achieved through a <code>tenantId</code> column in all relevant entities:</p>"},{"location":"architecture/database/#core-entities-with-tenant-support","title":"Core Entities with Tenant Support","text":"<p>Session Entity:</p> <pre><code>@Entity()\nexport class Session {\n    @PrimaryColumn('uuid')\n    id: string;\n\n    @Column('varchar')\n    tenantId: string; // Tenant ID for multi-tenancy support\n\n    // ... other fields\n}\n</code></pre> <p>Issuance Configuration Entity:</p> <pre><code>@Entity()\nexport class IssuanceConfig {\n    @PrimaryColumn('varchar')\n    id: string;\n\n    @Column('varchar')\n    tenantId: string;\n\n    // ... other fields\n}\n</code></pre>"},{"location":"architecture/database/#database-queries","title":"Database Queries","text":"<p>All database operations automatically filter by <code>tenantId</code> when in multi-tenant mode:</p> <pre><code>// Example: Get sessions for specific tenant\nreturn this.sessionRepository.findBy({ tenantId });\n\n// Example: Update session with tenant scope\nreturn this.sessionRepository.update({ id: sessionId, tenantId }, updateData);\n</code></pre>"},{"location":"architecture/key-management/","title":"Key Management","text":""},{"location":"architecture/key-management/#key-management","title":"Key Management","text":"<p>The keys used for signing operations in EUDIPLO can be managed in multiple ways, depending on the selected key management type (<code>KM_TYPE</code>).</p> <p>\ud83d\udca1 Encryption operations are always proceed with database stored keys for not and independent from the used KeyManagement Module.</p>"},{"location":"architecture/key-management/#configuration","title":"Configuration","text":"Key Type Notes <code>KM_TYPE</code> <code>string</code> The key management type  (default: <code>db</code>) <code>VAULT_URL</code> <code>string</code> The URL of the Vault server [when KM_TYPE is {\"override\":true} | \"vault\" \u2192 then required] <code>VAULT_TOKEN</code> <code>string</code> The token for accessing the Vault [when KM_TYPE is {\"override\":true} | \"vault\" \u2192 then required]"},{"location":"architecture/key-management/#database-based-key-management","title":"Database based Key Management","text":"<p>When <code>KM_TYPE=db</code> (default), keys are stored unencrypted in the database. This mode is ideal for development or testing.</p>"},{"location":"architecture/key-management/#multiple-key-support","title":"Multiple Key Support","text":"<p>Each tenant can manage multiple cryptographic keys simultaneously. Each key has a unique key id and is also isolated via the <code>tenant_id</code> field.</p> <p>Each key file contains the private key in JWK format:</p> <pre><code>{\n  \"kty\": \"EC\",\n  \"x\": \"pmn8SKQKZ0t2zFlrUXzJaJwwQ0WnQxcSYoS_D6ZSGho\",\n  \"y\": \"rMd9JTAovcOI_OvOXWCWZ1yVZieVYK2UgvB2IPuSk2o\",\n  \"crv\": \"P-256\",\n  \"d\": \"rqv47L1jWkbFAGMCK8TORQ1FknBUYGY6OLU1dYHNDqU\",\n  \"kid\": \"039af178-3ca0-48f4-a2e4-7b1209f30376\",\n  \"alg\": \"ES256\"\n}\n</code></pre>"},{"location":"architecture/key-management/#automatic-key-generation","title":"Automatic Key Generation","text":"<p>On startup, if no keys are found for a tenant, the service will automatically generate a new key pair. Even when using the database mode, the private key will never be exposed by the api.</p>"},{"location":"architecture/key-management/#vault-hashicorp-vault","title":"Vault (HashiCorp Vault)","text":"<p>To use HashiCorp Vault for key management, configure the following:</p> <pre><code>KM_TYPE=vault\nVAULT_URL=http://localhost:8200/v1/transit\nVAULT_TOKEN=your-vault-token\n</code></pre> <p>For each tenant, a new secret engine is created in Vault with the path <code>{tenantId}</code>.</p> <p>To issue credentials, you need to have a signed certificate for the public key that is bound to your domain.</p> <p>In this mode:</p> <ul> <li>All signing operations are delegated to Vault via its API.</li> <li>The private key never leaves the Vault server.</li> <li>Access can be tightly controlled using Vault\u2019s policies and authentication   mechanisms.</li> </ul> <p>Vault is well-suited for production environments where secure, auditable key usage is required.</p>"},{"location":"architecture/key-management/#extensibility","title":"Extensibility","text":"<p>The key management system is designed to be extensible. You can integrate other key management backends such as:</p> <ul> <li>\ud83d\udd10 AWS KMS</li> <li>\ud83d\udd10 Azure Key Vault</li> <li>\ud83d\udd10 Google Cloud KMS</li> <li>\ud83d\udd10 Hardware Security Modules (HSMs)</li> </ul> <p>To add a new backend:</p> <ul> <li>Implement the key service interface.</li> <li>Extend the module factory to support a new <code>KM_TYPE</code>.</li> </ul> <pre><code>// Example (in code):\nKM_TYPE = awskms;\n</code></pre> <p>If you need help integrating a new provider, feel free to open an issue or contact the maintainers.</p>"},{"location":"architecture/key-management/#certificates","title":"Certificates","text":"<p>EUDIPLO supports the use of X.509 certificates for key management. Certificates can be used to verify the authenticity of public keys and establish trust between parties.</p>"},{"location":"architecture/key-management/#certificate-generation","title":"Certificate Generation","text":"<p>When a new key pair is generated, a self-signed certificate is also created. This certificate includes the public key and is stored alongside the key files. The certificate can be overwritten any time via the api.</p> <p>When using the Registrar, it will generate a certificate for the public key that can be used to secure the OID4VCI and OID4VP requests. Each tenant will only have one access certificate.</p> <p>Note: In the future the access certificate generation will follow the official standard that is under development right now.</p>"},{"location":"architecture/key-management/#certificate-format","title":"Certificate Format","text":"<p>Certificates are stored in PEM format and can be included in key import requests.</p>"},{"location":"architecture/key-management/#multi-tenant-key-management","title":"Multi-Tenant Key Management","text":""},{"location":"architecture/key-management/#automatic-key-generation_1","title":"Automatic Key Generation","text":"<p>Tenant Initialization Process:</p> <ol> <li>Client registers with credentials (<code>client_id</code>, <code>client_secret</code>)</li> <li>Cryptographic key pair automatically generated</li> <li>Keys stored in tenant-specific location</li> <li>Generation of certificate for public key</li> </ol>"},{"location":"architecture/key-management/#key-import-and-management","title":"Key Import and Management","text":"<p>EUDIPLO supports importing existing keys through multiple methods to accommodate different deployment scenarios and security requirements.</p> <p>The <code>kid</code> provided in the key files is used to identify and manage keys within the system. An optional <code>description</code> field can be included for additional context.</p>"},{"location":"architecture/key-management/#api-based-key-import","title":"API-Based Key Import","text":"<p>Import keys through the REST API using authenticated requests:</p> <p>Endpoint: <code>POST /key</code></p> <p>Request Body:</p> <pre><code>{\n  \"privateKey\": {\n    \"kty\": \"EC\",\n    \"x\": \"pmn8SKQKZ0t2zFlrUXzJaJwwQ0WnQxcSYoS_D6ZSGho\",\n    \"y\": \"rMd9JTAovcOI_OvOXWCWZ1yVZieVYK2UgvB2IPuSk2o\",\n    \"crv\": \"P-256\",\n    \"d\": \"rqv47L1jWkbFAGMCK8TORQ1FknBUYGY6OLU1dYHNDqU\",\n    \"kid\": \"039af178-3ca0-48f4-a2e4-7b1209f30376\",\n    \"alg\": \"ES256\"\n  },\n  \"description\": \"Optional key description\",\n  \"crt\": \"-----BEGIN CERTIFICATE-----\\n...optional certificate...\\n-----END CERTIFICATE-----\"\n}\n</code></pre> <p>Response:</p> <pre><code>{\n  \"id\": \"039af178-3ca0-48f4-a2e4-7b1209f30376\"\n}\n</code></pre>"},{"location":"architecture/key-management/#configuration-based-key-import","title":"Configuration-Based Key Import","text":"<p>Import keys automatically during application startup using the configuration import system.</p> <p>Environment Variables:</p> <pre><code>CONFIG_IMPORT=true\nCONFIG_IMPORT_FORCE=false  # Set to true to overwrite existing keys\n</code></pre> <p>Directory Structure:</p> <pre><code>assets/config/\n\u251c\u2500\u2500 tenant-1/\n\u2502   \u2514\u2500\u2500 keys/\n\u2502       \u251c\u2500\u2500 primary-key.json\n\u2502       \u251c\u2500\u2500 backup-key.json\n\u2502       \u2514\u2500\u2500 legacy-key.json\n\u2514\u2500\u2500 tenant-2/\n    \u2514\u2500\u2500 keys/\n        \u2514\u2500\u2500 signing-key.json\n</code></pre> <p>Key File Format:</p> <pre><code>{\n  \"privateKey\": {\n    \"kty\": \"EC\",\n    \"x\": \"...\",\n    \"y\": \"...\",\n    \"crv\": \"P-256\",\n    \"d\": \"...\",\n    \"kid\": \"unique-key-identifier\",\n    \"alg\": \"ES256\"\n  },\n  \"crt\": \"-----BEGIN CERTIFICATE-----\\n...\\n-----END CERTIFICATE-----\"\n}\n</code></pre>"},{"location":"architecture/key-management/#key-management-operations","title":"Key Management Operations","text":"<p>List All Keys:</p> <pre><code>GET /key\nAuthorization: Bearer &lt;tenant-token&gt;\n</code></pre>"},{"location":"architecture/key-management/#supported-key-formats","title":"Supported Key Formats","text":"<ul> <li>Algorithm Support: ES256 (ECDSA P-256)</li> <li>Key Format: JSON Web Key (JWK) format</li> <li>Certificate Support: Optional X.509 certificates in PEM format</li> <li>Key Generation: Automatic generation if no keys exist</li> </ul>"},{"location":"architecture/sessions/","title":"Sessions","text":""},{"location":"architecture/sessions/#sessions-management","title":"Sessions Management","text":"<p>EUDIPLO manages sessions for credential issuance and verification and are bound to each tenant. In case for a presentation during issuance, both actions are handled in the same session. Sessions are stored in the database and can be managed via the <code>/sessions</code> endpoint. You can retrieve a specific session via <code>/sessions/{id}</code>.</p> <p>To tidy up old sessions, an interval is set to delete older session. The default values can be configured.</p> <p>Other elements as persisted status mapping (the binding between a session id and a status list reference) are not deleted with this process.</p>"},{"location":"architecture/sessions/#configuration","title":"Configuration","text":"Key Type Notes <code>SESSION_TIDY_UP_INTERVAL</code> <code>number</code> Interval in seconds to run session tidy up  (default: <code>3600</code>) <code>SESSION_TTL</code> <code>number</code> Time to live for sessions in seconds  (default: <code>86400</code>)"},{"location":"architecture/storage/","title":"Storage","text":""},{"location":"architecture/storage/#file-storage","title":"File Storage","text":"<p>This service supports flexible file storage options, allowing you to choose between local disk storage and Amazon S3-compatible object storage. The storage backend is fully configurable via environment variables.</p> <p>\ud83d\udca1 Storage configuration is dynamic and can be switched between local and S3 by setting the appropriate environment variables.</p>"},{"location":"architecture/storage/#configuration","title":"Configuration","text":"Key Type Notes <code>STORAGE_DRIVER</code> <code>string</code> The storage driver to use  (default: <code>local</code>) <code>LOCAL_STORAGE_DIR</code> <code>string</code> The directory to store files in when using local storage [when STORAGE_DRIVER is {\"override\":true} | \"local\" \u2192 then default=undefined] <code>S3_REGION</code> <code>string</code> The AWS region for the S3 bucket [when STORAGE_DRIVER is {\"override\":true} | \"s3\" \u2192 then required] <code>S3_BUCKET</code> <code>string</code> The name of the S3 bucket [when STORAGE_DRIVER is {\"override\":true} | \"s3\" \u2192 then required] <code>S3_ACCESS_KEY_ID</code> <code>string</code> The access key ID for the S3 bucket [when STORAGE_DRIVER is {\"override\":true} | \"s3\" \u2192 then required] <code>S3_SECRET_ACCESS_KEY</code> <code>string</code> The secret access key for the S3 bucket [when STORAGE_DRIVER is {\"override\":true} | \"s3\" \u2192 then required] <code>S3_ENDPOINT</code> <code>string</code> The endpoint URL for the S3 service (for S3-compatible services) [when STORAGE_DRIVER is {\"override\":true} | \"s3\"] <code>S3_FORCE_PATH_STYLE</code> <code>boolean</code> Whether to force path-style URLs for S3 [when STORAGE_DRIVER is {\"override\":true} | \"s3\" \u2192 then default=false] <code>S3_PUBLIC_BASE_URL</code> <code>string</code> The public base URL for the S3 bucket [when STORAGE_DRIVER is {\"override\":true} | \"s3\" \u2192 then required]"},{"location":"architecture/storage/#local-storage-default","title":"Local Storage (Default)","text":"<p>When <code>STORAGE_DRIVER=local</code>, files are stored on the local filesystem in the directory specified by <code>LOCAL_STORAGE_DIR</code>. This is ideal for:</p> <ul> <li>Development</li> <li>Testing</li> <li>Simple deployments</li> </ul> <p>No external storage service is required.</p>"},{"location":"architecture/storage/#amazon-s3-s3-compatible-storage","title":"Amazon S3 / S3-Compatible Storage","text":"<p>To use S3 or a compatible service (e.g., MinIO), set the following environment variables:</p> <pre><code>STORAGE_DRIVER=s3\nS3_REGION=your-region\nS3_BUCKET=your-bucket\nS3_ACCESS_KEY_ID=your-access-key\nS3_SECRET_ACCESS_KEY=your-secret-key\nS3_PUBLIC_BASE_URL=https://your-bucket.s3.amazonaws.com/\n# Optional for custom endpoints:\nS3_ENDPOINT=https://minio.example.com\nS3_FORCE_PATH_STYLE=true\n</code></pre> <p>This mode is suitable for:</p> <ul> <li>Production deployments</li> <li>Scalable storage needs</li> <li>Cloud-native architectures</li> </ul> <p>Ensure your S3 bucket is accessible and properly configured.</p>"},{"location":"architecture/storage/#extensibility","title":"Extensibility","text":"<p>The storage system is designed to be extensible. You can add support for other storage backends by implementing the <code>FileStorage</code> interface and registering your adapter.</p> <p>To add a new backend:</p> <ul> <li>Implement a new adapter class (see <code>LocalFileStorage</code> and <code>S3FileStorage</code> for examples)</li> <li>Register your adapter in the storage module</li> <li>Add configuration options as needed</li> </ul> <p>Contact us if you need help integrating additional storage providers.</p>"},{"location":"architecture/storage/#accessibility","title":"Accessibility","text":"<p>Files can be uploaded via the <code>/storage</code> endpoint, an access token is required to protect this endpoint and to associate files with the correct tenant. You can also use the Web Client to upload the images or logos for the issuer metadata or for the credential configuration.</p> <p>When using the <code>local</code> storage driver, files are served via <code>/storage/&lt;file-id&gt;</code>. In case of S3, files are served via the S3 public base URL without an expiration date.</p> <p>TODO: we may add an expiration date for S3 URLs in the future since the issuer metadata are not long lived and just session based.</p>"},{"location":"architecture/storage/#multi-tenant-storage","title":"Multi-Tenant Storage","text":"<p>EUDIPLO supports multi-tenancy for file storage. Files are associated with a <code>tenantId</code> to ensure data isolation between tenants.</p>"},{"location":"architecture/storage/#tenant-isolation-in-storage","title":"Tenant Isolation in Storage","text":"<p>Files are stored with metadata indicating the owning tenant. All file operations are scoped by <code>tenantId</code>:</p>"},{"location":"architecture/storage/#file-entity-example","title":"File Entity Example","text":"<pre><code>@Entity()\nexport class FileEntity {\n  @PrimaryGeneratedColumn('uuid')\n  id: string;\n\n  @Column('varchar')\n  tenantId: string; // Tenant ID for multi-tenancy support\n\n  // ... other fields\n}\n</code></pre>"},{"location":"architecture/storage/#storage-operations","title":"Storage Operations","text":"<p>All file service operations filter by <code>tenantId</code>:</p> <pre><code>// Example: List files for a tenant\nreturn this.fileRepository.findBy({ tenantId });\n\n// Example: Save file for a tenant\nfile.tenantId = tenantId;\nreturn this.fileRepository.save(file);\n</code></pre>"},{"location":"architecture/storage/#summary","title":"Summary","text":"<ul> <li>Choose between local and S3 storage via environment variables</li> <li>Easily extend to other storage backends</li> <li>Multi-tenant support ensures data isolation</li> <li>Configuration is dynamic and environment-driven</li> </ul>"},{"location":"architecture/supported-protocols/","title":"Supported Protocols","text":""},{"location":"architecture/supported-protocols/#supported-protocols","title":"Supported Protocols","text":"<p>EUDIPLO is deliberately limited to protocols that are part of the European Digital Identity Wallet (EUDI Wallet) ecosystem. This focused scope reduces implementation complexity, improves long-term maintainability, and ensures a consistent trust model across services.</p> <p>Rather than being a general-purpose verifiable credentials broker, EUDIPLO aligns strictly with the specifications endorsed by the EU regulatory and technical framework.</p>"},{"location":"architecture/supported-protocols/#protocols-supported","title":"Protocols Supported","text":"Protocol Description OpenID for Verifiable Credential Issuance (OID4VCI) Enables issuers to deliver verifiable credentials to EUDI Wallets using OAuth-based flows. OpenID for Verifiable Presentations (OID4VP) Allows services to request and verify credentials presented by EUDI Wallet holders. Selective Disclosure JWT VC (SD-JWT VC) Data model for credentials allowing selective disclosure of individual claims by the user. OAuth Token Status List Mechanism for determining revocation or suspension status of issued credentials. <p>These standards are evolving in coordination with EU-level pilot projects and working groups. EUDIPLO tracks these developments closely to provide early, stable support as specifications mature.</p>"},{"location":"architecture/supported-protocols/#why-not-more","title":"Why Not More?","text":"<p>By limiting scope to official EUDI Wallet protocols, EUDIPLO avoids:</p> <ul> <li>Incompatibilities with reference implementations</li> <li>Bloated code from supporting rarely used formats</li> <li>Uncertain trust assumptions from broader ecosystems</li> </ul> <p>This makes EUDIPLO especially suitable for:</p> <ul> <li>Public sector services integrating with national wallet pilots</li> <li>Companies targeting pan-European credential workflows</li> <li>Developers seeking a reliable, minimal abstraction layer over complex specs</li> </ul>"},{"location":"architecture/tenant/","title":"Tenant-Based","text":""},{"location":"architecture/tenant/#tenant-based-architecture","title":"Tenant-Based Architecture","text":"<p>EUDIPLO uses a tenant-based architecture that enables you to manage configurations and data for multiple clients or environments within a single deployment. This model is designed for multi-tenancy: a single EUDIPLO instance can serve multiple organizations (e.g., relying parties, issuers, verifiers) or environments (e.g., staging, testing, production) while keeping their data and configurations separate.</p> <p>You do not need to deploy separate applications for each tenant; instead, all tenants are centrally managed through one deployment.</p>"},{"location":"architecture/tenant/#tenant-isolation","title":"Tenant Isolation","text":"<p>Each tenant is logically isolated. Isolation is currently implemented via a <code>tenantId</code> column in all database entities, with the following guarantees:</p> <ul> <li>Separate configurations: Tenant-specific settings stored in the database.</li> <li>Isolated database records: All queries scoped by <code>tenantId</code>.</li> <li>Independent key management: Cryptographic keys are bound to a tenant context.</li> <li>Dedicated session management: Sessions are created and validated per tenant.</li> <li>Individual credential configurations: Issuance and presentation templates can differ per tenant.</li> </ul> <p>For now, separation is row-based via <code>tenantId</code>. Future improvements may include per-tenant databases or row-level security (RLS) enforcement for stronger isolation.</p> <p>All API calls are tenant-scoped. Access control and endpoint protection are covered in the Authentication documentation.</p>"},{"location":"architecture/tenant/#tenant-lifecycle","title":"Tenant Lifecycle","text":"<p>A tenant goes through several stages:</p> <ul> <li>Provisioning (Create Tenant): A tenant is initialized on first use. Default configurations (keys, session settings) are created when calling the <code>/client</code> endpoint.</li> <li>Enable: The tenant becomes active; sessions, keys, and credential templates can be used.</li> <li>Suspend: A tenant can be disabled (e.g., revoking OIDC client access). Data remains in place but is inaccessible.</li> <li>Re-Enable: Suspended tenants can be reactivated without data loss.</li> <li>Delete: A full removal workflow, including key destruction and data wiping.</li> </ul>"},{"location":"architecture/tenant/#tenant-management","title":"Tenant Management","text":"<p>When a protected endpoint is called, EUDIPLO enforces tenant isolation and role-based access control by extracting the tenant ID and user roles from the provided JWT access token. Each endpoint requires specific roles; see the Protected Endpoints section in the Authentication documentation for details.</p>"},{"location":"architecture/tenant/#client-management-via-web-client","title":"Client Management via Web Client","text":"<ul> <li>Clients can be either managed by EUDIPLO by storing the clientSecrets in the database or by using an external OIDC provider like Keycloak.</li> <li>The web client authenticates against the OIDC provider and interacts with EUDIPLO using the provided access token.</li> </ul> <p>From the UI you can:</p> <ul> <li>Create and delete tenants</li> <li>Manage the tenants' clients</li> <li>Manage the issuance and presentation configs of the tenants.</li> </ul> <p>Even with tenant management privileges, users will only see tenant-scoped data. EUDIPLO enforces tenant context based on the access token.</p>"},{"location":"architecture/tenant/#client-management-via-the-api","title":"Client Management via the API","text":"<ul> <li><code>/tenant</code> endpoint allows programmatic management of tenants.</li> <li><code>/client</code> endpoint allows programmatic management of clients. Based on the access token the tenant context is extracted to perform actions on the specific tenant's clients.</li> </ul>"},{"location":"architecture/tenant/#authentication-methods","title":"Authentication Methods","text":"<p>Instead of client secrets, you may use any authentication method supported by your OIDC provider. EUDIPLO only validates the access token; it does not care how authentication was performed. When using EUDIPLO as the OIDC provider, only clientID + clientSecret is supported for now.</p>"},{"location":"architecture/tenant/#security-considerations","title":"Security Considerations","text":"<ul> <li>Access control: All API calls are validated against tenant context and roles embedded in the access token.</li> </ul> <p>See also:</p> <ul> <li>Authentication</li> <li>Key Management</li> <li>Credential Configuration</li> </ul>"},{"location":"architecture/webhooks/","title":"Webhooks","text":""},{"location":"architecture/webhooks/#webhooks","title":"Webhooks","text":"<p>EUDIPLO supports webhook endpoints that let external services actively participate in issuance and presentation flows.</p> <p>While webhooks are optional, they make the overall process more dynamic\u2014for example:</p> <ul> <li>requesting credential data from your backend service only when needed, or</li> <li>notifying your system when a wallet has completed a flow.</li> </ul>"},{"location":"architecture/webhooks/#supported-webhook-scenarios","title":"Supported Webhook Scenarios","text":"Flow Purpose Credential Issuance Webhook Dynamically provides claims during the credential request process. Presentation Webhook Receives verified claims from the wallet. Presentation During Issuance Supplies verified claims required to issue a credential (mandatory). Notification Webhook Receives status updates (e.g., accepted or denied) about issuance flows."},{"location":"architecture/webhooks/#example-webhook-service","title":"Example Webhook Service","text":"<p>A simple webhook simulator is available in the test/webhook directory. It can be run locally or deployed to a Cloudflare Worker, and is a good starting point for testing webhook functionality.</p>"},{"location":"architecture/webhooks/#webhook-configuration","title":"Webhook Configuration","text":"<p>A webhook configuration object defines how EUDIPLO interacts with your service.</p> <p>It must include:</p> <ul> <li><code>url</code>: The endpoint URL. EUDIPLO sends an HTTP <code>POST</code> request with JSON data.</li> <li><code>auth</code>: (Optional) Authentication configuration.<ul> <li><code>type</code>: Authentication type. Currently supported:<ul> <li><code>apiKey</code> \u2013 sends a key in a request header.</li> </ul> </li> </ul> </li> </ul>"},{"location":"architecture/webhooks/#example","title":"Example","text":"<pre><code>{\n    \"url\": \"http://localhost:8787/consume\",\n    \"auth\": {\n        \"type\": \"apiKey\",\n        \"config\": {\n            \"headerName\": \"x-api-key\",\n            \"value\": \"your-api-key\"\n        }\n    }\n}\n</code></pre>"},{"location":"architecture/webhooks/#claims-webhook","title":"Claims Webhook","text":"<p>The claims webhook allows EUDIPLO to fetch attributes dynamically instead of embedding them in the credential offer. This is useful if:</p> <ul> <li>claims are not known in advance, or</li> <li> <p>you want to avoid including sensitive data in the offer for privacy reasons.</p> </li> <li> <p>Pre-authenticated / Authenticated flows:   Called during the credential request.   If no webhook is configured, EUDIPLO falls back to claims provided in the credential offer or defined in the credential configuration.</p> </li> <li> <p>Presentation during issuance (mandatory):   Called during the auth request.   EUDIPLO sends verified claims to your service, which must respond with the claims to persist in the credential.   This avoids your service needing to manage state between the authentication and issuance phases.</p> </li> </ul> <pre><code>{\n    \"claimsWebhook\": {\n        \"url\": \"http://localhost:8787/process\",\n        \"auth\": {\n            \"type\": \"apiKey\",\n            \"config\": {\n                \"headerName\": \"x-api-key\",\n                \"value\": \"your-api-key\"\n            }\n        }\n    }\n}\n</code></pre>"},{"location":"architecture/webhooks/#notification-webhook","title":"Notification Webhook","text":"<p>The notification webhook receives the outcome of the issuance process (e.g., accepted or denied). This confirms that the wallet has received and accepted the credential.</p> <pre><code>{\n    \"notifyWebhook\": {\n        \"url\": \"http://localhost:8787/notify\",\n        \"auth\": {\n            \"type\": \"apiKey\",\n            \"config\": {\n                \"headerName\": \"x-api-key\",\n                \"value\": \"your-api-key\"\n            }\n        }\n    }\n}\n</code></pre> <p>If no notification webhook is configured, you can fetch the session result by querying the <code>/session</code> endpoint with the <code>sessionId</code>.</p>"},{"location":"architecture/webhooks/#presentation-webhook","title":"Presentation Webhook","text":"<p>The presentation webhook receives verified claims from the wallet after a presentation flow completes.</p> <pre><code>{\n    \"webhook\": {\n        \"url\": \"http://localhost:8787/notify\",\n        \"auth\": {\n            \"type\": \"apiKey\",\n            \"config\": {\n                \"headerName\": \"x-api-key\",\n                \"value\": \"your-api-key\"\n            }\n        }\n    }\n}\n</code></pre>"},{"location":"architecture/webhooks/#webhook-request-format","title":"Webhook Request Format","text":"<p>EUDIPLO sends an HTTP <code>POST</code> request with the following structure:</p> <ul> <li><code>credentials</code>: Array of credential objects. Each includes:<ul> <li><code>id</code>: The ID of the DCQL query.</li> <li><code>values</code>: The claims presented by the wallet.<ul> <li>SD-JWT VC\u2013specific fields (e.g., <code>cnf</code>, <code>status</code>) are removed for simplicity.</li> </ul> </li> <li><code>error</code>: Present instead of <code>values</code> if verification failed.</li> </ul> </li> <li><code>session</code>: The session ID identifying the request.</li> </ul> <pre><code>{\n    \"credentials\": [\n        {\n            \"id\": \"pid\",\n            \"values\": {\n                \"iss\": \"https://service.eudi-wallet.dev\",\n                \"iat\": 1751884150,\n                \"vct\": \"https://service.eudi-wallet.dev/credentials/vct/pid\",\n                \"address\": {\n                    \"locality\": \"K\u00d6LN\",\n                    \"postal_code\": \"51147\",\n                    \"street_address\": \"HEIDESTRA\u1e9eE 17\"\n                }\n            }\n        },\n        {\n            \"id\": \"citizen\",\n            \"error\": \"Credential verification failed: invalid signature\"\n        }\n    ],\n    \"session\": \"a6318799-dff4-4b60-9d1d-58703611bd23\"\n}\n</code></pre> <p>Info</p> <p>Requests always use <code>Content-Type: application/json</code>. A retry mechanism is not yet implemented\u2014if a webhook fails, the process halts. Retry support may be added in the future.</p>"},{"location":"architecture/webhooks/#webhook-response-format","title":"Webhook Response Format","text":"<p>A response is required for:</p> <ul> <li>presentation during issuance webhooks, and</li> <li>issuance webhooks.</li> </ul> <p>The response must be a JSON object keyed by the credential configuration ID. Each entry contains the claims to issue.</p>"},{"location":"architecture/webhooks/#example-response","title":"Example Response","text":"<p>Issuing a credential with ID <code>citizen</code>:</p> <pre><code>{\n    \"citizen\": {\n        \"town\": \"Berlin\"\n    }\n}\n</code></pre> <p>This response is injected into the issuance flow to create the final credential.</p>"},{"location":"development/","title":"Development","text":""},{"location":"development/#development","title":"Development","text":"<p>EUDIPLO is organized as a monorepo workspace containing multiple applications:</p> <ul> <li>Backend: NestJS API server (<code>apps/backend/</code>)</li> <li>Client: Angular web interface (<code>apps/client/</code>)</li> <li>Webhook: Cloudflare Worker for testing (<code>apps/webhook/</code>)</li> </ul>"},{"location":"development/#quick-start","title":"Quick Start","text":"<pre><code># Install all dependencies\npnpm install\n\n# Start all applications\npnpm run dev\n\n# Or start specific applications\npnpm --filter @eudiplo/backend run start:dev\npnpm --filter @eudiplo/client run dev\n</code></pre> <p>See Workspace Structure for detailed information about the monorepo organization.</p>"},{"location":"development/#backend-nestjs","title":"Backend (NestJS)","text":"<p>The backend is built with NestJS, a progressive Node.js framework for building efficient, scalable server-side applications using TypeScript.</p>"},{"location":"development/#documentation-with-compodoc","title":"Documentation with Compodoc","text":"<p>Compodoc provides a comprehensive overview of the codebase, including:</p> <ul> <li>Modules</li> <li>Controllers</li> <li>Services</li> <li>DTOs</li> <li>Dependencies</li> </ul> <pre><code>pnpm run compodoc:start\n</code></pre> <p>A rendered version is included.</p>"},{"location":"development/#source-code-structure","title":"Source Code Structure","text":"<p>Each module typically contains its own:</p> <ul> <li><code>controller.ts</code> \u2014 API endpoints</li> <li><code>service.ts</code> \u2014 Business logic</li> <li><code>dto/</code> \u2014 Data Transfer Objects</li> <li><code>entities/</code> \u2014 TypeORM entities (if needed)</li> </ul>"},{"location":"development/#additional-documentation","title":"Additional Documentation","text":"<ul> <li>API Authentication - Guide for using OAuth2   authentication with the API</li> <li>Code Quality Standards - Code formatting, linting, and style guidelines</li> <li>Contributing Guidelines - How to contribute to the project</li> <li>Testing Guide - How to run and write tests</li> <li>Logging - Configuring logging for development   and production</li> <li>Documentation Versioning - Managing documentation versions</li> </ul>"},{"location":"development/#scripts","title":"Scripts","text":"<p>Useful development scripts:</p> <pre><code># Development\npnpm run start:dev        # Start the app in watch mode\npnpm run start:debug      # Start with debug mode and watch\npnpm run build            # Build the application\n\n# Testing\npnpm run test             # Run unit tests\npnpm run test:watch       # Run tests in watch mode\npnpm run test:e2e         # Run end-to-end tests\npnpm run test:cov         # Run tests with coverage\npnpm run test:debug       # Run tests with debug mode\n\n# Code Quality\npnpm run format           # Format all files with Biome\npnpm run format:check     # Check formatting without changes\npnpm run lint             # Run linting checks\npnpm run lint:fix         # Fix linting issues automatically\n\n# Documentation\npnpm run compodoc         # Generate Compodoc documentation\npnpm run compodoc:serve   # Serve Compodoc docs locally (port 3001)\npnpm run doc:watch        # Serve MkDocs documentation with live reload\npnpm run doc:build        # Build all documentation (Swagger + Compodoc + MkDocs)\n</code></pre> <p>\ud83d\udca1 Compodoc output is stored in the <code>doc/compodoc</code> folder and served statically by the application.</p>"},{"location":"development/#contributions","title":"Contributions","text":"<p>Feel free to contribute by improving documentation, fixing bugs, or extending functionality. Make sure to follow the coding standards and write tests where applicable.</p>"},{"location":"development/code-quality/","title":"Code Quality","text":""},{"location":"development/code-quality/#code-quality-standards","title":"Code Quality Standards","text":"<p>This project uses Biome for code formatting, linting, and import organization to ensure consistent code quality across the codebase.</p>"},{"location":"development/code-quality/#biome-configuration","title":"Biome Configuration","text":"<p>Biome has replaced ESLint and Prettier in this project for better performance and a unified tooling experience. The configuration is defined in <code>biome.json</code> at the project root.</p>"},{"location":"development/code-quality/#key-settings","title":"Key Settings","text":"<ul> <li>Semicolons: Always required (<code>\"always\"</code>)</li> <li>Indentation: 4 spaces</li> <li>Quote Style: Double quotes preferred</li> <li>Line Width: 80 characters</li> <li>Parameter Decorators: Enabled for NestJS compatibility (<code>unsafeParameterDecoratorsEnabled: true</code>)</li> </ul>"},{"location":"development/code-quality/#available-commands","title":"Available Commands","text":"<pre><code># Format all files\npnpm run format\n\n# Check formatting without making changes\npnpm run format:check\n\n# Run linting checks\npnpm run lint\n\n# Fix linting issues automatically\npnpm run lint:fix\n</code></pre>"},{"location":"development/code-quality/#ide-setup","title":"IDE Setup","text":""},{"location":"development/code-quality/#vs-code-recommended","title":"VS Code (Recommended)","text":"<ol> <li>Install the Biome extension:</li> </ol> <pre><code>Extension ID: biomejs.biome\n</code></pre> <ol> <li>Workspace settings are pre-configured in <code>.vscode/settings.json</code>:</li> <li>Format on save enabled</li> <li>Biome set as default formatter</li> <li>Auto-organize imports on save</li> <li>Quick fixes applied automatically</li> </ol>"},{"location":"development/code-quality/#other-editors","title":"Other Editors","text":"<p>For other editors, refer to the Biome Editor Integration guide.</p>"},{"location":"development/code-quality/#file-coverage","title":"File Coverage","text":"<p>Biome processes the following file types:</p> <ul> <li>TypeScript files: <code>src/**/*.ts</code>, <code>test/**/*.ts</code>, <code>src/**/*.spec.ts</code></li> <li>JavaScript files: <code>*.js</code>, <code>*.mjs</code></li> <li>JSON files: <code>*.json</code>, <code>*.jsonc</code></li> </ul>"},{"location":"development/code-quality/#pre-commit-hooks","title":"Pre-commit Hooks","text":"<p>Consider setting up pre-commit hooks to automatically format and lint code:</p> <pre><code># Example using husky + lint-staged\npnpm add -D husky lint-staged\n\n# In package.json\n\"lint-staged\": {\n  \"*.{ts,js,json}\": [\"pnpm run format\", \"pnpm run lint:fix\"]\n}\n</code></pre>"},{"location":"development/code-quality/#code-style-guidelines","title":"Code Style Guidelines","text":""},{"location":"development/code-quality/#typescriptjavascript","title":"TypeScript/JavaScript","text":"<ul> <li>Use explicit types where beneficial for readability</li> <li>Prefer <code>const</code> over <code>let</code> when variables don't change</li> <li>Use meaningful variable and function names</li> <li>Add JSDoc comments for public APIs</li> <li>Destructure objects when accessing multiple properties</li> </ul>"},{"location":"development/code-quality/#nestjs-specific","title":"NestJS Specific","text":"<ul> <li>Use parameter decorators (e.g., <code>@Body()</code>, <code>@Param()</code>)</li> <li>Organize imports: external packages, then internal modules</li> <li>Use dependency injection consistently</li> <li>Follow NestJS naming conventions for controllers, services, modules</li> </ul>"},{"location":"development/code-quality/#example","title":"Example","text":"<pre><code>import { Injectable } from '@nestjs/common';\nimport { ConfigService } from '@nestjs/config';\n\n/**\n * Service for managing user authentication.\n */\n@Injectable()\nexport class AuthService {\n  constructor(private readonly configService: ConfigService) {}\n\n  /**\n   * Validates user credentials.\n   * @param email User's email address\n   * @param password User's password\n   * @returns Authentication result\n   */\n  async validateUser(email: string, password: string): Promise&lt;boolean&gt; {\n    const isValid = await this.checkCredentials(email, password);\n    return isValid;\n  }\n}\n</code></pre>"},{"location":"development/contributing/","title":"Contributing Guide","text":""},{"location":"development/contributing/#contributing","title":"Contributing","text":"<p>Thank you for considering contributing to EUDIPLO!</p> <p>Please refer to the CONTRIBUTING.md file in the root of the repository for detailed guidelines on:</p> <ul> <li>Reporting issues</li> <li>Suggesting features</li> <li>Setting up the development environment</li> <li>Submitting pull requests</li> </ul>"},{"location":"development/documentation-versioning/","title":"Documentation Versioning","text":""},{"location":"development/documentation-versioning/#documentation-versioning","title":"Documentation Versioning","text":"<p>This project uses mike to manage multiple versions of the documentation.</p>"},{"location":"development/documentation-versioning/#available-versions","title":"Available Versions","text":"<ul> <li>main: Always reflects the current state of the main branch</li> <li>latest: Documentation for the most recent stable release</li> <li>Specific Versions: Documentation for specific releases (e.g., <code>1.2.3</code>)   accessible via direct URL</li> </ul>"},{"location":"development/documentation-versioning/#how-it-works","title":"How It Works","text":""},{"location":"development/documentation-versioning/#automatic-deployment","title":"Automatic Deployment","text":"<ol> <li>Main Branch Updates: When code is pushed to <code>main</code>, the documentation is    automatically built and deployed as the <code>main</code> version</li> <li>Releases: When a new release is published:<ul> <li>Documentation is deployed as <code>latest</code></li> <li><code>latest</code> becomes the default/recommended documentation version</li> <li>The specific version (e.g., <code>1.2.3</code>) is also available via direct URL   access</li> </ul> </li> </ol>"},{"location":"development/documentation-versioning/#version-strategy","title":"Version Strategy","text":"<ul> <li>Version Selector Shows: <code>main</code>, <code>latest</code> (clean and simple)</li> <li>Direct Access Available: You can still access specific versions like   <code>/1.2.3/</code> directly via URL</li> <li>Latest Points To: The most recent stable release</li> <li>Default: <code>latest</code> is set as the default documentation version</li> </ul>"},{"location":"development/documentation-versioning/#version-switching","title":"Version Switching","text":"<p>Users can switch between documentation versions using the version selector in the top navigation bar of the documentation site.</p>"},{"location":"development/documentation-versioning/#local-development","title":"Local Development","text":"<p>For local development with versioning:</p> <pre><code># First time setup: Initialize mike with a main version\npnpm run doc:init\n\n# Serve versioned docs locally\npnpm run doc:serve-versions\n\n# Deploy a development version\npnpm run doc:deploy-dev\n\n# Deploy a major version manually (example: version 1)\npnpm run doc:deploy-major 1 latest\n\n# List all deployed versions\npnpm run doc:list-versions\n\n# Delete a specific version (be careful!)\npnpm run doc:delete-version [version-name]\n</code></pre> <p>Note: If you get a 404 error when first running <code>pnpm run doc:serve-versions</code>, you need to run <code>pnpm run doc:init</code> first to initialize mike with at least one version.</p>"},{"location":"development/documentation-versioning/#manual-deployment","title":"Manual Deployment","text":"<p>You can manually trigger documentation deployment using the GitHub Actions workflow dispatch feature in the repository's Actions tab.</p>"},{"location":"development/documentation-versioning/#accessing-documentation-versions","title":"Accessing Documentation Versions","text":"<p>Once deployed, the documentation versions are available at:</p> <ul> <li>Latest Stable:   https://openwallet-foundation-labs.github.io/eudiplo/latest/   (points to latest major version)</li> <li>Development:   https://openwallet-foundation-labs.github.io/eudiplo/main/   (alias: <code>/latest-dev/</code>)</li> <li>Major Versions: <code>https://openwallet-foundation-labs.github.io/eudiplo/1/</code>,   <code>https://openwallet-foundation-labs.github.io/eudiplo/2/</code>, etc.</li> <li>Specific Versions:   <code>https://openwallet-foundation-labs.github.io/eudiplo/v1.2.3/</code> (direct access   only, not in version selector)</li> <li>Version Selector: Available in the top navigation, shows only major   versions + main</li> </ul>"},{"location":"development/documentation-versioning/#structure","title":"Structure","text":"<ul> <li>Documentation lives in the <code>docs/</code> directory</li> <li>API documentation is auto-generated from Swagger/OpenAPI specs</li> <li>Code documentation is auto-generated using Compodoc</li> <li>The site is built using MkDocs with the Material theme</li> </ul>"},{"location":"development/logging-configuration/","title":"Logging","text":""},{"location":"development/logging-configuration/#logging-configuration","title":"Logging Configuration","text":"<p>The EUDIPLO Service provides flexible logging configuration to help with debugging, monitoring, and auditing.</p>"},{"location":"development/logging-configuration/#configuration","title":"Configuration","text":""},{"location":"development/logging-configuration/#basic-log-level-configuration","title":"Basic Log Level Configuration","text":"<p>Control the overall log level using the <code>LOG_LEVEL</code> environment variable:</p> <pre><code># Show all logs (debug, info, warn, error)\nLOG_LEVEL=debug\n\n# Show only info, warn, error (default)\nLOG_LEVEL=info\n\n# Show only warnings and errors\nLOG_LEVEL=warn\n\n# Show only errors\nLOG_LEVEL=error\n</code></pre>"},{"location":"development/logging-configuration/#logging-destinations","title":"Logging Destinations","text":""},{"location":"development/logging-configuration/#console-logging","title":"Console Logging","text":"<p>Console logging is always enabled with formatting determined by the <code>LOG_FORMAT</code> configuration:</p> <pre><code># Pretty formatting for human readability (default in development)\nLOG_FORMAT=pretty\n\n# JSON formatting for machine parsing (default in production)\nLOG_FORMAT=json\n</code></pre>"},{"location":"development/logging-configuration/#file-logging","title":"File Logging","text":"<p>The application supports logging to both console and file simultaneously, which is useful for debugging, auditing, and persisting logs for later analysis.</p> <p>File logging is controlled via environment variables:</p> Variable Description Default <code>LOG_TO_FILE</code> Enable logging to file <code>false</code> <code>LOG_FILE_PATH</code> Path to the log file <code>./logs/session.log</code> <p>When <code>LOG_TO_FILE</code> is set to <code>true</code>, the system will:</p> <ol> <li>Write all logs to the console with pretty formatting as usual</li> <li>Write the same logs to the specified file in <code>LOG_FILE_PATH</code> in JSON format</li> <li>Use synchronous file writes to ensure message order is maintained</li> </ol>"},{"location":"development/logging-configuration/#message-order-synchronization","title":"Message Order Synchronization","text":"<p>The file logging is configured with <code>sync: true</code> to ensure that log messages are written in the exact order they are generated. This is especially important for session logging where the sequence of events matters.</p>"},{"location":"development/logging-configuration/#usage-example","title":"Usage Example","text":"<p>To enable file logging, add the following to your <code>.env</code> file or environment variables:</p> <pre><code>LOG_TO_FILE=true\nLOG_FILE_PATH=./logs/sessions.log\n</code></pre>"},{"location":"development/logging-configuration/#log-file-format","title":"Log File Format","text":"<p>The log files are written in JSON format for easy parsing and analysis by external tools. Each log entry is a complete JSON object on a new line.</p>"},{"location":"development/logging-configuration/#log-rotation","title":"Log Rotation","text":"<p>The current implementation does not include built-in log rotation. For production environments, it is recommended to use external log rotation tools like <code>logrotate</code> to manage log file size and retention.</p>"},{"location":"development/logging-configuration/#disabling-specific-logger-services","title":"Disabling Specific Logger Services","text":""},{"location":"development/logging-configuration/#http-requestresponse-logging","title":"HTTP Request/Response Logging","text":"<p>To disable automatic HTTP request and response logging from Pino (useful during development when you want to reduce log noise):</p> <pre><code># Disable HTTP request/response logging\nLOG_ENABLE_HTTP_LOGGER=false\n\n# Enable HTTP request/response logging\nLOG_ENABLE_HTTP_LOGGER=true\n</code></pre> <p>Note: This controls the built-in HTTP logging from the Pino HTTP logger. Session-specific logging is controlled separately.</p>"},{"location":"development/logging-configuration/#sessionloggerservice","title":"SessionLoggerService","text":"<p>To disable all session-related logging (useful during debugging when you want to focus on other components):</p> <pre><code># Disable SessionLoggerService logs\nLOG_ENABLE_SESSION_LOGGER=false\n\n# Enable SessionLoggerService logs\nLOG_ENABLE_SESSION_LOGGER=true\n</code></pre>"},{"location":"development/logging-configuration/#development-scenarios","title":"Development Scenarios","text":""},{"location":"development/logging-configuration/#debugging-authentication-issues","title":"Debugging Authentication Issues","text":"<pre><code>LOG_LEVEL=debug\nLOG_ENABLE_SESSION_LOGGER=true\nLOG_ENABLE_HTTP_LOGGER=false\n</code></pre> <p>This will show detailed debug logs but hide HTTP request noise.</p>"},{"location":"development/logging-configuration/#monitoring-session-flows","title":"Monitoring Session Flows","text":"<pre><code>LOG_LEVEL=info\nLOG_ENABLE_SESSION_LOGGER=true\nLOG_ENABLE_HTTP_LOGGER=false\n</code></pre> <p>This will show all session flow events for monitoring credential issuance and verification, but without HTTP request logs.</p>"},{"location":"development/logging-configuration/#full-development-logging","title":"Full Development Logging","text":"<pre><code>LOG_LEVEL=debug\nLOG_ENABLE_SESSION_LOGGER=true\nLOG_ENABLE_HTTP_LOGGER=true\n</code></pre> <p>This will show everything including HTTP requests, responses, and session flows.</p>"},{"location":"development/logging-configuration/#production-monitoring","title":"Production Monitoring","text":"<pre><code>LOG_LEVEL=warn\nLOG_ENABLE_SESSION_LOGGER=true\nLOG_ENABLE_HTTP_LOGGER=false\nLOG_TO_FILE=true\nLOG_FILE_PATH=/var/log/eudiplo/session.log\n</code></pre> <p>This will only show warnings, errors, and important session events without HTTP noise, and write all logs to a file for later analysis.</p>"},{"location":"development/logging-configuration/#log-structure","title":"Log Structure","text":"<p>Session logs include structured data:</p> <pre><code>{\n  \"level\": \"info\",\n  \"time\": \"2025-07-20T10:30:45.123Z\",\n  \"context\": \"SessionLoggerService\",\n  \"sessionId\": \"session_123\",\n  \"tenantId\": \"tenant_456\",\n  \"flowType\": \"OID4VCI\",\n  \"event\": \"flow_start\",\n  \"stage\": \"initialization\",\n  \"msg\": \"[OID4VCI] Flow started for session session_123 in tenant tenant_456\"\n}\n</code></pre>"},{"location":"development/logging-configuration/#environment-configuration","title":"Environment Configuration","text":"<p>Add these to your <code>.env</code> file:</p> <pre><code># Basic logging\nLOG_LEVEL=info\nLOG_FORMAT=pretty\n\n# Logging destinations\nLOG_TO_FILE=false\nLOG_FILE_PATH=./logs/session.log\n\n# HTTP request/response logging control\nLOG_ENABLE_HTTP_LOGGER=false\n\n# Session logger control\nLOG_ENABLE_SESSION_LOGGER=true\n</code></pre>"},{"location":"development/logging-configuration/#runtime-control","title":"Runtime Control","text":"<p>You can control logging at runtime by restarting the service with different environment variables, or by implementing log level changes via API endpoints if needed.</p>"},{"location":"development/running-locally/","title":"Running Locally","text":""},{"location":"development/running-locally/#running-locally","title":"Running Locally","text":"<p>This guide will help you run the project locally for development or testing purposes.</p> <p>EUDIPLO is now organized as a monorepo workspace containing:</p> <ul> <li>Backend (<code>apps/backend/</code>) - NestJS API server</li> <li>Client (<code>apps/client/</code>) - Angular web interface</li> <li>Webhook (<code>apps/webhook/</code>) - Cloudflare Worker for testing</li> </ul>"},{"location":"development/running-locally/#prerequisites","title":"Prerequisites","text":"<p>Before you start, make sure you have the following tools installed:</p> <ul> <li>Node.js (version 22+ recommended)</li> <li>pnpm (package manager for monorepo workspaces)</li> <li>Git</li> <li>ngrok (optional, for exposing a public URL)</li> <li>Docker (optional, for supporting services or containerized deployment)</li> </ul>"},{"location":"development/running-locally/#1-clone-the-repository","title":"1. Clone the Repository","text":"<pre><code>git clone https://github.com/openwallet-foundation-labs/eudiplo\ncd eudiplo\n</code></pre>"},{"location":"development/running-locally/#2-install-dependencies","title":"2. Install Dependencies","text":"<p>Install all workspace dependencies:</p> <pre><code>corepack enable\npnpm install\n</code></pre> <p>This will install dependencies for all applications in the workspace.</p>"},{"location":"development/running-locally/#3-set-up-environment-variables","title":"3. Set Up Environment Variables","text":"<p>Create a <code>.env</code> file in the root of the project:</p> <pre><code>cp .env.example .env\n</code></pre> <p>Configure Python environment for documentation (optional):</p> <pre><code>pnpm run setup:python\n</code></pre> <p>To allow your wallet to interact with your service, a public HTTPS URL is required. You can use ngrok to expose your local server:</p> <p>TODO: check if it also runs in a local network when using wallets.</p> <pre><code>ngrok http 3000\n</code></pre> <p>ngrok will display a public HTTPS URL like:</p> <pre><code>https://f8e3-84-123-45-67.ngrok.io\n</code></pre> <p>Use this value in your <code>.env</code>:</p> <pre><code>PUBLIC_URL=https://f8e3-84-123-45-67.ngrok.io\n</code></pre> <p>\ud83d\udca1 The project validates your environment variables on startup using Joi. If <code>PUBLIC_URL</code> is missing or invalid, the app may fail to register with external services.</p> <p>Check out the Key Management or Database sections for more information on how to configure key storage and database options beyond the default settings.</p>"},{"location":"development/running-locally/#4-start-the-applications","title":"4. Start the Applications","text":""},{"location":"development/running-locally/#option-a-start-all-services-with-docker-compose","title":"Option A: Start All Services with Docker Compose","text":"<pre><code># Start both backend and client\ndocker compose up -d\n\n# View logs\ndocker compose logs -f\n</code></pre>"},{"location":"development/running-locally/#option-b-start-individual-applications","title":"Option B: Start Individual Applications","text":"<p>Start the Backend (NestJS API):</p> <pre><code>pnpm --filter @eudiplo/backend run start:dev\n</code></pre> <p>Start the Client (Angular UI) - in another terminal:</p> <pre><code>pnpm --filter @eudiplo/client run dev\n</code></pre> <p>Start the Webhook (for testing) - in another terminal:</p> <pre><code>pnpm --filter test-rp run dev\n</code></pre>"},{"location":"development/running-locally/#option-c-start-all-applications-locally","title":"Option C: Start All Applications Locally","text":"<pre><code># Start all applications in development mode\npnpm run dev\n</code></pre> <p>This will:</p> <ul> <li>Compile and watch your TypeScript code</li> <li>Reload on changes</li> <li>Use your <code>.env</code> configuration for keys, database, and registrar access</li> </ul> <p>Make sure any external services (like PostgreSQL or Vault) are available, either locally or through Docker.</p>"},{"location":"development/running-locally/#5-access-the-services","title":"5. Access the Services","text":"<p>Once running, the applications are accessible at:</p> <p>Backend API:</p> <pre><code>http://localhost:3000\n</code></pre> <p>Client Web Interface:</p> <pre><code>http://localhost:4200\n</code></pre> <p>Or via the public URL configured with ngrok:</p> <pre><code>https://f8e3-84-123-45-67.ngrok.io\n</code></pre>"},{"location":"development/running-locally/#6-troubleshooting","title":"6. Troubleshooting","text":"<ul> <li>Double-check <code>.env</code> values for typos or missing entries. Changes in the <code>.env</code>   file require a restart of the application.</li> <li>Ensure required external services (e.g. Vault, PostgreSQL) are running.</li> <li>Clear NestJS cache with <code>rm -rf dist node_modules &amp;&amp; pnpm install</code>.</li> <li>If ngrok fails, make sure port 3000 isn't blocked or already in use.</li> </ul>"},{"location":"development/testing/","title":"Testing","text":""},{"location":"development/testing/#testing","title":"Testing","text":"<p>EUDIPLO is designed to be robust and easy to test both in development and CI environments. This guide outlines how to run, write, and automate tests for the project.</p> <p>The current focus is on end-to-end (E2E) tests, which verify the overall functionality of the application.</p>"},{"location":"development/testing/#e2e-tests","title":"E2E Tests","text":"<p>Right now EUDIPLO has only implemented end-to-end (E2E) tests that are stored in the <code>/test</code> folder. These tests are designed to verify the overall functionality of the application, including interactions with external services like the EUDI Wallet.</p> <p>The following command will run the E2E tests and also provide a coverage report:</p> <pre><code>pnpm run test:e2e\n</code></pre> <p>It is also accessible via codecov.</p> <p>During writing E2E tests, you can use it in watch mode to automatically re-run tests on file changes:</p> <pre><code>pnpm run test:e2e:watch\n</code></pre>"},{"location":"development/testing/#linting","title":"Linting","text":"<p>Before pushing code, check linting rules and fix them:</p> <pre><code>pnpm run lint\n</code></pre>"},{"location":"development/testing/#github-actions","title":"GitHub Actions","text":"<p>Tests run automatically on every push to <code>main</code> or pull request via GitHub Actions.</p> <p>You can find the workflow config in <code>.github/workflows/ci.yml</code>.</p>"},{"location":"development/testing/#running-tests-locally","title":"Running Tests Locally","text":"<p>To run all unit and integration tests locally:</p> <pre><code>pnpm run test\n</code></pre> <p>Or with watch mode:</p> <pre><code>pnpm run test:watch\n</code></pre> <p>This uses Vitest under the hood, which is configured for NestJS.</p>"},{"location":"development/testing/#test-coverage","title":"Test Coverage","text":"<p>To check code coverage:</p> <pre><code>pnpm run test:cov\n</code></pre> <p>This generates a report in the <code>/coverage</code> folder. Open <code>coverage/index.html</code> in your browser to view it.</p>"},{"location":"development/testing/#test-structure","title":"Test Structure","text":"<p>Tests are located next to their implementation files:</p> <pre><code>src/\n  service/\n    my.service.ts\n    my.service.spec.ts  &lt;-- Test file\n</code></pre> <p>Use <code>.spec.ts</code> naming to ensure Vitest picks up the test files automatically.</p>"},{"location":"development/testing/#tips","title":"\ud83d\udca1 Tips","text":"<ul> <li>Keep unit tests isolated; mock dependencies using tools like <code>vitest.mock()</code>   or NestJS's testing module.</li> <li>For HTTP integration tests, use   supertest.</li> <li>For mocking external APIs (e.g., Vault or Keycloak), consider   <code>nock</code>.</li> </ul> <p>Happy testing! \ud83d\ude80</p>"},{"location":"development/versioning/","title":"Versioning","text":""},{"location":"development/versioning/#versioning-releases","title":"Versioning &amp; Releases","text":"<p>This project follows a structured release strategy that balances stability with ongoing development.</p>"},{"location":"development/versioning/#semantic-versioning","title":"Semantic Versioning","text":"<p>We use Semantic Versioning (<code>MAJOR.MINOR.PATCH</code>) for all tagged releases.</p> <ul> <li>MAJOR \u2013 breaking changes</li> <li>MINOR \u2013 new features, backwards compatible</li> <li>PATCH \u2013 bug fixes and internal improvements</li> </ul> <p>Example: <code>1.2.3</code> means the 3<sup>rd</sup> patch release of the 2<sup>nd</sup> minor version of the 1<sup>st</sup> major version.</p>"},{"location":"development/versioning/#development-builds-from-main","title":"Development Builds from <code>main</code>","text":"<p>Every push to the <code>main</code> branch automatically builds a Docker image and publishes it with the <code>:main</code> tag.</p> <p>Use this tag for development environments:</p> <pre><code>ghcr.io/openwallet-foundation-labs/eudiplo:main\n</code></pre> <p>\u26a0\ufe0f <code>main</code> is always moving and may contain untagged or unreleased features.</p>"},{"location":"development/versioning/#stable-releases","title":"Stable Releases","text":"<p>Stable releases are published via GitHub tags and follow semantic versioning. Each release creates both a versioned tag and updates the <code>:latest</code> tag:</p> <pre><code>ghcr.io/openwallet-foundation-labs/eudiplo:1.2.3\nghcr.io/openwallet-foundation-labs/eudiplo:latest\n</code></pre> <p>The <code>:latest</code> tag always points to the most recent stable release and is recommended for production use.</p>"},{"location":"development/versioning/#pre-releases","title":"Pre-Releases","text":"<p>Optionally, pre-release tags such as <code>1.3.0-alpha.1</code> may be published for testing upcoming features:</p> <pre><code>ghcr.io/openwallet-foundation-labs/eudiplo:1.3.0-alpha.1\n</code></pre>"},{"location":"development/versioning/#release-automation","title":"Release Automation","text":"<p>Releases are managed using <code>semantic-release</code>. It:</p> <ul> <li>Analyzes commit messages</li> <li>Determines the next version</li> <li>Publishes a GitHub release</li> <li>Pushes Docker images</li> </ul> <p>Make sure to follow the Conventional Commits specification when contributing to ensure proper versioning.</p>"},{"location":"development/versioning/#summary","title":"Summary","text":"Tag Source Use Case <code>main</code> <code>main</code> branch Development <code>latest</code> GitHub release Production (Latest) <code>x.y.z</code> (e.g. <code>1.2.3</code>) GitHub release Specific Version <code>x.y.z-alpha.N</code> GitHub pre-release Feature Preview / RC"},{"location":"development/workspace-structure/","title":"Workspace Structure","text":""},{"location":"development/workspace-structure/#workspace-structure","title":"Workspace Structure","text":"<p>EUDIPLO is organized as a monorepo workspace using pnpm workspaces. This structure allows us to manage multiple related applications in a single repository while maintaining clear separation of concerns.</p>"},{"location":"development/workspace-structure/#directory-structure","title":"\ud83d\udcc1 Directory Structure","text":"<pre><code>eudiplo/\n\u251c\u2500\u2500 apps/                          # Application packages\n\u2502   \u251c\u2500\u2500 backend/                   # NestJS API server\n\u2502   \u2502   \u251c\u2500\u2500 src/                   # Backend source code\n\u2502   \u2502   \u251c\u2500\u2500 test/                  # Backend tests\n\u2502   \u2502   \u251c\u2500\u2500 package.json           # Backend dependencies\n\u2502   \u2502   \u2514\u2500\u2500 Dockerfile            # Backend container definition\n\u2502   \u251c\u2500\u2500 client/                    # Angular web interface\n\u2502   \u2502   \u251c\u2500\u2500 src/                   # Client source code\n\u2502   \u2502   \u251c\u2500\u2500 package.json           # Client dependencies\n\u2502   \u2502   \u2514\u2500\u2500 Dockerfile            # Client container definition\n\u2502   \u2514\u2500\u2500 webhook/                   # Cloudflare Worker for testing\n\u2502       \u251c\u2500\u2500 src/                   # Webhook source code\n\u2502       \u2514\u2500\u2500 package.json           # Webhook dependencies\n\u251c\u2500\u2500 assets/                        # Configuration and assets\n\u251c\u2500\u2500 docs/                          # Documentation\n\u251c\u2500\u2500 deployment/                    # Docker Compose configurations\n\u251c\u2500\u2500 package.json                   # Root workspace configuration\n\u251c\u2500\u2500 pnpm-workspace.yaml           # pnpm workspace definition\n\u2514\u2500\u2500 docker-compose.yml            # Development compose file\n</code></pre>"},{"location":"development/workspace-structure/#applications","title":"\ud83c\udfd7\ufe0f Applications","text":""},{"location":"development/workspace-structure/#backend-eudiplobackend","title":"Backend (<code>@eudiplo/backend</code>)","text":"<ul> <li>Technology: NestJS with TypeScript</li> <li>Purpose: Core API server for EUDI Wallet integration</li> <li>Port: 3000</li> <li>Key Features:<ul> <li>OID4VCI, OID4VP, SD-JWT VC support</li> <li>OAuth2 authentication</li> <li>Pluggable key management</li> <li>Database abstraction</li> </ul> </li> </ul>"},{"location":"development/workspace-structure/#client-eudiploclient","title":"Client (<code>@eudiplo/client</code>)","text":"<ul> <li>Technology: Angular with TypeScript</li> <li>Purpose: Web interface for EUDIPLO management</li> <li>Port: 4200</li> <li>Key Features:<ul> <li>Credential issuance configuration</li> <li>Presentation request management</li> <li>Real-time monitoring</li> <li>Admin dashboard</li> </ul> </li> </ul>"},{"location":"development/workspace-structure/#webhook-test-rp","title":"Webhook (<code>test-rp</code>)","text":"<ul> <li>Technology: Cloudflare Worker</li> <li>Purpose: Testing relying party implementation</li> <li>Key Features:<ul> <li>Webhook endpoints for testing</li> <li>Presentation verification</li> <li>Development utilities</li> </ul> </li> </ul>"},{"location":"development/workspace-structure/#workspace-commands","title":"\ud83d\udd27 Workspace Commands","text":"<p>The workspace provides several convenient commands:</p>"},{"location":"development/workspace-structure/#development","title":"Development","text":"<pre><code># Install all dependencies\npnpm install\n\n# Start all applications\npnpm run dev\n\n# Start specific application\npnpm --filter @eudiplo/backend run start:dev\npnpm --filter @eudiplo/client run dev\npnpm --filter test-rp run dev\n</code></pre>"},{"location":"development/workspace-structure/#building","title":"Building","text":"<pre><code># Build all applications\npnpm run build\n\n# Build specific application\npnpm --filter @eudiplo/backend run build\npnpm --filter @eudiplo/client run build\n</code></pre>"},{"location":"development/workspace-structure/#testing","title":"Testing","text":"<pre><code># Test all applications\npnpm run test\n\n# Test specific application\npnpm --filter @eudiplo/backend run test\npnpm --filter @eudiplo/client run test\n</code></pre>"},{"location":"development/workspace-structure/#linting-formatting","title":"Linting &amp; Formatting","text":"<pre><code># Check code quality across workspace\npnpm run lint\npnpm run format:check\n\n# Fix issues automatically\npnpm run lint:fix\npnpm run format\n</code></pre>"},{"location":"development/workspace-structure/#docker-integration","title":"\ud83d\udc33 Docker Integration","text":"<p>Each application has its own optimized Dockerfile:</p> <ul> <li>Backend: <code>apps/backend/Dockerfile</code> - Multi-stage build with workspace support</li> <li>Client: <code>apps/client/Dockerfile</code> - Angular build with nginx serving</li> </ul> <p>The root <code>docker-compose.yml</code> orchestrates both services:</p> <pre><code># Start both services\ndocker compose up -d\n\n# Build and start\ndocker compose up -d --build\n\n# View logs\ndocker compose logs -f\n</code></pre>"},{"location":"development/workspace-structure/#dependency-management","title":"\ud83d\udce6 Dependency Management","text":"<p>The workspace uses pnpm for efficient dependency management:</p> <ul> <li>Shared dependencies are hoisted to the root <code>node_modules</code></li> <li>App-specific dependencies remain in their respective <code>node_modules</code></li> <li>Lockfile (<code>pnpm-lock.yaml</code>) ensures consistent installs across environments</li> </ul>"},{"location":"development/workspace-structure/#adding-dependencies","title":"Adding Dependencies","text":"<pre><code># Add to workspace root (shared utilities)\npnpm add dependency-name\n\n# Add to specific application\npnpm --filter @eudiplo/backend add dependency-name\npnpm --filter @eudiplo/client add dependency-name\n</code></pre>"},{"location":"development/workspace-structure/#benefits","title":"\ud83d\ude80 Benefits","text":"<p>This workspace structure provides:</p> <ol> <li>Code Sharing: Common utilities and types can be shared between applications</li> <li>Unified Tooling: Single configuration for linting, formatting, and testing</li> <li>Atomic Changes: Related changes across applications can be made in single commits</li> <li>Efficient CI/CD: Build and test processes can be optimized for the entire workspace</li> <li>Developer Experience: Single repository clone with all related code</li> </ol>"},{"location":"getting-started/monitor/","title":"Monitor","text":""},{"location":"getting-started/monitor/#monitoring","title":"Monitoring","text":"<p>This guide shows how to set up Prometheus and Grafana monitoring for EUDIPLO in both local development and Docker container scenarios.</p>"},{"location":"getting-started/monitor/#quick-start","title":"Quick Start","text":"<p>The monitoring stack includes:</p> <ul> <li>Prometheus on http://localhost:9090 - Metrics collection</li> <li>Grafana on http://localhost:3001 - Dashboards and visualization</li> </ul>"},{"location":"getting-started/monitor/#start-monitoring-stack","title":"Start Monitoring Stack","text":"<pre><code>cd monitor/\ndocker-compose up -d\n</code></pre>"},{"location":"getting-started/monitor/#local-development-setup","title":"Local Development Setup","text":"<p>When running EUDIPLO locally (outside Docker) and monitoring with Docker:</p>"},{"location":"getting-started/monitor/#1-start-eudiplo-locally","title":"1. Start EUDIPLO Locally","text":"<pre><code># Install dependencies and start EUDIPLO\nnpm install\nnpm run start:dev\n</code></pre> <p>EUDIPLO will be available at http://localhost:3000 with metrics at http://localhost:3000/metrics</p>"},{"location":"getting-started/monitor/#2-configure-prometheus-for-local-eudiplo","title":"2. Configure Prometheus for Local EUDIPLO","text":"<p>Update <code>monitor/prometheus/prometheus.yml</code>:</p> <pre><code>global:\n    scrape_interval: 15s\n\nscrape_configs:\n    - job_name: 'eudiplo-local'\n      static_configs:\n          - targets: ['host.docker.internal:3000'] # For local EUDIPLO\n      metrics_path: '/metrics'\n      scrape_interval: 30s\n</code></pre>"},{"location":"getting-started/monitor/#3-start-monitoring","title":"3. Start Monitoring","text":"<pre><code>cd monitor/\ndocker-compose up -d prometheus grafana\n</code></pre>"},{"location":"getting-started/monitor/#docker-container-setup","title":"Docker Container Setup","text":"<p>When running EUDIPLO as a Docker container:</p>"},{"location":"getting-started/monitor/#1-update-prometheus-configuration","title":"1. Update Prometheus Configuration","text":"<p>Edit <code>monitor/prometheus/prometheus.yml</code>:</p> <pre><code>global:\n    scrape_interval: 15s\n\nscrape_configs:\n    - job_name: 'eudiplo-docker'\n      static_configs:\n          - targets: ['eudiplo:3000'] # For Docker container\n      metrics_path: '/metrics'\n      scrape_interval: 30s\n</code></pre>"},{"location":"getting-started/monitor/#2-add-eudiplo-to-docker-compose","title":"2. Add EUDIPLO to Docker Compose","text":"<p>Add to <code>monitor/docker-compose.yml</code>:</p> <pre><code>services:\n    eudiplo:\n        image: eudiplo/eudiplo:latest\n        ports:\n            - '3000:3000'\n        environment:\n            - NODE_ENV=development\n            - PUBLIC_URL=http://localhost:3000\n        networks:\n            - monitoring\n\n    prometheus:\n        # ... existing config\n\nnetworks:\n    monitoring:\n        driver: bridge\n</code></pre>"},{"location":"getting-started/monitor/#3-start-full-stack","title":"3. Start Full Stack","text":"<pre><code>cd monitor/\ndocker-compose up -d\n</code></pre>"},{"location":"getting-started/monitor/#key-metrics","title":"Key Metrics","text":"<p>EUDIPLO exposes these important metrics:</p>"},{"location":"getting-started/monitor/#business-metrics","title":"Business Metrics","text":"<ul> <li><code>sessions</code> - Active, completed, and failed sessions</li> </ul> <p>More values will be added as the project evolves.</p>"},{"location":"getting-started/monitor/#access-dashboards","title":"Access Dashboards","text":"<ol> <li> <p>Prometheus: http://localhost:9090</p> <ul> <li>View metrics and run queries</li> <li>Check targets status at <code>/targets</code></li> </ul> </li> <li> <p>Grafana: http://localhost:3001</p> <ul> <li>Username: <code>admin</code></li> <li>Password: <code>admin</code></li> <li>Import or create dashboards</li> </ul> </li> </ol>"},{"location":"getting-started/monitor/#configuration-files","title":"Configuration Files","text":""},{"location":"getting-started/monitor/#prometheus-prometheusprometheusyml","title":"Prometheus (<code>prometheus/prometheus.yml</code>)","text":"<pre><code>global:\n    scrape_interval: 15s\n\nscrape_configs:\n    - job_name: 'eudiplo'\n      static_configs:\n          - targets: ['host.docker.internal:3000'] # Local\n          # - targets: ['eudiplo:3000']             # Docker\n      scrape_interval: 30s\n</code></pre>"},{"location":"getting-started/monitor/#grafana-data-source","title":"Grafana Data Source","text":"<p>Grafana is pre-configured with Prometheus as data source at <code>http://prometheus:9090</code>.</p>"},{"location":"getting-started/monitor/#troubleshooting","title":"Troubleshooting","text":""},{"location":"getting-started/monitor/#common-issues","title":"Common Issues","text":"<p>Prometheus can't reach EUDIPLO:</p> <pre><code># Check if metrics endpoint is accessible\ncurl http://localhost:3000/metrics\n\n# For local development, verify host.docker.internal works\ndocker run --rm appropriate/curl curl -I http://host.docker.internal:3000/metrics\n</code></pre> <p>No data in Grafana:</p> <ul> <li>Check Prometheus targets: http://localhost:9090/targets</li> <li>Verify time range in Grafana dashboards</li> <li>Ensure Prometheus data source is configured</li> </ul> <p>Container issues:</p> <pre><code># Check logs\ndocker-compose logs prometheus\ndocker-compose logs grafana\n\n# Restart services\ndocker-compose restart\n</code></pre>"},{"location":"getting-started/monitor/#production-considerations","title":"Production Considerations","text":"<p>For production deployments:</p> <ol> <li>Security: Change default Grafana password</li> <li>Retention: Configure appropriate data retention</li> <li>Backup: Set up regular backups of Grafana dashboards</li> <li>Alerting: Configure alertmanager for notifications</li> <li>Resources: Monitor resource usage and scale accordingly</li> </ol> <p>Warning</p> <p>The endpoint for <code>/metrics</code> is not protected yet. So for now run the prometheus in the same network as the EUDIPLO instance. Authentication mechanisms will be added in the future.</p>"},{"location":"getting-started/monitor/#clean-up","title":"Clean Up","text":"<pre><code># Stop monitoring stack\ndocker-compose down\n\n# Remove volumes (deletes all data)\ndocker-compose down -v\n</code></pre>"},{"location":"getting-started/quick-start/","title":"Quick Start","text":""},{"location":"getting-started/quick-start/#quick-start","title":"Quick Start","text":"<p>Get EUDIPLO running in under 2 minutes! This guide gets you from zero to issuing your first credential.</p> <p>New to EUDIPLO?</p> <p>This is the fastest path to see EUDIPLO working. For production setup and advanced configuration, see the Architecture and API sections.</p>"},{"location":"getting-started/quick-start/#what-youll-need","title":"What You'll Need","text":"<ul> <li>Docker installed</li> <li>2 minutes of your time \u23f1\ufe0f</li> </ul>"},{"location":"getting-started/quick-start/#step-1-choose-your-setup","title":"Step 1: Choose Your Setup","text":"<p>Choose how you want to run EUDIPLO:</p> \ud83d\udda5\ufe0f Full Setup (Web Client + API)\u26a1 API-Only Setup <p>For users who want the web interface:</p> <pre><code># Start the backend\ndocker run -d \\\n  --name eudiplo \\      \n  -p 3000:3000 \\\n  ghcr.io/openwallet-foundation-labs/eudiplo:latest\n\n# Start the web client\ndocker run -d \\\n  --name eudiplo-client \\      \n  -p 4200:80 \\      \n  ghcr.io/openwallet-foundation-labs/eudiplo-client:latest\n</code></pre> <p>For users who only need the API:</p> <pre><code># Run EUDIPLO backend only\ndocker run -d \\\n  --name eudiplo \\\n  -p 3000:3000 \\\n  ghcr.io/openwallet-foundation-labs/eudiplo:latest\n</code></pre>"},{"location":"getting-started/quick-start/#step-2-verify-its-working","title":"Step 2: Verify It's Working","text":"<p>After starting the container, check that EUDIPLO is healthy by querying its health endpoint:</p> <pre><code>curl http://localhost:3000/health\n</code></pre> <p>Expected response from EUDIPLO:</p> <pre><code>{\n    \"status\": \"ok\",\n    \"info\": {\n        \"database\": { \"status\": \"up\" }\n    },\n    \"errors\": {}\n}\n</code></pre>"},{"location":"getting-started/quick-start/#step-3-choose-your-interface","title":"Step 3: Choose Your Interface","text":"<p>EUDIPLO provides two ways to interact with the system:</p> \ud83d\udda5\ufe0f Web Client (Recommended for beginners)\ud83d\udd27 Swagger API (For developers) <p>Open the Web Interface: </p> <ul> <li>If you used Full Setup: http://localhost:4200</li> <li>If you used API-Only Setup: Not available (web client not started)</li> </ul> <p>The web client provides a user-friendly interface for:</p> <ul> <li>\ud83d\udccb Managing credential templates</li> <li>\ud83c\udfab Issuing credentials to wallets</li> <li>\u2705 Verifying credential presentations</li> <li>\ud83d\udcca Viewing system status</li> </ul> <p>Perfect for first-time users</p> <p>The web client is the easiest way to understand EUDIPLO's capabilities without needing API knowledge.</p> <p>Web Client Requires Full Setup</p> <p>To use the web client, make sure you chose the \"Full Setup\" option in Step 1.</p> <p>Open the API Documentation: http://localhost:3000/api</p> <p>The Swagger UI provides direct API access for:</p> <ul> <li>\ud83d\udd0c Integration testing</li> <li>\ud83d\udcd6 API documentation exploration</li> <li>\u26a1 Advanced automation workflows</li> <li>\ud83e\uddea Direct endpoint testing</li> </ul>"},{"location":"getting-started/quick-start/#step-4-get-started","title":"Step 4: Get Started","text":"<p>Choose your preferred approach:</p> \ud83d\udda5\ufe0f Using the Web Client\ud83d\udd27 Using the Swagger API <ol> <li>Open: http://localhost:4200 (if you used Full Setup)</li> <li>Log in with the default credentials:<ul> <li>EUDIPLO Instance: <code>http://localhost:3000</code></li> <li>Authentication Server: <code>http://localhost:3000</code></li> <li>Client ID: <code>root</code></li> <li>Client Secret: <code>root</code></li> </ul> </li> <li>Explore the dashboard to see:<ul> <li>Available credential templates        </li> <li>Quick action buttons for common tasks    </li> </ul> </li> </ol> <p>Learn More</p> <p>For detailed web client features and workflows, see the Web Client Guide.</p>"},{"location":"getting-started/quick-start/#authenticate-via-swagger-ui","title":"Authenticate via Swagger UI","text":"<ol> <li>Open the API Documentation: http://localhost:3000/api</li> <li>Click the \"Authorize\" button (\ud83d\udd13 lock icon) in the top-right</li> <li>Enter your credentials:<ul> <li>Client ID: <code>root</code></li> <li>Client Secret: <code>root</code></li> </ul> </li> <li>Click \"Authorize\" and then \"Close\"</li> </ol> <p>You're now authenticated! The \ud83d\udd13 icon should change to \ud83d\udd12 (locked).</p>"},{"location":"getting-started/quick-start/#test-your-first-api-call","title":"Test Your First API Call","text":"<ol> <li>Find the \"Issuer Management\" section in Swagger UI</li> <li>Expand <code>/issuer-management/credentials</code> \u2192 GET</li> <li>Click \"Try it out\" \u2192 \"Execute\"</li> </ol> <p>You should see a successful response with available credential templates!</p>"},{"location":"getting-started/quick-start/#success","title":"Success","text":"<p>EUDIPLO is now running and ready for credential issuance and verification.</p>"},{"location":"getting-started/quick-start/#whats-next","title":"What's Next?","text":"\ud83d\udda5\ufe0f Web Client Users <ul> <li>\ud83c\udfab Issue Your First Credential - Use the web interface to create and send credentials to wallets</li> <li>\ud83d\udd0d Verify Credentials - Set up verification flows through the web UI</li> <li>\ud83d\udccb Manage Templates - Create custom credential templates for your use case</li> <li>\ud83d\udcca Monitor Activity - Track credential issuance and verification through the dashboard</li> </ul> \ud83d\udd27 API Users <ul> <li>\ud83c\udfab Issue Your First Credential - Learn credential issuance flows</li> <li>\ud83d\udd0d Verify Credentials - Set up credential verification</li> <li>\ud83d\udd0c API Integration - Integrate EUDIPLO into your applications</li> <li>\ud83d\udcd6 API Authentication - External OIDC, multi-tenant setup</li> </ul>"},{"location":"getting-started/quick-start/#common-next-steps","title":"Common Next Steps","text":"<ul> <li>\u2699\ufe0f Production Setup - Deploy for production use</li> <li>\ud83d\udd10 Security Configuration - Replace default credentials</li> <li>\ud83c\udfd7\ufe0f Architecture Overview - Understand system design</li> </ul>"},{"location":"getting-started/quick-start/#clean-up","title":"Clean Up","text":"<p>When you're done experimenting:</p> <p>For Full Setup users:</p> <pre><code>docker stop eudiplo eudiplo-client\ndocker rm eudiplo eudiplo-client\n</code></pre> <p>For API-Only Setup users:</p> <pre><code>docker stop eudiplo &amp;&amp; docker rm eudiplo\n</code></pre>"},{"location":"getting-started/registrar/","title":"Registrar","text":""},{"location":"getting-started/registrar/#registrar","title":"Registrar","text":"<p>To interact with an EUDI Wallet, two types of certificates are required:</p> <ul> <li>Access Certificate \u2013 Grants access to the EUDI Wallet.</li> <li>Registration Certificate \u2013 Authorizes data requests from the EUDI Wallet.</li> </ul> <p>You can still use EUDIPLO without these certificates, but it can end up into warnings when making requests to the EUDI Wallet.</p>"},{"location":"getting-started/registrar/#configuration","title":"Configuration","text":"Key Type Notes <code>REGISTRAR_URL</code> <code>string</code> The URL of the registrar <code>REGISTRAR_OIDC_URL</code> <code>string</code> The OIDC URL of the registrar [when REGISTRAR_URL is set \u2192 then required] <code>REGISTRAR_OIDC_CLIENT_ID</code> <code>string</code> The OIDC client ID of the registrar [when REGISTRAR_URL is set \u2192 then required] <code>REGISTRAR_OIDC_CLIENT_SECRET</code> <code>string</code> The OIDC client secret of the registrar [when REGISTRAR_URL is set \u2192 then required]"},{"location":"getting-started/registrar/#accessing-the-registrar","title":"Accessing the Registrar","text":"<p>To enable EUDIPLO to communicate with the registrar, you must configure the necessary environment variables.</p> <p>On startup, EUDIPLO checks whether a Relying Party (RP) is already registered using the <code>config/registrar.json</code> file. If no ID is specified, EUDIPLO will automatically register a new Relying Party with the registrar using the <code>name</code> from the tenant entity stored in the database.</p>"},{"location":"getting-started/registrar/#access-certificate","title":"Access Certificate","text":"<p>At startup, EUDIPLO checks for a valid access certificate based on the <code>accessCertificateId</code> in <code>config/registrar.json</code>. If no valid certificate is found, a new one will be requested from the registrar and bound to the <code>CREDENTIAL_ISSUER</code> URL. The resulting certificate ID will then be stored in <code>config/registrar.json</code>.</p>"},{"location":"getting-started/registrar/#registration-certificate","title":"Registration Certificate","text":"<p>The registration certificate is required to request data from the EUDI Wallet. Each configuration file in the <code>config/presentation</code> folder defines the payload for the corresponding registration certificate.</p> <p>Since registration certificates are tied to specific presentation types, they are managed within the individual presentation configuration files\u2014not in <code>config/registrar.json</code>. If no certificate ID is specified in a presentation config, a new registration certificate will be requested automatically when a presentation request is made.</p>"},{"location":"getting-started/wallet-compatibility/","title":"Wallet Compatibility","text":""},{"location":"getting-started/wallet-compatibility/#wallet-compatibility","title":"Wallet Compatibility","text":"<p>EUDIPLO is designed to work with EUDI-compliant wallets that implement the supported protocols (OID4VCI, OID4VP, and SD-JWT VC).</p> <p>This page provides information about tested wallets, compatibility status, and guidance for testing new wallets with EUDIPLO.</p>"},{"location":"getting-started/wallet-compatibility/#tested-wallets","title":"Tested Wallets","text":"<p>The following wallets have been tested and verified to work with EUDIPLO:</p> Wallet Provider Download Features Heidi Wallet Ubique Android / iOS Details"},{"location":"getting-started/wallet-compatibility/#feature-support-details","title":"Feature Support Details","text":""},{"location":"getting-started/wallet-compatibility/#feature-legend","title":"Feature Legend","text":"<ul> <li>Issuance (OID4VCI)<ul> <li>Auth: Authorization Code Flow</li> <li>Pre: Pre-authorized Code Flow</li> <li>PDI: Presentation during issuance</li> <li>DPoP: DPoP proof of possession</li> <li>Att: Client attestation</li> </ul> </li> <li>Presentation (OID4VP)<ul> <li>DC API: Digital Credentials API support</li> </ul> </li> <li>Credential Format<ul> <li>SD-JWT: SD-JWT VC support</li> </ul> </li> </ul>"},{"location":"getting-started/wallet-compatibility/#feature-matrix","title":"Feature Matrix","text":"Auth Pre PDI DPoP Att DC API SD-JWT Heidi Wallet \u2705 \u2705 n/a \u2705 n/a \u2705 \u2705"},{"location":"getting-started/wallet-compatibility/#individual-wallet-details","title":"Individual Wallet Details","text":""},{"location":"getting-started/wallet-compatibility/#heidi-wallet","title":"Heidi Wallet","text":"<ul> <li>Version tested: 1.0.4</li> <li>Last verified: October 11, 2025</li> <li>Notes: Got stuck in the presentation during issuance during the issuance process (credential got issued, but got not stored)</li> </ul> <p>Help us expand this list!</p> <p>If you have successfully tested EUDIPLO with a wallet not listed here, please reach out to us so we can add it to this list.</p>"},{"location":"getting-started/wallet-compatibility/#testing-new-wallets","title":"Testing New Wallets","text":"<p>If you want to test EUDIPLO with a new wallet, follow these steps:</p>"},{"location":"getting-started/wallet-compatibility/#1-setup-test-environment","title":"1. Setup Test Environment","text":"<pre><code># Run EUDIPLO with proper HTTPS endpoint\ndocker run -p 3000:3000 \\\n  -e PUBLIC_URL=https://your-domain.com \\\n  ghcr.io/openwallet-foundation-labs/eudiplo:latest\n</code></pre>"},{"location":"getting-started/wallet-compatibility/#2-test-credential-issuance","title":"2. Test Credential Issuance","text":"<ol> <li>Configure a test credential template</li> <li>Initiate issuance flow via API</li> <li>Complete the flow in your wallet</li> <li>Verify credential is stored correctly</li> </ol>"},{"location":"getting-started/wallet-compatibility/#3-test-credential-presentation","title":"3. Test Credential Presentation","text":"<ol> <li>Create a presentation request</li> <li>Generate QR code or deep link</li> <li>Present credential from wallet</li> <li>Verify presentation is received and validated</li> </ol>"},{"location":"getting-started/wallet-compatibility/#4-document-results","title":"4. Document Results","text":"<p>Please document:</p> <ul> <li>Wallet name and version</li> <li>Test results (success/failure)</li> <li>Any configuration adjustments needed</li> <li>Error messages or issues encountered</li> </ul>"},{"location":"getting-started/wallet-compatibility/#contributing-compatibility-information","title":"Contributing Compatibility Information","text":""},{"location":"getting-started/wallet-compatibility/#reporting-compatible-wallets","title":"Reporting Compatible Wallets","text":"<p>If you have successfully tested a wallet with EUDIPLO:</p> <ol> <li>Create an Issue: Open a    new issue    on GitHub</li> <li>Use Template: Select the \"Wallet Compatibility Report\" template</li> <li>Provide Details: Include wallet name, version, test results, and any    configuration notes</li> <li>Screenshots: Attach screenshots of successful flows if possible</li> </ol>"},{"location":"getting-started/wallet-compatibility/#reporting-issues","title":"Reporting Issues","text":"<p>If you encounter compatibility problems:</p> <ol> <li>Check Known Issues: Review the section above first</li> <li>Gather Information: Collect logs, error messages, and configuration    details</li> <li>Create Bug Report: Open an issue with detailed reproduction steps</li> <li>Community Support: Ask for help in our    Discord community</li> </ol>"},{"location":"getting-started/wallet-compatibility/#version-compatibility-matrix","title":"Version Compatibility Matrix","text":"EUDIPLO Version Protocol Versions Notes 1.x.x OID4VCI 1, OID4VP 1, SD-JWT VC draft-11 Current stable Latest (main) Latest draft versions Development version <p>Protocol Evolution</p> <p>EUDI wallet protocols are still evolving. Compatibility may change as new protocol versions are adopted. We track the latest specifications and update EUDIPLO accordingly.</p>"},{"location":"getting-started/wallet-compatibility/#need-help","title":"Need Help?","text":"<ul> <li>\ud83d\udcd6 Documentation: Check our   Getting Started guide</li> <li>\ud83d\udc1b Issues: Report problems on   GitHub Issues</li> <li>\ud83d\udcac Community: Join our Discord server</li> <li>\ud83d\udce7 Contact: Reach out to the EUDIPLO team through GitHub discussions</li> </ul>"},{"location":"getting-started/web-client/","title":"Web Client","text":""},{"location":"getting-started/web-client/#web-client","title":"Web Client","text":"<p>EUDIPLO provides a user-friendly web interface for credential management\u2014no API expertise required. Simply enter your instance URL and credentials to get started. There's no need to deploy a separate client for each instance.</p> <p>There is no need to use the client to interact with EUDIPLO, but it offers a more intuitive way to manage the configurations.</p>"},{"location":"getting-started/web-client/#getting-started","title":"Getting Started","text":""},{"location":"getting-started/web-client/#accessing-the-web-client","title":"Accessing the Web Client","text":"<p>After completing the Full Setup:</p> <ol> <li>Open your browser and go to: http://localhost:4200</li> <li>Login using the default credentials:</li> <li>Username: <code>root</code></li> <li>Password: <code>root</code></li> </ol> <p>Important: Change the default credentials before using EUDIPLO in production. See Authentication for details.</p>"},{"location":"getting-started/web-client/#dashboard-overview","title":"Dashboard Overview","text":"<p>The dashboard offers:</p> <ul> <li>Quick Actions: One-click access to common tasks</li> <li>Statistics: Usage metrics and activity summaries (coming soon)</li> </ul>"},{"location":"getting-started/web-client/#core-features","title":"Core Features","text":""},{"location":"getting-started/web-client/#credential-issuance-management","title":"\ud83c\udfab Credential Issuance Management","text":"<ul> <li>Create, edit, import, or delete credential and issuance configurations</li> <li>Import keys and certificates, and link them to configurations</li> </ul>"},{"location":"getting-started/web-client/#credential-verification","title":"\u2705 Credential Verification","text":"<ul> <li>Manage verification flows</li> <li>Create, edit, import, or delete verification configurations</li> </ul>"},{"location":"getting-started/web-client/#session-management","title":"\ud83d\udccb Session Management","text":"<ul> <li>View and manage active issuance and verification sessions</li> <li>Inspect session details, including parameters</li> </ul>"},{"location":"getting-started/web-client/#client-management","title":"\ud83e\uddd1\u200d\ud83d\udcbc Client Management","text":"<ul> <li>Create new tenants with client ID and secret (Keycloak only)</li> <li>Not supported for other identity providers or when using EUDIPLO as IAM yet</li> </ul>"},{"location":"getting-started/web-client/#configuration-editing-validation","title":"Configuration Editing &amp; Validation","text":"<p>The web client is designed for intuitive and robust configuration management:</p> <ul> <li>Data Model &amp; Validation: The EUDIPLO service uses decorators on data transfer objects (DTOs) and entities to describe variables and their values, enabling server-side validation.</li> <li>OpenAPI Specification: An OpenAPI spec is generated from these DTOs and entities, providing a standardized interface for backend interaction.</li> <li>SDK Integration: The web client uses an SDK generated from the OpenAPI spec for seamless and type-safe communication with the backend.</li> <li> <p>Editing Experience:</p> <ul> <li>Simple variables (strings, numbers, booleans) are edited via text inputs, select options, or checkboxes.</li> <li>Complex data structures are managed using an integrated JSON editor (Monaco Editor), which leverages JSON schemas for each variable.</li> </ul> </li> <li> <p>Client-Side Validation &amp; Guidance: The JSON editor uses the provided JSON schemas to offer inline descriptions, auto-completion, and validation directly in the browser.</p> </li> <li>Direct JSON Access: Each configuration can be viewed and edited as raw JSON for advanced use cases.</li> </ul>"},{"location":"getting-started/issuance/","title":"Overview","text":""},{"location":"getting-started/issuance/#configuring-credential-issuance-flows","title":"Configuring Credential Issuance Flows","text":"<p>The issuance system uses a two-layer configuration approach:</p> <ol> <li>Credential Configurations - Define the structure, format, and metadata of    individual credentials</li> <li>Issuance Configuration - Define the issuance configuration that get used to    group multiple credentials and publish the issuer metadata</li> </ol>"},{"location":"getting-started/issuance/#api-endpoints","title":"API Endpoints","text":"<p>The system uses two separate endpoints for the two-layer configuration:</p>"},{"location":"getting-started/issuance/#credential-configurations","title":"Credential Configurations","text":"<p>To manage individual credential configurations, use the <code>/issuer-management/credentials</code> endpoint. This endpoint handles the definition of credential types, their formats, claims, and display properties.</p>"},{"location":"getting-started/issuance/#issuance-configuration","title":"Issuance Configuration","text":"<p>To manage the issuance flow, use the <code>/issuer-management/issuance</code> endpoint. This endpoint handles grouping credentials and defining authorization or webhooks.</p> <p>Based on your passed access token, both endpoints will be scoped to the tenant ID of the token. You also need the <code>issuance:manage</code> role to access these endpoints. The configurations are internally stored in a database.</p>"},{"location":"getting-started/issuance/#creating-credential-offers","title":"Creating Credential Offers","text":"<p>Via the credential offer endpoint you can create a credential offer that can be presented to the user. When creating an offer, you can:</p> <ol> <li>Define the flow - Either go with the pre authorized flow or require user    authentication via the authorization code flow</li> <li>Provide credentials - Use <code>credentialConfigurationIds</code> to specify which    credentials to issue from the issuance configuration</li> <li>Optionally override claims - Use the <code>values</code> parameter to provide custom    claims for specific credentials</li> <li>Optionally pass claim webhooks - Use the <code>claimsWebhook</code> parameter to    dynamically fetch claims during the issuance flow</li> <li>Optionally pass notification webhooks - Use the <code>notifyWebhook</code> parameter to    get notified about issuance status changes</li> </ol>"},{"location":"getting-started/issuance/#credential-issuance-flow","title":"Credential Issuance Flow","text":"<p>This flow describes how a backend service starts an issuance flow of an attestation. EUDIPLO creates the OID4VCI request and handles the protocol flow with the wallet. It also shows the interactions with webhooks when they are configured.</p> <pre><code>sequenceDiagram\n    autonumber\n    actor Wallet as EUDI Wallet\n    participant EUDIPLO as Middleware\n    participant Service as End Service (with Webhooks)\n\n    Service-&gt;&gt;EUDIPLO: Request OID4VCI issuance offer\n    EUDIPLO--&gt;&gt;Service: Return credential offer link\n    Service-&gt;&gt;Wallet: Present offer link to user\n\n    Wallet-&gt;&gt;EUDIPLO: Authorization Request (auth / pre-auth)\n    note over EUDIPLO: Validate request, locate credential config\n\n    alt Claims webhook configured\n        EUDIPLO-&gt;&gt;Service: Fetch claims dynamically (claims webhook)\n        Service--&gt;&gt;EUDIPLO: Claims response (JSON)\n    else No webhook\n        note over EUDIPLO: Use claims from Offer or static configuration\n    end\n\n    EUDIPLO-&gt;&gt;EUDIPLO: Create credential with claims\n    EUDIPLO--&gt;&gt;Wallet: Return issued credential\n\n    Wallet-&gt;&gt;EUDIPLO: Sending notification\n\n    opt Notification webhook configured\n        EUDIPLO-&gt;&gt;Service: Notify status (accepted / denied)\n        Service--&gt;&gt;EUDIPLO: 2xx ACK\n    end</code></pre> <p>The response with the credential offer link will also provide the session ID. It is included in the requests from the optional webhooks to identify the specific issuance flow. You can also use the id to query the issuance status at the API.</p>"},{"location":"getting-started/issuance/#documentation-structure","title":"Documentation Structure","text":"<p>This issuance documentation is organized into the following sections:</p> <ul> <li>Credential Configuration - Learn how to   define individual credential types, their structure, claims, and display   properties</li> <li>Issuance Configuration - Understand how to   create issuance configurations that group multiple credentials and define   issuance parameters such as authorization and webhooks</li> </ul>"},{"location":"getting-started/issuance/#quick-start","title":"Quick Start","text":"<p>For a quick start, follow these steps:</p> <ol> <li>Create a credential configuration - Define your credential type using the    Credential Configuration guide</li> <li>Create an issuance configuration - Define the issuance configuration using    the Issuance Configuration guide</li> <li>Issue credentials - Start the issuance flow by creating credential offers</li> </ol>"},{"location":"getting-started/issuance/#passing-claims","title":"Passing Claims","text":"<p>EUDIPLO provides multiple methods to pass claims (data) for credentials during issuance, with a clear priority system that determines which claims are used.</p>"},{"location":"getting-started/issuance/#priority-order","title":"Priority Order","text":"<p>Claims are resolved in the following priority order (highest to lowest):</p> <ol> <li>Offer-level webhook - Webhook specified in the credential offer</li> <li>Offer-level static claims - Claims specified in the credential offer</li> <li>Configuration-level webhook - Webhook defined in the credential configuration</li> <li>Configuration-level static claims - Claims defined in the credential configuration</li> </ol> <p>Claims are not merged</p> <p>Higher priority sources completely override lower priority sources - claims are not merged. If an offer-level webhook is provided, all configuration-level claims will be entirely ignored.</p> <p>For a detailed explanation of the claims priority system and how to configure each method, see the Fetching Claims section in the Credential Configuration documentation.</p>"},{"location":"getting-started/issuance/#when-to-use-each-method","title":"When to Use Each Method","text":"<ul> <li>Configuration-level static claims - Default values for all credentials of this type, fixed metadata (e.g., issuing country, authority)</li> <li>Configuration-level webhook - Dynamic claims based on authentication context, personalized credentials requiring real-time data</li> <li>Offer-level static claims - Claims known at offer creation time, overriding specific values for individual issuances</li> <li>Offer-level webhook - Custom data source per offer, testing different webhook endpoints</li> </ul>"},{"location":"getting-started/issuance/credential-configuration/","title":"Credential Configuration","text":""},{"location":"getting-started/issuance/credential-configuration/#credential-configuration","title":"Credential Configuration","text":"<p>Credential configurations define the structure and properties of individual credentials. Each credential type has its own configuration file.</p>"},{"location":"getting-started/issuance/credential-configuration/#basic-structure","title":"Basic Structure","text":"<p>Each credential configuration is a JSON object that defines how a specific credential type should be issued. The configuration includes metadata, display information, claims, and various optional features like key binding and status management.</p> <p>For a complete configuration example, see the Complete Configuration Example section at the bottom of this page.</p> <p>Info</p> <p>The data object for the import can be found in the API Documentation</p>"},{"location":"getting-started/issuance/credential-configuration/#configuration-fields","title":"Configuration Fields","text":""},{"location":"getting-started/issuance/credential-configuration/#required-fields","title":"Required Fields","text":"<ul> <li><code>id</code>: REQUIRED - Unique identifier for the credential configuration that will be used to reference this credential in the issuance metadata or in the credential offer.</li> <li><code>config</code>: REQUIRED - Entry for   credential_configuration_supported.<ul> <li><code>format</code>: REQUIRED - The format of the credential, only <code>dc+sd-jwt</code> is   currently supported.</li> <li><code>display</code>: REQUIRED - Display configuration for the credential,   including name, description, locale, colors, and images.</li> </ul> </li> </ul>"},{"location":"getting-started/issuance/credential-configuration/#optional-fields","title":"Optional Fields","text":"<ul> <li><code>description</code>: OPTIONAL - Human-readable description of the credential. Will not be displayed to the end user.</li> <li><code>vct</code>: OPTIONAL -   VC Type Metadata   provided via the <code>/{tenantId}/credentials-metadata/vct/{id}</code> endpoint. This link will   automatically added into the credential.</li> <li><code>keyId</code>: OPTIONAL - Unique identifier for the key used to sign the credential. If not provided, the first key in the key set will be used. See Signing Key for details.</li> <li><code>lifeTime</code>: OPTIONAL - Credential expiration time in seconds. If   specified, credentials will include an <code>exp</code> claim calculated as   <code>iat + lifeTime</code>. See Credential Expiration for details.</li> <li><code>statusManagement</code>: OPTIONAL - Enable OAuth Token Status Lists for   credential revocation. When <code>true</code>, credentials include a <code>status</code> claim with   revocation information. See Status Management and Revocation for details.</li> <li><code>keyBinding</code>: OPTIONAL - Enable cryptographic key binding. When <code>true</code>,   credentials include a <code>cnf</code> claim with the holder's public key and require   proof of possession. See Cryptographic Key Binding for details.</li> <li><code>claims</code>: OPTIONAL - Static claims to include in the credential. Can be   overridden by webhook responses or claims passed during credential offer.</li> <li><code>claimsWebhook</code>: OPTIONAL - Webhook to receive claims for the issuance process. See Webhooks for details.</li> <li><code>notificationWebhook</code>: OPTIONAL - Webhook to send notifications about the issuance process. See Webhooks for details.</li> <li><code>disclosureFrame</code>: OPTIONAL - Defines which claims should be selectively   disclosable in SD-JWT format.</li> <li><code>embeddedDisclosurePolicy</code>: OPTIONAL - Defines the embedded disclosure policy for the credential. See Embedded Disclosure Policy for details.</li> <li><code>schema</code>: OPTIONAL - JSON schema for validating the credential claims.</li> </ul>"},{"location":"getting-started/issuance/credential-configuration/#fetching-claims","title":"Fetching Claims","text":"<p>Claims define the data that will be included in the credential. This section covers how to configure claims at the credential configuration level.</p> <p>Claims Priority System</p> <p>EUDIPLO supports multiple ways to provide claims (configuration-level and offer-level), with a priority system that determines which claims are used. For a complete explanation of the claims priority order and when to use each method, see Passing Claims in the Issuance Overview.</p>"},{"location":"getting-started/issuance/credential-configuration/#static-claims","title":"Static Claims","text":"<p>You can specify static claims directly in the credential configuration. These claims will be used as defaults for every credential issued using this configuration:</p> <pre><code>{\n    \"claims\": {\n        \"issuing_country\": \"DE\",\n        \"issuing_authority\": \"DE\",\n        \"given_name\": \"ERIKA\",\n        \"family_name\": \"MUSTERMANN\",\n        \"birth_family_name\": \"GABLER\",\n        \"birthdate\": \"1964-08-12\",\n        \"age_birth_year\": 1964,\n        \"age_in_years\": 59,\n        \"age_equal_or_over\": {\n            \"12\": true,\n            \"14\": true,\n            \"16\": true,\n            \"18\": true,\n            \"21\": true,\n            \"65\": false\n        },\n        \"place_of_birth\": {\n            \"locality\": \"BERLIN\"\n        },\n        \"address\": {\n            \"locality\": \"K\u00d6LN\",\n            \"postal_code\": \"51147\",\n            \"street_address\": \"HEIDESTRA\u1e9eE 17\"\n        },\n        \"nationalities\": [\"DE\"]\n    }\n}\n</code></pre> <p>Static claims are useful for:</p> <ul> <li>Default values for all credentials of this type</li> <li>Fixed metadata (e.g., issuing country, issuing authority)</li> <li>Development and testing scenarios</li> </ul>"},{"location":"getting-started/issuance/credential-configuration/#claims-webhook","title":"Claims Webhook","text":"<p>For dynamic claim retrieval, you can configure a webhook that will be called during the issuance process to fetch claims:</p> <pre><code>{\n    \"claimsWebhook\": {\n        \"url\": \"https://your-backend.com/api/claims\",\n        \"headers\": {\n            \"Authorization\": \"Bearer your-token\"\n        }\n    }\n}\n</code></pre> <p>The webhook will receive information about the issuance session and must return the claims to be included in the credential.</p> <p>Claims webhooks are useful when:</p> <ul> <li>Claims need to be fetched from an external system or database</li> <li>Claims should be personalized based on the authentication context</li> <li>Claims depend on real-time data</li> </ul> <p>For detailed information about webhook implementation, payload structure, and examples, see Claims Webhook.</p>"},{"location":"getting-started/issuance/credential-configuration/#notification-webhook","title":"Notification Webhook","text":"<p>You can configure a webhook to receive notifications about the issuance process. This allows you to track the status of credential issuance and take appropriate actions:</p> <pre><code>{\n    \"notificationWebhook\": {\n        \"url\": \"https://your-backend.com/api/notifications\",\n        \"headers\": {\n            \"Authorization\": \"Bearer your-token\"\n        }\n    }\n}\n</code></pre> <p>The notification webhook will be called at various stages of the issuance process, such as:</p> <ul> <li>When a credential is successfully issued</li> <li>When an issuance request fails</li> <li>When a credential is accepted by the holder</li> </ul> <p>For more details about the webhook implementation and payload structure, see Notification Webhook.</p> <p>Info</p> <p>When a webhook is configured on credential config level, it will will sent the notification to this endpoint and not also to the one provided in the issuance config. It can also be overwritten via the credential offer.</p>"},{"location":"getting-started/issuance/credential-configuration/#selective-disclosure","title":"Selective Disclosure","text":"<p>Use the <code>disclosureFrame</code> to make specific claims selectively disclosable in SD-JWT format:</p> <pre><code>{\n    \"disclosureFrame\": {\n        \"_sd\": [\n            \"issuing_country\",\n            \"issuing_authority\",\n            \"given_name\",\n            \"family_name\",\n            \"birth_family_name\",\n            \"birthdate\",\n            \"age_birth_year\",\n            \"age_in_years\",\n            \"age_equal_or_over\",\n            \"place_of_birth\",\n            \"address\",\n            \"nationalities\"\n        ],\n        \"address\": {\n            \"_sd\": [\"locality\", \"postal_code\", \"street_address\"]\n        }\n    }\n}\n</code></pre> <p>This configuration allows:</p> <ul> <li>Individual disclosure of personal information fields</li> <li>Selective disclosure of address components</li> <li>Holders can choose which claims to reveal during presentation</li> </ul>"},{"location":"getting-started/issuance/credential-configuration/#display-configuration","title":"Display Configuration","text":"<p>The display configuration defines how the credential appears in wallets as defined in the OID4VCI spec for the credential metadata:</p> <pre><code>{\n    \"display\": [\n        {\n            \"name\": \"Personal Identity Document\",\n            \"description\": \"Official identity credential\",\n            \"locale\": \"en-US\",\n            \"background_color\": \"#FFFFFF\",\n            \"text_color\": \"#000000\",\n            \"logo\": {\n                \"uri\": \"issuer.png\"\n            },\n            \"background_image\": {\n                \"uri\": \"credential-bg.png\"\n            }\n        }\n    ]\n}\n</code></pre>"},{"location":"getting-started/issuance/credential-configuration/#display-fields","title":"Display Fields","text":"<ul> <li><code>name</code>: Display name for the credential</li> <li><code>description</code>: Brief description of the credential</li> <li><code>locale</code>: Language/locale (e.g., \"en-US\", \"de-DE\")</li> <li><code>background_color</code>: Background color (hex format)</li> <li><code>text_color</code>: Text color (hex format)</li> <li><code>logo</code>: Issuer logo configuration</li> <li><code>background_image</code>: Background image for the credential</li> </ul> <p>Info</p> <p>When no uri is passed, EUDIPLO will resolve the image based the storage system, see the image configuration. If the image cannot be found, the URI will be ignored.</p>"},{"location":"getting-started/issuance/credential-configuration/#signing-key","title":"Signing Key","text":"<p>The signing key is used to create the digital signature for the credential. It is essential for ensuring the integrity and authenticity of the credential. If none is provided, the first key in the key set will be used. The matching certificate will be included in the <code>x5c</code> field of the issued credential.</p>"},{"location":"getting-started/issuance/credential-configuration/#configuration","title":"Configuration","text":"<pre><code>{\n    \"keyId\": \"signing-key-1\"\n}\n</code></pre> <p>Note</p> <p>Keys can be managed through the <code>/keys</code> API endpoint.</p>"},{"location":"getting-started/issuance/credential-configuration/#cryptographic-key-binding","title":"Cryptographic Key Binding","text":"<p>Cryptographic key binding ensures that a credential can only be used by the holder who possesses the corresponding private key. This is enabled through the <code>keyBinding</code> configuration option.</p>"},{"location":"getting-started/issuance/credential-configuration/#configuration_1","title":"Configuration","text":"<pre><code>{\n    \"keyBinding\": true\n}\n</code></pre>"},{"location":"getting-started/issuance/credential-configuration/#how-it-works","title":"How It Works","text":"<p>When <code>keyBinding</code> is enabled:</p> <ul> <li>The credential includes a <code>cnf</code> (confirmation claim) containing the holder's   public key</li> <li>During credential request, the holder must provide a proof of possession of   their private key</li> <li>The resulting credential can only be presented by the holder who has the   private key</li> </ul>"},{"location":"getting-started/issuance/credential-configuration/#use-cases","title":"Use Cases","text":"<ul> <li>High-value credentials (identity documents, diplomas, licenses)</li> <li>Credentials requiring strong authentication</li> <li>Preventing credential theft or unauthorized use</li> </ul>"},{"location":"getting-started/issuance/credential-configuration/#status-management-and-revocation","title":"Status Management and Revocation","text":"<p>Status management allows credentials to be revoked or suspended using OAuth Token Status List. This is controlled by the <code>statusManagement</code> configuration option.</p>"},{"location":"getting-started/issuance/credential-configuration/#configuration_2","title":"Configuration","text":"<pre><code>{\n    \"statusManagement\": true\n}\n</code></pre>"},{"location":"getting-started/issuance/credential-configuration/#how-it-works_1","title":"How It Works","text":"<p>When <code>statusManagement</code> is enabled:</p> <ul> <li>Each issued credential includes a <code>status</code> claim with a reference to a status   list</li> <li>The status list tracks the revocation state of individual credentials</li> <li>The status list is provided by the service and can be fetched by verifiers</li> <li>Credentials can be revoked using the <code>/session/revoke</code> endpoint</li> <li>The status list is updated immediately upon revocation</li> </ul> <p>Info</p> <p>When a session is deleted, the relationship between the sessionId and the issued credentials is still stored to be able to revoke the credentials. Only the sessionId and the index is stored, no other personal data.</p>"},{"location":"getting-started/issuance/credential-configuration/#benefits","title":"Benefits","text":"<ul> <li>Real-time revocation capability</li> <li>Standards-compliant status tracking</li> <li>Verifiers can check credential validity</li> <li>Granular control over credential lifecycle</li> </ul>"},{"location":"getting-started/issuance/credential-configuration/#status-configuration","title":"Status Configuration","text":"<p>By default EUDIPLO will create a status list where each credential is managed with one bit. This means only Valid and Revoked status is possible. To support suspension or other states like defined specification, you need to update the configuration options by setting the <code>STATUS_BITS</code> options at least to <code>2</code>.</p> <p>TODO</p> <p>Move status configuration to the issuance config: https://github.com/openwallet-foundation-labs/eudiplo/issues/276</p> Key Type Notes <code>STATUS_LENGTH</code> <code>number</code> The length of the status list  (default: <code>10000</code>) <code>STATUS_BITS</code> <code>number</code> The number of bits used per status entry  (default: <code>1</code>) <p>Info</p> <p>More granular configuration is planned for the future. When a tenant is created, it will use the same status list for all credentials. Automatic creation of new lists or dedicated lists per credential configuration is planned for the future.</p>"},{"location":"getting-started/issuance/credential-configuration/#credential-expiration","title":"Credential Expiration","text":"<p>Credential expiration allows setting a specific lifetime for credentials using the <code>lifeTime</code> configuration option (specified in seconds).</p>"},{"location":"getting-started/issuance/credential-configuration/#configuration_3","title":"Configuration","text":"<pre><code>{\n    \"config\": {\n        \"format\": \"dc+sd-jwt\",\n        \"display\": [\n            {\n                \"name\": \"Temporary Credential\",\n                \"description\": \"Time-limited credential\"\n            }\n        ]\n    },\n    \"lifeTime\": 3600,\n    \"claims\": {\n        \"given_name\": \"ERIKA\",\n        \"family_name\": \"MUSTERMANN\"\n    }\n}\n</code></pre>"},{"location":"getting-started/issuance/credential-configuration/#how-it-works_2","title":"How It Works","text":"<p>When <code>lifeTime</code> is specified:</p> <ul> <li>The credential includes an <code>exp</code> (expiration) claim</li> <li>The expiration time is calculated as: <code>iat</code> (issued at) + <code>lifeTime</code></li> <li>Example: <code>\"lifeTime\": 3600</code> creates credentials valid for 1 hour</li> <li>Example: <code>\"lifeTime\": 86400</code> creates credentials valid for 24 hours</li> </ul>"},{"location":"getting-started/issuance/credential-configuration/#common-lifetime-values","title":"Common Lifetime Values","text":"Duration Seconds Use Case 1 hour 3600 Short-term access tokens 1 day 86400 Daily passes, temporary IDs 1 week 604800 Weekly permits 1 month 2592000 Monthly subscriptions 1 year 31536000 Annual licenses"},{"location":"getting-started/issuance/credential-configuration/#embedded-disclosure-policy","title":"Embedded Disclosure Policy","text":"<p>The embedded disclosure policy defines rule to which the credential can be disclosed.</p> <p>There are four supported policy mechanisms:</p>"},{"location":"getting-started/issuance/credential-configuration/#none","title":"None","text":"<p>when policy is set to <code>none</code>, then there is no restriction on disclosure and claims can be revealed without any constraints.</p> <pre><code>{\n    \"policy\": \"none\"\n}\n</code></pre>"},{"location":"getting-started/issuance/credential-configuration/#allow-list","title":"Allow List","text":"<p>When policy is set to <code>allow</code>, only relying parties explicitly listed in the credential can access the claims.</p> <pre><code>{\n    \"policy\": \"allowList\",\n    \"values\": [\"https://relying-party-1.com\", \"https://relying-party-2.com\"]\n}\n</code></pre>"},{"location":"getting-started/issuance/credential-configuration/#root-of-trust","title":"Root of Trust","text":"<p>When policy is set to <code>rootOfTrust</code>, only relying parties that have a valid trustchain to the explicitly listed root of trust can access the claims.</p> <pre><code>{\n    \"policy\": \"rootOfTrust\",\n    \"values\": [\"https://root-of-trust.com\"]\n}\n</code></pre>"},{"location":"getting-started/issuance/credential-configuration/#attestation-based","title":"Attestation Based","text":"<p>When policy is set to <code>attestationBased</code>, only relying parties that can present a valid attestation can access the claims.</p> <pre><code>{\n    \"policy\": \"attestationBased\",\n    \"values\": [\n        {\n            \"claims\": [\n                {\n                    \"id\": \"card\",\n                    \"path\": [\"given_name\"]\n                }\n            ],\n            \"credentials\": [\n                {\n                    \"id\": \"card\",\n                    \"format\": \"sd-jwt-dc\",\n                    \"meta\": {\n                        \"vct_values\": \"https://example.com/member-card\"\n                    },\n                    \"trusted_authorities\": [\n                        {\n                            \"type\": \"aki\",\n                            \"values\": [\"s9tIpPmhxdiuNkHMEWNpYim8S8Y\"]\n                        }\n                    ]\n                }\n            ],\n            \"credential_sets\": [\n                {\n                    \"options\": [[\"card\"]]\n                }\n            ]\n        }\n    ]\n}\n</code></pre>"},{"location":"getting-started/issuance/credential-configuration/#complete-configuration-example","title":"Complete Configuration Example","text":"<p>Here's a complete example of a credential configuration (PID - Personal Identity Document) that demonstrates many of the available features:</p> <pre><code>{\n    \"id\": \"pid\",\n    \"description\": \"Personal ID\",\n    \"config\": {\n        \"format\": \"dc+sd-jwt\",\n        \"scope\": \"pid\",\n        \"display\": [\n            {\n                \"name\": \"PID\",\n                \"description\": \"PID Credential\",\n                \"locale\": \"en-US\",\n                \"background_color\": \"#FFFFFF\",\n                \"text_color\": \"#000000\",\n                \"background_image\": {\n                    \"uri\": \"identity-card.jpg\"\n                },\n                \"logo\": {\n                    \"uri\": \"logo.jpg\"\n                }\n            }\n        ]\n    },\n    \"claims\": {\n        \"issuing_country\": \"DE\",\n        \"issuing_authority\": \"DE\",\n        \"given_name\": \"ERIKA\",\n        \"family_name\": \"MUSTERMANN\",\n        \"birth_family_name\": \"GABLER\",\n        \"birthdate\": \"1964-08-12\",\n        \"age_birth_year\": 1964,\n        \"age_in_years\": 59,\n        \"age_equal_or_over\": {\n            \"12\": true,\n            \"14\": true,\n            \"16\": true,\n            \"18\": true,\n            \"21\": true,\n            \"65\": false\n        },\n        \"place_of_birth\": {\n            \"locality\": \"BERLIN\"\n        },\n        \"address\": {\n            \"locality\": \"K\u00d6LN\",\n            \"postal_code\": \"51147\",\n            \"street_address\": \"HEIDESTRA\u1e9eE 17\"\n        },\n        \"nationalities\": [\n            \"DE\"\n        ]\n    },\n    \"disclosureFrame\": {\n        \"_sd\": [\n            \"issuing_country\",\n            \"issuing_authority\",\n            \"given_name\",\n            \"family_name\",\n            \"birth_family_name\",\n            \"birthdate\",\n            \"age_birth_year\",\n            \"age_in_years\",\n            \"age_equal_or_over\",\n            \"place_of_birth\",\n            \"address\",\n            \"nationalities\"\n        ],\n        \"address\": {\n            \"_sd\": [\n                \"locality\",\n                \"postal_code\",\n                \"street_address\"\n            ]\n        }\n    },\n    \"vct\": {\n        \"name\": \"PID\",\n        \"description\": \"PID credential\"\n    },\n    \"keyBinding\": true,\n    \"keyId\": \"039af178-3ca0-48f4-a2e4-7b1209f30376\",\n    \"statusManagement\": true,\n    \"lifeTime\": 604800,\n    \"schema\": {\n        \"$schema\": \"https://json-schema.org/draft/2020-12/schema\",\n        \"type\": \"object\",\n        \"properties\": {\n            \"issuing_country\": {\n                \"type\": \"string\",\n                \"title\": \"Issuing Country\"\n            },\n            \"issuing_authority\": {\n                \"type\": \"string\",\n                \"title\": \"Issuing Authority\"\n            },\n            \"given_name\": {\n                \"type\": \"string\",\n                \"title\": \"Given Name\"\n            },\n            \"family_name\": {\n                \"type\": \"string\",\n                \"title\": \"Family Name\"\n            },\n            \"birth_family_name\": {\n                \"type\": \"string\",\n                \"title\": \"Birth Family Name\"\n            },\n            \"birthdate\": {\n                \"type\": \"string\",\n                \"pattern\": \"^\\\\d{4}-\\\\d{2}-\\\\d{2}$\",\n                \"title\": \"Birthdate\"\n            },\n            \"age_birth_year\": {\n                \"type\": \"integer\",\n                \"title\": \"Birth Year\"\n            },\n            \"age_in_years\": {\n                \"type\": \"integer\",\n                \"title\": \"Age in Years\"\n            },\n            \"age_equal_or_over\": {\n                \"type\": \"object\",\n                \"title\": \"Age Equal or Over\",\n                \"properties\": {\n                    \"12\": {\n                        \"type\": \"boolean\",\n                        \"title\": \"12 or Over\"\n                    },\n                    \"14\": {\n                        \"type\": \"boolean\",\n                        \"title\": \"14 or Over\"\n                    },\n                    \"16\": {\n                        \"type\": \"boolean\",\n                        \"title\": \"16 or Over\"\n                    },\n                    \"18\": {\n                        \"type\": \"boolean\",\n                        \"title\": \"18 or Over\"\n                    },\n                    \"21\": {\n                        \"type\": \"boolean\",\n                        \"title\": \"21 or Over\"\n                    },\n                    \"65\": {\n                        \"type\": \"boolean\",\n                        \"title\": \"65 or Over\"\n                    }\n                },\n                \"required\": [\n                    \"12\",\n                    \"14\",\n                    \"16\",\n                    \"18\",\n                    \"21\",\n                    \"65\"\n                ]\n            },\n            \"place_of_birth\": {\n                \"type\": \"object\",\n                \"title\": \"Place of Birth\",\n                \"properties\": {\n                    \"locality\": {\n                        \"type\": \"string\",\n                        \"title\": \"Locality\"\n                    }\n                },\n                \"required\": [\n                    \"locality\"\n                ]\n            },\n            \"address\": {\n                \"type\": \"object\",\n                \"title\": \"Address\",\n                \"properties\": {\n                    \"locality\": {\n                        \"type\": \"string\",\n                        \"title\": \"Locality\"\n                    },\n                    \"postal_code\": {\n                        \"type\": \"string\",\n                        \"title\": \"Postal Code\"\n                    },\n                    \"street_address\": {\n                        \"type\": \"string\",\n                        \"title\": \"Street Address\"\n                    }\n                },\n                \"required\": [\n                    \"locality\",\n                    \"postal_code\",\n                    \"street_address\"\n                ]\n            },\n            \"nationalities\": {\n                \"type\": \"array\",\n                \"title\": \"Nationalities\",\n                \"items\": {\n                    \"type\": \"string\",\n                    \"title\": \"Nationality\"\n                }\n            }\n        },\n        \"required\": [\n            \"issuing_country\",\n            \"issuing_authority\",\n            \"given_name\",\n            \"family_name\",\n            \"birth_family_name\",\n            \"birthdate\",\n            \"age_birth_year\",\n            \"age_in_years\",\n            \"age_equal_or_over\",\n            \"place_of_birth\",\n            \"address\",\n            \"nationalities\"\n        ],\n        \"title\": \"PID Claims\",\n        \"description\": \"Schema for PID credential claims, describing personal and identity information fields.\"\n    },\n    \"embeddedDisclosurePolicy\": {\n        \"policy\": \"attestationBased\",\n        \"values\": [\n            {\n                \"claims\": [\n                    {\n                        \"id\": \"card\",\n                        \"path\": [\n                            \"given_name\"\n                        ]\n                    }\n                ],\n                \"credentials\": [\n                    {\n                        \"id\": \"card\",\n                        \"format\": \"sd-jwt-dc\",\n                        \"meta\": {\n                            \"vct_values\": \"https://example.com/member-card\"\n                        },\n                        \"trusted_authorities\": [\n                            {\n                                \"type\": \"aki\",\n                                \"values\": [\n                                    \"s9tIpPmhxdiuNkHMEWNpYim8S8Y\"\n                                ]\n                            }\n                        ]\n                    }\n                ],\n                \"credential_sets\": [\n                    {\n                        \"options\": [\n                            [\n                                \"card\"\n                            ]\n                        ]\n                    }\n                ]\n            }\n        ]\n    }\n}\n</code></pre> <p>This example includes:</p> <ul> <li>Required fields: <code>id</code>, <code>config</code> with format and display information</li> <li>Optional fields: <code>description</code>, <code>vct</code>, <code>keyId</code>, <code>lifeTime</code>, <code>statusManagement</code>, <code>keyBinding</code></li> <li>Claims: Static claims that will be included in every issued credential</li> <li>Selective disclosure: <code>disclosureFrame</code> defining which claims can be selectively disclosed</li> <li>Display configuration: How the credential appears in wallets, including colors, logos, and images</li> </ul> <p>You can use it as a template or use the generated JSON Schema to create your own credential configurations by modifying the fields according to your requirements.</p>"},{"location":"getting-started/issuance/issuance-configuration/","title":"Issuance Configuration","text":""},{"location":"getting-started/issuance/issuance-configuration/#issuance-configuration","title":"Issuance Configuration","text":"<p>Issuance configurations define the parameters and settings for the issuance of credentials. This includes details such as the supported credential types, issuance policies, and any specific requirements for the issuance process.</p>"},{"location":"getting-started/issuance/issuance-configuration/#basic-structure","title":"Basic Structure","text":"<p>Example Issuance Configuration:</p> <pre><code>{\n    \"authServers\": [],\n    \"batchSize\": 10,\n    \"dPopRequired\": false,\n    \"display\": [\n        {\n            \"locale\": \"en-US\",\n            \"name\": \"EUDI Wallet dev\",\n            \"logo\": {\n                \"uri\": \"company.png\"\n            }\n        }\n    ]\n}\n</code></pre> <p>Info</p> <p>The auto generated schema reference can be found in the API Documentation</p>"},{"location":"getting-started/issuance/issuance-configuration/#configuration-fields","title":"Configuration Fields","text":"<ul> <li><code>authServers</code> (array of strings, optional): Authentication server URL for the issuance process.</li> <li><code>notifyWebhook</code> (object, optional): Webhook to send the result of the notification response. See Webhooks.</li> <li><code>batchSize</code> (number, optional): Value to determine the amount of credentials that are issued in a batch. Default is 1.</li> <li><code>dPopRequired</code> (boolean, optional): Indicates whether DPoP is required for the issuance process. Default value is true.</li> <li><code>display</code> (array of objects, required): The display information from the OID4VCI spec. To host images or logos, you can use the storage system provided by EUDIPLO.</li> </ul>"},{"location":"getting-started/presentation/","title":"Overview","text":""},{"location":"getting-started/presentation/#credential-presentation","title":"Credential Presentation","text":"<p>EUDIPLO provides comprehensive credential presentation capabilities using OpenID4VP (OpenID for Verifiable Presentations). This system allows verifiers to request specific credentials and claims from users, enabling secure identity verification and attribute validation.</p>"},{"location":"getting-started/presentation/#overview","title":"Overview","text":"<p>Credential presentation enables verifiers to:</p> <ul> <li>Request specific credentials from users' wallets</li> <li>Verify authenticity of presented credentials</li> <li>Extract required claims for authorization or validation</li> <li>Maintain privacy by requesting only necessary information</li> <li>Support multiple presentation flows for different use cases</li> </ul> <p>EUDIPLO supports both standalone presentation flows and presentation-during-issuance scenarios, providing flexibility for various business requirements.</p>"},{"location":"getting-started/presentation/#key-concepts","title":"Key Concepts","text":""},{"location":"getting-started/presentation/#presentation-flows","title":"Presentation Flows","text":"<p>EUDIPLO supports multiple presentation scenarios:</p> <ul> <li> <p>Standard Presentation Flow</p> <ul> <li>Direct credential verification requests</li> <li>Used for access control and identity verification</li> <li>Returns verified claims to the requesting service</li> </ul> </li> <li> <p>Presentation During Issuance</p> <ul> <li>Credentials presented as prerequisites for new credential issuance</li> <li>Enables qualification-based credential issuance</li> <li>Supports complex identity verification workflows</li> </ul> </li> </ul>"},{"location":"getting-started/presentation/#dcql-digital-credentials-query-language","title":"DCQL (Digital Credentials Query Language)","text":"<p>EUDIPLO uses DCQL to define presentation requests:</p> <ul> <li>Structured queries for specific credentials and claims</li> <li>Format specification (e.g., <code>dc+sd-jwt</code>)</li> <li>Selective disclosure of only required attributes</li> <li>VCT (Verifiable Credential Type) targeting for precise credential matching</li> </ul>"},{"location":"getting-started/presentation/#registration-certificates","title":"Registration Certificates","text":"<p>All presentation requests include registration certificates that provide:</p> <ul> <li>Legal basis for data processing</li> <li>Privacy policy information</li> <li>Contact details for data protection inquiries</li> <li>Purpose statements explaining why data is requested</li> </ul>"},{"location":"getting-started/presentation/#architecture","title":"Architecture","text":""},{"location":"getting-started/presentation/#tenant-based-configuration","title":"Tenant-Based Configuration","text":"<p>EUDIPLO uses a tenant-based architecture where:</p> <ul> <li>Each tenant has isolated presentation configurations</li> <li>Configurations are stored securely in the database</li> <li>API access is scoped to the authenticated tenant</li> <li>Multi-tenant deployments maintain strict data isolation</li> </ul>"},{"location":"getting-started/presentation/#session-management","title":"Session Management","text":"<p>Presentation flows create sessions that:</p> <ul> <li>Track the presentation request lifecycle</li> <li>Store temporary data during the exchange</li> <li>Enable asynchronous processing via webhooks</li> <li>Maintain audit trails for compliance</li> </ul>"},{"location":"getting-started/presentation/#quick-start","title":"Quick Start","text":"<p>For a quick start, follow these steps:</p> <ol> <li>Create a presentation configuration - Define the presentation requirements using DCQL.</li> <li>Presentation request - Initiate a presentation request using the created configuration.</li> </ol>"},{"location":"getting-started/presentation/#1-create-a-presentation-configuration","title":"1. Create a Presentation Configuration","text":"<pre><code>{\n    \"id\": \"identity-verification\",\n    \"dcql_query\": {\n        \"credentials\": [\n            {\n                \"id\": \"pid\",\n                \"format\": \"dc+sd-jwt\",\n                \"meta\": {\n                    \"vct_values\": [\"https://your-domain.com/credentials/vct/pid\"]\n                },\n                \"claims\": [\n                    {\n                        \"path\": [\"given_name\"]\n                    },\n                    {\n                        \"path\": [\"family_name\"]\n                    }\n                ]\n            }\n        ]\n    },\n    \"registrationCert\": {\n        \"body\": {\n            \"privacy_policy\": \"https://your-domain.com/privacy-policy\",\n            \"purpose\": [\n                {\n                    \"locale\": \"en-US\",\n                    \"name\": \"Identity verification for service access\"\n                }\n            ],\n            \"contact\": {\n                \"website\": \"https://your-domain.com/contact\",\n                \"email\": \"privacy@your-domain.com\",\n                \"phone\": \"+1234567890\"\n            }\n        }\n    },\n    \"webhook\": {\n        \"url\": \"https://your-backend.com/presentation-webhook\"\n    }\n}\n</code></pre>"},{"location":"getting-started/presentation/#2-store-the-configuration","title":"2. Store the Configuration","text":"<pre><code>curl -X 'POST' \\\n  'http://localhost:3000/presentation-management' \\\n  -H 'Authorization: Bearer eyJhb...npoNk' \\\n  -H 'Content-Type: application/json' \\\n  -d '@presentation-config.json'\n</code></pre>"},{"location":"getting-started/presentation/#3-request-a-presentation","title":"3. Request a Presentation","text":"<pre><code>curl -X 'POST' \\\n  'http://localhost:3000/presentation-management/request' \\\n  -H 'Authorization: Bearer eyJhb...npoNk' \\\n  -H 'Content-Type: application/json' \\\n  -d '{\n    \"response_type\": \"uri\",\n    \"requestId\": \"identity-verification\"\n  }'\n</code></pre>"},{"location":"getting-started/presentation/#4-present-to-user","title":"4. Present to User","text":"<p>The response includes a URI that can be presented to the user:</p> <pre><code>{\n    \"uri\": \"openid4vp://?request_uri=https://your-domain.com/oid4vp/request/abc123&amp;session_id=session-456\",\n    \"session_id\": \"session-456\"\n}\n</code></pre>"},{"location":"getting-started/presentation/#flow-diagrams","title":"Flow Diagrams","text":""},{"location":"getting-started/presentation/#standard-presentation-flow","title":"Standard Presentation Flow","text":"<pre><code>sequenceDiagram\n    actor User\n    participant Wallet\n    participant Verifier\n    participant EUDIPLO\n\n    Verifier-&gt;&gt;EUDIPLO: Create presentation request\n    EUDIPLO--&gt;&gt;Verifier: Return presentation URI\n    Verifier-&gt;&gt;User: Display QR code or link\n    User-&gt;&gt;Wallet: Scan QR or click link\n    Wallet-&gt;&gt;EUDIPLO: Initiate OID4VP flow\n    EUDIPLO-&gt;&gt;Wallet: Send presentation request\n    Wallet-&gt;&gt;User: Request consent for data sharing\n    User-&gt;&gt;Wallet: Approve presentation\n    Wallet-&gt;&gt;EUDIPLO: Submit verifiable presentation\n    EUDIPLO-&gt;&gt;Verifier: Send verified claims (webhook)</code></pre>"},{"location":"getting-started/presentation/#presentation-during-issuance","title":"Presentation During Issuance","text":"<p>Info</p> <p>Presentation during issuance is temporarily removed to be aligned with the latest OID4VCI spec. It will be reintroduced in a future release.</p> <pre><code>sequenceDiagram\n    actor User\n    participant Wallet\n    participant Issuer\n    participant EUDIPLO\n\n    Issuer-&gt;&gt;EUDIPLO: Request credential issuance\n    EUDIPLO--&gt;&gt;Issuer: Return offer URI\n    Issuer-&gt;&gt;User: Present offer\n    User-&gt;&gt;Wallet: Accept offer\n    Wallet-&gt;&gt;EUDIPLO: Start issuance flow\n    EUDIPLO-&gt;&gt;Wallet: Request presentation first\n    Wallet-&gt;&gt;User: Request presentation consent\n    User-&gt;&gt;Wallet: Approve presentation\n    Wallet-&gt;&gt;EUDIPLO: Submit required credentials\n    EUDIPLO-&gt;&gt;Issuer: Send verified claims\n    Issuer-&gt;&gt;EUDIPLO: Provide issuance data\n    EUDIPLO-&gt;&gt;Wallet: Issue new credential</code></pre>"},{"location":"getting-started/presentation/#security-considerations","title":"Security Considerations","text":""},{"location":"getting-started/presentation/#data-minimization","title":"Data Minimization","text":"<ul> <li>Request only necessary claims to protect user privacy</li> <li>Use selective disclosure to limit exposed information</li> <li>Implement purpose limitation through clear registration certificates</li> </ul>"},{"location":"getting-started/presentation/#authentication","title":"Authentication","text":"<ul> <li>OAuth 2.0 bearer tokens for API authentication</li> <li>Tenant isolation prevents cross-tenant data access</li> <li>Session-based security with automatic cleanup</li> </ul>"},{"location":"getting-started/presentation/#verification","title":"Verification","text":"<ul> <li>Cryptographic validation of presented credentials</li> <li>Issuer verification against trusted registries</li> <li>Revocation status checking for active credentials</li> </ul>"},{"location":"getting-started/presentation/presentation-configuration/","title":"Presentation Configuration","text":""},{"location":"getting-started/presentation/presentation-configuration/#presentation-configuration","title":"Presentation Configuration","text":"<p>This guide covers how to create, manage, and configure presentation requests in EUDIPLO. Presentation configurations define what credentials and claims should be requested from users.</p>"},{"location":"getting-started/presentation/presentation-configuration/#configuration-structure","title":"Configuration Structure","text":"<p>Example Presentation Configuration (PID):</p> <pre><code>{\n  \"id\": \"pid\",\n  \"description\": \"Presentation ID\",\n  \"dcql_query\": {\n    \"credentials\": [\n      {\n        \"id\": \"pid\",\n        \"format\": \"dc+sd-jwt\",\n        \"meta\": {\n          \"vct_values\": [\n            \"&lt;PUBLIC_URL&gt;/credentials-metadata/vct/pid\"\n          ]\n        },\n        \"claims\": [\n          {\n            \"path\": [\n              \"address\",\n              \"locality\"\n            ]\n          }\n        ]\n      }\n    ]\n  },\n  \"registrationCert\": {\n    \"body\": {\n      \"privacy_policy\": \"https://example.com/privacy-policy\",\n      \"purpose\": [\n        {\n          \"locale\": \"en-US\",\n          \"name\": \"To register a new user\"\n        }\n      ],\n      \"contact\": {\n        \"website\": \"https://example.com/contact\",\n        \"e-mail\": \"privacy@example.com\",\n        \"phone\": \"+1234567890\"\n      },\n      \"credentials\": [\n        {\n          \"format\": \"dc+sd-jwt\",\n          \"meta\": {\n            \"vct_values\": [\n              \"&lt;PUBLIC_URL&gt;/credentials-metadata/vct/pid\"\n            ]\n          },\n          \"claims\": [\n            {\n              \"path\": [\n                \"address\",\n                \"locality\"\n              ]\n            }\n          ]\n        }\n      ]\n    }\n  },\n  \"webhook\": {\n    \"url\": \"http://localhost:8787/consume\",\n    \"auth\": {\n      \"type\": \"apiKey\",\n      \"config\": {\n        \"headerName\": \"x-api-key\",\n        \"value\": \"foo-bar\"\n      }\n    }\n  }\n}\n</code></pre>"},{"location":"getting-started/presentation/presentation-configuration/#configuration-fields","title":"Configuration Fields","text":"<ul> <li><code>id</code>: REQUIRED - Unique identifier for the presentation configuration.</li> <li><code>description</code>: REQUIRED - Human-readable description of the presentation. Will not be displayed to the end user.</li> <li><code>dcql_query</code>: REQUIRED - DCQL query defining the requested credentials and claims following the DCQL specification</li> <li><code>registrationCert</code>: OPTIONAL - Registration certificate containing legal and privacy information about the verifier. See Registration Certificate for details.</li> <li><code>webhook</code>: OPTIONAL - Webhook configuration for receiving verified presentations asynchronously. See Webhook Integration for details.</li> <li><code>redirectUri</code>: OPTIONAL - URI to redirect the user to after completing the presentation. This is useful for web applications that need to return the user to a specific page after verification.</li> </ul> <p>Info</p> <p>If no webhook is configured, the presentation result can be fetched by querying the <code>/session</code> endpoint with the <code>sessionId</code>.</p>"}]}